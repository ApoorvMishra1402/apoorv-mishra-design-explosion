var WN=n=>{throw TypeError(n)};var YS=(n,e,t)=>e.has(n)||WN("Cannot "+t);var Se=(n,e,t)=>(YS(n,e,"read from private field"),t?t.call(n):e.get(n)),Mn=(n,e,t)=>e.has(n)?WN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Qt=(n,e,t,r)=>(YS(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),ki=(n,e,t)=>(YS(n,e,"access private method"),t);var q_=(n,e,t,r)=>({set _(i){Qt(n,e,i,t)},get _(){return Se(n,e,r)}});function JG(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function od(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var BU={exports:{}},P1={},HU={exports:{}},fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy=Symbol.for("react.element"),eW=Symbol.for("react.portal"),tW=Symbol.for("react.fragment"),nW=Symbol.for("react.strict_mode"),rW=Symbol.for("react.profiler"),iW=Symbol.for("react.provider"),sW=Symbol.for("react.context"),oW=Symbol.for("react.forward_ref"),aW=Symbol.for("react.suspense"),lW=Symbol.for("react.memo"),cW=Symbol.for("react.lazy"),$N=Symbol.iterator;function uW(n){return n===null||typeof n!="object"?null:(n=$N&&n[$N]||n["@@iterator"],typeof n=="function"?n:null)}var jU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GU=Object.assign,WU={};function qp(n,e,t){this.props=n,this.context=e,this.refs=WU,this.updater=t||jU}qp.prototype.isReactComponent={};qp.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};qp.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function $U(){}$U.prototype=qp.prototype;function cR(n,e,t){this.props=n,this.context=e,this.refs=WU,this.updater=t||jU}var uR=cR.prototype=new $U;uR.constructor=cR;GU(uR,qp.prototype);uR.isPureReactComponent=!0;var qN=Array.isArray,qU=Object.prototype.hasOwnProperty,hR={current:null},XU={key:!0,ref:!0,__self:!0,__source:!0};function YU(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)qU.call(e,r)&&!XU.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Sy,type:n,key:s,ref:o,props:i,_owner:hR.current}}function hW(n,e){return{$$typeof:Sy,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function dR(n){return typeof n=="object"&&n!==null&&n.$$typeof===Sy}function dW(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var XN=/\/+/g;function KS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?dW(""+n.key):e.toString(36)}function bx(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Sy:case eW:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+KS(o,0):r,qN(i)?(t="",n!=null&&(t=n.replace(XN,"$&/")+"/"),bx(i,e,t,"",function(c){return c})):i!=null&&(dR(i)&&(i=hW(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(XN,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",qN(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+KS(s,a);o+=bx(s,e,t,l,i)}else if(l=uW(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+KS(s,a++),o+=bx(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function X_(n,e,t){if(n==null)return n;var r=[],i=0;return bx(n,r,"","",function(s){return e.call(t,s,i++)}),r}function fW(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var fs={current:null},Ax={transition:null},pW={ReactCurrentDispatcher:fs,ReactCurrentBatchConfig:Ax,ReactCurrentOwner:hR};function KU(){throw Error("act(...) is not supported in production builds of React.")}fn.Children={map:X_,forEach:function(n,e,t){X_(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return X_(n,function(){e++}),e},toArray:function(n){return X_(n,function(e){return e})||[]},only:function(n){if(!dR(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};fn.Component=qp;fn.Fragment=tW;fn.Profiler=rW;fn.PureComponent=cR;fn.StrictMode=nW;fn.Suspense=aW;fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pW;fn.act=KU;fn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=GU({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hR.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)qU.call(e,l)&&!XU.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Sy,type:n.type,key:i,ref:s,props:r,_owner:o}};fn.createContext=function(n){return n={$$typeof:sW,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:iW,_context:n},n.Consumer=n};fn.createElement=YU;fn.createFactory=function(n){var e=YU.bind(null,n);return e.type=n,e};fn.createRef=function(){return{current:null}};fn.forwardRef=function(n){return{$$typeof:oW,render:n}};fn.isValidElement=dR;fn.lazy=function(n){return{$$typeof:cW,_payload:{_status:-1,_result:n},_init:fW}};fn.memo=function(n,e){return{$$typeof:lW,type:n,compare:e===void 0?null:e}};fn.startTransition=function(n){var e=Ax.transition;Ax.transition={};try{n()}finally{Ax.transition=e}};fn.unstable_act=KU;fn.useCallback=function(n,e){return fs.current.useCallback(n,e)};fn.useContext=function(n){return fs.current.useContext(n)};fn.useDebugValue=function(){};fn.useDeferredValue=function(n){return fs.current.useDeferredValue(n)};fn.useEffect=function(n,e){return fs.current.useEffect(n,e)};fn.useId=function(){return fs.current.useId()};fn.useImperativeHandle=function(n,e,t){return fs.current.useImperativeHandle(n,e,t)};fn.useInsertionEffect=function(n,e){return fs.current.useInsertionEffect(n,e)};fn.useLayoutEffect=function(n,e){return fs.current.useLayoutEffect(n,e)};fn.useMemo=function(n,e){return fs.current.useMemo(n,e)};fn.useReducer=function(n,e,t){return fs.current.useReducer(n,e,t)};fn.useRef=function(n){return fs.current.useRef(n)};fn.useState=function(n){return fs.current.useState(n)};fn.useSyncExternalStore=function(n,e,t){return fs.current.useSyncExternalStore(n,e,t)};fn.useTransition=function(){return fs.current.useTransition()};fn.version="18.3.1";HU.exports=fn;var H=HU.exports;const Ve=od(H),QU=JG({__proto__:null,default:Ve},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mW=H,gW=Symbol.for("react.element"),vW=Symbol.for("react.fragment"),yW=Object.prototype.hasOwnProperty,_W=mW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xW={key:!0,ref:!0,__self:!0,__source:!0};function ZU(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yW.call(e,r)&&!xW.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:gW,type:n,key:s,ref:o,props:i,_owner:_W.current}}P1.Fragment=vW;P1.jsx=ZU;P1.jsxs=ZU;BU.exports=P1;var L=BU.exports,JU={exports:{}},oo={},e4={exports:{}},t4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,j){var X=z.length;z.push(j);e:for(;0<X;){var ee=X-1>>>1,te=z[ee];if(0<i(te,j))z[ee]=j,z[X]=te,X=ee;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var j=z[0],X=z.pop();if(X!==j){z[0]=X;e:for(var ee=0,te=z.length,J=te>>>1;ee<J;){var oe=2*(ee+1)-1,we=z[oe],Pe=oe+1,Te=z[Pe];if(0>i(we,X))Pe<te&&0>i(Te,we)?(z[ee]=Te,z[Pe]=X,ee=Pe):(z[ee]=we,z[oe]=X,ee=oe);else if(Pe<te&&0>i(Te,X))z[ee]=Te,z[Pe]=X,ee=Pe;else break e}}return j}function i(z,j){var X=z.sortIndex-j.sortIndex;return X!==0?X:z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var j=t(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=z)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(c)}}function b(z){if(w=!1,S(z),!v)if(t(l)!==null)v=!0,ne(k);else{var j=t(c);j!==null&&ae(b,j.startTime-z)}}function k(z,j){v=!1,w&&(w=!1,g(P),P=-1),m=!0;var X=p;try{for(S(j),f=t(l);f!==null&&(!(f.expirationTime>j)||z&&!O());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var te=ee(f.expirationTime<=j);j=n.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&r(l),S(j)}else r(l);f=t(l)}if(f!==null)var J=!0;else{var oe=t(c);oe!==null&&ae(b,oe.startTime-j),J=!1}return J}finally{f=null,p=X,m=!1}}var N=!1,M=null,P=-1,A=5,R=-1;function O(){return!(n.unstable_now()-R<A)}function U(){if(M!==null){var z=n.unstable_now();R=z;var j=!0;try{j=M(!0,z)}finally{j?V():(N=!1,M=null)}}else N=!1}var V;if(typeof E=="function")V=function(){E(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Z=$.port2;$.port1.onmessage=U,V=function(){Z.postMessage(null)}}else V=function(){_(U,0)};function ne(z){M=z,N||(N=!0,V())}function ae(z,j){P=_(function(){z(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ne(k))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var X=p;p=j;try{return z()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=p;p=z;try{return j()}finally{p=X}},n.unstable_scheduleCallback=function(z,j,X){var ee=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,z={id:u++,callback:j,priorityLevel:z,startTime:X,expirationTime:te,sortIndex:-1},X>ee?(z.sortIndex=X,e(c,z),t(l)===null&&z===t(c)&&(w?(g(P),P=-1):w=!0,ae(b,X-ee))):(z.sortIndex=te,e(l,z),v||m||(v=!0,ne(k))),z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(z){var j=p;return function(){var X=p;p=j;try{return z.apply(this,arguments)}finally{p=X}}}})(t4);e4.exports=t4;var wW=e4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EW=H,io=wW;function Oe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n4=new Set,lv={};function ad(n,e){yp(n,e),yp(n+"Capture",e)}function yp(n,e){for(lv[n]=e,n=0;n<e.length;n++)n4.add(e[n])}var kl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rA=Object.prototype.hasOwnProperty,SW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YN={},KN={};function TW(n){return rA.call(KN,n)?!0:rA.call(YN,n)?!1:SW.test(n)?KN[n]=!0:(YN[n]=!0,!1)}function bW(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function AW(n,e,t,r){if(e===null||typeof e>"u"||bW(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ps(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ei[n]=new ps(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ei[e]=new ps(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ei[n]=new ps(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ei[n]=new ps(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ei[n]=new ps(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ei[n]=new ps(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ei[n]=new ps(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ei[n]=new ps(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ei[n]=new ps(n,5,!1,n.toLowerCase(),null,!1,!1)});var fR=/[\-:]([a-z])/g;function pR(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(fR,pR);Ei[e]=new ps(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(fR,pR);Ei[e]=new ps(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(fR,pR);Ei[e]=new ps(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ei[n]=new ps(n,1,!1,n.toLowerCase(),null,!1,!1)});Ei.xlinkHref=new ps("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ei[n]=new ps(n,1,!1,n.toLowerCase(),null,!0,!0)});function mR(n,e,t,r){var i=Ei.hasOwnProperty(e)?Ei[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AW(e,t,i,r)&&(t=null),r||i===null?TW(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ql=EW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y_=Symbol.for("react.element"),Af=Symbol.for("react.portal"),Mf=Symbol.for("react.fragment"),gR=Symbol.for("react.strict_mode"),iA=Symbol.for("react.profiler"),r4=Symbol.for("react.provider"),i4=Symbol.for("react.context"),vR=Symbol.for("react.forward_ref"),sA=Symbol.for("react.suspense"),oA=Symbol.for("react.suspense_list"),yR=Symbol.for("react.memo"),_c=Symbol.for("react.lazy"),s4=Symbol.for("react.offscreen"),QN=Symbol.iterator;function Um(n){return n===null||typeof n!="object"?null:(n=QN&&n[QN]||n["@@iterator"],typeof n=="function"?n:null)}var mr=Object.assign,QS;function yg(n){if(QS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);QS=e&&e[1]||""}return`
`+QS+n}var ZS=!1;function JS(n,e){if(!n||ZS)return"";ZS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{ZS=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?yg(n):""}function MW(n){switch(n.tag){case 5:return yg(n.type);case 16:return yg("Lazy");case 13:return yg("Suspense");case 19:return yg("SuspenseList");case 0:case 2:case 15:return n=JS(n.type,!1),n;case 11:return n=JS(n.type.render,!1),n;case 1:return n=JS(n.type,!0),n;default:return""}}function aA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Mf:return"Fragment";case Af:return"Portal";case iA:return"Profiler";case gR:return"StrictMode";case sA:return"Suspense";case oA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case i4:return(n.displayName||"Context")+".Consumer";case r4:return(n._context.displayName||"Context")+".Provider";case vR:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case yR:return e=n.displayName||null,e!==null?e:aA(n.type)||"Memo";case _c:e=n._payload,n=n._init;try{return aA(n(e))}catch{}}return null}function CW(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return aA(e);case 8:return e===gR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function o4(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RW(n){var e=o4(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function K_(n){n._valueTracker||(n._valueTracker=RW(n))}function a4(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=o4(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function lw(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function lA(n,e){var t=e.checked;return mr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ZN(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=cu(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l4(n,e){e=e.checked,e!=null&&mR(n,"checked",e,!1)}function cA(n,e){l4(n,e);var t=cu(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?uA(n,e.type,t):e.hasOwnProperty("defaultValue")&&uA(n,e.type,cu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function JN(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function uA(n,e,t){(e!=="number"||lw(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var _g=Array.isArray;function qf(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+cu(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function hA(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return mr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ek(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Oe(92));if(_g(t)){if(1<t.length)throw Error(Oe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:cu(t)}}function c4(n,e){var t=cu(e.value),r=cu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function tk(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function u4(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dA(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?u4(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Q_,h4=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Q_=Q_||document.createElement("div"),Q_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Q_.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function cv(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ug={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IW=["Webkit","ms","Moz","O"];Object.keys(Ug).forEach(function(n){IW.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ug[e]=Ug[n]})});function d4(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ug.hasOwnProperty(n)&&Ug[n]?(""+e).trim():e+"px"}function f4(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=d4(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var PW=mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fA(n,e){if(e){if(PW[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function pA(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mA=null;function _R(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gA=null,Xf=null,Yf=null;function nk(n){if(n=Ay(n)){if(typeof gA!="function")throw Error(Oe(280));var e=n.stateNode;e&&(e=O1(e),gA(n.stateNode,n.type,e))}}function p4(n){Xf?Yf?Yf.push(n):Yf=[n]:Xf=n}function m4(){if(Xf){var n=Xf,e=Yf;if(Yf=Xf=null,nk(n),e)for(n=0;n<e.length;n++)nk(e[n])}}function g4(n,e){return n(e)}function v4(){}var eT=!1;function y4(n,e,t){if(eT)return n(e,t);eT=!0;try{return g4(n,e,t)}finally{eT=!1,(Xf!==null||Yf!==null)&&(v4(),m4())}}function uv(n,e){var t=n.stateNode;if(t===null)return null;var r=O1(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Oe(231,e,typeof t));return t}var vA=!1;if(kl)try{var Vm={};Object.defineProperty(Vm,"passive",{get:function(){vA=!0}}),window.addEventListener("test",Vm,Vm),window.removeEventListener("test",Vm,Vm)}catch{vA=!1}function NW(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Vg=!1,cw=null,uw=!1,yA=null,kW={onError:function(n){Vg=!0,cw=n}};function LW(n,e,t,r,i,s,o,a,l){Vg=!1,cw=null,NW.apply(kW,arguments)}function DW(n,e,t,r,i,s,o,a,l){if(LW.apply(this,arguments),Vg){if(Vg){var c=cw;Vg=!1,cw=null}else throw Error(Oe(198));uw||(uw=!0,yA=c)}}function ld(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function _4(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function rk(n){if(ld(n)!==n)throw Error(Oe(188))}function OW(n){var e=n.alternate;if(!e){if(e=ld(n),e===null)throw Error(Oe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return rk(i),n;if(s===r)return rk(i),e;s=s.sibling}throw Error(Oe(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Oe(189))}}if(t.alternate!==r)throw Error(Oe(190))}if(t.tag!==3)throw Error(Oe(188));return t.stateNode.current===t?n:e}function x4(n){return n=OW(n),n!==null?w4(n):null}function w4(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=w4(n);if(e!==null)return e;n=n.sibling}return null}var E4=io.unstable_scheduleCallback,ik=io.unstable_cancelCallback,FW=io.unstable_shouldYield,UW=io.unstable_requestPaint,Pr=io.unstable_now,VW=io.unstable_getCurrentPriorityLevel,xR=io.unstable_ImmediatePriority,S4=io.unstable_UserBlockingPriority,hw=io.unstable_NormalPriority,zW=io.unstable_LowPriority,T4=io.unstable_IdlePriority,N1=null,Pa=null;function BW(n){if(Pa&&typeof Pa.onCommitFiberRoot=="function")try{Pa.onCommitFiberRoot(N1,n,void 0,(n.current.flags&128)===128)}catch{}}var ia=Math.clz32?Math.clz32:GW,HW=Math.log,jW=Math.LN2;function GW(n){return n>>>=0,n===0?32:31-(HW(n)/jW|0)|0}var Z_=64,J_=4194304;function xg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function dw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=xg(a):(s&=o,s!==0&&(r=xg(s)))}else o=t&~i,o!==0?r=xg(o):s!==0&&(r=xg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ia(e),i=1<<t,r|=n[t],e&=~i;return r}function WW(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $W(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ia(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=WW(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function _A(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function b4(){var n=Z_;return Z_<<=1,!(Z_&4194240)&&(Z_=64),n}function tT(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ty(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ia(e),n[e]=t}function qW(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ia(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function wR(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ia(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Un=0;function A4(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var M4,ER,C4,R4,I4,xA=!1,e0=[],Bc=null,Hc=null,jc=null,hv=new Map,dv=new Map,Sc=[],XW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sk(n,e){switch(n){case"focusin":case"focusout":Bc=null;break;case"dragenter":case"dragleave":Hc=null;break;case"mouseover":case"mouseout":jc=null;break;case"pointerover":case"pointerout":hv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dv.delete(e.pointerId)}}function zm(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ay(e),e!==null&&ER(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function YW(n,e,t,r,i){switch(e){case"focusin":return Bc=zm(Bc,n,e,t,r,i),!0;case"dragenter":return Hc=zm(Hc,n,e,t,r,i),!0;case"mouseover":return jc=zm(jc,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return hv.set(s,zm(hv.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,dv.set(s,zm(dv.get(s)||null,n,e,t,r,i)),!0}return!1}function P4(n){var e=_h(n.target);if(e!==null){var t=ld(e);if(t!==null){if(e=t.tag,e===13){if(e=_4(t),e!==null){n.blockedOn=e,I4(n.priority,function(){C4(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Mx(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=wA(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);mA=r,t.target.dispatchEvent(r),mA=null}else return e=Ay(t),e!==null&&ER(e),n.blockedOn=t,!1;e.shift()}return!0}function ok(n,e,t){Mx(n)&&t.delete(e)}function KW(){xA=!1,Bc!==null&&Mx(Bc)&&(Bc=null),Hc!==null&&Mx(Hc)&&(Hc=null),jc!==null&&Mx(jc)&&(jc=null),hv.forEach(ok),dv.forEach(ok)}function Bm(n,e){n.blockedOn===e&&(n.blockedOn=null,xA||(xA=!0,io.unstable_scheduleCallback(io.unstable_NormalPriority,KW)))}function fv(n){function e(i){return Bm(i,n)}if(0<e0.length){Bm(e0[0],n);for(var t=1;t<e0.length;t++){var r=e0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Bc!==null&&Bm(Bc,n),Hc!==null&&Bm(Hc,n),jc!==null&&Bm(jc,n),hv.forEach(e),dv.forEach(e),t=0;t<Sc.length;t++)r=Sc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Sc.length&&(t=Sc[0],t.blockedOn===null);)P4(t),t.blockedOn===null&&Sc.shift()}var Kf=ql.ReactCurrentBatchConfig,fw=!0;function QW(n,e,t,r){var i=Un,s=Kf.transition;Kf.transition=null;try{Un=1,SR(n,e,t,r)}finally{Un=i,Kf.transition=s}}function ZW(n,e,t,r){var i=Un,s=Kf.transition;Kf.transition=null;try{Un=4,SR(n,e,t,r)}finally{Un=i,Kf.transition=s}}function SR(n,e,t,r){if(fw){var i=wA(n,e,t,r);if(i===null)hT(n,e,r,pw,t),sk(n,r);else if(YW(i,n,e,t,r))r.stopPropagation();else if(sk(n,r),e&4&&-1<XW.indexOf(n)){for(;i!==null;){var s=Ay(i);if(s!==null&&M4(s),s=wA(n,e,t,r),s===null&&hT(n,e,r,pw,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else hT(n,e,r,null,t)}}var pw=null;function wA(n,e,t,r){if(pw=null,n=_R(r),n=_h(n),n!==null)if(e=ld(n),e===null)n=null;else if(t=e.tag,t===13){if(n=_4(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return pw=n,null}function N4(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VW()){case xR:return 1;case S4:return 4;case hw:case zW:return 16;case T4:return 536870912;default:return 16}default:return 16}}var Dc=null,TR=null,Cx=null;function k4(){if(Cx)return Cx;var n,e=TR,t=e.length,r,i="value"in Dc?Dc.value:Dc.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Cx=i.slice(n,1<r?1-r:void 0)}function Rx(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function t0(){return!0}function ak(){return!1}function ao(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?t0:ak,this.isPropagationStopped=ak,this}return mr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=t0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=t0)},persist:function(){},isPersistent:t0}),e}var Xp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bR=ao(Xp),by=mr({},Xp,{view:0,detail:0}),JW=ao(by),nT,rT,Hm,k1=mr({},by,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:AR,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Hm&&(Hm&&n.type==="mousemove"?(nT=n.screenX-Hm.screenX,rT=n.screenY-Hm.screenY):rT=nT=0,Hm=n),nT)},movementY:function(n){return"movementY"in n?n.movementY:rT}}),lk=ao(k1),e$=mr({},k1,{dataTransfer:0}),t$=ao(e$),n$=mr({},by,{relatedTarget:0}),iT=ao(n$),r$=mr({},Xp,{animationName:0,elapsedTime:0,pseudoElement:0}),i$=ao(r$),s$=mr({},Xp,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),o$=ao(s$),a$=mr({},Xp,{data:0}),ck=ao(a$),l$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h$(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=u$[n])?!!e[n]:!1}function AR(){return h$}var d$=mr({},by,{key:function(n){if(n.key){var e=l$[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Rx(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?c$[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:AR,charCode:function(n){return n.type==="keypress"?Rx(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rx(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f$=ao(d$),p$=mr({},k1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uk=ao(p$),m$=mr({},by,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:AR}),g$=ao(m$),v$=mr({},Xp,{propertyName:0,elapsedTime:0,pseudoElement:0}),y$=ao(v$),_$=mr({},k1,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),x$=ao(_$),w$=[9,13,27,32],MR=kl&&"CompositionEvent"in window,zg=null;kl&&"documentMode"in document&&(zg=document.documentMode);var E$=kl&&"TextEvent"in window&&!zg,L4=kl&&(!MR||zg&&8<zg&&11>=zg),hk=" ",dk=!1;function D4(n,e){switch(n){case"keyup":return w$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O4(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Cf=!1;function S$(n,e){switch(n){case"compositionend":return O4(e);case"keypress":return e.which!==32?null:(dk=!0,hk);case"textInput":return n=e.data,n===hk&&dk?null:n;default:return null}}function T$(n,e){if(Cf)return n==="compositionend"||!MR&&D4(n,e)?(n=k4(),Cx=TR=Dc=null,Cf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L4&&e.locale!=="ko"?null:e.data;default:return null}}var b$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fk(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!b$[n.type]:e==="textarea"}function F4(n,e,t,r){p4(r),e=mw(e,"onChange"),0<e.length&&(t=new bR("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Bg=null,pv=null;function A$(n){X4(n,0)}function L1(n){var e=Pf(n);if(a4(e))return n}function M$(n,e){if(n==="change")return e}var U4=!1;if(kl){var sT;if(kl){var oT="oninput"in document;if(!oT){var pk=document.createElement("div");pk.setAttribute("oninput","return;"),oT=typeof pk.oninput=="function"}sT=oT}else sT=!1;U4=sT&&(!document.documentMode||9<document.documentMode)}function mk(){Bg&&(Bg.detachEvent("onpropertychange",V4),pv=Bg=null)}function V4(n){if(n.propertyName==="value"&&L1(pv)){var e=[];F4(e,pv,n,_R(n)),y4(A$,e)}}function C$(n,e,t){n==="focusin"?(mk(),Bg=e,pv=t,Bg.attachEvent("onpropertychange",V4)):n==="focusout"&&mk()}function R$(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return L1(pv)}function I$(n,e){if(n==="click")return L1(e)}function P$(n,e){if(n==="input"||n==="change")return L1(e)}function N$(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var oa=typeof Object.is=="function"?Object.is:N$;function mv(n,e){if(oa(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!rA.call(e,i)||!oa(n[i],e[i]))return!1}return!0}function gk(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vk(n,e){var t=gk(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=gk(t)}}function z4(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?z4(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function B4(){for(var n=window,e=lw();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=lw(n.document)}return e}function CR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function k$(n){var e=B4(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&z4(t.ownerDocument.documentElement,t)){if(r!==null&&CR(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=vk(t,s);var o=vk(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var L$=kl&&"documentMode"in document&&11>=document.documentMode,Rf=null,EA=null,Hg=null,SA=!1;function yk(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;SA||Rf==null||Rf!==lw(r)||(r=Rf,"selectionStart"in r&&CR(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hg&&mv(Hg,r)||(Hg=r,r=mw(EA,"onSelect"),0<r.length&&(e=new bR("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Rf)))}function n0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var If={animationend:n0("Animation","AnimationEnd"),animationiteration:n0("Animation","AnimationIteration"),animationstart:n0("Animation","AnimationStart"),transitionend:n0("Transition","TransitionEnd")},aT={},H4={};kl&&(H4=document.createElement("div").style,"AnimationEvent"in window||(delete If.animationend.animation,delete If.animationiteration.animation,delete If.animationstart.animation),"TransitionEvent"in window||delete If.transitionend.transition);function D1(n){if(aT[n])return aT[n];if(!If[n])return n;var e=If[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in H4)return aT[n]=e[t];return n}var j4=D1("animationend"),G4=D1("animationiteration"),W4=D1("animationstart"),$4=D1("transitionend"),q4=new Map,_k="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Au(n,e){q4.set(n,e),ad(e,[n])}for(var lT=0;lT<_k.length;lT++){var cT=_k[lT],D$=cT.toLowerCase(),O$=cT[0].toUpperCase()+cT.slice(1);Au(D$,"on"+O$)}Au(j4,"onAnimationEnd");Au(G4,"onAnimationIteration");Au(W4,"onAnimationStart");Au("dblclick","onDoubleClick");Au("focusin","onFocus");Au("focusout","onBlur");Au($4,"onTransitionEnd");yp("onMouseEnter",["mouseout","mouseover"]);yp("onMouseLeave",["mouseout","mouseover"]);yp("onPointerEnter",["pointerout","pointerover"]);yp("onPointerLeave",["pointerout","pointerover"]);ad("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ad("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ad("onBeforeInput",["compositionend","keypress","textInput","paste"]);ad("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ad("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ad("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F$=new Set("cancel close invalid load scroll toggle".split(" ").concat(wg));function xk(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,DW(r,e,void 0,n),n.currentTarget=null}function X4(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;xk(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;xk(i,a,c),s=l}}}if(uw)throw n=yA,uw=!1,yA=null,n}function Kn(n,e){var t=e[CA];t===void 0&&(t=e[CA]=new Set);var r=n+"__bubble";t.has(r)||(Y4(e,n,2,!1),t.add(r))}function uT(n,e,t){var r=0;e&&(r|=4),Y4(t,n,r,e)}var r0="_reactListening"+Math.random().toString(36).slice(2);function gv(n){if(!n[r0]){n[r0]=!0,n4.forEach(function(t){t!=="selectionchange"&&(F$.has(t)||uT(t,!1,n),uT(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[r0]||(e[r0]=!0,uT("selectionchange",!1,e))}}function Y4(n,e,t,r){switch(N4(e)){case 1:var i=QW;break;case 4:i=ZW;break;default:i=SR}t=i.bind(null,e,t,n),i=void 0,!vA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function hT(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_h(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}y4(function(){var c=s,u=_R(t),f=[];e:{var p=q4.get(n);if(p!==void 0){var m=bR,v=n;switch(n){case"keypress":if(Rx(t)===0)break e;case"keydown":case"keyup":m=f$;break;case"focusin":v="focus",m=iT;break;case"focusout":v="blur",m=iT;break;case"beforeblur":case"afterblur":m=iT;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=lk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=t$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=g$;break;case j4:case G4:case W4:m=i$;break;case $4:m=y$;break;case"scroll":m=JW;break;case"wheel":m=x$;break;case"copy":case"cut":case"paste":m=o$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=uk}var w=(e&4)!==0,_=!w&&n==="scroll",g=w?p!==null?p+"Capture":null:p;w=[];for(var E=c,S;E!==null;){S=E;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,g!==null&&(b=uv(E,g),b!=null&&w.push(vv(E,b,S)))),_)break;E=E.return}0<w.length&&(p=new m(p,v,null,t,u),f.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==mA&&(v=t.relatedTarget||t.fromElement)&&(_h(v)||v[Ll]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?_h(v):null,v!==null&&(_=ld(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(w=lk,b="onMouseLeave",g="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(w=uk,b="onPointerLeave",g="onPointerEnter",E="pointer"),_=m==null?p:Pf(m),S=v==null?p:Pf(v),p=new w(b,E+"leave",m,t,u),p.target=_,p.relatedTarget=S,b=null,_h(u)===c&&(w=new w(g,E+"enter",v,t,u),w.target=S,w.relatedTarget=_,b=w),_=b,m&&v)t:{for(w=m,g=v,E=0,S=w;S;S=Gd(S))E++;for(S=0,b=g;b;b=Gd(b))S++;for(;0<E-S;)w=Gd(w),E--;for(;0<S-E;)g=Gd(g),S--;for(;E--;){if(w===g||g!==null&&w===g.alternate)break t;w=Gd(w),g=Gd(g)}w=null}else w=null;m!==null&&wk(f,p,m,w,!1),v!==null&&_!==null&&wk(f,_,v,w,!0)}}e:{if(p=c?Pf(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var k=M$;else if(fk(p))if(U4)k=P$;else{k=R$;var N=C$}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=I$);if(k&&(k=k(n,c))){F4(f,k,t,u);break e}N&&N(n,p,c),n==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&uA(p,"number",p.value)}switch(N=c?Pf(c):window,n){case"focusin":(fk(N)||N.contentEditable==="true")&&(Rf=N,EA=c,Hg=null);break;case"focusout":Hg=EA=Rf=null;break;case"mousedown":SA=!0;break;case"contextmenu":case"mouseup":case"dragend":SA=!1,yk(f,t,u);break;case"selectionchange":if(L$)break;case"keydown":case"keyup":yk(f,t,u)}var M;if(MR)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Cf?D4(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(L4&&t.locale!=="ko"&&(Cf||P!=="onCompositionStart"?P==="onCompositionEnd"&&Cf&&(M=k4()):(Dc=u,TR="value"in Dc?Dc.value:Dc.textContent,Cf=!0)),N=mw(c,P),0<N.length&&(P=new ck(P,n,null,t,u),f.push({event:P,listeners:N}),M?P.data=M:(M=O4(t),M!==null&&(P.data=M)))),(M=E$?S$(n,t):T$(n,t))&&(c=mw(c,"onBeforeInput"),0<c.length&&(u=new ck("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=M))}X4(f,e)})}function vv(n,e,t){return{instance:n,listener:e,currentTarget:t}}function mw(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=uv(n,t),s!=null&&r.unshift(vv(n,s,i)),s=uv(n,e),s!=null&&r.push(vv(n,s,i))),n=n.return}return r}function Gd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function wk(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=uv(t,s),l!=null&&o.unshift(vv(t,l,a))):i||(l=uv(t,s),l!=null&&o.push(vv(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var U$=/\r\n?/g,V$=/\u0000|\uFFFD/g;function Ek(n){return(typeof n=="string"?n:""+n).replace(U$,`
`).replace(V$,"")}function i0(n,e,t){if(e=Ek(e),Ek(n)!==e&&t)throw Error(Oe(425))}function gw(){}var TA=null,bA=null;function AA(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var MA=typeof setTimeout=="function"?setTimeout:void 0,z$=typeof clearTimeout=="function"?clearTimeout:void 0,Sk=typeof Promise=="function"?Promise:void 0,B$=typeof queueMicrotask=="function"?queueMicrotask:typeof Sk<"u"?function(n){return Sk.resolve(null).then(n).catch(H$)}:MA;function H$(n){setTimeout(function(){throw n})}function dT(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),fv(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);fv(e)}function Gc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Tk(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Yp=Math.random().toString(36).slice(2),Aa="__reactFiber$"+Yp,yv="__reactProps$"+Yp,Ll="__reactContainer$"+Yp,CA="__reactEvents$"+Yp,j$="__reactListeners$"+Yp,G$="__reactHandles$"+Yp;function _h(n){var e=n[Aa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ll]||t[Aa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Tk(n);n!==null;){if(t=n[Aa])return t;n=Tk(n)}return e}n=t,t=n.parentNode}return null}function Ay(n){return n=n[Aa]||n[Ll],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Pf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Oe(33))}function O1(n){return n[yv]||null}var RA=[],Nf=-1;function Mu(n){return{current:n}}function er(n){0>Nf||(n.current=RA[Nf],RA[Nf]=null,Nf--)}function Xn(n,e){Nf++,RA[Nf]=n.current,n.current=e}var uu={},qi=Mu(uu),ks=Mu(!1),jh=uu;function _p(n,e){var t=n.type.contextTypes;if(!t)return uu;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ls(n){return n=n.childContextTypes,n!=null}function vw(){er(ks),er(qi)}function bk(n,e,t){if(qi.current!==uu)throw Error(Oe(168));Xn(qi,e),Xn(ks,t)}function K4(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Oe(108,CW(n)||"Unknown",i));return mr({},t,r)}function yw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||uu,jh=qi.current,Xn(qi,n),Xn(ks,ks.current),!0}function Ak(n,e,t){var r=n.stateNode;if(!r)throw Error(Oe(169));t?(n=K4(n,e,jh),r.__reactInternalMemoizedMergedChildContext=n,er(ks),er(qi),Xn(qi,n)):er(ks),Xn(ks,t)}var _l=null,F1=!1,fT=!1;function Q4(n){_l===null?_l=[n]:_l.push(n)}function W$(n){F1=!0,Q4(n)}function Cu(){if(!fT&&_l!==null){fT=!0;var n=0,e=Un;try{var t=_l;for(Un=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}_l=null,F1=!1}catch(i){throw _l!==null&&(_l=_l.slice(n+1)),E4(xR,Cu),i}finally{Un=e,fT=!1}}return null}var kf=[],Lf=0,_w=null,xw=0,So=[],To=0,Gh=null,Sl=1,Tl="";function hh(n,e){kf[Lf++]=xw,kf[Lf++]=_w,_w=n,xw=e}function Z4(n,e,t){So[To++]=Sl,So[To++]=Tl,So[To++]=Gh,Gh=n;var r=Sl;n=Tl;var i=32-ia(r)-1;r&=~(1<<i),t+=1;var s=32-ia(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Sl=1<<32-ia(e)+i|t<<i|r,Tl=s+n}else Sl=1<<s|t<<i|r,Tl=n}function RR(n){n.return!==null&&(hh(n,1),Z4(n,1,0))}function IR(n){for(;n===_w;)_w=kf[--Lf],kf[Lf]=null,xw=kf[--Lf],kf[Lf]=null;for(;n===Gh;)Gh=So[--To],So[To]=null,Tl=So[--To],So[To]=null,Sl=So[--To],So[To]=null}var to=null,Js=null,ar=!1,Ko=null;function J4(n,e){var t=Mo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Mk(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,to=n,Js=Gc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,to=n,Js=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Gh!==null?{id:Sl,overflow:Tl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Mo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,to=n,Js=null,!0):!1;default:return!1}}function IA(n){return(n.mode&1)!==0&&(n.flags&128)===0}function PA(n){if(ar){var e=Js;if(e){var t=e;if(!Mk(n,e)){if(IA(n))throw Error(Oe(418));e=Gc(t.nextSibling);var r=to;e&&Mk(n,e)?J4(r,t):(n.flags=n.flags&-4097|2,ar=!1,to=n)}}else{if(IA(n))throw Error(Oe(418));n.flags=n.flags&-4097|2,ar=!1,to=n}}}function Ck(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;to=n}function s0(n){if(n!==to)return!1;if(!ar)return Ck(n),ar=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!AA(n.type,n.memoizedProps)),e&&(e=Js)){if(IA(n))throw eV(),Error(Oe(418));for(;e;)J4(n,e),e=Gc(e.nextSibling)}if(Ck(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Oe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Js=Gc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Js=null}}else Js=to?Gc(n.stateNode.nextSibling):null;return!0}function eV(){for(var n=Js;n;)n=Gc(n.nextSibling)}function xp(){Js=to=null,ar=!1}function PR(n){Ko===null?Ko=[n]:Ko.push(n)}var $$=ql.ReactCurrentBatchConfig;function jm(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Oe(309));var r=t.stateNode}if(!r)throw Error(Oe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Oe(284));if(!t._owner)throw Error(Oe(290,n))}return n}function o0(n,e){throw n=Object.prototype.toString.call(e),Error(Oe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Rk(n){var e=n._init;return e(n._payload)}function tV(n){function e(g,E){if(n){var S=g.deletions;S===null?(g.deletions=[E],g.flags|=16):S.push(E)}}function t(g,E){if(!n)return null;for(;E!==null;)e(g,E),E=E.sibling;return null}function r(g,E){for(g=new Map;E!==null;)E.key!==null?g.set(E.key,E):g.set(E.index,E),E=E.sibling;return g}function i(g,E){return g=Xc(g,E),g.index=0,g.sibling=null,g}function s(g,E,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<E?(g.flags|=2,E):S):(g.flags|=2,E)):(g.flags|=1048576,E)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,E,S,b){return E===null||E.tag!==6?(E=xT(S,g.mode,b),E.return=g,E):(E=i(E,S),E.return=g,E)}function l(g,E,S,b){var k=S.type;return k===Mf?u(g,E,S.props.children,b,S.key):E!==null&&(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===_c&&Rk(k)===E.type)?(b=i(E,S.props),b.ref=jm(g,E,S),b.return=g,b):(b=Ox(S.type,S.key,S.props,null,g.mode,b),b.ref=jm(g,E,S),b.return=g,b)}function c(g,E,S,b){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=wT(S,g.mode,b),E.return=g,E):(E=i(E,S.children||[]),E.return=g,E)}function u(g,E,S,b,k){return E===null||E.tag!==7?(E=Lh(S,g.mode,b,k),E.return=g,E):(E=i(E,S),E.return=g,E)}function f(g,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=xT(""+E,g.mode,S),E.return=g,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Y_:return S=Ox(E.type,E.key,E.props,null,g.mode,S),S.ref=jm(g,null,E),S.return=g,S;case Af:return E=wT(E,g.mode,S),E.return=g,E;case _c:var b=E._init;return f(g,b(E._payload),S)}if(_g(E)||Um(E))return E=Lh(E,g.mode,S,null),E.return=g,E;o0(g,E)}return null}function p(g,E,S,b){var k=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:a(g,E,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Y_:return S.key===k?l(g,E,S,b):null;case Af:return S.key===k?c(g,E,S,b):null;case _c:return k=S._init,p(g,E,k(S._payload),b)}if(_g(S)||Um(S))return k!==null?null:u(g,E,S,b,null);o0(g,S)}return null}function m(g,E,S,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(S)||null,a(E,g,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Y_:return g=g.get(b.key===null?S:b.key)||null,l(E,g,b,k);case Af:return g=g.get(b.key===null?S:b.key)||null,c(E,g,b,k);case _c:var N=b._init;return m(g,E,S,N(b._payload),k)}if(_g(b)||Um(b))return g=g.get(S)||null,u(E,g,b,k,null);o0(E,b)}return null}function v(g,E,S,b){for(var k=null,N=null,M=E,P=E=0,A=null;M!==null&&P<S.length;P++){M.index>P?(A=M,M=null):A=M.sibling;var R=p(g,M,S[P],b);if(R===null){M===null&&(M=A);break}n&&M&&R.alternate===null&&e(g,M),E=s(R,E,P),N===null?k=R:N.sibling=R,N=R,M=A}if(P===S.length)return t(g,M),ar&&hh(g,P),k;if(M===null){for(;P<S.length;P++)M=f(g,S[P],b),M!==null&&(E=s(M,E,P),N===null?k=M:N.sibling=M,N=M);return ar&&hh(g,P),k}for(M=r(g,M);P<S.length;P++)A=m(M,g,P,S[P],b),A!==null&&(n&&A.alternate!==null&&M.delete(A.key===null?P:A.key),E=s(A,E,P),N===null?k=A:N.sibling=A,N=A);return n&&M.forEach(function(O){return e(g,O)}),ar&&hh(g,P),k}function w(g,E,S,b){var k=Um(S);if(typeof k!="function")throw Error(Oe(150));if(S=k.call(S),S==null)throw Error(Oe(151));for(var N=k=null,M=E,P=E=0,A=null,R=S.next();M!==null&&!R.done;P++,R=S.next()){M.index>P?(A=M,M=null):A=M.sibling;var O=p(g,M,R.value,b);if(O===null){M===null&&(M=A);break}n&&M&&O.alternate===null&&e(g,M),E=s(O,E,P),N===null?k=O:N.sibling=O,N=O,M=A}if(R.done)return t(g,M),ar&&hh(g,P),k;if(M===null){for(;!R.done;P++,R=S.next())R=f(g,R.value,b),R!==null&&(E=s(R,E,P),N===null?k=R:N.sibling=R,N=R);return ar&&hh(g,P),k}for(M=r(g,M);!R.done;P++,R=S.next())R=m(M,g,P,R.value,b),R!==null&&(n&&R.alternate!==null&&M.delete(R.key===null?P:R.key),E=s(R,E,P),N===null?k=R:N.sibling=R,N=R);return n&&M.forEach(function(U){return e(g,U)}),ar&&hh(g,P),k}function _(g,E,S,b){if(typeof S=="object"&&S!==null&&S.type===Mf&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Y_:e:{for(var k=S.key,N=E;N!==null;){if(N.key===k){if(k=S.type,k===Mf){if(N.tag===7){t(g,N.sibling),E=i(N,S.props.children),E.return=g,g=E;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===_c&&Rk(k)===N.type){t(g,N.sibling),E=i(N,S.props),E.ref=jm(g,N,S),E.return=g,g=E;break e}t(g,N);break}else e(g,N);N=N.sibling}S.type===Mf?(E=Lh(S.props.children,g.mode,b,S.key),E.return=g,g=E):(b=Ox(S.type,S.key,S.props,null,g.mode,b),b.ref=jm(g,E,S),b.return=g,g=b)}return o(g);case Af:e:{for(N=S.key;E!==null;){if(E.key===N)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){t(g,E.sibling),E=i(E,S.children||[]),E.return=g,g=E;break e}else{t(g,E);break}else e(g,E);E=E.sibling}E=wT(S,g.mode,b),E.return=g,g=E}return o(g);case _c:return N=S._init,_(g,E,N(S._payload),b)}if(_g(S))return v(g,E,S,b);if(Um(S))return w(g,E,S,b);o0(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(t(g,E.sibling),E=i(E,S),E.return=g,g=E):(t(g,E),E=xT(S,g.mode,b),E.return=g,g=E),o(g)):t(g,E)}return _}var wp=tV(!0),nV=tV(!1),ww=Mu(null),Ew=null,Df=null,NR=null;function kR(){NR=Df=Ew=null}function LR(n){var e=ww.current;er(ww),n._currentValue=e}function NA(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Qf(n,e){Ew=n,NR=Df=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ps=!0),n.firstContext=null)}function Po(n){var e=n._currentValue;if(NR!==n)if(n={context:n,memoizedValue:e,next:null},Df===null){if(Ew===null)throw Error(Oe(308));Df=n,Ew.dependencies={lanes:0,firstContext:n}}else Df=Df.next=n;return e}var xh=null;function DR(n){xh===null?xh=[n]:xh.push(n)}function rV(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,DR(e)):(t.next=i.next,i.next=t),e.interleaved=t,Dl(n,r)}function Dl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var xc=!1;function OR(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iV(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Rl(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Wc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,wn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dl(n,t)}return i=r.interleaved,i===null?(e.next=e,DR(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dl(n,t)}function Ix(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,wR(n,t)}}function Ik(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Sw(n,e,t,r){var i=n.updateQueue;xc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,w=a;switch(p=e,m=t,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=mr({},f,p);break e;case 2:xc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$h|=o,n.lanes=o,n.memoizedState=f}}function Pk(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Oe(191,i));i.call(r)}}}var My={},Na=Mu(My),_v=Mu(My),xv=Mu(My);function wh(n){if(n===My)throw Error(Oe(174));return n}function FR(n,e){switch(Xn(xv,e),Xn(_v,n),Xn(Na,My),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dA(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=dA(e,n)}er(Na),Xn(Na,e)}function Ep(){er(Na),er(_v),er(xv)}function sV(n){wh(xv.current);var e=wh(Na.current),t=dA(e,n.type);e!==t&&(Xn(_v,n),Xn(Na,t))}function UR(n){_v.current===n&&(er(Na),er(_v))}var hr=Mu(0);function Tw(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pT=[];function VR(){for(var n=0;n<pT.length;n++)pT[n]._workInProgressVersionPrimary=null;pT.length=0}var Px=ql.ReactCurrentDispatcher,mT=ql.ReactCurrentBatchConfig,Wh=0,pr=null,Gr=null,ci=null,bw=!1,jg=!1,wv=0,q$=0;function Li(){throw Error(Oe(321))}function zR(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!oa(n[t],e[t]))return!1;return!0}function BR(n,e,t,r,i,s){if(Wh=s,pr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Px.current=n===null||n.memoizedState===null?Q$:Z$,n=t(r,i),jg){s=0;do{if(jg=!1,wv=0,25<=s)throw Error(Oe(301));s+=1,ci=Gr=null,e.updateQueue=null,Px.current=J$,n=t(r,i)}while(jg)}if(Px.current=Aw,e=Gr!==null&&Gr.next!==null,Wh=0,ci=Gr=pr=null,bw=!1,e)throw Error(Oe(300));return n}function HR(){var n=wv!==0;return wv=0,n}function wa(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?pr.memoizedState=ci=n:ci=ci.next=n,ci}function No(){if(Gr===null){var n=pr.alternate;n=n!==null?n.memoizedState:null}else n=Gr.next;var e=ci===null?pr.memoizedState:ci.next;if(e!==null)ci=e,Gr=n;else{if(n===null)throw Error(Oe(310));Gr=n,n={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},ci===null?pr.memoizedState=ci=n:ci=ci.next=n}return ci}function Ev(n,e){return typeof e=="function"?e(n):e}function gT(n){var e=No(),t=e.queue;if(t===null)throw Error(Oe(311));t.lastRenderedReducer=n;var r=Gr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Wh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,pr.lanes|=u,$h|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,oa(r,e.memoizedState)||(Ps=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,pr.lanes|=s,$h|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function vT(n){var e=No(),t=e.queue;if(t===null)throw Error(Oe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);oa(s,e.memoizedState)||(Ps=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function oV(){}function aV(n,e){var t=pr,r=No(),i=e(),s=!oa(r.memoizedState,i);if(s&&(r.memoizedState=i,Ps=!0),r=r.queue,jR(uV.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ci!==null&&ci.memoizedState.tag&1){if(t.flags|=2048,Sv(9,cV.bind(null,t,r,i,e),void 0,null),di===null)throw Error(Oe(349));Wh&30||lV(t,e,i)}return i}function lV(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=pr.updateQueue,e===null?(e={lastEffect:null,stores:null},pr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function cV(n,e,t,r){e.value=t,e.getSnapshot=r,hV(e)&&dV(n)}function uV(n,e,t){return t(function(){hV(e)&&dV(n)})}function hV(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!oa(n,t)}catch{return!0}}function dV(n){var e=Dl(n,1);e!==null&&sa(e,n,1,-1)}function Nk(n){var e=wa();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ev,lastRenderedState:n},e.queue=n,n=n.dispatch=K$.bind(null,pr,n),[e.memoizedState,n]}function Sv(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=pr.updateQueue,e===null?(e={lastEffect:null,stores:null},pr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function fV(){return No().memoizedState}function Nx(n,e,t,r){var i=wa();pr.flags|=n,i.memoizedState=Sv(1|e,t,void 0,r===void 0?null:r)}function U1(n,e,t,r){var i=No();r=r===void 0?null:r;var s=void 0;if(Gr!==null){var o=Gr.memoizedState;if(s=o.destroy,r!==null&&zR(r,o.deps)){i.memoizedState=Sv(e,t,s,r);return}}pr.flags|=n,i.memoizedState=Sv(1|e,t,s,r)}function kk(n,e){return Nx(8390656,8,n,e)}function jR(n,e){return U1(2048,8,n,e)}function pV(n,e){return U1(4,2,n,e)}function mV(n,e){return U1(4,4,n,e)}function gV(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function vV(n,e,t){return t=t!=null?t.concat([n]):null,U1(4,4,gV.bind(null,e,n),t)}function GR(){}function yV(n,e){var t=No();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&zR(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function _V(n,e){var t=No();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&zR(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function xV(n,e,t){return Wh&21?(oa(t,e)||(t=b4(),pr.lanes|=t,$h|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ps=!0),n.memoizedState=t)}function X$(n,e){var t=Un;Un=t!==0&&4>t?t:4,n(!0);var r=mT.transition;mT.transition={};try{n(!1),e()}finally{Un=t,mT.transition=r}}function wV(){return No().memoizedState}function Y$(n,e,t){var r=qc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},EV(n))SV(e,t);else if(t=rV(n,e,t,r),t!==null){var i=cs();sa(t,n,r,i),TV(t,e,r)}}function K$(n,e,t){var r=qc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(EV(n))SV(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,oa(a,o)){var l=e.interleaved;l===null?(i.next=i,DR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=rV(n,e,i,r),t!==null&&(i=cs(),sa(t,n,r,i),TV(t,e,r))}}function EV(n){var e=n.alternate;return n===pr||e!==null&&e===pr}function SV(n,e){jg=bw=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function TV(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,wR(n,t)}}var Aw={readContext:Po,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},Q$={readContext:Po,useCallback:function(n,e){return wa().memoizedState=[n,e===void 0?null:e],n},useContext:Po,useEffect:kk,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Nx(4194308,4,gV.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Nx(4194308,4,n,e)},useInsertionEffect:function(n,e){return Nx(4,2,n,e)},useMemo:function(n,e){var t=wa();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=wa();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Y$.bind(null,pr,n),[r.memoizedState,n]},useRef:function(n){var e=wa();return n={current:n},e.memoizedState=n},useState:Nk,useDebugValue:GR,useDeferredValue:function(n){return wa().memoizedState=n},useTransition:function(){var n=Nk(!1),e=n[0];return n=X$.bind(null,n[1]),wa().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=pr,i=wa();if(ar){if(t===void 0)throw Error(Oe(407));t=t()}else{if(t=e(),di===null)throw Error(Oe(349));Wh&30||lV(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,kk(uV.bind(null,r,s,n),[n]),r.flags|=2048,Sv(9,cV.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=wa(),e=di.identifierPrefix;if(ar){var t=Tl,r=Sl;t=(r&~(1<<32-ia(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=wv++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=q$++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Z$={readContext:Po,useCallback:yV,useContext:Po,useEffect:jR,useImperativeHandle:vV,useInsertionEffect:pV,useLayoutEffect:mV,useMemo:_V,useReducer:gT,useRef:fV,useState:function(){return gT(Ev)},useDebugValue:GR,useDeferredValue:function(n){var e=No();return xV(e,Gr.memoizedState,n)},useTransition:function(){var n=gT(Ev)[0],e=No().memoizedState;return[n,e]},useMutableSource:oV,useSyncExternalStore:aV,useId:wV,unstable_isNewReconciler:!1},J$={readContext:Po,useCallback:yV,useContext:Po,useEffect:jR,useImperativeHandle:vV,useInsertionEffect:pV,useLayoutEffect:mV,useMemo:_V,useReducer:vT,useRef:fV,useState:function(){return vT(Ev)},useDebugValue:GR,useDeferredValue:function(n){var e=No();return Gr===null?e.memoizedState=n:xV(e,Gr.memoizedState,n)},useTransition:function(){var n=vT(Ev)[0],e=No().memoizedState;return[n,e]},useMutableSource:oV,useSyncExternalStore:aV,useId:wV,unstable_isNewReconciler:!1};function Go(n,e){if(n&&n.defaultProps){e=mr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function kA(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:mr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var V1={isMounted:function(n){return(n=n._reactInternals)?ld(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=cs(),i=qc(n),s=Rl(r,i);s.payload=e,t!=null&&(s.callback=t),e=Wc(n,s,i),e!==null&&(sa(e,n,i,r),Ix(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=cs(),i=qc(n),s=Rl(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Wc(n,s,i),e!==null&&(sa(e,n,i,r),Ix(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=cs(),r=qc(n),i=Rl(t,r);i.tag=2,e!=null&&(i.callback=e),e=Wc(n,i,r),e!==null&&(sa(e,n,r,t),Ix(e,n,r))}};function Lk(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!mv(t,r)||!mv(i,s):!0}function bV(n,e,t){var r=!1,i=uu,s=e.contextType;return typeof s=="object"&&s!==null?s=Po(s):(i=Ls(e)?jh:qi.current,r=e.contextTypes,s=(r=r!=null)?_p(n,i):uu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=V1,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function Dk(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&V1.enqueueReplaceState(e,e.state,null)}function LA(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},OR(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Po(s):(s=Ls(e)?jh:qi.current,i.context=_p(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kA(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&V1.enqueueReplaceState(i,i.state,null),Sw(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Sp(n,e){try{var t="",r=e;do t+=MW(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function yT(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function DA(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var e7=typeof WeakMap=="function"?WeakMap:Map;function AV(n,e,t){t=Rl(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Cw||(Cw=!0,WA=r),DA(n,e)},t}function MV(n,e,t){t=Rl(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){DA(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){DA(n,e),typeof r!="function"&&($c===null?$c=new Set([this]):$c.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Ok(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new e7;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=p7.bind(null,n,e,t),e.then(n,n))}function Fk(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Uk(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Rl(-1,1),e.tag=2,Wc(t,e,1))),t.lanes|=1),n)}var t7=ql.ReactCurrentOwner,Ps=!1;function os(n,e,t,r){e.child=n===null?nV(e,null,t,r):wp(e,n.child,t,r)}function Vk(n,e,t,r,i){t=t.render;var s=e.ref;return Qf(e,i),r=BR(n,e,t,r,s,i),t=HR(),n!==null&&!Ps?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ol(n,e,i)):(ar&&t&&RR(e),e.flags|=1,os(n,e,r,i),e.child)}function zk(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!ZR(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,CV(n,e,s,r,i)):(n=Ox(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:mv,t(o,r)&&n.ref===e.ref)return Ol(n,e,i)}return e.flags|=1,n=Xc(s,r),n.ref=e.ref,n.return=e,e.child=n}function CV(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(mv(s,r)&&n.ref===e.ref)if(Ps=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ps=!0);else return e.lanes=n.lanes,Ol(n,e,i)}return OA(n,e,t,r,i)}function RV(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(Ff,Ks),Ks|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Xn(Ff,Ks),Ks|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Xn(Ff,Ks),Ks|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Xn(Ff,Ks),Ks|=r;return os(n,e,i,t),e.child}function IV(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function OA(n,e,t,r,i){var s=Ls(t)?jh:qi.current;return s=_p(e,s),Qf(e,i),t=BR(n,e,t,r,s,i),r=HR(),n!==null&&!Ps?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ol(n,e,i)):(ar&&r&&RR(e),e.flags|=1,os(n,e,t,i),e.child)}function Bk(n,e,t,r,i){if(Ls(t)){var s=!0;yw(e)}else s=!1;if(Qf(e,i),e.stateNode===null)kx(n,e),bV(e,t,r),LA(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Po(c):(c=Ls(t)?jh:qi.current,c=_p(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Dk(e,o,r,c),xc=!1;var p=e.memoizedState;o.state=p,Sw(e,r,o,i),l=e.memoizedState,a!==r||p!==l||ks.current||xc?(typeof u=="function"&&(kA(e,t,u,r),l=e.memoizedState),(a=xc||Lk(e,t,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,iV(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Go(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Po(l):(l=Ls(t)?jh:qi.current,l=_p(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Dk(e,o,r,l),xc=!1,p=e.memoizedState,o.state=p,Sw(e,r,o,i);var v=e.memoizedState;a!==f||p!==v||ks.current||xc?(typeof m=="function"&&(kA(e,t,m,r),v=e.memoizedState),(c=xc||Lk(e,t,c,r,p,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return FA(n,e,t,r,s,i)}function FA(n,e,t,r,i,s){IV(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ak(e,t,!1),Ol(n,e,s);r=e.stateNode,t7.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=wp(e,n.child,null,s),e.child=wp(e,null,a,s)):os(n,e,a,s),e.memoizedState=r.state,i&&Ak(e,t,!0),e.child}function PV(n){var e=n.stateNode;e.pendingContext?bk(n,e.pendingContext,e.pendingContext!==e.context):e.context&&bk(n,e.context,!1),FR(n,e.containerInfo)}function Hk(n,e,t,r,i){return xp(),PR(i),e.flags|=256,os(n,e,t,r),e.child}var UA={dehydrated:null,treeContext:null,retryLane:0};function VA(n){return{baseLanes:n,cachePool:null,transitions:null}}function NV(n,e,t){var r=e.pendingProps,i=hr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Xn(hr,i&1),n===null)return PA(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=H1(o,r,0,null),n=Lh(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=VA(t),e.memoizedState=UA,n):WR(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return n7(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xc(a,s):(s=Lh(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?VA(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=UA,r}return s=n.child,n=s.sibling,r=Xc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function WR(n,e){return e=H1({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function a0(n,e,t,r){return r!==null&&PR(r),wp(e,n.child,null,t),n=WR(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function n7(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=yT(Error(Oe(422))),a0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=H1({mode:"visible",children:r.children},i,0,null),s=Lh(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wp(e,n.child,null,o),e.child.memoizedState=VA(o),e.memoizedState=UA,s);if(!(e.mode&1))return a0(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Oe(419)),r=yT(s,r,void 0),a0(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ps||a){if(r=di,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Dl(n,i),sa(r,n,i,-1))}return QR(),r=yT(Error(Oe(421))),a0(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=m7.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Js=Gc(i.nextSibling),to=e,ar=!0,Ko=null,n!==null&&(So[To++]=Sl,So[To++]=Tl,So[To++]=Gh,Sl=n.id,Tl=n.overflow,Gh=e),e=WR(e,r.children),e.flags|=4096,e)}function jk(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),NA(n.return,e,t)}function _T(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function kV(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(os(n,e,r.children,t),r=hr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jk(n,t,e);else if(n.tag===19)jk(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Xn(hr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Tw(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),_T(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Tw(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}_T(e,!0,t,null,s);break;case"together":_T(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ol(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),$h|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Oe(153));if(e.child!==null){for(n=e.child,t=Xc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Xc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function r7(n,e,t){switch(e.tag){case 3:PV(e),xp();break;case 5:sV(e);break;case 1:Ls(e.type)&&yw(e);break;case 4:FR(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Xn(ww,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xn(hr,hr.current&1),e.flags|=128,null):t&e.child.childLanes?NV(n,e,t):(Xn(hr,hr.current&1),n=Ol(n,e,t),n!==null?n.sibling:null);Xn(hr,hr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return kV(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xn(hr,hr.current),r)break;return null;case 22:case 23:return e.lanes=0,RV(n,e,t)}return Ol(n,e,t)}var LV,zA,DV,OV;LV=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};zA=function(){};DV=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,wh(Na.current);var s=null;switch(t){case"input":i=lA(n,i),r=lA(n,r),s=[];break;case"select":i=mr({},i,{value:void 0}),r=mr({},r,{value:void 0}),s=[];break;case"textarea":i=hA(n,i),r=hA(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=gw)}fA(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(lv.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(lv.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};OV=function(n,e,t,r){t!==r&&(e.flags|=4)};function Gm(n,e){if(!ar)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Di(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function i7(n,e,t){var r=e.pendingProps;switch(IR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(e),null;case 1:return Ls(e.type)&&vw(),Di(e),null;case 3:return r=e.stateNode,Ep(),er(ks),er(qi),VR(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(s0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ko!==null&&(XA(Ko),Ko=null))),zA(n,e),Di(e),null;case 5:UR(e);var i=wh(xv.current);if(t=e.type,n!==null&&e.stateNode!=null)DV(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Oe(166));return Di(e),null}if(n=wh(Na.current),s0(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Aa]=e,r[yv]=s,n=(e.mode&1)!==0,t){case"dialog":Kn("cancel",r),Kn("close",r);break;case"iframe":case"object":case"embed":Kn("load",r);break;case"video":case"audio":for(i=0;i<wg.length;i++)Kn(wg[i],r);break;case"source":Kn("error",r);break;case"img":case"image":case"link":Kn("error",r),Kn("load",r);break;case"details":Kn("toggle",r);break;case"input":ZN(r,s),Kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Kn("invalid",r);break;case"textarea":ek(r,s),Kn("invalid",r)}fA(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&i0(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&i0(r.textContent,a,n),i=["children",""+a]):lv.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kn("scroll",r)}switch(t){case"input":K_(r),JN(r,s,!0);break;case"textarea":K_(r),tk(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=u4(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Aa]=e,n[yv]=r,LV(n,e,!1,!1),e.stateNode=n;e:{switch(o=pA(t,r),t){case"dialog":Kn("cancel",n),Kn("close",n),i=r;break;case"iframe":case"object":case"embed":Kn("load",n),i=r;break;case"video":case"audio":for(i=0;i<wg.length;i++)Kn(wg[i],n);i=r;break;case"source":Kn("error",n),i=r;break;case"img":case"image":case"link":Kn("error",n),Kn("load",n),i=r;break;case"details":Kn("toggle",n),i=r;break;case"input":ZN(n,r),i=lA(n,r),Kn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=mr({},r,{value:void 0}),Kn("invalid",n);break;case"textarea":ek(n,r),i=hA(n,r),Kn("invalid",n);break;default:i=r}fA(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?f4(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&h4(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&cv(n,l):typeof l=="number"&&cv(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(lv.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kn("scroll",n):l!=null&&mR(n,s,l,o))}switch(t){case"input":K_(n),JN(n,r,!1);break;case"textarea":K_(n),tk(n);break;case"option":r.value!=null&&n.setAttribute("value",""+cu(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?qf(n,!!r.multiple,s,!1):r.defaultValue!=null&&qf(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=gw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Di(e),null;case 6:if(n&&e.stateNode!=null)OV(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Oe(166));if(t=wh(xv.current),wh(Na.current),s0(e)){if(r=e.stateNode,t=e.memoizedProps,r[Aa]=e,(s=r.nodeValue!==t)&&(n=to,n!==null))switch(n.tag){case 3:i0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&i0(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Aa]=e,e.stateNode=r}return Di(e),null;case 13:if(er(hr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ar&&Js!==null&&e.mode&1&&!(e.flags&128))eV(),xp(),e.flags|=98560,s=!1;else if(s=s0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Oe(317));s[Aa]=e}else xp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Di(e),s=!1}else Ko!==null&&(XA(Ko),Ko=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||hr.current&1?Xr===0&&(Xr=3):QR())),e.updateQueue!==null&&(e.flags|=4),Di(e),null);case 4:return Ep(),zA(n,e),n===null&&gv(e.stateNode.containerInfo),Di(e),null;case 10:return LR(e.type._context),Di(e),null;case 17:return Ls(e.type)&&vw(),Di(e),null;case 19:if(er(hr),s=e.memoizedState,s===null)return Di(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Gm(s,!1);else{if(Xr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Tw(n),o!==null){for(e.flags|=128,Gm(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Xn(hr,hr.current&1|2),e.child}n=n.sibling}s.tail!==null&&Pr()>Tp&&(e.flags|=128,r=!0,Gm(s,!1),e.lanes=4194304)}else{if(!r)if(n=Tw(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Gm(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ar)return Di(e),null}else 2*Pr()-s.renderingStartTime>Tp&&t!==1073741824&&(e.flags|=128,r=!0,Gm(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pr(),e.sibling=null,t=hr.current,Xn(hr,r?t&1|2:t&1),e):(Di(e),null);case 22:case 23:return KR(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ks&1073741824&&(Di(e),e.subtreeFlags&6&&(e.flags|=8192)):Di(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function s7(n,e){switch(IR(e),e.tag){case 1:return Ls(e.type)&&vw(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ep(),er(ks),er(qi),VR(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return UR(e),null;case 13:if(er(hr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));xp()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return er(hr),null;case 4:return Ep(),null;case 10:return LR(e.type._context),null;case 22:case 23:return KR(),null;case 24:return null;default:return null}}var l0=!1,Hi=!1,o7=typeof WeakSet=="function"?WeakSet:Set,ct=null;function Of(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Er(n,e,r)}else t.current=null}function BA(n,e,t){try{t()}catch(r){Er(n,e,r)}}var Gk=!1;function a7(n,e){if(TA=fw,n=B4(),CR(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(bA={focusedElem:n,selectionRange:t},fw=!1,ct=e;ct!==null;)if(e=ct,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ct=n;else for(;ct!==null;){e=ct;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,_=v.memoizedState,g=e.stateNode,E=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Go(e.type,w),_);g.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(b){Er(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,ct=n;break}ct=e.return}return v=Gk,Gk=!1,v}function Gg(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&BA(e,t,s)}i=i.next}while(i!==r)}}function z1(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function HA(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function FV(n){var e=n.alternate;e!==null&&(n.alternate=null,FV(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Aa],delete e[yv],delete e[CA],delete e[j$],delete e[G$])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function UV(n){return n.tag===5||n.tag===3||n.tag===4}function Wk(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||UV(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jA(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=gw));else if(r!==4&&(n=n.child,n!==null))for(jA(n,e,t),n=n.sibling;n!==null;)jA(n,e,t),n=n.sibling}function GA(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(GA(n,e,t),n=n.sibling;n!==null;)GA(n,e,t),n=n.sibling}var mi=null,Yo=!1;function ic(n,e,t){for(t=t.child;t!==null;)VV(n,e,t),t=t.sibling}function VV(n,e,t){if(Pa&&typeof Pa.onCommitFiberUnmount=="function")try{Pa.onCommitFiberUnmount(N1,t)}catch{}switch(t.tag){case 5:Hi||Of(t,e);case 6:var r=mi,i=Yo;mi=null,ic(n,e,t),mi=r,Yo=i,mi!==null&&(Yo?(n=mi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):mi.removeChild(t.stateNode));break;case 18:mi!==null&&(Yo?(n=mi,t=t.stateNode,n.nodeType===8?dT(n.parentNode,t):n.nodeType===1&&dT(n,t),fv(n)):dT(mi,t.stateNode));break;case 4:r=mi,i=Yo,mi=t.stateNode.containerInfo,Yo=!0,ic(n,e,t),mi=r,Yo=i;break;case 0:case 11:case 14:case 15:if(!Hi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&BA(t,e,o),i=i.next}while(i!==r)}ic(n,e,t);break;case 1:if(!Hi&&(Of(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Er(t,e,a)}ic(n,e,t);break;case 21:ic(n,e,t);break;case 22:t.mode&1?(Hi=(r=Hi)||t.memoizedState!==null,ic(n,e,t),Hi=r):ic(n,e,t);break;default:ic(n,e,t)}}function $k(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new o7),e.forEach(function(r){var i=g7.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Uo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mi=a.stateNode,Yo=!1;break e;case 3:mi=a.stateNode.containerInfo,Yo=!0;break e;case 4:mi=a.stateNode.containerInfo,Yo=!0;break e}a=a.return}if(mi===null)throw Error(Oe(160));VV(s,o,i),mi=null,Yo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Er(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zV(e,n),e=e.sibling}function zV(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Uo(e,n),xa(n),r&4){try{Gg(3,n,n.return),z1(3,n)}catch(w){Er(n,n.return,w)}try{Gg(5,n,n.return)}catch(w){Er(n,n.return,w)}}break;case 1:Uo(e,n),xa(n),r&512&&t!==null&&Of(t,t.return);break;case 5:if(Uo(e,n),xa(n),r&512&&t!==null&&Of(t,t.return),n.flags&32){var i=n.stateNode;try{cv(i,"")}catch(w){Er(n,n.return,w)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&l4(i,s),pA(a,o);var c=pA(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?f4(i,f):u==="dangerouslySetInnerHTML"?h4(i,f):u==="children"?cv(i,f):mR(i,u,f,c)}switch(a){case"input":cA(i,s);break;case"textarea":c4(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?qf(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?qf(i,!!s.multiple,s.defaultValue,!0):qf(i,!!s.multiple,s.multiple?[]:"",!1))}i[yv]=s}catch(w){Er(n,n.return,w)}}break;case 6:if(Uo(e,n),xa(n),r&4){if(n.stateNode===null)throw Error(Oe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(w){Er(n,n.return,w)}}break;case 3:if(Uo(e,n),xa(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{fv(e.containerInfo)}catch(w){Er(n,n.return,w)}break;case 4:Uo(e,n),xa(n);break;case 13:Uo(e,n),xa(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(XR=Pr())),r&4&&$k(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Hi=(c=Hi)||u,Uo(e,n),Hi=c):Uo(e,n),xa(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(ct=n,u=n.child;u!==null;){for(f=ct=u;ct!==null;){switch(p=ct,m=p.child,p.tag){case 0:case 11:case 14:case 15:Gg(4,p,p.return);break;case 1:Of(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Er(r,t,w)}}break;case 5:Of(p,p.return);break;case 22:if(p.memoizedState!==null){Xk(f);continue}}m!==null?(m.return=p,ct=m):Xk(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=d4("display",o))}catch(w){Er(n,n.return,w)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){Er(n,n.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Uo(e,n),xa(n),r&4&&$k(n);break;case 21:break;default:Uo(e,n),xa(n)}}function xa(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(UV(t)){var r=t;break e}t=t.return}throw Error(Oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cv(i,""),r.flags&=-33);var s=Wk(n);GA(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Wk(n);jA(n,a,o);break;default:throw Error(Oe(161))}}catch(l){Er(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function l7(n,e,t){ct=n,BV(n)}function BV(n,e,t){for(var r=(n.mode&1)!==0;ct!==null;){var i=ct,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||l0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Hi;a=l0;var c=Hi;if(l0=o,(Hi=l)&&!c)for(ct=i;ct!==null;)o=ct,l=o.child,o.tag===22&&o.memoizedState!==null?Yk(i):l!==null?(l.return=o,ct=l):Yk(i);for(;s!==null;)ct=s,BV(s),s=s.sibling;ct=i,l0=a,Hi=c}qk(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ct=s):qk(n)}}function qk(n){for(;ct!==null;){var e=ct;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hi||z1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hi)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Go(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Pk(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Pk(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&fv(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}Hi||e.flags&512&&HA(e)}catch(p){Er(e,e.return,p)}}if(e===n){ct=null;break}if(t=e.sibling,t!==null){t.return=e.return,ct=t;break}ct=e.return}}function Xk(n){for(;ct!==null;){var e=ct;if(e===n){ct=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ct=t;break}ct=e.return}}function Yk(n){for(;ct!==null;){var e=ct;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{z1(4,e)}catch(l){Er(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Er(e,i,l)}}var s=e.return;try{HA(e)}catch(l){Er(e,s,l)}break;case 5:var o=e.return;try{HA(e)}catch(l){Er(e,o,l)}}}catch(l){Er(e,e.return,l)}if(e===n){ct=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ct=a;break}ct=e.return}}var c7=Math.ceil,Mw=ql.ReactCurrentDispatcher,$R=ql.ReactCurrentOwner,Co=ql.ReactCurrentBatchConfig,wn=0,di=null,Ur=null,wi=0,Ks=0,Ff=Mu(0),Xr=0,Tv=null,$h=0,B1=0,qR=0,Wg=null,Ms=null,XR=0,Tp=1/0,ml=null,Cw=!1,WA=null,$c=null,c0=!1,Oc=null,Rw=0,$g=0,$A=null,Lx=-1,Dx=0;function cs(){return wn&6?Pr():Lx!==-1?Lx:Lx=Pr()}function qc(n){return n.mode&1?wn&2&&wi!==0?wi&-wi:$$.transition!==null?(Dx===0&&(Dx=b4()),Dx):(n=Un,n!==0||(n=window.event,n=n===void 0?16:N4(n.type)),n):1}function sa(n,e,t,r){if(50<$g)throw $g=0,$A=null,Error(Oe(185));Ty(n,t,r),(!(wn&2)||n!==di)&&(n===di&&(!(wn&2)&&(B1|=t),Xr===4&&Tc(n,wi)),Ds(n,r),t===1&&wn===0&&!(e.mode&1)&&(Tp=Pr()+500,F1&&Cu()))}function Ds(n,e){var t=n.callbackNode;$W(n,e);var r=dw(n,n===di?wi:0);if(r===0)t!==null&&ik(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&ik(t),e===1)n.tag===0?W$(Kk.bind(null,n)):Q4(Kk.bind(null,n)),B$(function(){!(wn&6)&&Cu()}),t=null;else{switch(A4(r)){case 1:t=xR;break;case 4:t=S4;break;case 16:t=hw;break;case 536870912:t=T4;break;default:t=hw}t=YV(t,HV.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function HV(n,e){if(Lx=-1,Dx=0,wn&6)throw Error(Oe(327));var t=n.callbackNode;if(Zf()&&n.callbackNode!==t)return null;var r=dw(n,n===di?wi:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Iw(n,r);else{e=r;var i=wn;wn|=2;var s=GV();(di!==n||wi!==e)&&(ml=null,Tp=Pr()+500,kh(n,e));do try{d7();break}catch(a){jV(n,a)}while(!0);kR(),Mw.current=s,wn=i,Ur!==null?e=0:(di=null,wi=0,e=Xr)}if(e!==0){if(e===2&&(i=_A(n),i!==0&&(r=i,e=qA(n,i))),e===1)throw t=Tv,kh(n,0),Tc(n,r),Ds(n,Pr()),t;if(e===6)Tc(n,r);else{if(i=n.current.alternate,!(r&30)&&!u7(i)&&(e=Iw(n,r),e===2&&(s=_A(n),s!==0&&(r=s,e=qA(n,s))),e===1))throw t=Tv,kh(n,0),Tc(n,r),Ds(n,Pr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Oe(345));case 2:dh(n,Ms,ml);break;case 3:if(Tc(n,r),(r&130023424)===r&&(e=XR+500-Pr(),10<e)){if(dw(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){cs(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=MA(dh.bind(null,n,Ms,ml),e);break}dh(n,Ms,ml);break;case 4:if(Tc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-ia(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Pr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c7(r/1960))-r,10<r){n.timeoutHandle=MA(dh.bind(null,n,Ms,ml),r);break}dh(n,Ms,ml);break;case 5:dh(n,Ms,ml);break;default:throw Error(Oe(329))}}}return Ds(n,Pr()),n.callbackNode===t?HV.bind(null,n):null}function qA(n,e){var t=Wg;return n.current.memoizedState.isDehydrated&&(kh(n,e).flags|=256),n=Iw(n,e),n!==2&&(e=Ms,Ms=t,e!==null&&XA(e)),n}function XA(n){Ms===null?Ms=n:Ms.push.apply(Ms,n)}function u7(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!oa(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tc(n,e){for(e&=~qR,e&=~B1,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ia(e),r=1<<t;n[t]=-1,e&=~r}}function Kk(n){if(wn&6)throw Error(Oe(327));Zf();var e=dw(n,0);if(!(e&1))return Ds(n,Pr()),null;var t=Iw(n,e);if(n.tag!==0&&t===2){var r=_A(n);r!==0&&(e=r,t=qA(n,r))}if(t===1)throw t=Tv,kh(n,0),Tc(n,e),Ds(n,Pr()),t;if(t===6)throw Error(Oe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,dh(n,Ms,ml),Ds(n,Pr()),null}function YR(n,e){var t=wn;wn|=1;try{return n(e)}finally{wn=t,wn===0&&(Tp=Pr()+500,F1&&Cu())}}function qh(n){Oc!==null&&Oc.tag===0&&!(wn&6)&&Zf();var e=wn;wn|=1;var t=Co.transition,r=Un;try{if(Co.transition=null,Un=1,n)return n()}finally{Un=r,Co.transition=t,wn=e,!(wn&6)&&Cu()}}function KR(){Ks=Ff.current,er(Ff)}function kh(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,z$(t)),Ur!==null)for(t=Ur.return;t!==null;){var r=t;switch(IR(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vw();break;case 3:Ep(),er(ks),er(qi),VR();break;case 5:UR(r);break;case 4:Ep();break;case 13:er(hr);break;case 19:er(hr);break;case 10:LR(r.type._context);break;case 22:case 23:KR()}t=t.return}if(di=n,Ur=n=Xc(n.current,null),wi=Ks=e,Xr=0,Tv=null,qR=B1=$h=0,Ms=Wg=null,xh!==null){for(e=0;e<xh.length;e++)if(t=xh[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}xh=null}return n}function jV(n,e){do{var t=Ur;try{if(kR(),Px.current=Aw,bw){for(var r=pr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}bw=!1}if(Wh=0,ci=Gr=pr=null,jg=!1,wv=0,$R.current=null,t===null||t.return===null){Xr=1,Tv=e,Ur=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=wi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Fk(o);if(m!==null){m.flags&=-257,Uk(m,o,a,s,e),m.mode&1&&Ok(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){Ok(s,c,e),QR();break e}l=Error(Oe(426))}}else if(ar&&a.mode&1){var _=Fk(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Uk(_,o,a,s,e),PR(Sp(l,a));break e}}s=l=Sp(l,a),Xr!==4&&(Xr=2),Wg===null?Wg=[s]:Wg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=AV(s,l,e);Ik(s,g);break e;case 1:a=l;var E=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($c===null||!$c.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=MV(s,a,e);Ik(s,b);break e}}s=s.return}while(s!==null)}$V(t)}catch(k){e=k,Ur===t&&t!==null&&(Ur=t=t.return);continue}break}while(!0)}function GV(){var n=Mw.current;return Mw.current=Aw,n===null?Aw:n}function QR(){(Xr===0||Xr===3||Xr===2)&&(Xr=4),di===null||!($h&268435455)&&!(B1&268435455)||Tc(di,wi)}function Iw(n,e){var t=wn;wn|=2;var r=GV();(di!==n||wi!==e)&&(ml=null,kh(n,e));do try{h7();break}catch(i){jV(n,i)}while(!0);if(kR(),wn=t,Mw.current=r,Ur!==null)throw Error(Oe(261));return di=null,wi=0,Xr}function h7(){for(;Ur!==null;)WV(Ur)}function d7(){for(;Ur!==null&&!FW();)WV(Ur)}function WV(n){var e=XV(n.alternate,n,Ks);n.memoizedProps=n.pendingProps,e===null?$V(n):Ur=e,$R.current=null}function $V(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=s7(t,e),t!==null){t.flags&=32767,Ur=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xr=6,Ur=null;return}}else if(t=i7(t,e,Ks),t!==null){Ur=t;return}if(e=e.sibling,e!==null){Ur=e;return}Ur=e=n}while(e!==null);Xr===0&&(Xr=5)}function dh(n,e,t){var r=Un,i=Co.transition;try{Co.transition=null,Un=1,f7(n,e,t,r)}finally{Co.transition=i,Un=r}return null}function f7(n,e,t,r){do Zf();while(Oc!==null);if(wn&6)throw Error(Oe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Oe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(qW(n,s),n===di&&(Ur=di=null,wi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||c0||(c0=!0,YV(hw,function(){return Zf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Co.transition,Co.transition=null;var o=Un;Un=1;var a=wn;wn|=4,$R.current=null,a7(n,t),zV(t,n),k$(bA),fw=!!TA,bA=TA=null,n.current=t,l7(t),UW(),wn=a,Un=o,Co.transition=s}else n.current=t;if(c0&&(c0=!1,Oc=n,Rw=i),s=n.pendingLanes,s===0&&($c=null),BW(t.stateNode),Ds(n,Pr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cw)throw Cw=!1,n=WA,WA=null,n;return Rw&1&&n.tag!==0&&Zf(),s=n.pendingLanes,s&1?n===$A?$g++:($g=0,$A=n):$g=0,Cu(),null}function Zf(){if(Oc!==null){var n=A4(Rw),e=Co.transition,t=Un;try{if(Co.transition=null,Un=16>n?16:n,Oc===null)var r=!1;else{if(n=Oc,Oc=null,Rw=0,wn&6)throw Error(Oe(331));var i=wn;for(wn|=4,ct=n.current;ct!==null;){var s=ct,o=s.child;if(ct.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ct=c;ct!==null;){var u=ct;switch(u.tag){case 0:case 11:case 15:Gg(8,u,s)}var f=u.child;if(f!==null)f.return=u,ct=f;else for(;ct!==null;){u=ct;var p=u.sibling,m=u.return;if(FV(u),u===c){ct=null;break}if(p!==null){p.return=m,ct=p;break}ct=m}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}ct=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ct=o;else e:for(;ct!==null;){if(s=ct,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gg(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,ct=g;break e}ct=s.return}}var E=n.current;for(ct=E;ct!==null;){o=ct;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ct=S;else e:for(o=E;ct!==null;){if(a=ct,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:z1(9,a)}}catch(k){Er(a,a.return,k)}if(a===o){ct=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ct=b;break e}ct=a.return}}if(wn=i,Cu(),Pa&&typeof Pa.onPostCommitFiberRoot=="function")try{Pa.onPostCommitFiberRoot(N1,n)}catch{}r=!0}return r}finally{Un=t,Co.transition=e}}return!1}function Qk(n,e,t){e=Sp(t,e),e=AV(n,e,1),n=Wc(n,e,1),e=cs(),n!==null&&(Ty(n,1,e),Ds(n,e))}function Er(n,e,t){if(n.tag===3)Qk(n,n,t);else for(;e!==null;){if(e.tag===3){Qk(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($c===null||!$c.has(r))){n=Sp(t,n),n=MV(e,n,1),e=Wc(e,n,1),n=cs(),e!==null&&(Ty(e,1,n),Ds(e,n));break}}e=e.return}}function p7(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=cs(),n.pingedLanes|=n.suspendedLanes&t,di===n&&(wi&t)===t&&(Xr===4||Xr===3&&(wi&130023424)===wi&&500>Pr()-XR?kh(n,0):qR|=t),Ds(n,e)}function qV(n,e){e===0&&(n.mode&1?(e=J_,J_<<=1,!(J_&130023424)&&(J_=4194304)):e=1);var t=cs();n=Dl(n,e),n!==null&&(Ty(n,e,t),Ds(n,t))}function m7(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),qV(n,t)}function g7(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(e),qV(n,t)}var XV;XV=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ks.current)Ps=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ps=!1,r7(n,e,t);Ps=!!(n.flags&131072)}else Ps=!1,ar&&e.flags&1048576&&Z4(e,xw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kx(n,e),n=e.pendingProps;var i=_p(e,qi.current);Qf(e,t),i=BR(null,e,r,n,i,t);var s=HR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ls(r)?(s=!0,yw(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,OR(e),i.updater=V1,e.stateNode=i,i._reactInternals=e,LA(e,r,n,t),e=FA(null,e,r,!0,s,t)):(e.tag=0,ar&&s&&RR(e),os(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(kx(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=y7(r),n=Go(r,n),i){case 0:e=OA(null,e,r,n,t);break e;case 1:e=Bk(null,e,r,n,t);break e;case 11:e=Vk(null,e,r,n,t);break e;case 14:e=zk(null,e,r,Go(r.type,n),t);break e}throw Error(Oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Go(r,i),OA(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Go(r,i),Bk(n,e,r,i,t);case 3:e:{if(PV(e),n===null)throw Error(Oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,iV(n,e),Sw(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sp(Error(Oe(423)),e),e=Hk(n,e,r,t,i);break e}else if(r!==i){i=Sp(Error(Oe(424)),e),e=Hk(n,e,r,t,i);break e}else for(Js=Gc(e.stateNode.containerInfo.firstChild),to=e,ar=!0,Ko=null,t=nV(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xp(),r===i){e=Ol(n,e,t);break e}os(n,e,r,t)}e=e.child}return e;case 5:return sV(e),n===null&&PA(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,AA(r,i)?o=null:s!==null&&AA(r,s)&&(e.flags|=32),IV(n,e),os(n,e,o,t),e.child;case 6:return n===null&&PA(e),null;case 13:return NV(n,e,t);case 4:return FR(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=wp(e,null,r,t):os(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Go(r,i),Vk(n,e,r,i,t);case 7:return os(n,e,e.pendingProps,t),e.child;case 8:return os(n,e,e.pendingProps.children,t),e.child;case 12:return os(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Xn(ww,r._currentValue),r._currentValue=o,s!==null)if(oa(s.value,o)){if(s.children===i.children&&!ks.current){e=Ol(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Rl(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),NA(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Oe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),NA(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}os(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qf(e,t),i=Po(i),r=r(i),e.flags|=1,os(n,e,r,t),e.child;case 14:return r=e.type,i=Go(r,e.pendingProps),i=Go(r.type,i),zk(n,e,r,i,t);case 15:return CV(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Go(r,i),kx(n,e),e.tag=1,Ls(r)?(n=!0,yw(e)):n=!1,Qf(e,t),bV(e,r,i),LA(e,r,i,t),FA(null,e,r,!0,n,t);case 19:return kV(n,e,t);case 22:return RV(n,e,t)}throw Error(Oe(156,e.tag))};function YV(n,e){return E4(n,e)}function v7(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mo(n,e,t,r){return new v7(n,e,t,r)}function ZR(n){return n=n.prototype,!(!n||!n.isReactComponent)}function y7(n){if(typeof n=="function")return ZR(n)?1:0;if(n!=null){if(n=n.$$typeof,n===vR)return 11;if(n===yR)return 14}return 2}function Xc(n,e){var t=n.alternate;return t===null?(t=Mo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ox(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")ZR(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Mf:return Lh(t.children,i,s,e);case gR:o=8,i|=8;break;case iA:return n=Mo(12,t,e,i|2),n.elementType=iA,n.lanes=s,n;case sA:return n=Mo(13,t,e,i),n.elementType=sA,n.lanes=s,n;case oA:return n=Mo(19,t,e,i),n.elementType=oA,n.lanes=s,n;case s4:return H1(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case r4:o=10;break e;case i4:o=9;break e;case vR:o=11;break e;case yR:o=14;break e;case _c:o=16,r=null;break e}throw Error(Oe(130,n==null?n:typeof n,""))}return e=Mo(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Lh(n,e,t,r){return n=Mo(7,n,r,e),n.lanes=t,n}function H1(n,e,t,r){return n=Mo(22,n,r,e),n.elementType=s4,n.lanes=t,n.stateNode={isHidden:!1},n}function xT(n,e,t){return n=Mo(6,n,null,e),n.lanes=t,n}function wT(n,e,t){return e=Mo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function _7(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tT(0),this.expirationTimes=tT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function JR(n,e,t,r,i,s,o,a,l){return n=new _7(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},OR(s),n}function x7(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Af,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function KV(n){if(!n)return uu;n=n._reactInternals;e:{if(ld(n)!==n||n.tag!==1)throw Error(Oe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ls(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(n.tag===1){var t=n.type;if(Ls(t))return K4(n,t,e)}return e}function QV(n,e,t,r,i,s,o,a,l){return n=JR(t,r,!0,n,i,s,o,a,l),n.context=KV(null),t=n.current,r=cs(),i=qc(t),s=Rl(r,i),s.callback=e??null,Wc(t,s,i),n.current.lanes=i,Ty(n,i,r),Ds(n,r),n}function j1(n,e,t,r){var i=e.current,s=cs(),o=qc(i);return t=KV(t),e.context===null?e.context=t:e.pendingContext=t,e=Rl(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Wc(i,e,o),n!==null&&(sa(n,i,o,s),Ix(n,i,o)),o}function Pw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Zk(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function eI(n,e){Zk(n,e),(n=n.alternate)&&Zk(n,e)}function w7(){return null}var ZV=typeof reportError=="function"?reportError:function(n){console.error(n)};function tI(n){this._internalRoot=n}G1.prototype.render=tI.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Oe(409));j1(n,e,null,null)};G1.prototype.unmount=tI.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;qh(function(){j1(null,n,null,null)}),e[Ll]=null}};function G1(n){this._internalRoot=n}G1.prototype.unstable_scheduleHydration=function(n){if(n){var e=R4();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Sc.length&&e!==0&&e<Sc[t].priority;t++);Sc.splice(t,0,n),t===0&&P4(n)}};function nI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function W1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Jk(){}function E7(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Pw(o);s.call(c)}}var o=QV(e,r,n,0,null,!1,!1,"",Jk);return n._reactRootContainer=o,n[Ll]=o.current,gv(n.nodeType===8?n.parentNode:n),qh(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Pw(l);a.call(c)}}var l=JR(n,0,!1,null,null,!1,!1,"",Jk);return n._reactRootContainer=l,n[Ll]=l.current,gv(n.nodeType===8?n.parentNode:n),qh(function(){j1(e,l,t,r)}),l}function $1(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Pw(o);a.call(l)}}j1(e,o,n,i)}else o=E7(t,e,n,i,r);return Pw(o)}M4=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=xg(e.pendingLanes);t!==0&&(wR(e,t|1),Ds(e,Pr()),!(wn&6)&&(Tp=Pr()+500,Cu()))}break;case 13:qh(function(){var r=Dl(n,1);if(r!==null){var i=cs();sa(r,n,1,i)}}),eI(n,1)}};ER=function(n){if(n.tag===13){var e=Dl(n,134217728);if(e!==null){var t=cs();sa(e,n,134217728,t)}eI(n,134217728)}};C4=function(n){if(n.tag===13){var e=qc(n),t=Dl(n,e);if(t!==null){var r=cs();sa(t,n,e,r)}eI(n,e)}};R4=function(){return Un};I4=function(n,e){var t=Un;try{return Un=n,e()}finally{Un=t}};gA=function(n,e,t){switch(e){case"input":if(cA(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=O1(r);if(!i)throw Error(Oe(90));a4(r),cA(r,i)}}}break;case"textarea":c4(n,t);break;case"select":e=t.value,e!=null&&qf(n,!!t.multiple,e,!1)}};g4=YR;v4=qh;var S7={usingClientEntryPoint:!1,Events:[Ay,Pf,O1,p4,m4,YR]},Wm={findFiberByHostInstance:_h,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T7={bundleType:Wm.bundleType,version:Wm.version,rendererPackageName:Wm.rendererPackageName,rendererConfig:Wm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ql.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=x4(n),n===null?null:n.stateNode},findFiberByHostInstance:Wm.findFiberByHostInstance||w7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var u0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!u0.isDisabled&&u0.supportsFiber)try{N1=u0.inject(T7),Pa=u0}catch{}}oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S7;oo.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nI(e))throw Error(Oe(200));return x7(n,e,null,t)};oo.createRoot=function(n,e){if(!nI(n))throw Error(Oe(299));var t=!1,r="",i=ZV;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=JR(n,1,!1,null,null,t,!1,r,i),n[Ll]=e.current,gv(n.nodeType===8?n.parentNode:n),new tI(e)};oo.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Oe(188)):(n=Object.keys(n).join(","),Error(Oe(268,n)));return n=x4(e),n=n===null?null:n.stateNode,n};oo.flushSync=function(n){return qh(n)};oo.hydrate=function(n,e,t){if(!W1(e))throw Error(Oe(200));return $1(null,n,e,!0,t)};oo.hydrateRoot=function(n,e,t){if(!nI(n))throw Error(Oe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=ZV;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=QV(e,null,n,1,t??null,i,!1,s,o),n[Ll]=e.current,gv(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new G1(e)};oo.render=function(n,e,t){if(!W1(e))throw Error(Oe(200));return $1(null,n,e,!1,t)};oo.unmountComponentAtNode=function(n){if(!W1(n))throw Error(Oe(40));return n._reactRootContainer?(qh(function(){$1(null,null,n,!1,function(){n._reactRootContainer=null,n[Ll]=null})}),!0):!1};oo.unstable_batchedUpdates=YR;oo.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!W1(t))throw Error(Oe(200));if(n==null||n._reactInternals===void 0)throw Error(Oe(38));return $1(n,e,t,!1,r)};oo.version="18.3.1-next-f1338f8080-20240426";function JV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JV)}catch(n){console.error(n)}}JV(),JU.exports=oo;var Cy=JU.exports;const ez=od(Cy);var tz,eL=Cy;tz=eL.createRoot,eL.hydrateRoot;const b7=1,A7=1e6;let ET=0;function M7(){return ET=(ET+1)%Number.MAX_SAFE_INTEGER,ET.toString()}const ST=new Map,tL=n=>{if(ST.has(n))return;const e=setTimeout(()=>{ST.delete(n),qg({type:"REMOVE_TOAST",toastId:n})},A7);ST.set(n,e)},C7=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,b7)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?tL(t):n.toasts.forEach(r=>{tL(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Fx=[];let Ux={toasts:[]};function qg(n){Ux=C7(Ux,n),Fx.forEach(e=>{e(Ux)})}function YA({...n}){const e=M7(),t=i=>qg({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>qg({type:"DISMISS_TOAST",toastId:e});return qg({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function R7(){const[n,e]=H.useState(Ux);return H.useEffect(()=>(Fx.push(e),()=>{const t=Fx.indexOf(e);t>-1&&Fx.splice(t,1)}),[n]),{...n,toast:YA,dismiss:t=>qg({type:"DISMISS_TOAST",toastId:t})}}function $r(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function nL(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function nz(...n){return e=>{let t=!1;const r=n.map(i=>{const s=nL(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():nL(n[i],null)}}}}function aa(...n){return H.useCallback(nz(...n),n)}function q1(n,e=[]){let t=[];function r(s,o){const a=H.createContext(o),l=t.length;t=[...t,o];const c=f=>{var g;const{scope:p,children:m,...v}=f,w=((g=p==null?void 0:p[n])==null?void 0:g[l])||a,_=H.useMemo(()=>v,Object.values(v));return L.jsx(w.Provider,{value:_,children:m})};c.displayName=s+"Provider";function u(f,p){var w;const m=((w=p==null?void 0:p[n])==null?void 0:w[l])||a,v=H.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>H.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return H.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,I7(i,...e)]}function I7(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return H.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Nw(n){const e=N7(n),t=H.forwardRef((r,i)=>{const{children:s,...o}=r,a=H.Children.toArray(s),l=a.find(L7);if(l){const c=l.props.children,u=a.map(f=>f===l?H.Children.count(c)>1?H.Children.only(null):H.isValidElement(c)?c.props.children:null:f);return L.jsx(e,{...o,ref:i,children:H.isValidElement(c)?H.cloneElement(c,void 0,u):null})}return L.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var P7=Nw("Slot");function N7(n){const e=H.forwardRef((t,r)=>{const{children:i,...s}=t;if(H.isValidElement(i)){const o=O7(i),a=D7(s,i.props);return i.type!==H.Fragment&&(a.ref=r?nz(r,o):o),H.cloneElement(i,a)}return H.Children.count(i)>1?H.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var rz=Symbol("radix.slottable");function k7(n){const e=({children:t})=>L.jsx(L.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=rz,e}function L7(n){return H.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===rz}function D7(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function O7(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function F7(n){const e=n+"CollectionProvider",[t,r]=q1(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:_,children:g}=w,E=Ve.useRef(null),S=Ve.useRef(new Map).current;return L.jsx(i,{scope:_,itemMap:S,collectionRef:E,children:g})};o.displayName=e;const a=n+"CollectionSlot",l=Nw(a),c=Ve.forwardRef((w,_)=>{const{scope:g,children:E}=w,S=s(a,g),b=aa(_,S.collectionRef);return L.jsx(l,{ref:b,children:E})});c.displayName=a;const u=n+"CollectionItemSlot",f="data-radix-collection-item",p=Nw(u),m=Ve.forwardRef((w,_)=>{const{scope:g,children:E,...S}=w,b=Ve.useRef(null),k=aa(_,b),N=s(u,g);return Ve.useEffect(()=>(N.itemMap.set(b,{ref:b,...S}),()=>void N.itemMap.delete(b))),L.jsx(p,{[f]:"",ref:k,children:E})});m.displayName=u;function v(w){const _=s(n+"CollectionConsumer",w);return Ve.useCallback(()=>{const E=_.collectionRef.current;if(!E)return[];const S=Array.from(E.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((N,M)=>S.indexOf(N.ref.current)-S.indexOf(M.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},v,r]}var U7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fs=U7.reduce((n,e)=>{const t=Nw(`Primitive.${e}`),r=H.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),L.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function iz(n,e){n&&Cy.flushSync(()=>n.dispatchEvent(e))}function hu(n){const e=H.useRef(n);return H.useEffect(()=>{e.current=n}),H.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function V7(n,e=globalThis==null?void 0:globalThis.document){const t=hu(n);H.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var z7="DismissableLayer",KA="dismissableLayer.update",B7="dismissableLayer.pointerDownOutside",H7="dismissableLayer.focusOutside",rL,sz=H.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rI=H.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=H.useContext(sz),[u,f]=H.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=H.useState({}),v=aa(e,M=>f(M)),w=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=w.indexOf(_),E=u?w.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,b=E>=g,k=G7(M=>{const P=M.target,A=[...c.branches].some(R=>R.contains(P));!b||A||(i==null||i(M),o==null||o(M),M.defaultPrevented||a==null||a())},p),N=W7(M=>{const P=M.target;[...c.branches].some(R=>R.contains(P))||(s==null||s(M),o==null||o(M),M.defaultPrevented||a==null||a())},p);return V7(M=>{E===c.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&a&&(M.preventDefault(),a()))},p),H.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(rL=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),iL(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=rL)}},[u,p,t,c]),H.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),iL())},[u,c]),H.useEffect(()=>{const M=()=>m({});return document.addEventListener(KA,M),()=>document.removeEventListener(KA,M)},[]),L.jsx(Fs.div,{...l,ref:v,style:{pointerEvents:S?b?"auto":"none":void 0,...n.style},onFocusCapture:$r(n.onFocusCapture,N.onFocusCapture),onBlurCapture:$r(n.onBlurCapture,N.onBlurCapture),onPointerDownCapture:$r(n.onPointerDownCapture,k.onPointerDownCapture)})});rI.displayName=z7;var j7="DismissableLayerBranch",oz=H.forwardRef((n,e)=>{const t=H.useContext(sz),r=H.useRef(null),i=aa(e,r);return H.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),L.jsx(Fs.div,{...n,ref:i})});oz.displayName=j7;function G7(n,e=globalThis==null?void 0:globalThis.document){const t=hu(n),r=H.useRef(!1),i=H.useRef(()=>{});return H.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){az(B7,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function W7(n,e=globalThis==null?void 0:globalThis.document){const t=hu(n),r=H.useRef(!1);return H.useEffect(()=>{const i=s=>{s.target&&!r.current&&az(H7,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function iL(){const n=new CustomEvent(KA);document.dispatchEvent(n)}function az(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?iz(i,s):i.dispatchEvent(s)}var $7=rI,q7=oz,du=globalThis!=null&&globalThis.document?H.useLayoutEffect:()=>{},X7="Portal",lz=H.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=H.useState(!1);du(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?ez.createPortal(L.jsx(Fs.div,{...r,ref:e}),o):null});lz.displayName=X7;function Y7(n,e){return H.useReducer((t,r)=>e[t][r]??t,n)}var iI=n=>{const{present:e,children:t}=n,r=K7(e),i=typeof t=="function"?t({present:r.isPresent}):H.Children.only(t),s=aa(r.ref,Q7(i));return typeof t=="function"||r.isPresent?H.cloneElement(i,{ref:s}):null};iI.displayName="Presence";function K7(n){const[e,t]=H.useState(),r=H.useRef(null),i=H.useRef(n),s=H.useRef("none"),o=n?"mounted":"unmounted",[a,l]=Y7(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return H.useEffect(()=>{const c=h0(r.current);s.current=a==="mounted"?c:"none"},[a]),du(()=>{const c=r.current,u=i.current;if(u!==n){const p=s.current,m=h0(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),du(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=m=>{const w=h0(r.current).includes(m.animationName);if(m.target===e&&w&&(l("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=m=>{m.target===e&&(s.current=h0(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:H.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function h0(n){return(n==null?void 0:n.animationName)||"none"}function Q7(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Z7=QU[" useInsertionEffect ".trim().toString()]||du;function J7({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=eq({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const u=H.useRef(n!==void 0);H.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=H.useCallback(u=>{var f;if(a){const p=tq(u)?u(n):u;p!==n&&((f=o.current)==null||f.call(o,p))}else s(u)},[a,n,s,o]);return[l,c]}function eq({defaultProp:n,onChange:e}){const[t,r]=H.useState(n),i=H.useRef(t),s=H.useRef(e);return Z7(()=>{s.current=e},[e]),H.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function tq(n){return typeof n=="function"}var nq=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),rq="VisuallyHidden",X1=H.forwardRef((n,e)=>L.jsx(Fs.span,{...n,ref:e,style:{...nq,...n.style}}));X1.displayName=rq;var iq=X1,sI="ToastProvider",[oI,sq,oq]=F7("Toast"),[cz,Iye]=q1("Toast",[oq]),[aq,Y1]=cz(sI),uz=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=H.useState(null),[c,u]=H.useState(0),f=H.useRef(!1),p=H.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${sI}\`. Expected non-empty \`string\`.`),L.jsx(oI.Provider,{scope:e,children:L.jsx(aq,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:H.useCallback(()=>u(m=>m+1),[]),onToastRemove:H.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};uz.displayName=sI;var hz="ToastViewport",lq=["F8"],QA="toast.viewportPause",ZA="toast.viewportResume",dz=H.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=lq,label:i="Notifications ({hotkey})",...s}=n,o=Y1(hz,t),a=sq(t),l=H.useRef(null),c=H.useRef(null),u=H.useRef(null),f=H.useRef(null),p=aa(e,f,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;H.useEffect(()=>{const _=g=>{var S;r.length!==0&&r.every(b=>g[b]||g.code===b)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),H.useEffect(()=>{const _=l.current,g=f.current;if(v&&_&&g){const E=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(QA);g.dispatchEvent(N),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(ZA);g.dispatchEvent(N),o.isClosePausedRef.current=!1}},b=N=>{!_.contains(N.relatedTarget)&&S()},k=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",E),_.addEventListener("focusout",b),_.addEventListener("pointermove",E),_.addEventListener("pointerleave",k),window.addEventListener("blur",E),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",E),_.removeEventListener("focusout",b),_.removeEventListener("pointermove",E),_.removeEventListener("pointerleave",k),window.removeEventListener("blur",E),window.removeEventListener("focus",S)}}},[v,o.isClosePausedRef]);const w=H.useCallback(({tabbingDirection:_})=>{const E=a().map(S=>{const b=S.ref.current,k=[b,...wq(b)];return _==="forwards"?k:k.reverse()});return(_==="forwards"?E.reverse():E).flat()},[a]);return H.useEffect(()=>{const _=f.current;if(_){const g=E=>{var k,N,M;const S=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!S){const P=document.activeElement,A=E.shiftKey;if(E.target===_&&A){(k=c.current)==null||k.focus();return}const U=w({tabbingDirection:A?"backwards":"forwards"}),V=U.findIndex($=>$===P);TT(U.slice(V+1))?E.preventDefault():A?(N=c.current)==null||N.focus():(M=u.current)==null||M.focus()}};return _.addEventListener("keydown",g),()=>_.removeEventListener("keydown",g)}},[a,w]),L.jsxs(q7,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&L.jsx(JA,{ref:c,onFocusFromOutsideViewport:()=>{const _=w({tabbingDirection:"forwards"});TT(_)}}),L.jsx(oI.Slot,{scope:t,children:L.jsx(Fs.ol,{tabIndex:-1,...s,ref:p})}),v&&L.jsx(JA,{ref:u,onFocusFromOutsideViewport:()=>{const _=w({tabbingDirection:"backwards"});TT(_)}})]})});dz.displayName=hz;var fz="ToastFocusProxy",JA=H.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Y1(fz,t);return L.jsx(X1,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});JA.displayName=fz;var Ry="Toast",cq="toast.swipeStart",uq="toast.swipeMove",hq="toast.swipeCancel",dq="toast.swipeEnd",pz=H.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,l]=J7({prop:r,defaultProp:i??!0,onChange:s,caller:Ry});return L.jsx(iI,{present:t||a,children:L.jsx(mq,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:hu(n.onPause),onResume:hu(n.onResume),onSwipeStart:$r(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$r(n.onSwipeMove,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:$r(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$r(n.onSwipeEnd,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});pz.displayName=Ry;var[fq,pq]=cz(Ry,{onClose(){}}),mq=H.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...v}=n,w=Y1(Ry,t),[_,g]=H.useState(null),E=aa(e,$=>g($)),S=H.useRef(null),b=H.useRef(null),k=i||w.duration,N=H.useRef(0),M=H.useRef(k),P=H.useRef(0),{onToastAdd:A,onToastRemove:R}=w,O=hu(()=>{var Z;(_==null?void 0:_.contains(document.activeElement))&&((Z=w.viewport)==null||Z.focus()),o()}),U=H.useCallback($=>{!$||$===1/0||(window.clearTimeout(P.current),N.current=new Date().getTime(),P.current=window.setTimeout(O,$))},[O]);H.useEffect(()=>{const $=w.viewport;if($){const Z=()=>{U(M.current),c==null||c()},ne=()=>{const ae=new Date().getTime()-N.current;M.current=M.current-ae,window.clearTimeout(P.current),l==null||l()};return $.addEventListener(QA,ne),$.addEventListener(ZA,Z),()=>{$.removeEventListener(QA,ne),$.removeEventListener(ZA,Z)}}},[w.viewport,k,l,c,U]),H.useEffect(()=>{s&&!w.isClosePausedRef.current&&U(k)},[s,k,w.isClosePausedRef,U]),H.useEffect(()=>(A(),()=>R()),[A,R]);const V=H.useMemo(()=>_?wz(_):null,[_]);return w.viewport?L.jsxs(L.Fragment,{children:[V&&L.jsx(gq,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),L.jsx(fq,{scope:t,onClose:O,children:Cy.createPortal(L.jsx(oI.ItemSlot,{scope:t,children:L.jsx($7,{asChild:!0,onEscapeKeyDown:$r(a,()=>{w.isFocusedToastEscapeKeyDownRef.current||O(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:L.jsx(Fs.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":w.swipeDirection,...v,ref:E,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:$r(n.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:$r(n.onPointerDown,$=>{$.button===0&&(S.current={x:$.clientX,y:$.clientY})}),onPointerMove:$r(n.onPointerMove,$=>{if(!S.current)return;const Z=$.clientX-S.current.x,ne=$.clientY-S.current.y,ae=!!b.current,z=["left","right"].includes(w.swipeDirection),j=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,X=z?j(0,Z):0,ee=z?0:j(0,ne),te=$.pointerType==="touch"?10:2,J={x:X,y:ee},oe={originalEvent:$,delta:J};ae?(b.current=J,d0(uq,f,oe,{discrete:!1})):sL(J,w.swipeDirection,te)?(b.current=J,d0(cq,u,oe,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(Z)>te||Math.abs(ne)>te)&&(S.current=null)}),onPointerUp:$r(n.onPointerUp,$=>{const Z=b.current,ne=$.target;if(ne.hasPointerCapture($.pointerId)&&ne.releasePointerCapture($.pointerId),b.current=null,S.current=null,Z){const ae=$.currentTarget,z={originalEvent:$,delta:Z};sL(Z,w.swipeDirection,w.swipeThreshold)?d0(dq,m,z,{discrete:!0}):d0(hq,p,z,{discrete:!0}),ae.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),gq=n=>{const{__scopeToast:e,children:t,...r}=n,i=Y1(Ry,e),[s,o]=H.useState(!1),[a,l]=H.useState(!1);return _q(()=>o(!0)),H.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:L.jsx(lz,{asChild:!0,children:L.jsx(X1,{...r,children:s&&L.jsxs(L.Fragment,{children:[i.label," ",t]})})})},vq="ToastTitle",mz=H.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return L.jsx(Fs.div,{...r,ref:e})});mz.displayName=vq;var yq="ToastDescription",gz=H.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return L.jsx(Fs.div,{...r,ref:e})});gz.displayName=yq;var vz="ToastAction",yz=H.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?L.jsx(xz,{altText:t,asChild:!0,children:L.jsx(aI,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${vz}\`. Expected non-empty \`string\`.`),null)});yz.displayName=vz;var _z="ToastClose",aI=H.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=pq(_z,t);return L.jsx(xz,{asChild:!0,children:L.jsx(Fs.button,{type:"button",...r,ref:e,onClick:$r(n.onClick,i.onClose)})})});aI.displayName=_z;var xz=H.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return L.jsx(Fs.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function wz(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),xq(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...wz(r))}}),e}function d0(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?iz(i,s):i.dispatchEvent(s)}var sL=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function _q(n=()=>{}){const e=hu(n);du(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function xq(n){return n.nodeType===n.ELEMENT_NODE}function wq(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function TT(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Eq=uz,Ez=dz,Sz=pz,Tz=mz,bz=gz,Az=yz,Mz=aI;function Cz(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Cz(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Rz(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Cz(n))&&(r&&(r+=" "),r+=e);return r}const oL=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,aL=Rz,Iz=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return aL(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],f=s==null?void 0:s[c];if(u===null)return null;const p=oL(u)||oL(f);return i[c][p]}),a=t&&Object.entries(t).reduce((c,u)=>{let[f,p]=u;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:p,...m}=u;return Object.entries(m).every(v=>{let[w,_]=v;return Array.isArray(_)?_.includes({...s,...a}[w]):{...s,...a}[w]===_})?[...c,f,p]:c},[]);return aL(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pz=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=H.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>H.createElement("svg",{ref:l,...Tq,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Pz("lucide",i),...a},[...o.map(([c,u])=>H.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=(n,e)=>{const t=H.forwardRef(({className:r,...i},s)=>H.createElement(bq,{ref:s,iconNode:e,className:Pz(`lucide-${Sq(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=Hr("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=Hr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=Hr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Hr("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=Hr("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=Hr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=Hr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=Hr("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=Hr("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=Hr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=Hr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=Hr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=Hr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=Hr("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=Hr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=Hr("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=Hr("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=Hr("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=Hr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=Hr("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),lI="-",Dq=n=>{const e=Fq(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(lI);return a[0]===""&&a.length!==1&&a.shift(),Vz(a,e)||Oq(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Vz=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?Vz(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(lI);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},uL=/^\[(.+)\]$/,Oq=n=>{if(uL.test(n)){const e=uL.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Fq=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return Vq(Object.entries(n.classGroups),t).forEach(([s,o])=>{tM(o,r,s,e)}),r},tM=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:hL(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(Uq(i)){tM(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{tM(o,hL(e,s),t,r)})})},hL=(n,e)=>{let t=n;return e.split(lI).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},Uq=n=>n.isThemeGetter,Vq=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,zq=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},zz="!",Bq=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,f;for(let _=0;_<a.length;_++){let g=a[_];if(c===0){if(g===i&&(r||a.slice(_,_+s)===e)){l.push(a.slice(u,_)),u=_+s;continue}if(g==="/"){f=_;continue}}g==="["?c++:g==="]"&&c--}const p=l.length===0?a:a.substring(u),m=p.startsWith(zz),v=m?p.substring(1):p,w=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:w}};return t?a=>t({className:a,parseClassName:o}):o},Hq=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},jq=n=>({cache:zq(n.cacheSize),parseClassName:Bq(n),...Dq(n)}),Gq=/\s+/,Wq=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(Gq);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(c);let v=!!m,w=r(v?p.substring(0,m):p);if(!w){if(!v){a=c+(a.length>0?" "+a:a);continue}if(w=r(p),!w){a=c+(a.length>0?" "+a:a);continue}v=!1}const _=Hq(u).join(":"),g=f?_+zz:_,E=g+w;if(s.includes(E))continue;s.push(E);const S=i(w,v);for(let b=0;b<S.length;++b){const k=S[b];s.push(g+k)}a=c+(a.length>0?" "+a:a)}return a};function $q(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Bz(e))&&(r&&(r+=" "),r+=t);return r}const Bz=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Bz(n[r]))&&(t&&(t+=" "),t+=e);return t};function qq(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((u,f)=>f(u),n());return t=jq(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=Wq(l,t);return i(l,u),u}return function(){return s($q.apply(null,arguments))}}const Yn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Hz=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xq=/^\d+\/\d+$/,Yq=new Set(["px","full","screen"]),Kq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Qq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eX=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,sl=n=>Jf(n)||Yq.has(n)||Xq.test(n),sc=n=>Kp(n,"length",lX),Jf=n=>!!n&&!Number.isNaN(Number(n)),AT=n=>Kp(n,"number",Jf),$m=n=>!!n&&Number.isInteger(Number(n)),tX=n=>n.endsWith("%")&&Jf(n.slice(0,-1)),Jt=n=>Hz.test(n),oc=n=>Kq.test(n),nX=new Set(["length","size","percentage"]),rX=n=>Kp(n,nX,jz),iX=n=>Kp(n,"position",jz),sX=new Set(["image","url"]),oX=n=>Kp(n,sX,uX),aX=n=>Kp(n,"",cX),qm=()=>!0,Kp=(n,e,t)=>{const r=Hz.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},lX=n=>Qq.test(n)&&!Zq.test(n),jz=()=>!1,cX=n=>Jq.test(n),uX=n=>eX.test(n),hX=()=>{const n=Yn("colors"),e=Yn("spacing"),t=Yn("blur"),r=Yn("brightness"),i=Yn("borderColor"),s=Yn("borderRadius"),o=Yn("borderSpacing"),a=Yn("borderWidth"),l=Yn("contrast"),c=Yn("grayscale"),u=Yn("hueRotate"),f=Yn("invert"),p=Yn("gap"),m=Yn("gradientColorStops"),v=Yn("gradientColorStopPositions"),w=Yn("inset"),_=Yn("margin"),g=Yn("opacity"),E=Yn("padding"),S=Yn("saturate"),b=Yn("scale"),k=Yn("sepia"),N=Yn("skew"),M=Yn("space"),P=Yn("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Jt,e],U=()=>[Jt,e],V=()=>["",sl,sc],$=()=>["auto",Jf,Jt],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ne=()=>["solid","dashed","dotted","double","none"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",Jt],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[Jf,Jt];return{cacheSize:500,separator:":",theme:{colors:[qm],spacing:[sl,sc],blur:["none","",oc,Jt],brightness:ee(),borderColor:[n],borderRadius:["none","","full",oc,Jt],borderSpacing:U(),borderWidth:V(),contrast:ee(),grayscale:j(),hueRotate:ee(),invert:j(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[tX,sc],inset:O(),margin:O(),opacity:ee(),padding:U(),saturate:ee(),scale:ee(),sepia:j(),skew:ee(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",Jt]}],container:["container"],columns:[{columns:[oc]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Jt]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$m,Jt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Jt]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",$m,Jt]}],"grid-cols":[{"grid-cols":[qm]}],"col-start-end":[{col:["auto",{span:["full",$m,Jt]},Jt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[qm]}],"row-start-end":[{row:["auto",{span:[$m,Jt]},Jt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Jt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Jt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Jt,e]}],"min-w":[{"min-w":[Jt,e,"min","max","fit"]}],"max-w":[{"max-w":[Jt,e,"none","full","min","max","fit","prose",{screen:[oc]},oc]}],h:[{h:[Jt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Jt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Jt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Jt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",oc,sc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",AT]}],"font-family":[{font:[qm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Jt]}],"line-clamp":[{"line-clamp":["none",Jf,AT]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",sl,Jt]}],"list-image":[{"list-image":["none",Jt]}],"list-style-type":[{list:["none","disc","decimal",Jt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",sl,sc]}],"underline-offset":[{"underline-offset":["auto",sl,Jt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),iX]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rX]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oX]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...ne(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:ne()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ne()]}],"outline-offset":[{"outline-offset":[sl,Jt]}],"outline-w":[{outline:[sl,sc]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[sl,sc]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",oc,aX]}],"shadow-color":[{shadow:[qm]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...ae(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ae()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",oc,Jt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Jt]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",Jt]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",Jt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[$m,Jt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Jt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[sl,sc,AT]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},dX=qq(hX);function Ru(...n){return dX(Rz(n))}const fX=Eq,Gz=H.forwardRef(({className:n,...e},t)=>L.jsx(Ez,{ref:t,className:Ru("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Gz.displayName=Ez.displayName;const pX=Iz("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Wz=H.forwardRef(({className:n,variant:e,...t},r)=>L.jsx(Sz,{ref:r,className:Ru(pX({variant:e}),n),...t}));Wz.displayName=Sz.displayName;const mX=H.forwardRef(({className:n,...e},t)=>L.jsx(Az,{ref:t,className:Ru("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",n),...e}));mX.displayName=Az.displayName;const $z=H.forwardRef(({className:n,...e},t)=>L.jsx(Mz,{ref:t,className:Ru("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:L.jsx(Uz,{className:"h-4 w-4"})}));$z.displayName=Mz.displayName;const qz=H.forwardRef(({className:n,...e},t)=>L.jsx(Tz,{ref:t,className:Ru("text-sm font-semibold",n),...e}));qz.displayName=Tz.displayName;const Xz=H.forwardRef(({className:n,...e},t)=>L.jsx(bz,{ref:t,className:Ru("text-sm opacity-90",n),...e}));Xz.displayName=bz.displayName;function gX(){const{toasts:n}=R7();return L.jsxs(fX,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return L.jsxs(Wz,{...s,children:[L.jsxs("div",{className:"grid gap-1",children:[t&&L.jsx(qz,{children:t}),r&&L.jsx(Xz,{children:r})]}),i,L.jsx($z,{})]},e)}),L.jsx(Gz,{})]})}var kw=["light","dark"],cI="(prefers-color-scheme: dark)",vX=typeof window>"u",uI=H.createContext(void 0),yX={setTheme:n=>{},themes:[]},Yz=()=>{var n;return(n=H.useContext(uI))!=null?n:yX},_X=n=>H.useContext(uI)?n.children:H.createElement(wX,{...n}),xX=["light","dark"],wX=({forcedTheme:n,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:s=xX,defaultTheme:o=t?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u})=>{let[f,p]=H.useState(()=>dL(i,o)),[m,v]=H.useState(()=>dL(i)),w=l?Object.values(l):s,_=H.useCallback(b=>{let k=b;if(!k)return;b==="system"&&t&&(k=fL());let N=l?l[k]:k,M=e?SX():null,P=document.documentElement;if(a==="class"?(P.classList.remove(...w),N&&P.classList.add(N)):N?P.setAttribute(a,N):P.removeAttribute(a),r){let A=kw.includes(o)?o:null,R=kw.includes(k)?k:A;P.style.colorScheme=R}M==null||M()},[]),g=H.useCallback(b=>{let k=typeof b=="function"?b(b):b;p(k);try{localStorage.setItem(i,k)}catch{}},[n]),E=H.useCallback(b=>{let k=fL(b);v(k),f==="system"&&t&&!n&&_("system")},[f,n]);H.useEffect(()=>{let b=window.matchMedia(cI);return b.addListener(E),E(b),()=>b.removeListener(E)},[E]),H.useEffect(()=>{let b=k=>{if(k.key!==i)return;let N=k.newValue||o;g(N)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[g]),H.useEffect(()=>{_(n??f)},[n,f]);let S=H.useMemo(()=>({theme:f,setTheme:g,forcedTheme:n,resolvedTheme:f==="system"?m:f,themes:t?[...s,"system"]:s,systemTheme:t?m:void 0}),[f,g,n,m,t,s]);return H.createElement(uI.Provider,{value:S},H.createElement(EX,{forcedTheme:n,disableTransitionOnChange:e,enableSystem:t,enableColorScheme:r,storageKey:i,themes:s,defaultTheme:o,attribute:a,value:l,children:c,attrs:w,nonce:u}),c)},EX=H.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=i?kw.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(v,w=!1,_=!0)=>{let g=o?o[v]:v,E=w?v+"|| ''":`'${g}'`,S="";return i&&_&&!w&&kw.includes(v)&&(S+=`d.style.colorScheme = '${v}';`),t==="class"?w||g?S+=`c.add(${E})`:S+="null":g&&(S+=`d[s](n,${E})`),S},m=n?`!function(){${u}${p(n)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${cI}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(s,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(s,!1,!1)};}${f}}catch(t){}}();`;return H.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),dL=(n,e)=>{if(vX)return;let t;try{t=localStorage.getItem(n)||void 0}catch{}return t||e},SX=()=>{let n=document.createElement("style");return n.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(n),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(n)},1)}},fL=n=>(n||(n=window.matchMedia(cI)),n.matches?"dark":"light"),TX=n=>{switch(n){case"success":return MX;case"info":return RX;case"warning":return CX;case"error":return IX;default:return null}},bX=Array(12).fill(0),AX=({visible:n,className:e})=>Ve.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Ve.createElement("div",{className:"sonner-spinner"},bX.map((t,r)=>Ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),MX=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),CX=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),RX=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),IX=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),PX=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),NX=()=>{let[n,e]=Ve.useState(document.hidden);return Ve.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},nM=1,kX=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:nM++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async c=>{if(o=["resolve",c],Ve.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(DX(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:f})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:f})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:f})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||nM++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ss=new kX,LX=(n,e)=>{let t=(e==null?void 0:e.id)||nM++;return Ss.addToast({title:n,...e,id:t}),t},DX=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",OX=LX,FX=()=>Ss.toasts,UX=()=>Ss.getActiveToasts();Object.assign(OX,{success:Ss.success,info:Ss.info,warning:Ss.warning,error:Ss.error,custom:Ss.custom,message:Ss.message,promise:Ss.promise,dismiss:Ss.dismiss,loading:Ss.loading},{getHistory:FX,getToasts:UX});function VX(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}VX(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function f0(n){return n.label!==void 0}var zX=3,BX="32px",HX="16px",pL=4e3,jX=356,GX=14,WX=20,$X=200;function Vo(...n){return n.filter(Boolean).join(" ")}function qX(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var XX=n=>{var e,t,r,i,s,o,a,l,c,u,f;let{invert:p,toast:m,unstyled:v,interacting:w,setHeights:_,visibleToasts:g,heights:E,index:S,toasts:b,expanded:k,removeToast:N,defaultRichColors:M,closeButton:P,style:A,cancelButtonStyle:R,actionButtonStyle:O,className:U="",descriptionClassName:V="",duration:$,position:Z,gap:ne,loadingIcon:ae,expandByDefault:z,classNames:j,icons:X,closeButtonAriaLabel:ee="Close toast",pauseWhenPageIsHidden:te}=n,[J,oe]=Ve.useState(null),[we,Pe]=Ve.useState(null),[Te,mt]=Ve.useState(!1),[vt,Ge]=Ve.useState(!1),[rt,Q]=Ve.useState(!1),[be,xe]=Ve.useState(!1),[Le,_e]=Ve.useState(!1),[it,We]=Ve.useState(0),[G,B]=Ve.useState(0),le=Ve.useRef(m.duration||$||pL),Ne=Ve.useRef(null),Me=Ve.useRef(null),Ce=S===0,st=S+1<=g,Fe=m.type,qe=m.dismissible!==!1,Et=m.className||"",Ft=m.descriptionClassName||"",Ie=Ve.useMemo(()=>E.findIndex(ke=>ke.toastId===m.id)||0,[E,m.id]),cn=Ve.useMemo(()=>{var ke;return(ke=m.closeButton)!=null?ke:P},[m.closeButton,P]),Gt=Ve.useMemo(()=>m.duration||$||pL,[m.duration,$]),Mt=Ve.useRef(0),dt=Ve.useRef(0),tt=Ve.useRef(0),St=Ve.useRef(null),[hn,In]=Z.split("-"),jt=Ve.useMemo(()=>E.reduce((ke,_t,At)=>At>=Ie?ke:ke+_t.height,0),[E,Ie]),Ue=NX(),re=m.invert||p,De=Fe==="loading";dt.current=Ve.useMemo(()=>Ie*ne+jt,[Ie,jt]),Ve.useEffect(()=>{le.current=Gt},[Gt]),Ve.useEffect(()=>{mt(!0)},[]),Ve.useEffect(()=>{let ke=Me.current;if(ke){let _t=ke.getBoundingClientRect().height;return B(_t),_(At=>[{toastId:m.id,height:_t,position:m.position},...At]),()=>_(At=>At.filter(nn=>nn.toastId!==m.id))}},[_,m.id]),Ve.useLayoutEffect(()=>{if(!Te)return;let ke=Me.current,_t=ke.style.height;ke.style.height="auto";let At=ke.getBoundingClientRect().height;ke.style.height=_t,B(At),_(nn=>nn.find(Sn=>Sn.toastId===m.id)?nn.map(Sn=>Sn.toastId===m.id?{...Sn,height:At}:Sn):[{toastId:m.id,height:At,position:m.position},...nn])},[Te,m.title,m.description,_,m.id]);let je=Ve.useCallback(()=>{Ge(!0),We(dt.current),_(ke=>ke.filter(_t=>_t.toastId!==m.id)),setTimeout(()=>{N(m)},$X)},[m,N,_,dt]);Ve.useEffect(()=>{if(m.promise&&Fe==="loading"||m.duration===1/0||m.type==="loading")return;let ke;return k||w||te&&Ue?(()=>{if(tt.current<Mt.current){let _t=new Date().getTime()-Mt.current;le.current=le.current-_t}tt.current=new Date().getTime()})():le.current!==1/0&&(Mt.current=new Date().getTime(),ke=setTimeout(()=>{var _t;(_t=m.onAutoClose)==null||_t.call(m,m),je()},le.current)),()=>clearTimeout(ke)},[k,w,m,Fe,te,Ue,je]),Ve.useEffect(()=>{m.delete&&je()},[je,m.delete]);function Tt(){var ke,_t,At;return X!=null&&X.loading?Ve.createElement("div",{className:Vo(j==null?void 0:j.loader,(ke=m==null?void 0:m.classNames)==null?void 0:ke.loader,"sonner-loader"),"data-visible":Fe==="loading"},X.loading):ae?Ve.createElement("div",{className:Vo(j==null?void 0:j.loader,(_t=m==null?void 0:m.classNames)==null?void 0:_t.loader,"sonner-loader"),"data-visible":Fe==="loading"},ae):Ve.createElement(AX,{className:Vo(j==null?void 0:j.loader,(At=m==null?void 0:m.classNames)==null?void 0:At.loader),visible:Fe==="loading"})}return Ve.createElement("li",{tabIndex:0,ref:Me,className:Vo(U,Et,j==null?void 0:j.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,j==null?void 0:j.default,j==null?void 0:j[Fe],(t=m==null?void 0:m.classNames)==null?void 0:t[Fe]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:M,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":Te,"data-promise":!!m.promise,"data-swiped":Le,"data-removed":vt,"data-visible":st,"data-y-position":hn,"data-x-position":In,"data-index":S,"data-front":Ce,"data-swiping":rt,"data-dismissible":qe,"data-type":Fe,"data-invert":re,"data-swipe-out":be,"data-swipe-direction":we,"data-expanded":!!(k||z&&Te),style:{"--index":S,"--toasts-before":S,"--z-index":b.length-S,"--offset":`${vt?it:dt.current}px`,"--initial-height":z?"auto":`${G}px`,...A,...m.style},onDragEnd:()=>{Q(!1),oe(null),St.current=null},onPointerDown:ke=>{De||!qe||(Ne.current=new Date,We(dt.current),ke.target.setPointerCapture(ke.pointerId),ke.target.tagName!=="BUTTON"&&(Q(!0),St.current={x:ke.clientX,y:ke.clientY}))},onPointerUp:()=>{var ke,_t,At,nn;if(be||!qe)return;St.current=null;let Sn=Number(((ke=Me.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),an=Number(((_t=Me.current)==null?void 0:_t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Nn=new Date().getTime()-((At=Ne.current)==null?void 0:At.getTime()),Bn=J==="x"?Sn:an,fi=Math.abs(Bn)/Nn;if(Math.abs(Bn)>=WX||fi>.11){We(dt.current),(nn=m.onDismiss)==null||nn.call(m,m),Pe(J==="x"?Sn>0?"right":"left":an>0?"down":"up"),je(),xe(!0),_e(!1);return}Q(!1),oe(null)},onPointerMove:ke=>{var _t,At,nn,Sn;if(!St.current||!qe||((_t=window.getSelection())==null?void 0:_t.toString().length)>0)return;let an=ke.clientY-St.current.y,Nn=ke.clientX-St.current.x,Bn=(At=n.swipeDirections)!=null?At:qX(Z);!J&&(Math.abs(Nn)>1||Math.abs(an)>1)&&oe(Math.abs(Nn)>Math.abs(an)?"x":"y");let fi={x:0,y:0};J==="y"?(Bn.includes("top")||Bn.includes("bottom"))&&(Bn.includes("top")&&an<0||Bn.includes("bottom")&&an>0)&&(fi.y=an):J==="x"&&(Bn.includes("left")||Bn.includes("right"))&&(Bn.includes("left")&&Nn<0||Bn.includes("right")&&Nn>0)&&(fi.x=Nn),(Math.abs(fi.x)>0||Math.abs(fi.y)>0)&&_e(!0),(nn=Me.current)==null||nn.style.setProperty("--swipe-amount-x",`${fi.x}px`),(Sn=Me.current)==null||Sn.style.setProperty("--swipe-amount-y",`${fi.y}px`)}},cn&&!m.jsx?Ve.createElement("button",{"aria-label":ee,"data-disabled":De,"data-close-button":!0,onClick:De||!qe?()=>{}:()=>{var ke;je(),(ke=m.onDismiss)==null||ke.call(m,m)},className:Vo(j==null?void 0:j.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=X==null?void 0:X.close)!=null?s:PX):null,m.jsx||H.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Ve.createElement(Ve.Fragment,null,Fe||m.icon||m.promise?Ve.createElement("div",{"data-icon":"",className:Vo(j==null?void 0:j.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Tt():null,m.type!=="loading"?m.icon||(X==null?void 0:X[Fe])||TX(Fe):null):null,Ve.createElement("div",{"data-content":"",className:Vo(j==null?void 0:j.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},Ve.createElement("div",{"data-title":"",className:Vo(j==null?void 0:j.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?Ve.createElement("div",{"data-description":"",className:Vo(V,Ft,j==null?void 0:j.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),H.isValidElement(m.cancel)?m.cancel:m.cancel&&f0(m.cancel)?Ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:ke=>{var _t,At;f0(m.cancel)&&qe&&((At=(_t=m.cancel).onClick)==null||At.call(_t,ke),je())},className:Vo(j==null?void 0:j.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,H.isValidElement(m.action)?m.action:m.action&&f0(m.action)?Ve.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||O,onClick:ke=>{var _t,At;f0(m.action)&&((At=(_t=m.action).onClick)==null||At.call(_t,ke),!ke.defaultPrevented&&je())},className:Vo(j==null?void 0:j.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function mL(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function YX(n,e){let t={};return[n,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?HX:BX;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),t}var KX=H.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:f,duration:p,style:m,visibleToasts:v=zX,toastOptions:w,dir:_=mL(),gap:g=GX,loadingIcon:E,icons:S,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:k}=n,[N,M]=Ve.useState([]),P=Ve.useMemo(()=>Array.from(new Set([r].concat(N.filter(te=>te.position).map(te=>te.position)))),[N,r]),[A,R]=Ve.useState([]),[O,U]=Ve.useState(!1),[V,$]=Ve.useState(!1),[Z,ne]=Ve.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=Ve.useRef(null),z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=Ve.useRef(null),X=Ve.useRef(!1),ee=Ve.useCallback(te=>{M(J=>{var oe;return(oe=J.find(we=>we.id===te.id))!=null&&oe.delete||Ss.dismiss(te.id),J.filter(({id:we})=>we!==te.id)})},[]);return Ve.useEffect(()=>Ss.subscribe(te=>{if(te.dismiss){M(J=>J.map(oe=>oe.id===te.id?{...oe,delete:!0}:oe));return}setTimeout(()=>{ez.flushSync(()=>{M(J=>{let oe=J.findIndex(we=>we.id===te.id);return oe!==-1?[...J.slice(0,oe),{...J[oe],...te},...J.slice(oe+1)]:[te,...J]})})})}),[]),Ve.useEffect(()=>{if(u!=="system"){ne(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;let te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:J})=>{ne(J?"dark":"light")})}catch{te.addListener(({matches:oe})=>{try{ne(oe?"dark":"light")}catch(we){console.error(we)}})}},[u]),Ve.useEffect(()=>{N.length<=1&&U(!1)},[N]),Ve.useEffect(()=>{let te=J=>{var oe,we;i.every(Pe=>J[Pe]||J.code===Pe)&&(U(!0),(oe=ae.current)==null||oe.focus()),J.code==="Escape"&&(document.activeElement===ae.current||(we=ae.current)!=null&&we.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[i]),Ve.useEffect(()=>{if(ae.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,X.current=!1)}},[ae.current]),Ve.createElement("section",{ref:e,"aria-label":`${b} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((te,J)=>{var oe;let[we,Pe]=te.split("-");return N.length?Ve.createElement("ol",{key:te,dir:_==="auto"?mL():_,tabIndex:-1,ref:ae,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":we,"data-lifted":O&&N.length>1&&!s,"data-x-position":Pe,style:{"--front-toast-height":`${((oe=A[0])==null?void 0:oe.height)||0}px`,"--width":`${jX}px`,"--gap":`${g}px`,...m,...YX(l,c)},onBlur:Te=>{X.current&&!Te.currentTarget.contains(Te.relatedTarget)&&(X.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||X.current||(X.current=!0,j.current=Te.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{V||U(!1)},onDragEnd:()=>U(!1),onPointerDown:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},N.filter(Te=>!Te.position&&J===0||Te.position===te).map((Te,mt)=>{var vt,Ge;return Ve.createElement(XX,{key:Te.id,icons:S,index:mt,toast:Te,defaultRichColors:f,duration:(vt=w==null?void 0:w.duration)!=null?vt:p,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:t,visibleToasts:v,closeButton:(Ge=w==null?void 0:w.closeButton)!=null?Ge:o,interacting:V,position:te,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:ee,toasts:N.filter(rt=>rt.position==Te.position),heights:A.filter(rt=>rt.position==Te.position),setHeights:R,expandByDefault:s,gap:g,loadingIcon:E,expanded:O,pauseWhenPageIsHidden:k,swipeDirections:n.swipeDirections})})):null}))});const QX=({...n})=>{const{theme:e="system"}=Yz();return L.jsx(KX,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},ZX=["top","right","bottom","left"],fu=Math.min,Qs=Math.max,Lw=Math.round,p0=Math.floor,ka=n=>({x:n,y:n}),JX={left:"right",right:"left",bottom:"top",top:"bottom"},eY={start:"end",end:"start"};function rM(n,e,t){return Qs(n,fu(e,t))}function Fl(n,e){return typeof n=="function"?n(e):n}function Ul(n){return n.split("-")[0]}function Qp(n){return n.split("-")[1]}function hI(n){return n==="x"?"y":"x"}function dI(n){return n==="y"?"height":"width"}const tY=new Set(["top","bottom"]);function Ca(n){return tY.has(Ul(n))?"y":"x"}function fI(n){return hI(Ca(n))}function nY(n,e,t){t===void 0&&(t=!1);const r=Qp(n),i=fI(n),s=dI(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Dw(o)),[o,Dw(o)]}function rY(n){const e=Dw(n);return[iM(n),e,iM(e)]}function iM(n){return n.replace(/start|end/g,e=>eY[e])}const gL=["left","right"],vL=["right","left"],iY=["top","bottom"],sY=["bottom","top"];function oY(n,e,t){switch(n){case"top":case"bottom":return t?e?vL:gL:e?gL:vL;case"left":case"right":return e?iY:sY;default:return[]}}function aY(n,e,t,r){const i=Qp(n);let s=oY(Ul(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(iM)))),s}function Dw(n){return n.replace(/left|right|bottom|top/g,e=>JX[e])}function lY(n){return{top:0,right:0,bottom:0,left:0,...n}}function Kz(n){return typeof n!="number"?lY(n):{top:n,right:n,bottom:n,left:n}}function Ow(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function yL(n,e,t){let{reference:r,floating:i}=n;const s=Ca(e),o=fI(e),a=dI(o),l=Ul(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Qp(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const cY=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:f}=yL(c,r,l),p=r,m={},v=0;for(let w=0;w<a.length;w++){const{name:_,fn:g}=a[w],{x:E,y:S,data:b,reset:k}=await g({x:u,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});u=E??u,f=S??f,m={...m,[_]:{...m[_],...b}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):k.rects),{x:u,y:f}=yL(c,p,l)),w=-1)}return{x:u,y:f,placement:p,strategy:i,middlewareData:m}};async function bv(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Fl(e,n),v=Kz(m),_=a[p?f==="floating"?"reference":"floating":f],g=Ow(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(_)))==null||t?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},k=Ow(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:S,strategy:l}):E);return{top:(g.top-k.top+v.top)/b.y,bottom:(k.bottom-g.bottom+v.bottom)/b.y,left:(g.left-k.left+v.left)/b.x,right:(k.right-g.right+v.right)/b.x}}const uY=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Fl(n,e)||{};if(c==null)return{};const f=Kz(u),p={x:t,y:r},m=fI(i),v=dI(m),w=await o.getDimensions(c),_=m==="y",g=_?"top":"left",E=_?"bottom":"right",S=_?"clientHeight":"clientWidth",b=s.reference[v]+s.reference[m]-p[m]-s.floating[v],k=p[m]-s.reference[m],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let M=N?N[S]:0;(!M||!await(o.isElement==null?void 0:o.isElement(N)))&&(M=a.floating[S]||s.floating[v]);const P=b/2-k/2,A=M/2-w[v]/2-1,R=fu(f[g],A),O=fu(f[E],A),U=R,V=M-w[v]-O,$=M/2-w[v]/2+P,Z=rM(U,$,V),ne=!l.arrow&&Qp(i)!=null&&$!==Z&&s.reference[v]/2-($<U?R:O)-w[v]/2<0,ae=ne?$<U?$-U:$-V:0;return{[m]:p[m]+ae,data:{[m]:Z,centerOffset:$-Z-ae,...ne&&{alignmentOffset:ae}},reset:ne}}}),hY=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,..._}=Fl(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=Ul(i),E=Ca(a),S=Ul(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=p||(S||!w?[Dw(a)]:rY(a)),N=v!=="none";!p&&N&&k.push(...aY(a,w,v,b));const M=[a,...k],P=await bv(e,_),A=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(P[g]),f){const $=nY(i,o,b);A.push(P[$[0]],P[$[1]])}if(R=[...R,{placement:i,overflows:A}],!A.every($=>$<=0)){var O,U;const $=(((O=s.flip)==null?void 0:O.index)||0)+1,Z=M[$];if(Z&&(!(f==="alignment"?E!==Ca(Z):!1)||R.every(z=>z.overflows[0]>0&&Ca(z.placement)===E)))return{data:{index:$,overflows:R},reset:{placement:Z}};let ne=(U=R.filter(ae=>ae.overflows[0]<=0).sort((ae,z)=>ae.overflows[1]-z.overflows[1])[0])==null?void 0:U.placement;if(!ne)switch(m){case"bestFit":{var V;const ae=(V=R.filter(z=>{if(N){const j=Ca(z.placement);return j===E||j==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(j=>j>0).reduce((j,X)=>j+X,0)]).sort((z,j)=>z[1]-j[1])[0])==null?void 0:V[0];ae&&(ne=ae);break}case"initialPlacement":ne=a;break}if(i!==ne)return{reset:{placement:ne}}}return{}}}};function _L(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function xL(n){return ZX.some(e=>n[e]>=0)}const dY=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Fl(n,e);switch(r){case"referenceHidden":{const s=await bv(e,{...i,elementContext:"reference"}),o=_L(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:xL(o)}}}case"escaped":{const s=await bv(e,{...i,altBoundary:!0}),o=_L(s,t.floating);return{data:{escapedOffsets:o,escaped:xL(o)}}}default:return{}}}}},Qz=new Set(["left","top"]);async function fY(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ul(t),a=Qp(t),l=Ca(t)==="y",c=Qz.has(o)?-1:1,u=s&&l?-1:1,f=Fl(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const pY=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await fY(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},mY=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:g,y:E}=_;return{x:g,y:E}}},...l}=Fl(n,e),c={x:t,y:r},u=await bv(e,l),f=Ca(Ul(i)),p=hI(f);let m=c[p],v=c[f];if(s){const _=p==="y"?"top":"left",g=p==="y"?"bottom":"right",E=m+u[_],S=m-u[g];m=rM(E,m,S)}if(o){const _=f==="y"?"top":"left",g=f==="y"?"bottom":"right",E=v+u[_],S=v-u[g];v=rM(E,v,S)}const w=a.fn({...e,[p]:m,[f]:v});return{...w,data:{x:w.x-t,y:w.y-r,enabled:{[p]:s,[f]:o}}}}}},gY=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Fl(n,e),u={x:t,y:r},f=Ca(i),p=hI(f);let m=u[p],v=u[f];const w=Fl(a,e),_=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(l){const S=p==="y"?"height":"width",b=s.reference[p]-s.floating[S]+_.mainAxis,k=s.reference[p]+s.reference[S]-_.mainAxis;m<b?m=b:m>k&&(m=k)}if(c){var g,E;const S=p==="y"?"width":"height",b=Qz.has(Ul(i)),k=s.reference[f]-s.floating[S]+(b&&((g=o.offset)==null?void 0:g[f])||0)+(b?0:_.crossAxis),N=s.reference[f]+s.reference[S]+(b?0:((E=o.offset)==null?void 0:E[f])||0)-(b?_.crossAxis:0);v<k?v=k:v>N&&(v=N)}return{[p]:m,[f]:v}}}},vY=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Fl(n,e),u=await bv(e,c),f=Ul(i),p=Qp(i),m=Ca(i)==="y",{width:v,height:w}=s.floating;let _,g;f==="top"||f==="bottom"?(_=f,g=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=f,_=p==="end"?"top":"bottom");const E=w-u.top-u.bottom,S=v-u.left-u.right,b=fu(w-u[_],E),k=fu(v-u[g],S),N=!e.middlewareData.shift;let M=b,P=k;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(M=E),N&&!p){const R=Qs(u.left,0),O=Qs(u.right,0),U=Qs(u.top,0),V=Qs(u.bottom,0);m?P=v-2*(R!==0||O!==0?R+O:Qs(u.left,u.right)):M=w-2*(U!==0||V!==0?U+V:Qs(u.top,u.bottom))}await l({...e,availableWidth:P,availableHeight:M});const A=await o.getDimensions(a.floating);return v!==A.width||w!==A.height?{reset:{rects:!0}}:{}}}};function K1(){return typeof window<"u"}function Zp(n){return Zz(n)?(n.nodeName||"").toLowerCase():"#document"}function no(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ka(n){var e;return(e=(Zz(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Zz(n){return K1()?n instanceof Node||n instanceof no(n).Node:!1}function la(n){return K1()?n instanceof Element||n instanceof no(n).Element:!1}function Wa(n){return K1()?n instanceof HTMLElement||n instanceof no(n).HTMLElement:!1}function wL(n){return!K1()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof no(n).ShadowRoot}const yY=new Set(["inline","contents"]);function Iy(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=ca(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!yY.has(i)}const _Y=new Set(["table","td","th"]);function xY(n){return _Y.has(Zp(n))}const wY=[":popover-open",":modal"];function Q1(n){return wY.some(e=>{try{return n.matches(e)}catch{return!1}})}const EY=["transform","translate","scale","rotate","perspective"],SY=["transform","translate","scale","rotate","perspective","filter"],TY=["paint","layout","strict","content"];function pI(n){const e=mI(),t=la(n)?ca(n):n;return EY.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||SY.some(r=>(t.willChange||"").includes(r))||TY.some(r=>(t.contain||"").includes(r))}function bY(n){let e=pu(n);for(;Wa(e)&&!bp(e);){if(pI(e))return e;if(Q1(e))return null;e=pu(e)}return null}function mI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const AY=new Set(["html","body","#document"]);function bp(n){return AY.has(Zp(n))}function ca(n){return no(n).getComputedStyle(n)}function Z1(n){return la(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function pu(n){if(Zp(n)==="html")return n;const e=n.assignedSlot||n.parentNode||wL(n)&&n.host||Ka(n);return wL(e)?e.host:e}function Jz(n){const e=pu(n);return bp(e)?n.ownerDocument?n.ownerDocument.body:n.body:Wa(e)&&Iy(e)?e:Jz(e)}function Av(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Jz(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=no(i);if(s){const a=sM(o);return e.concat(o,o.visualViewport||[],Iy(i)?i:[],a&&t?Av(a):[])}return e.concat(i,Av(i,[],t))}function sM(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function eB(n){const e=ca(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Wa(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=Lw(t)!==s||Lw(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function gI(n){return la(n)?n:n.contextElement}function ep(n){const e=gI(n);if(!Wa(e))return ka(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=eB(e);let o=(s?Lw(t.width):t.width)/r,a=(s?Lw(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const MY=ka(0);function tB(n){const e=no(n);return!mI()||!e.visualViewport?MY:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CY(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==no(n)?!1:e}function Xh(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=gI(n);let o=ka(1);e&&(r?la(r)&&(o=ep(r)):o=ep(n));const a=CY(s,t,r)?tB(s):ka(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const p=no(s),m=r&&la(r)?no(r):r;let v=p,w=sM(v);for(;w&&r&&m!==v;){const _=ep(w),g=w.getBoundingClientRect(),E=ca(w),S=g.left+(w.clientLeft+parseFloat(E.paddingLeft))*_.x,b=g.top+(w.clientTop+parseFloat(E.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,f*=_.y,l+=S,c+=b,v=no(w),w=sM(v)}}return Ow({width:u,height:f,x:l,y:c})}function vI(n,e){const t=Z1(n).scrollLeft;return e?e.left+t:Xh(Ka(n)).left+t}function nB(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:vI(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function RY(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=Ka(r),a=e?Q1(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=ka(1);const u=ka(0),f=Wa(r);if((f||!f&&!s)&&((Zp(r)!=="body"||Iy(o))&&(l=Z1(r)),Wa(r))){const m=Xh(r);c=ep(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=o&&!f&&!s?nB(o,l,!0):ka(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:t.y*c.y-l.scrollTop*c.y+u.y+p.y}}function IY(n){return Array.from(n.getClientRects())}function PY(n){const e=Ka(n),t=Z1(n),r=n.ownerDocument.body,i=Qs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Qs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+vI(n);const a=-t.scrollTop;return ca(r).direction==="rtl"&&(o+=Qs(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function NY(n,e){const t=no(n),r=Ka(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=mI();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const kY=new Set(["absolute","fixed"]);function LY(n,e){const t=Xh(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Wa(n)?ep(n):ka(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function EL(n,e,t){let r;if(e==="viewport")r=NY(n,t);else if(e==="document")r=PY(Ka(n));else if(la(e))r=LY(e,t);else{const i=tB(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Ow(r)}function rB(n,e){const t=pu(n);return t===e||!la(t)||bp(t)?!1:ca(t).position==="fixed"||rB(t,e)}function DY(n,e){const t=e.get(n);if(t)return t;let r=Av(n,[],!1).filter(a=>la(a)&&Zp(a)!=="body"),i=null;const s=ca(n).position==="fixed";let o=s?pu(n):n;for(;la(o)&&!bp(o);){const a=ca(o),l=pI(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&kY.has(i.position)||Iy(o)&&!l&&rB(n,o))?r=r.filter(u=>u!==o):i=a,o=pu(o)}return e.set(n,r),r}function OY(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?Q1(e)?[]:DY(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=EL(e,u,i);return c.top=Qs(f.top,c.top),c.right=fu(f.right,c.right),c.bottom=fu(f.bottom,c.bottom),c.left=Qs(f.left,c.left),c},EL(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function FY(n){const{width:e,height:t}=eB(n);return{width:e,height:t}}function UY(n,e,t){const r=Wa(e),i=Ka(e),s=t==="fixed",o=Xh(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ka(0);function c(){l.x=vI(i)}if(r||!r&&!s)if((Zp(e)!=="body"||Iy(i))&&(a=Z1(e)),r){const m=Xh(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?nB(i,a):ka(0),f=o.left+a.scrollLeft-l.x-u.x,p=o.top+a.scrollTop-l.y-u.y;return{x:f,y:p,width:o.width,height:o.height}}function MT(n){return ca(n).position==="static"}function SL(n,e){if(!Wa(n)||ca(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ka(n)===t&&(t=t.ownerDocument.body),t}function iB(n,e){const t=no(n);if(Q1(n))return t;if(!Wa(n)){let i=pu(n);for(;i&&!bp(i);){if(la(i)&&!MT(i))return i;i=pu(i)}return t}let r=SL(n,e);for(;r&&xY(r)&&MT(r);)r=SL(r,e);return r&&bp(r)&&MT(r)&&!pI(r)?t:r||bY(n)||t}const VY=async function(n){const e=this.getOffsetParent||iB,t=this.getDimensions,r=await t(n.floating);return{reference:UY(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zY(n){return ca(n).direction==="rtl"}const BY={convertOffsetParentRelativeRectToViewportRelativeRect:RY,getDocumentElement:Ka,getClippingRect:OY,getOffsetParent:iB,getElementRects:VY,getClientRects:IY,getDimensions:FY,getScale:ep,isElement:la,isRTL:zY};function sB(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function HY(n,e){let t=null,r;const i=Ka(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:u,top:f,width:p,height:m}=c;if(a||e(),!p||!m)return;const v=p0(f),w=p0(i.clientWidth-(u+p)),_=p0(i.clientHeight-(f+m)),g=p0(u),S={rootMargin:-v+"px "+-w+"px "+-_+"px "+-g+"px",threshold:Qs(0,fu(1,l))||1};let b=!0;function k(N){const M=N[0].intersectionRatio;if(M!==l){if(!b)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}M===1&&!sB(c,n.getBoundingClientRect())&&o(),b=!1}try{t=new IntersectionObserver(k,{...S,root:i.ownerDocument})}catch{t=new IntersectionObserver(k,S)}t.observe(n)}return o(!0),s}function jY(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=gI(n),u=i||s?[...c?Av(c):[],...Av(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const f=c&&a?HY(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[E]=g;E&&E.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,w=l?Xh(n):null;l&&_();function _(){const g=Xh(n);w&&!sB(w,g)&&t(),w=g,v=requestAnimationFrame(_)}return t(),()=>{var g;u.forEach(E=>{i&&E.removeEventListener("scroll",t),s&&E.removeEventListener("resize",t)}),f==null||f(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const GY=pY,WY=mY,$Y=hY,qY=vY,XY=dY,TL=uY,YY=gY,KY=(n,e,t)=>{const r=new Map,i={platform:BY,...t},s={...i.platform,_c:r};return cY(n,e,{...i,platform:s})};var QY=typeof document<"u",ZY=function(){},Vx=QY?H.useLayoutEffect:ZY;function Fw(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Fw(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Fw(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function oB(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function bL(n,e){const t=oB(n);return Math.round(e*t)/t}function CT(n){const e=H.useRef(n);return Vx(()=>{e.current=n}),e}function JY(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=H.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=H.useState(r);Fw(p,r)||m(r);const[v,w]=H.useState(null),[_,g]=H.useState(null),E=H.useCallback(z=>{z!==N.current&&(N.current=z,w(z))},[]),S=H.useCallback(z=>{z!==M.current&&(M.current=z,g(z))},[]),b=s||v,k=o||_,N=H.useRef(null),M=H.useRef(null),P=H.useRef(u),A=l!=null,R=CT(l),O=CT(i),U=CT(c),V=H.useCallback(()=>{if(!N.current||!M.current)return;const z={placement:e,strategy:t,middleware:p};O.current&&(z.platform=O.current),KY(N.current,M.current,z).then(j=>{const X={...j,isPositioned:U.current!==!1};$.current&&!Fw(P.current,X)&&(P.current=X,Cy.flushSync(()=>{f(X)}))})},[p,e,t,O,U]);Vx(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[c]);const $=H.useRef(!1);Vx(()=>($.current=!0,()=>{$.current=!1}),[]),Vx(()=>{if(b&&(N.current=b),k&&(M.current=k),b&&k){if(R.current)return R.current(b,k,V);V()}},[b,k,V,R,A]);const Z=H.useMemo(()=>({reference:N,floating:M,setReference:E,setFloating:S}),[E,S]),ne=H.useMemo(()=>({reference:b,floating:k}),[b,k]),ae=H.useMemo(()=>{const z={position:t,left:0,top:0};if(!ne.floating)return z;const j=bL(ne.floating,u.x),X=bL(ne.floating,u.y);return a?{...z,transform:"translate("+j+"px, "+X+"px)",...oB(ne.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:j,top:X}},[t,a,ne.floating,u.x,u.y]);return H.useMemo(()=>({...u,update:V,refs:Z,elements:ne,floatingStyles:ae}),[u,V,Z,ne,ae])}const eK=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?TL({element:r.current,padding:i}).fn(t):{}:r?TL({element:r,padding:i}).fn(t):{}}}},tK=(n,e)=>({...GY(n),options:[n,e]}),nK=(n,e)=>({...WY(n),options:[n,e]}),rK=(n,e)=>({...YY(n),options:[n,e]}),iK=(n,e)=>({...$Y(n),options:[n,e]}),sK=(n,e)=>({...qY(n),options:[n,e]}),oK=(n,e)=>({...XY(n),options:[n,e]}),aK=(n,e)=>({...eK(n),options:[n,e]});var lK="Arrow",aB=H.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return L.jsx(Fs.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:L.jsx("polygon",{points:"0,0 30,0 15,10"})})});aB.displayName=lK;var cK=aB;function uK(n){const[e,t]=H.useState(void 0);return du(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var lB="Popper",[cB,uB]=q1(lB),[Nye,hB]=cB(lB),dB="PopperAnchor",fB=H.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=hB(dB,t),o=H.useRef(null),a=aa(e,o);return H.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:L.jsx(Fs.div,{...i,ref:a})});fB.displayName=dB;var yI="PopperContent",[hK,dK]=cB(yI),pB=H.forwardRef((n,e)=>{var Te,mt,vt,Ge,rt,Q;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:v,...w}=n,_=hB(yI,t),[g,E]=H.useState(null),S=aa(e,be=>E(be)),[b,k]=H.useState(null),N=uK(b),M=(N==null?void 0:N.width)??0,P=(N==null?void 0:N.height)??0,A=r+(s!=="center"?"-"+s:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],U=O.length>0,V={padding:R,boundary:O.filter(pK),altBoundary:U},{refs:$,floatingStyles:Z,placement:ne,isPositioned:ae,middlewareData:z}=JY({strategy:"fixed",placement:A,whileElementsMounted:(...be)=>jY(...be,{animationFrame:m==="always"}),elements:{reference:_.anchor},middleware:[tK({mainAxis:i+P,alignmentAxis:o}),l&&nK({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?rK():void 0,...V}),l&&iK({...V}),sK({...V,apply:({elements:be,rects:xe,availableWidth:Le,availableHeight:_e})=>{const{width:it,height:We}=xe.reference,G=be.floating.style;G.setProperty("--radix-popper-available-width",`${Le}px`),G.setProperty("--radix-popper-available-height",`${_e}px`),G.setProperty("--radix-popper-anchor-width",`${it}px`),G.setProperty("--radix-popper-anchor-height",`${We}px`)}}),b&&aK({element:b,padding:a}),mK({arrowWidth:M,arrowHeight:P}),p&&oK({strategy:"referenceHidden",...V})]}),[j,X]=vB(ne),ee=hu(v);du(()=>{ae&&(ee==null||ee())},[ae,ee]);const te=(Te=z.arrow)==null?void 0:Te.x,J=(mt=z.arrow)==null?void 0:mt.y,oe=((vt=z.arrow)==null?void 0:vt.centerOffset)!==0,[we,Pe]=H.useState();return du(()=>{g&&Pe(window.getComputedStyle(g).zIndex)},[g]),L.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:ae?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(Ge=z.transformOrigin)==null?void 0:Ge.x,(rt=z.transformOrigin)==null?void 0:rt.y].join(" "),...((Q=z.hide)==null?void 0:Q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:L.jsx(hK,{scope:t,placedSide:j,onArrowChange:k,arrowX:te,arrowY:J,shouldHideArrow:oe,children:L.jsx(Fs.div,{"data-side":j,"data-align":X,...w,ref:S,style:{...w.style,animation:ae?void 0:"none"}})})})});pB.displayName=yI;var mB="PopperArrow",fK={top:"bottom",right:"left",bottom:"top",left:"right"},gB=H.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=dK(mB,r),o=fK[s.placedSide];return L.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:L.jsx(cK,{...i,ref:t,style:{...i.style,display:"block"}})})});gB.displayName=mB;function pK(n){return n!==null}var mK=n=>({name:"transformOrigin",options:n,fn(e){var _,g,E;const{placement:t,rects:r,middlewareData:i}=e,o=((_=i.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=vB(t),f={start:"0%",center:"50%",end:"100%"}[u],p=(((g=i.arrow)==null?void 0:g.x)??0)+a/2,m=(((E=i.arrow)==null?void 0:E.y)??0)+l/2;let v="",w="";return c==="bottom"?(v=o?f:`${p}px`,w=`${-l}px`):c==="top"?(v=o?f:`${p}px`,w=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,w=o?f:`${m}px`):c==="left"&&(v=`${r.floating.width+l}px`,w=o?f:`${m}px`),{data:{x:v,y:w}}}});function vB(n){const[e,t="center"]=n.split("-");return[e,t]}var gK=fB,vK=pB,yK=gB,[J1,kye]=q1("Tooltip",[uB]),_I=uB(),yB="TooltipProvider",_K=700,AL="tooltip.open",[xK,_B]=J1(yB),xB=n=>{const{__scopeTooltip:e,delayDuration:t=_K,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=H.useRef(!0),a=H.useRef(!1),l=H.useRef(0);return H.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),L.jsx(xK,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:H.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:H.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:H.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};xB.displayName=yB;var wB="Tooltip",[Lye,eE]=J1(wB),oM="TooltipTrigger",wK=H.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=eE(oM,t),s=_B(oM,t),o=_I(t),a=H.useRef(null),l=aa(e,a,i.onTriggerChange),c=H.useRef(!1),u=H.useRef(!1),f=H.useCallback(()=>c.current=!1,[]);return H.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),L.jsx(gK,{asChild:!0,...o,children:L.jsx(Fs.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:$r(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:$r(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:$r(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:$r(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:$r(n.onBlur,i.onClose),onClick:$r(n.onClick,i.onClose)})})});wK.displayName=oM;var EK="TooltipPortal",[Dye,SK]=J1(EK,{forceMount:void 0}),Ap="TooltipContent",EB=H.forwardRef((n,e)=>{const t=SK(Ap,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=eE(Ap,n.__scopeTooltip);return L.jsx(iI,{present:r||o.open,children:o.disableHoverableContent?L.jsx(SB,{side:i,...s,ref:e}):L.jsx(TK,{side:i,...s,ref:e})})}),TK=H.forwardRef((n,e)=>{const t=eE(Ap,n.__scopeTooltip),r=_B(Ap,n.__scopeTooltip),i=H.useRef(null),s=aa(e,i),[o,a]=H.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:f}=r,p=H.useCallback(()=>{a(null),f(!1)},[f]),m=H.useCallback((v,w)=>{const _=v.currentTarget,g={x:v.clientX,y:v.clientY},E=RK(g,_.getBoundingClientRect()),S=IK(g,E),b=PK(w.getBoundingClientRect()),k=kK([...S,...b]);a(k),f(!0)},[f]);return H.useEffect(()=>()=>p(),[p]),H.useEffect(()=>{if(l&&u){const v=_=>m(_,u),w=_=>m(_,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",w),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",w)}}},[l,u,m,p]),H.useEffect(()=>{if(o){const v=w=>{const _=w.target,g={x:w.clientX,y:w.clientY},E=(l==null?void 0:l.contains(_))||(u==null?void 0:u.contains(_)),S=!NK(g,o);E?p():S&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,p]),L.jsx(SB,{...n,ref:s})}),[bK,AK]=J1(wB,{isInside:!1}),MK=k7("TooltipContent"),SB=H.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=eE(Ap,t),c=_I(t),{onClose:u}=l;return H.useEffect(()=>(document.addEventListener(AL,u),()=>document.removeEventListener(AL,u)),[u]),H.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),L.jsx(rI,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:L.jsxs(vK,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[L.jsx(MK,{children:r}),L.jsx(bK,{scope:t,isInside:!0,children:L.jsx(iq,{id:l.contentId,role:"tooltip",children:i||r})})]})})});EB.displayName=Ap;var TB="TooltipArrow",CK=H.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=_I(t);return AK(TB,t).isInside?null:L.jsx(yK,{...i,...r,ref:e})});CK.displayName=TB;function RK(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function IK(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function PK(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function NK(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,f=l.x,p=l.y;u>r!=p>r&&t<(f-c)*(r-u)/(p-u)+c&&(i=!i)}return i}function kK(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),LK(e)}function LK(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var DK=xB,bB=EB;const OK=DK,FK=H.forwardRef(({className:n,sideOffset:e=4,...t},r)=>L.jsx(bB,{ref:r,sideOffset:e,className:Ru("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));FK.displayName=bB.displayName;var tE=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nE=typeof window>"u"||"Deno"in globalThis;function Wo(){}function UK(n,e){return typeof n=="function"?n(e):n}function VK(n){return typeof n=="number"&&n>=0&&n!==1/0}function zK(n,e){return Math.max(n+(e||0)-Date.now(),0)}function aM(n,e){return typeof n=="function"?n(e):n}function BK(n,e){return typeof n=="function"?n(e):n}function ML(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==xI(o,e.options))return!1}else if(!Cv(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function CL(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Mv(e.options.mutationKey)!==Mv(s))return!1}else if(!Cv(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function xI(n,e){return((e==null?void 0:e.queryKeyHashFn)||Mv)(n)}function Mv(n){return JSON.stringify(n,(e,t)=>lM(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Cv(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Cv(n[t],e[t])):!1}function AB(n,e){if(n===e)return n;const t=RL(n)&&RL(e);if(t||lM(n)&&lM(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{},l=new Set(r);let c=0;for(let u=0;u<o;u++){const f=t?u:s[u];(!t&&l.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(a[f]=void 0,c++):(a[f]=AB(n[f],e[f]),a[f]===n[f]&&n[f]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function RL(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function lM(n){if(!IL(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!IL(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function IL(n){return Object.prototype.toString.call(n)==="[object Object]"}function HK(n){return new Promise(e=>{setTimeout(e,n)})}function jK(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?AB(n,e):e}function GK(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function WK(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var wI=Symbol();function MB(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===wI?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Mh,Ic,up,kU,$K=(kU=class extends tE{constructor(){super();Mn(this,Mh);Mn(this,Ic);Mn(this,up);Qt(this,up,e=>{if(!nE&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Se(this,Ic)||this.setEventListener(Se(this,up))}onUnsubscribe(){var e;this.hasListeners()||((e=Se(this,Ic))==null||e.call(this),Qt(this,Ic,void 0))}setEventListener(e){var t;Qt(this,up,e),(t=Se(this,Ic))==null||t.call(this),Qt(this,Ic,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Se(this,Mh)!==e&&(Qt(this,Mh,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof Se(this,Mh)=="boolean"?Se(this,Mh):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Mh=new WeakMap,Ic=new WeakMap,up=new WeakMap,kU),CB=new $K,hp,Pc,dp,LU,qK=(LU=class extends tE{constructor(){super();Mn(this,hp,!0);Mn(this,Pc);Mn(this,dp);Qt(this,dp,e=>{if(!nE&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){Se(this,Pc)||this.setEventListener(Se(this,dp))}onUnsubscribe(){var e;this.hasListeners()||((e=Se(this,Pc))==null||e.call(this),Qt(this,Pc,void 0))}setEventListener(e){var t;Qt(this,dp,e),(t=Se(this,Pc))==null||t.call(this),Qt(this,Pc,e(this.setOnline.bind(this)))}setOnline(e){Se(this,hp)!==e&&(Qt(this,hp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Se(this,hp)}},hp=new WeakMap,Pc=new WeakMap,dp=new WeakMap,LU),Uw=new qK;function XK(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function YK(n){return Math.min(1e3*2**n,3e4)}function RB(n){return(n??"online")==="online"?Uw.isOnline():!0}var IB=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function RT(n){return n instanceof IB}function PB(n){let e=!1,t=0,r=!1,i;const s=XK(),o=w=>{var _;r||(p(new IB(w)),(_=n.abort)==null||_.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>CB.isFocused()&&(n.networkMode==="always"||Uw.isOnline())&&n.canRun(),u=()=>RB(n.networkMode)&&n.canRun(),f=w=>{var _;r||(r=!0,(_=n.onSuccess)==null||_.call(n,w),i==null||i(),s.resolve(w))},p=w=>{var _;r||(r=!0,(_=n.onError)==null||_.call(n,w),i==null||i(),s.reject(w))},m=()=>new Promise(w=>{var _;i=g=>{(r||c())&&w(g)},(_=n.onPause)==null||_.call(n)}).then(()=>{var w;i=void 0,r||(w=n.onContinue)==null||w.call(n)}),v=()=>{if(r)return;let w;const _=t===0?n.initialPromise:void 0;try{w=_??n.fn()}catch(g){w=Promise.reject(g)}Promise.resolve(w).then(f).catch(g=>{var N;if(r)return;const E=n.retry??(nE?0:3),S=n.retryDelay??YK,b=typeof S=="function"?S(t,g):S,k=E===!0||typeof E=="number"&&t<E||typeof E=="function"&&E(t,g);if(e||!k){p(g);return}t++,(N=n.onFail)==null||N.call(n,t,g),HK(b).then(()=>c()?void 0:m()).then(()=>{e?p(g):v()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?v():m().then(v),s)}}var KK=n=>setTimeout(n,0);function QK(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=KK;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var as=QK(),Ch,DU,NB=(DU=class{constructor(){Mn(this,Ch)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),VK(this.gcTime)&&Qt(this,Ch,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(nE?1/0:5*60*1e3))}clearGcTimeout(){Se(this,Ch)&&(clearTimeout(Se(this,Ch)),Qt(this,Ch,void 0))}},Ch=new WeakMap,DU),fp,Rh,Eo,Ih,Bi,wy,Ph,qo,pl,OU,ZK=(OU=class extends NB{constructor(t){super();Mn(this,qo);Mn(this,fp);Mn(this,Rh);Mn(this,Eo);Mn(this,Ih);Mn(this,Bi);Mn(this,wy);Mn(this,Ph);Qt(this,Ph,!1),Qt(this,wy,t.defaultOptions),this.setOptions(t.options),this.observers=[],Qt(this,Ih,t.client),Qt(this,Eo,Se(this,Ih).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Qt(this,fp,eQ(this.options)),this.state=t.state??Se(this,fp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Se(this,Bi))==null?void 0:t.promise}setOptions(t){this.options={...Se(this,wy),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Se(this,Eo).remove(this)}setData(t,r){const i=jK(this.state.data,t,this.options);return ki(this,qo,pl).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){ki(this,qo,pl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,s;const r=(i=Se(this,Bi))==null?void 0:i.promise;return(s=Se(this,Bi))==null||s.cancel(t),r?r.then(Wo).catch(Wo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Se(this,fp))}isActive(){return this.observers.some(t=>BK(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>aM(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!zK(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Se(this,Bi))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Se(this,Bi))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Se(this,Eo).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Se(this,Bi)&&(Se(this,Ph)?Se(this,Bi).cancel({revert:!0}):Se(this,Bi).cancelRetry()),this.scheduleGc()),Se(this,Eo).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ki(this,qo,pl).call(this,{type:"invalidate"})}fetch(t,r){var u,f,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Se(this,Bi))return Se(this,Bi).continueRetry(),Se(this,Bi).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(v=>v.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Qt(this,Ph,!0),i.signal)})},o=()=>{const m=MB(this.options,r),w=(()=>{const _={client:Se(this,Ih),queryKey:this.queryKey,meta:this.meta};return s(_),_})();return Qt(this,Ph,!1),this.options.persister?this.options.persister(m,w,this):m(w)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Se(this,Ih),state:this.state,fetchFn:o};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),Qt(this,Rh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ki(this,qo,pl).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const c=m=>{var v,w,_,g;RT(m)&&m.silent||ki(this,qo,pl).call(this,{type:"error",error:m}),RT(m)||((w=(v=Se(this,Eo).config).onError)==null||w.call(v,m,this),(g=(_=Se(this,Eo).config).onSettled)==null||g.call(_,this.state.data,m,this)),this.scheduleGc()};return Qt(this,Bi,PB({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var v,w,_,g;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(E){c(E);return}(w=(v=Se(this,Eo).config).onSuccess)==null||w.call(v,m,this),(g=(_=Se(this,Eo).config).onSettled)==null||g.call(_,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,v)=>{ki(this,qo,pl).call(this,{type:"failed",failureCount:m,error:v})},onPause:()=>{ki(this,qo,pl).call(this,{type:"pause"})},onContinue:()=>{ki(this,qo,pl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Se(this,Bi).start()}},fp=new WeakMap,Rh=new WeakMap,Eo=new WeakMap,Ih=new WeakMap,Bi=new WeakMap,wy=new WeakMap,Ph=new WeakMap,qo=new WeakSet,pl=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...JK(i.data,this.options),fetchMeta:t.meta??null};case"success":return Qt(this,Rh,void 0),{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return RT(s)&&s.revert&&Se(this,Rh)?{...Se(this,Rh),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),as.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Se(this,Eo).notify({query:this,type:"updated",action:t})})},OU);function JK(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RB(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function eQ(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Sa,FU,tQ=(FU=class extends tE{constructor(e={}){super();Mn(this,Sa);this.config=e,Qt(this,Sa,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??xI(i,t);let o=this.get(s);return o||(o=new ZK({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Se(this,Sa).has(e.queryHash)||(Se(this,Sa).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Se(this,Sa).get(e.queryHash);t&&(e.destroy(),t===e&&Se(this,Sa).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){as.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Se(this,Sa).get(e)}getAll(){return[...Se(this,Sa).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>ML(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>ML(e,r)):t}notify(e){as.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){as.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){as.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Sa=new WeakMap,FU),Ta,ss,Nh,ba,vc,UU,nQ=(UU=class extends NB{constructor(t){super();Mn(this,ba);Mn(this,Ta);Mn(this,ss);Mn(this,Nh);this.mutationId=t.mutationId,Qt(this,ss,t.mutationCache),Qt(this,Ta,[]),this.state=t.state||rQ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Se(this,Ta).includes(t)||(Se(this,Ta).push(t),this.clearGcTimeout(),Se(this,ss).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Qt(this,Ta,Se(this,Ta).filter(r=>r!==t)),this.scheduleGc(),Se(this,ss).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Se(this,Ta).length||(this.state.status==="pending"?this.scheduleGc():Se(this,ss).remove(this))}continue(){var t;return((t=Se(this,Nh))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,c,u,f,p,m,v,w,_,g,E,S,b,k,N,M,P,A;const r=()=>{ki(this,ba,vc).call(this,{type:"continue"})};Qt(this,Nh,PB({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(R,O)=>{ki(this,ba,vc).call(this,{type:"failed",failureCount:R,error:O})},onPause:()=>{ki(this,ba,vc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Se(this,ss).canRun(this)}));const i=this.state.status==="pending",s=!Se(this,Nh).canStart();try{if(i)r();else{ki(this,ba,vc).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(o=Se(this,ss).config).onMutate)==null?void 0:a.call(o,t,this));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));O!==this.state.context&&ki(this,ba,vc).call(this,{type:"pending",context:O,variables:t,isPaused:s})}const R=await Se(this,Nh).start();return await((f=(u=Se(this,ss).config).onSuccess)==null?void 0:f.call(u,R,t,this.state.context,this)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,R,t,this.state.context)),await((w=(v=Se(this,ss).config).onSettled)==null?void 0:w.call(v,R,null,this.state.variables,this.state.context,this)),await((g=(_=this.options).onSettled)==null?void 0:g.call(_,R,null,t,this.state.context)),ki(this,ba,vc).call(this,{type:"success",data:R}),R}catch(R){try{throw await((S=(E=Se(this,ss).config).onError)==null?void 0:S.call(E,R,t,this.state.context,this)),await((k=(b=this.options).onError)==null?void 0:k.call(b,R,t,this.state.context)),await((M=(N=Se(this,ss).config).onSettled)==null?void 0:M.call(N,void 0,R,this.state.variables,this.state.context,this)),await((A=(P=this.options).onSettled)==null?void 0:A.call(P,void 0,R,t,this.state.context)),R}finally{ki(this,ba,vc).call(this,{type:"error",error:R})}}finally{Se(this,ss).runNext(this)}}},Ta=new WeakMap,ss=new WeakMap,Nh=new WeakMap,ba=new WeakSet,vc=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),as.batch(()=>{Se(this,Ta).forEach(i=>{i.onMutationUpdate(t)}),Se(this,ss).notify({mutation:this,type:"updated",action:t})})},UU);function rQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xl,Xo,Ey,VU,iQ=(VU=class extends tE{constructor(e={}){super();Mn(this,xl);Mn(this,Xo);Mn(this,Ey);this.config=e,Qt(this,xl,new Set),Qt(this,Xo,new Map),Qt(this,Ey,0)}build(e,t,r){const i=new nQ({mutationCache:this,mutationId:++q_(this,Ey)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){Se(this,xl).add(e);const t=m0(e);if(typeof t=="string"){const r=Se(this,Xo).get(t);r?r.push(e):Se(this,Xo).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Se(this,xl).delete(e)){const t=m0(e);if(typeof t=="string"){const r=Se(this,Xo).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&Se(this,Xo).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=m0(e);if(typeof t=="string"){const r=Se(this,Xo).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=m0(e);if(typeof t=="string"){const i=(r=Se(this,Xo).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){as.batch(()=>{Se(this,xl).forEach(e=>{this.notify({type:"removed",mutation:e})}),Se(this,xl).clear(),Se(this,Xo).clear()})}getAll(){return Array.from(Se(this,xl))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>CL(t,r))}findAll(e={}){return this.getAll().filter(t=>CL(e,t))}notify(e){as.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return as.batch(()=>Promise.all(e.map(t=>t.continue().catch(Wo))))}},xl=new WeakMap,Xo=new WeakMap,Ey=new WeakMap,VU);function m0(n){var e;return(e=n.options.scope)==null?void 0:e.id}function PL(n){return{onFetch:(e,t)=>{var u,f,p,m,v;const r=e.options,i=(p=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let w=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},g=MB(e.options,e.fetchOptions),E=async(S,b,k)=>{if(w)return Promise.reject();if(b==null&&S.pages.length)return Promise.resolve(S);const M=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:b,direction:k?"backward":"forward",meta:e.options.meta};return _(O),O})(),P=await g(M),{maxPages:A}=e.options,R=k?WK:GK;return{pages:R(S.pages,P,A),pageParams:R(S.pageParams,b,A)}};if(i&&s.length){const S=i==="backward",b=S?sQ:NL,k={pages:s,pageParams:o},N=b(r,k);a=await E(k,N,S)}else{const S=n??s.length;do{const b=l===0?o[0]??r.initialPageParam:NL(r,a);if(l>0&&b==null)break;a=await E(a,b),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var w,_;return(_=(w=e.options).persister)==null?void 0:_.call(w,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function NL(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function sQ(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var xr,Nc,kc,pp,mp,Lc,gp,vp,zU,oQ=(zU=class{constructor(n={}){Mn(this,xr);Mn(this,Nc);Mn(this,kc);Mn(this,pp);Mn(this,mp);Mn(this,Lc);Mn(this,gp);Mn(this,vp);Qt(this,xr,n.queryCache||new tQ),Qt(this,Nc,n.mutationCache||new iQ),Qt(this,kc,n.defaultOptions||{}),Qt(this,pp,new Map),Qt(this,mp,new Map),Qt(this,Lc,0)}mount(){q_(this,Lc)._++,Se(this,Lc)===1&&(Qt(this,gp,CB.subscribe(async n=>{n&&(await this.resumePausedMutations(),Se(this,xr).onFocus())})),Qt(this,vp,Uw.subscribe(async n=>{n&&(await this.resumePausedMutations(),Se(this,xr).onOnline())})))}unmount(){var n,e;q_(this,Lc)._--,Se(this,Lc)===0&&((n=Se(this,gp))==null||n.call(this),Qt(this,gp,void 0),(e=Se(this,vp))==null||e.call(this),Qt(this,vp,void 0))}isFetching(n){return Se(this,xr).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return Se(this,Nc).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Se(this,xr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=Se(this,xr).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(aM(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return Se(this,xr).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=Se(this,xr).get(r.queryHash),s=i==null?void 0:i.state.data,o=UK(e,s);if(o!==void 0)return Se(this,xr).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return as.batch(()=>Se(this,xr).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Se(this,xr).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=Se(this,xr);as.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=Se(this,xr);return as.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=as.batch(()=>Se(this,xr).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(Wo).catch(Wo)}invalidateQueries(n,e={}){return as.batch(()=>(Se(this,xr).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=as.batch(()=>Se(this,xr).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(Wo)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Wo)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=Se(this,xr).build(this,e);return t.isStaleByTime(aM(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Wo).catch(Wo)}fetchInfiniteQuery(n){return n.behavior=PL(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Wo).catch(Wo)}ensureInfiniteQueryData(n){return n.behavior=PL(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Uw.isOnline()?Se(this,Nc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Se(this,xr)}getMutationCache(){return Se(this,Nc)}getDefaultOptions(){return Se(this,kc)}setDefaultOptions(n){Qt(this,kc,n)}setQueryDefaults(n,e){Se(this,pp).set(Mv(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...Se(this,pp).values()],t={};return e.forEach(r=>{Cv(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){Se(this,mp).set(Mv(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...Se(this,mp).values()],t={};return e.forEach(r=>{Cv(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...Se(this,kc).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=xI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wI&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...Se(this,kc).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){Se(this,xr).clear(),Se(this,Nc).clear()}},xr=new WeakMap,Nc=new WeakMap,kc=new WeakMap,pp=new WeakMap,mp=new WeakMap,Lc=new WeakMap,gp=new WeakMap,vp=new WeakMap,zU),aQ=H.createContext(void 0),lQ=({client:n,children:e})=>(H.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),L.jsx(aQ.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rv(){return Rv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rv.apply(this,arguments)}var Fc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Fc||(Fc={}));const kL="popstate";function cQ(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return cM("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:LB(i)}return hQ(e,t,null,n)}function Qr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function kB(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uQ(){return Math.random().toString(36).substr(2,8)}function LL(n,e){return{usr:n.state,key:n.key,idx:e}}function cM(n,e,t,r){return t===void 0&&(t=null),Rv({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Jp(e):e,{state:t,key:e&&e.key||r||uQ()})}function LB(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Jp(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function hQ(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Fc.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Rv({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Fc.Pop;let _=u(),g=_==null?null:_-c;c=_,l&&l({action:a,location:w.location,delta:g})}function p(_,g){a=Fc.Push;let E=cM(w.location,_,g);c=u()+1;let S=LL(E,c),b=w.createHref(E);try{o.pushState(S,"",b)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(b)}s&&l&&l({action:a,location:w.location,delta:1})}function m(_,g){a=Fc.Replace;let E=cM(w.location,_,g);c=u();let S=LL(E,c),b=w.createHref(E);o.replaceState(S,"",b),s&&l&&l({action:a,location:w.location,delta:0})}function v(_){let g=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof _=="string"?_:LB(_);return E=E.replace(/ $/,"%20"),Qr(g,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,g)}let w={get action(){return a},get location(){return n(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(kL,f),l=_,()=>{i.removeEventListener(kL,f),l=null}},createHref(_){return e(i,_)},createURL:v,encodeLocation(_){let g=v(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return w}var DL;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(DL||(DL={}));function dQ(n,e,t){return t===void 0&&(t="/"),fQ(n,e,t,!1)}function fQ(n,e,t,r){let i=typeof e=="string"?Jp(e):e,s=FB(i.pathname||"/",t);if(s==null)return null;let o=DB(n);pQ(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=bQ(s);a=SQ(o[l],c,r)}return a}function DB(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Qr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Dh([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(Qr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),DB(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:wQ(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of OB(s.path))i(s,o,l)}),e}function OB(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=OB(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function pQ(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EQ(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const mQ=/^:[\w-]+$/,gQ=3,vQ=2,yQ=1,_Q=10,xQ=-2,OL=n=>n==="*";function wQ(n,e){let t=n.split("/"),r=t.length;return t.some(OL)&&(r+=xQ),e&&(r+=vQ),t.filter(i=>!OL(i)).reduce((i,s)=>i+(mQ.test(s)?gQ:s===""?yQ:_Q),r)}function EQ(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function SQ(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=FL({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f&&c&&t&&!r[r.length-1].route.index&&(f=FL({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Dh([s,f.pathname]),pathnameBase:PQ(Dh([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Dh([s,f.pathnameBase]))}return o}function FL(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=TQ(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let w=a[f]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function TQ(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),kB(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function bQ(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kB(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function FB(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function AQ(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Jp(n):n;return{pathname:t?t.startsWith("/")?t:MQ(t,e):e,search:NQ(r),hash:kQ(i)}}function MQ(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function IT(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CQ(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function RQ(n,e){let t=CQ(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function IQ(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Jp(n):(i=Rv({},n),Qr(!i.pathname||!i.pathname.includes("?"),IT("?","pathname","search",i)),Qr(!i.pathname||!i.pathname.includes("#"),IT("#","pathname","hash",i)),Qr(!i.search||!i.search.includes("#"),IT("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=AQ(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Dh=n=>n.join("/").replace(/\/\/+/g,"/"),PQ=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NQ=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kQ=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function LQ(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const UB=["post","put","patch","delete"];new Set(UB);const DQ=["get",...UB];new Set(DQ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iv(){return Iv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Iv.apply(this,arguments)}const EI=H.createContext(null),OQ=H.createContext(null),rE=H.createContext(null),iE=H.createContext(null),cd=H.createContext({outlet:null,matches:[],isDataRoute:!1}),VB=H.createContext(null);function sE(){return H.useContext(iE)!=null}function SI(){return sE()||Qr(!1),H.useContext(iE).location}function zB(n){H.useContext(rE).static||H.useLayoutEffect(n)}function FQ(){let{isDataRoute:n}=H.useContext(cd);return n?QQ():UQ()}function UQ(){sE()||Qr(!1);let n=H.useContext(EI),{basename:e,future:t,navigator:r}=H.useContext(rE),{matches:i}=H.useContext(cd),{pathname:s}=SI(),o=JSON.stringify(RQ(i,t.v7_relativeSplatPath)),a=H.useRef(!1);return zB(()=>{a.current=!0}),H.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=IQ(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Dh([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,s,n])}function VQ(){let{matches:n}=H.useContext(cd),e=n[n.length-1];return e?e.params:{}}function zQ(n,e){return BQ(n,e)}function BQ(n,e,t,r){sE()||Qr(!1);let{navigator:i}=H.useContext(rE),{matches:s}=H.useContext(cd),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=SI(),u;if(e){var f;let _=typeof e=="string"?Jp(e):e;l==="/"||(f=_.pathname)!=null&&f.startsWith(l)||Qr(!1),u=_}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=dQ(n,{pathname:m}),w=$Q(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Dh([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Dh([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,r);return e&&w?H.createElement(iE.Provider,{value:{location:Iv({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Fc.Pop}},w):w}function HQ(){let n=KQ(),e=LQ(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:i},t):null,null)}const jQ=H.createElement(HQ,null);class GQ extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(cd.Provider,{value:this.props.routeContext},H.createElement(VB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WQ(n){let{routeContext:e,match:t,children:r}=n,i=H.useContext(EI);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(cd.Provider,{value:e},r)}function $Q(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Qr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,v=!1,w=null,_=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||jQ,l&&(c<0&&p===0?(v=!0,_=null):c===p&&(v=!0,_=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),E=()=>{let S;return m?S=w:v?S=_:f.route.Component?S=H.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,H.createElement(WQ,{match:f,routeContext:{outlet:u,matches:g,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?H.createElement(GQ,{location:t.location,revalidation:t.revalidation,component:w,error:m,children:E(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):E()},null)}var BB=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(BB||{}),Vw=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Vw||{});function qQ(n){let e=H.useContext(EI);return e||Qr(!1),e}function XQ(n){let e=H.useContext(OQ);return e||Qr(!1),e}function YQ(n){let e=H.useContext(cd);return e||Qr(!1),e}function HB(n){let e=YQ(),t=e.matches[e.matches.length-1];return t.route.id||Qr(!1),t.route.id}function KQ(){var n;let e=H.useContext(VB),t=XQ(Vw.UseRouteError),r=HB(Vw.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function QQ(){let{router:n}=qQ(BB.UseNavigateStable),e=HB(Vw.UseNavigateStable),t=H.useRef(!1);return zB(()=>{t.current=!0}),H.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Iv({fromRouteId:e},s)))},[n,e])}function ZQ(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Eg(n){Qr(!1)}function JQ(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Fc.Pop,navigator:s,static:o=!1,future:a}=n;sE()&&Qr(!1);let l=e.replace(/^\/*/,"/"),c=H.useMemo(()=>({basename:l,navigator:s,static:o,future:Iv({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Jp(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:v="default"}=r,w=H.useMemo(()=>{let _=FB(u,l);return _==null?null:{location:{pathname:_,search:f,hash:p,state:m,key:v},navigationType:i}},[l,u,f,p,m,v,i]);return w==null?null:H.createElement(rE.Provider,{value:c},H.createElement(iE.Provider,{children:t,value:w}))}function eZ(n){let{children:e,location:t}=n;return zQ(uM(e),t)}new Promise(()=>{});function uM(n,e){e===void 0&&(e=[]);let t=[];return H.Children.forEach(n,(r,i)=>{if(!H.isValidElement(r))return;let s=[...e,i];if(r.type===H.Fragment){t.push.apply(t,uM(r.props.children,s));return}r.type!==Eg&&Qr(!1),!r.props.index||!r.props.children||Qr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uM(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const tZ="6";try{window.__reactRouterVersion=tZ}catch{}const nZ="startTransition",UL=QU[nZ];function rZ(n){let{basename:e,children:t,future:r,window:i}=n,s=H.useRef();s.current==null&&(s.current=cQ({window:i,v5Compat:!0}));let o=s.current,[a,l]=H.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=H.useCallback(f=>{c&&UL?UL(()=>l(f)):l(f)},[l,c]);return H.useLayoutEffect(()=>o.listen(u),[o,u]),H.useEffect(()=>ZQ(r),[r]),H.createElement(JQ,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var VL;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(VL||(VL={}));var zL;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(zL||(zL={}));const iZ=Iz("inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-bold uppercase tracking-wider transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground border-2 border-primary hover:bg-transparent hover:text-primary shadow-brutal hover:translate-x-[-4px] hover:translate-y-[-4px] hover:shadow-brutal-lg",destructive:"bg-destructive text-destructive-foreground border-2 border-destructive hover:bg-transparent hover:text-destructive",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground shadow-brutal hover:translate-x-[-4px] hover:translate-y-[-4px] hover:shadow-brutal-lg",secondary:"bg-secondary text-secondary-foreground border-2 border-secondary hover:bg-transparent hover:text-secondary shadow-brutal-cyan hover:translate-x-[-4px] hover:translate-y-[-4px]",ghost:"text-foreground hover:text-primary hover:bg-transparent",link:"text-primary underline-offset-4 hover:underline",neon:"bg-transparent text-primary border-2 border-primary shadow-neon hover:shadow-neon hover:bg-primary/10 animate-glow-pulse",hero:"bg-primary text-primary-foreground border-2 border-primary text-lg px-8 py-6 hover:bg-transparent hover:text-primary shadow-brutal-lg hover:translate-x-[-6px] hover:translate-y-[-6px]"},size:{default:"h-12 px-6 py-3",sm:"h-10 px-4 py-2 text-xs",lg:"h-14 px-8 py-4",xl:"h-16 px-10 py-5 text-base",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),Wi=H.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?P7:"button";return L.jsx(o,{className:Ru(iZ({variant:e,size:t,className:n})),ref:s,...i})});Wi.displayName="Button";const BL=()=>{const{theme:n,setTheme:e}=Yz(),[t,r]=H.useState(!1);return H.useEffect(()=>{r(!0)},[]),t?L.jsx(Wi,{variant:"ghost",size:"icon",onClick:()=>e(n==="dark"?"light":"dark"),className:"w-10 h-10 border-2 border-border hover:border-primary/50 transition-all","aria-label":"Toggle theme",children:n==="dark"?L.jsx(cL,{size:18,className:"text-primary"}):L.jsx(Pq,{size:18,className:"text-primary"})}):L.jsx(Wi,{variant:"ghost",size:"icon",className:"w-10 h-10",children:L.jsx(cL,{size:18})})};var ve=typeof window<"u"?window:void 0,xi=typeof globalThis<"u"?globalThis:ve;typeof self>"u"&&(xi.self=xi),typeof File>"u"&&(xi.File=function(){});var jB=Array.prototype,HL=jB.forEach,jL=jB.indexOf,eo=xi==null?void 0:xi.navigator,Ze=xi==null?void 0:xi.document,Cs=xi==null?void 0:xi.location,hM=xi==null?void 0:xi.fetch,dM=xi!=null&&xi.XMLHttpRequest&&"withCredentials"in new xi.XMLHttpRequest?xi.XMLHttpRequest:void 0,GL=xi==null?void 0:xi.AbortController,Ts=eo==null?void 0:eo.userAgent,Bt=ve??{},gl={DEBUG:!1,LIB_VERSION:"1.302.2"};function WL(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function $L(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){WL(s,r,i,o,a,"next",l)}function a(l){WL(s,r,i,o,a,"throw",l)}o(void 0)})}}function ut(){return ut=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ut.apply(null,arguments)}function GB(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var sZ=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],qL=function(n,e){if(e===void 0&&(e=[]),!n)return!1;var t=n.toLowerCase();return sZ.concat(e).some(r=>{var i=r.toLowerCase();return t.indexOf(i)!==-1})},oZ=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function dn(n,e){return n.indexOf(e)!==-1}var oE=function(n){return n.trim()},fM=function(n){return n.replace(/^\$/,"")},aZ=Array.isArray,WB=Object.prototype,$B=WB.hasOwnProperty,aE=WB.toString,jn=aZ||function(n){return aE.call(n)==="[object Array]"},Yc=n=>typeof n=="function",ui=n=>n===Object(n)&&!jn(n),Uf=n=>{if(ui(n)){for(var e in n)if($B.call(n,e))return!1;return!0}return!1},Xe=n=>n===void 0,qr=n=>aE.call(n)=="[object String]",pM=n=>qr(n)&&n.trim().length===0,Xl=n=>n===null,zn=n=>Xe(n)||Xl(n),$a=n=>aE.call(n)=="[object Number]",Kc=n=>aE.call(n)==="[object Boolean]",lZ=n=>n instanceof FormData,cZ=n=>dn(oZ,n);function mM(n){return n===null||typeof n!="object"}function zw(n,e){return Object.prototype.toString.call(n)==="[object "+e+"]"}function qB(n){return!Xe(Event)&&function(e,t){try{return e instanceof t}catch{return!1}}(n,Event)}var uZ=[!0,"true",1,"1","yes"],PT=n=>dn(uZ,n),hZ=[!1,"false",0,"0","no"];function Ra(n,e,t,r,i){return e>t&&(r.warn("min cannot be greater than max."),e=t),$a(n)?n>t?(r.warn(" cannot be  greater than max: "+t+". Using max value instead."),t):n<e?(r.warn(" cannot be less than min: "+e+". Using min value instead."),e):n:(r.warn(" must be a number. using max or fallback. max: "+t+", fallback: "+i),Ra(i||t,e,t,r))}let dZ=class{constructor(e){this.t={},this.i=e.i,this.o=Ra(e.bucketSize,0,100,e.h),this.m=Ra(e.refillRate,0,this.o,e.h),this.S=Ra(e.refillInterval,0,864e5,e.h)}$(e,t){var r=t-e.lastAccess,i=Math.floor(r/this.S);if(i>0){var s=i*this.m;e.tokens=Math.min(e.tokens+s,this.o),e.lastAccess=e.lastAccess+i*this.S}}consumeRateLimit(e){var t,r=Date.now(),i=String(e),s=this.t[i];return s?this.$(s,r):(s={tokens:this.o,lastAccess:r},this.t[i]=s),s.tokens===0||(s.tokens--,s.tokens===0&&((t=this.i)==null||t.call(this,e)),s.tokens===0)}stop(){this.t={}}};var g0,XL,NT,fZ=n=>n instanceof Error;function pZ(n){var e=globalThis._posthogChunkIds;if(e){var t=Object.keys(e);return NT&&t.length===XL||(XL=t.length,NT=t.reduce((r,i)=>{g0||(g0={});var s=g0[i];if(s)r[s[0]]=s[1];else for(var o=n(i),a=o.length-1;a>=0;a--){var l=o[a],c=l==null?void 0:l.filename,u=e[i];if(c&&u){r[c]=u,g0[i]=[c,u];break}}return r},{})),NT}}class mZ{constructor(e,t,r){r===void 0&&(r=[]),this.coercers=e,this.stackParser=t,this.modifiers=r}buildFromUnknown(e,t){t===void 0&&(t={});var r=t&&t.mechanism||{handled:!0,type:"generic"},i=this.buildCoercingContext(r,t,0).apply(e),s=this.buildParsingContext(),o=this.parseStacktrace(i,s);return{$exception_list:this.convertToExceptionList(o,r),$exception_level:"error"}}modifyFrames(e){var t=this;return $L(function*(){for(var r of e)r.stacktrace&&r.stacktrace.frames&&jn(r.stacktrace.frames)&&(r.stacktrace.frames=yield t.applyModifiers(r.stacktrace.frames));return e})()}coerceFallback(e){var t;return{type:"Error",value:"Unknown error",stack:(t=e.syntheticException)==null?void 0:t.stack,synthetic:!0}}parseStacktrace(e,t){var r,i;return e.cause!=null&&(r=this.parseStacktrace(e.cause,t)),e.stack!=""&&e.stack!=null&&(i=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),t.chunkIdMap)),ut({},e,{cause:r,stack:i})}applyChunkIds(e,t){return e.map(r=>(r.filename&&t&&(r.chunk_id=t[r.filename]),r))}applyCoercers(e,t){for(var r of this.coercers)if(r.match(e))return r.coerce(e,t);return this.coerceFallback(t)}applyModifiers(e){var t=this;return $L(function*(){var r=e;for(var i of t.modifiers)r=yield i(r);return r})()}convertToExceptionList(e,t){var r,i,s,o={type:e.type,value:e.value,mechanism:{type:(r=t.type)!==null&&r!==void 0?r:"generic",handled:(i=t.handled)===null||i===void 0||i,synthetic:(s=e.synthetic)!==null&&s!==void 0&&s}};e.stack&&(o.stacktrace={type:"raw",frames:e.stack});var a=[o];return e.cause!=null&&a.push(...this.convertToExceptionList(e.cause,ut({},t,{handled:!0}))),a}buildParsingContext(){return{chunkIdMap:pZ(this.stackParser)}}buildCoercingContext(e,t,r){r===void 0&&(r=0);var i=(s,o)=>{if(o<=4){var a=this.buildCoercingContext(e,t,o);return this.applyCoercers(s,a)}};return ut({},t,{syntheticException:r==0?t.syntheticException:void 0,mechanism:e,apply:s=>i(s,r),next:s=>i(s,r+1)})}}var Mp="?";function gM(n,e,t,r,i){var s={platform:n,filename:e,function:t==="<anonymous>"?Mp:t,in_app:!0};return Xe(r)||(s.lineno=r),Xe(i)||(s.colno=i),s}var XB=(n,e)=>{var t=n.indexOf("safari-extension")!==-1,r=n.indexOf("safari-web-extension")!==-1;return t||r?[n.indexOf("@")!==-1?n.split("@")[0]:Mp,t?"safari-extension:"+e:"safari-web-extension:"+e]:[n,e]},gZ=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,vZ=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,yZ=/\((\S*)(?::(\d+))(?::(\d+))\)/,_Z=(n,e)=>{var t=gZ.exec(n);if(t){var[,r,i,s]=t;return gM(e,r,Mp,+i,+s)}var o=vZ.exec(n);if(o){if(o[2]&&o[2].indexOf("eval")===0){var a=yZ.exec(o[2]);a&&(o[2]=a[1],o[3]=a[2],o[4]=a[3])}var[l,c]=XB(o[1]||Mp,o[2]);return gM(e,c,l,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}},xZ=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,wZ=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,EZ=(n,e)=>{var t=xZ.exec(n);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var r=wZ.exec(t[3]);r&&(t[1]=t[1]||"eval",t[3]=r[1],t[4]=r[2],t[5]="")}var i=t[3],s=t[1]||Mp;return[s,i]=XB(s,i),gM(e,i,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},YL=/\(error: (.*)\)/,KL=50;function SZ(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return function(i,s){s===void 0&&(s=0);for(var o=[],a=i.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=YL.test(c)?c.replace(YL,"$1"):c;if(!u.match(/\S*Error: /)){for(var f of t){var p=f(u,n);if(p){o.push(p);break}}if(o.length>=KL)break}}}return function(m){if(!m.length)return[];var v=Array.from(m);return v.reverse(),v.slice(0,KL).map(w=>{return ut({},w,{filename:w.filename||(_=v,_[_.length-1]||{}).filename,function:w.function||Mp});var _})}(o)}}let TZ=class{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,t){var r=qr(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:r?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?t+": "+e.message:t}isDOMException(e){return zw(e,"DOMException")}isDOMError(e){return zw(e,"DOMError")}},bZ=class{match(e){return(t=>t instanceof Error)(e)}coerce(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,t){var r=e.message;return r.error&&typeof r.error.message=="string"?String(r.error.message):String(r)}getStack(e){return e.stacktrace||e.stack||void 0}},AZ=class{constructor(){}match(e){return zw(e,"ErrorEvent")&&e.error!=null}coerce(e,t){var r,i=t.apply(e.error);return i||{type:"ErrorEvent",value:e.message,stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}};var MZ=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let CZ=class{match(e){return typeof e=="string"}coerce(e,t){var r,[i,s]=this.getInfos(e);return{type:i??"Error",value:s??e,stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}getInfos(e){var t="Error",r=e,i=e.match(MZ);return i&&(t=i[1],r=i[2]),[t,r]}};var RZ=["fatal","error","warning","log","info","debug"];function YB(n,e){e===void 0&&(e=40);var t=Object.keys(n);if(t.sort(),!t.length)return"[object has no keys]";for(var r=t.length;r>0;r--){var i=t.slice(0,r).join(", ");if(!(i.length>e))return r===t.length||i.length<=e?i:i.slice(0,e)+"..."}return""}let IZ=class{match(e){return typeof e=="object"&&e!==null}coerce(e,t){var r,i=this.getErrorPropertyFromObject(e);return i?t.apply(i):{type:this.getType(e),value:this.getValue(e),stack:(r=t.syntheticException)==null?void 0:r.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return qB(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&typeof e.name=="string"){var t="'"+e.name+"' captured as exception";return"message"in e&&typeof e.message=="string"&&(t+=" with message: '"+e.message+"'"),t}if("message"in e&&typeof e.message=="string")return e.message;var r=this.getObjectClassName(e);return(r&&r!=="Object"?"'"+r+"'":"Object")+" captured as exception with keys: "+YB(e)}isSeverityLevel(e){return qr(e)&&!pM(e)&&RZ.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(fZ(r))return r}}getObjectClassName(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{return}}},PZ=class{match(e){return qB(e)}coerce(e,t){var r,i=e.constructor.name;return{type:i,value:i+" captured as exception with keys: "+YB(e),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}},NZ=class{match(e){return mM(e)}coerce(e,t){var r;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}};class kZ{match(e){return zw(e,"PromiseRejectionEvent")}coerce(e,t){var r,i=this.getUnhandledRejectionReason(e);return mM(i)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(i),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}:t.apply(i)}getUnhandledRejectionReason(e){if(mM(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}}var KB=function(n,e){var{debugEnabled:t}=e===void 0?{}:e,r={k:function(i){if(ve&&(gl.DEBUG||Bt.POSTHOG_DEBUG||t)&&!Xe(ve.console)&&ve.console){for(var s=("__rrweb_original__"in ve.console[i])?ve.console[i].__rrweb_original__:ve.console[i],o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];s(n,...a)}},info:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];r.k("log",...s)},warn:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];r.k("warn",...s)},error:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];r.k("error",...s)},critical:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];console.error(n,...s)},uninitializedWarning:i=>{r.error("You must initialize PostHog before calling "+i)},createLogger:(i,s)=>KB(n+" "+i,s)};return r},et=KB("[PostHog.js]"),ti=et.createLogger,LZ=ti("[ExternalScriptsLoader]"),QL=(n,e,t)=>{if(n.config.disable_external_dependency_loading)return LZ.warn(e+" was requested but loading of external scripts is disabled."),t("Loading of external scripts is disabled");var r=Ze==null?void 0:Ze.querySelectorAll("script");if(r){for(var i,s=function(){if(r[o].src===e){var l=r[o];return l.__posthog_loading_callback_fired?{v:t()}:(l.addEventListener("load",c=>{l.__posthog_loading_callback_fired=!0,t(void 0,c)}),l.onerror=c=>t(c),{v:void 0})}},o=0;o<r.length;o++)if(i=s())return i.v}var a=()=>{if(!Ze)return t("document not found");var l=Ze.createElement("script");if(l.type="text/javascript",l.crossOrigin="anonymous",l.src=e,l.onload=f=>{l.__posthog_loading_callback_fired=!0,t(void 0,f)},l.onerror=f=>t(f),n.config.prepare_external_dependency_script&&(l=n.config.prepare_external_dependency_script(l)),!l)return t("prepare_external_dependency_script returned null");var c,u=Ze.querySelectorAll("body > script");u.length>0?(c=u[0].parentNode)==null||c.insertBefore(l,u[0]):Ze.body.appendChild(l)};Ze!=null&&Ze.body?a():Ze==null||Ze.addEventListener("DOMContentLoaded",a)};Bt.__PosthogExtensions__=Bt.__PosthogExtensions__||{},Bt.__PosthogExtensions__.loadExternalDependency=(n,e,t)=>{var r="/static/"+e+".js?v="+n.version;if(e==="remote-config"&&(r="/array/"+n.config.token+"/config.js"),e==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var s=n.requestRouter.endpointFor("assets",r);QL(n,s,t)},Bt.__PosthogExtensions__.loadSiteApp=(n,e,t)=>{var r=n.requestRouter.endpointFor("api",e);QL(n,r,t)};var Bw={};function Qc(n,e,t){if(jn(n)){if(HL&&n.forEach===HL)n.forEach(e,t);else if("length"in n&&n.length===+n.length){for(var r=0,i=n.length;r<i;r++)if(r in n&&e.call(t,n[r],r)===Bw)return}}}function $n(n,e,t){if(!zn(n)){if(jn(n))return Qc(n,e,t);if(lZ(n)){for(var r of n.entries())if(e.call(t,r[1],r[0])===Bw)return}else for(var i in n)if($B.call(n,i)&&e.call(t,n[i],i)===Bw)return}}var Rr=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Qc(t,function(i){for(var s in i)i[s]!==void 0&&(n[s]=i[s])}),n},em=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Qc(t,function(i){Qc(i,function(s){n.push(s)})}),n};function zx(n){for(var e=Object.keys(n),t=e.length,r=new Array(t);t--;)r[t]=[e[t],n[e[t]]];return r}var ZL=function(n){try{return n()}catch{return}},DZ=function(n){return function(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(this,t)}catch(i){et.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),et.critical(i)}}},TI=function(n){var e={};return $n(n,function(t,r){(qr(t)&&t.length>0||$a(t))&&(e[r]=t)}),e};function OZ(n,e){return t=n,r=s=>qr(s)&&!Xl(e)?s.slice(0,e):s,i=new Set,function s(o,a){return o!==Object(o)?r?r(o,a):o:i.has(o)?void 0:(i.add(o),jn(o)?(l=[],Qc(o,c=>{l.push(s(c))})):(l={},$n(o,(c,u)=>{i.has(c)||(l[u]=s(c,u))})),l);var l}(t);var t,r,i}var FZ=["herokuapp.com","vercel.app","netlify.app"];function UZ(n){var e=n==null?void 0:n.hostname;if(!qr(e))return!1;var t=e.split(".").slice(-2).join(".");for(var r of FZ)if(t===r)return!1;return!0}function QB(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return n[t]}function Vr(n,e,t,r){var{capture:i=!1,passive:s=!0}=r??{};n==null||n.addEventListener(e,t,{capture:i,passive:s})}var ZB="$people_distinct_id",Sg="__alias",Tg="__timers",JL="$autocapture_disabled_server_side",vM="$heatmaps_enabled_server_side",eD="$exception_capture_enabled_server_side",yM="$error_tracking_suppression_rules",tD="$error_tracking_capture_extension_exceptions",nD="$web_vitals_enabled_server_side",JB="$dead_clicks_enabled_server_side",rD="$web_vitals_allowed_metrics",kT="$session_recording_remote_config",Hw="$sesid",e5="$session_is_sampled",Vf="$enabled_feature_flags",bg="$early_access_features",_M="$feature_flag_details",Ag="$stored_person_properties",fh="$stored_group_properties",xM="$surveys",v0="$surveys_activated",jw="$flag_call_reported",vl="$user_state",wM="$client_session_props",EM="$capture_rate_limit",SM="$initial_campaign_params",TM="$initial_referrer_info",Gw="$initial_person_info",Ww="$epp",t5="__POSTHOG_TOOLBAR__",Xm="$posthog_cookieless",VZ=[ZB,Sg,"__cmpns",Tg,"$session_recording_enabled_server_side",vM,Hw,Vf,yM,vl,bg,_M,fh,Ag,xM,jw,wM,EM,SM,TM,Ww,Gw];function iD(n){return n instanceof Element&&(n.id===t5||!(n.closest==null||!n.closest(".toolbar-global-fade-container")))}function lE(n){return!!n&&n.nodeType===1}function Zc(n,e){return!!n&&!!n.tagName&&n.tagName.toLowerCase()===e.toLowerCase()}function n5(n){return!!n&&n.nodeType===3}function r5(n){return!!n&&n.nodeType===11}function bI(n){return n?oE(n).split(/\s+/):[]}function sD(n){var e=ve==null?void 0:ve.location.href;return!!(e&&n&&n.some(t=>e.match(t)))}function $w(n){var e="";switch(typeof n.className){case"string":e=n.className;break;case"object":e=(n.className&&"baseVal"in n.className?n.className.baseVal:null)||n.getAttribute("class")||"";break;default:e=""}return bI(e)}function i5(n){return zn(n)?null:oE(n).split(/(\s+)/).filter(e=>Pv(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Py(n){var e="";return bM(n)&&!c5(n)&&n.childNodes&&n.childNodes.length&&$n(n.childNodes,function(t){var r;n5(t)&&t.textContent&&(e+=(r=i5(t.textContent))!==null&&r!==void 0?r:"")}),oE(e)}function s5(n){return Xe(n.target)?n.srcElement||null:(e=n.target)!=null&&e.shadowRoot?n.composedPath()[0]||null:n.target||null;var e}var AI=["a","button","form","input","select","textarea","label"];function o5(n,e){if(Xe(e))return!0;var t,r=function(s){if(e.some(o=>s.matches(o)))return{v:!0}};for(var i of n)if(t=r(i))return t.v;return!1}function a5(n){var e=n.parentNode;return!(!e||!lE(e))&&e}var zZ=["next","previous","prev",">","<"],oD=10,aD=[".ph-no-rageclick",".ph-no-capture"];function BZ(n,e){if(!ve||MI(n))return!1;var t,r,i;if(Kc(e)?(t=!!e&&aD,r=void 0):(t=(i=e==null?void 0:e.css_selector_ignorelist)!==null&&i!==void 0?i:aD,r=e==null?void 0:e.content_ignorelist),t===!1)return!1;var{targetElementList:s}=l5(n,!1);return!function(o,a){if(o===!1||Xe(o))return!1;var l;if(o===!0)l=zZ;else{if(!jn(o))return!1;if(o.length>oD)return et.error("[PostHog] content_ignorelist array cannot exceed "+oD+" items. Use css_selector_ignorelist for more complex matching."),!1;l=o.map(c=>c.toLowerCase())}return a.some(c=>{var{safeText:u,ariaLabel:f}=c;return l.some(p=>u.includes(p)||f.includes(p))})}(r,s.map(o=>{var a;return{safeText:Py(o).toLowerCase(),ariaLabel:((a=o.getAttribute("aria-label"))==null?void 0:a.toLowerCase().trim())||""}}))&&!o5(s,t)}var MI=n=>!n||Zc(n,"html")||!lE(n),l5=(n,e)=>{if(!ve||MI(n))return{parentIsUsefulElement:!1,targetElementList:[]};for(var t=!1,r=[n],i=n;i.parentNode&&!Zc(i,"body");)if(r5(i.parentNode))r.push(i.parentNode.host),i=i.parentNode.host;else{var s=a5(i);if(!s)break;if(e||AI.indexOf(s.tagName.toLowerCase())>-1)t=!0;else{var o=ve.getComputedStyle(s);o&&o.getPropertyValue("cursor")==="pointer"&&(t=!0)}r.push(s),i=s}return{parentIsUsefulElement:t,targetElementList:r}};function HZ(n,e,t,r,i){var s,o,a,l;if(t===void 0&&(t=void 0),!ve||MI(n)||(s=t)!=null&&s.url_allowlist&&!sD(t.url_allowlist)||(o=t)!=null&&o.url_ignorelist&&sD(t.url_ignorelist))return!1;if((a=t)!=null&&a.dom_event_allowlist){var c=t.dom_event_allowlist;if(c&&!c.some(v=>e.type===v))return!1}var{parentIsUsefulElement:u,targetElementList:f}=l5(n,r);if(!function(v,w){var _=w==null?void 0:w.element_allowlist;if(Xe(_))return!0;var g,E=function(b){if(_.some(k=>b.tagName.toLowerCase()===k))return{v:!0}};for(var S of v)if(g=E(S))return g.v;return!1}(f,t)||!o5(f,(l=t)==null?void 0:l.css_selector_allowlist))return!1;var p=ve.getComputedStyle(n);if(p&&p.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=n.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(i||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(e.type)>=0;default:return u?(i||["click"]).indexOf(e.type)>=0:(i||["click"]).indexOf(e.type)>=0&&(AI.indexOf(m)>-1||n.getAttribute("contenteditable")==="true")}}function bM(n){for(var e=n;e.parentNode&&!Zc(e,"body");e=e.parentNode){var t=$w(e);if(dn(t,"ph-sensitive")||dn(t,"ph-no-capture"))return!1}if(dn($w(n),"ph-include"))return!0;var r=n.type||"";if(qr(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=n.name||n.id||"";return!(qr(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function c5(n){return!!(Zc(n,"input")&&!["button","checkbox","submit","reset"].includes(n.type)||Zc(n,"select")||Zc(n,"textarea")||n.getAttribute("contenteditable")==="true")}var u5="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",jZ=new RegExp("^(?:"+u5+")$"),GZ=new RegExp(u5),h5="\\d{3}-?\\d{2}-?\\d{4}",WZ=new RegExp("^("+h5+")$"),$Z=new RegExp("("+h5+")");function Pv(n,e){return e===void 0&&(e=!0),!(zn(n)||qr(n)&&(n=oE(n),(e?jZ:GZ).test((n||"").replace(/[- ]/g,""))||(e?WZ:$Z).test(n)))}function d5(n){var e=Py(n);return Pv(e=(e+" "+f5(n)).trim())?e:""}function f5(n){var e="";return n&&n.childNodes&&n.childNodes.length&&$n(n.childNodes,function(t){var r;if(t&&((r=t.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=Py(t);e=(e+" "+i).trim(),t.childNodes&&t.childNodes.length&&(e=(e+" "+f5(t)).trim())}catch(s){et.error("[AutoCapture]",s)}}),e}function qZ(n){return function(e){var t=e.map(r=>{var i,s,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))o+="."+a.replace(/"/g,"");var l=ut({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(s=r.nth_of_type)!==null&&s!==void 0?s:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),c={};return zx(l).sort((u,f)=>{var[p]=u,[m]=f;return p.localeCompare(m)}).forEach(u=>{var[f,p]=u;return c[lD(f.toString())]=lD(p.toString())}),o+=":",o+=zx(c).map(u=>{var[f,p]=u;return f+'="'+p+'"'}).join("")});return t.join(";")}(function(e){return e.map(t=>{var r,i,s={text:(r=t.$el_text)==null?void 0:r.slice(0,400),tag_name:t.tag_name,href:(i=t.attr__href)==null?void 0:i.slice(0,2048),attr_class:XZ(t),attr_id:t.attr__id,nth_child:t.nth_child,nth_of_type:t.nth_of_type,attributes:{}};return zx(t).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(n))}function lD(n){return n.replace(/"|\\"/g,'\\"')}function XZ(n){var e=n.attr__class;return e?jn(e)?e:bI(e):void 0}class p5{constructor(e){this.disabled=e===!1;var t=ui(e)?e:{};this.thresholdPx=t.threshold_px||30,this.timeoutMs=t.timeout_ms||1e3,this.clickCount=t.click_count||3,this.clicks=[]}isRageClick(e,t,r){if(this.disabled)return!1;var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(t-i.y)<this.thresholdPx&&r-i.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:t,timestamp:r}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:t,timestamp:r}];return!1}}var LT="$copy_autocapture",wl=function(n){return n.GZipJS="gzip-js",n.Base64="base64",n}({}),qw=n=>{var e=Ze==null?void 0:Ze.createElement("a");return Xe(e)?null:(e.href=n,e)},YZ=function(n,e){var t,r;e===void 0&&(e="&");var i=[];return $n(n,function(s,o){Xe(s)||Xe(o)||o==="undefined"||(t=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),r=encodeURIComponent(o),i[i.length]=r+"="+t)}),i.join(e)},Xw=function(n,e){for(var t,r=((n.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===e){t=s;break}}if(!jn(t)||t.length<2)return"";var o=t[1];try{o=decodeURIComponent(o)}catch{et.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Ny=function(n,e,t){if(!n||!e||!e.length)return n;for(var r=n.split("#"),i=r[0]||"",s=r[1],o=i.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],f=0;f<c.length;f++){var p=c[f].split("=");jn(p)&&(e.includes(p[0])?u.push(p[0]+"="+t):u.push(c[f]))}var m=l;return a!=null&&(m+="?"+u.join("&")),s!=null&&(m+="#"+s),m},Yw=function(n,e){var t=n.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null},cD=ti("[AutoCapture]");function DT(n,e){return e.length>n?e.slice(0,n)+"...":e}function KZ(n){if(n.previousElementSibling)return n.previousElementSibling;var e=n;do e=e.previousSibling;while(e&&!lE(e));return e}function QZ(n,e,t,r){var i=n.tagName.toLowerCase(),s={tag_name:i};AI.indexOf(i)>-1&&!t&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?s.$el_text=DT(1024,d5(n)):s.$el_text=DT(1024,Py(n)));var o=$w(n);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),$n(n.attributes,function(u){var f;if((!c5(n)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(r==null||!r.includes(u.name))&&!e&&Pv(u.value)&&(f=u.name,!qr(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var p=u.value;u.name==="class"&&(p=bI(p).join(" ")),s["attr__"+u.name]=DT(1024,p)}});for(var a=1,l=1,c=n;c=KZ(c);)a++,c.tagName===n.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function ZZ(n,e){for(var t,r,{e:i,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[n],u=n;u.parentNode&&!Zc(u,"body");)r5(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var f,p=[],m={},v=!1,w=!1;if($n(c,b=>{var k=bM(b);b.tagName.toLowerCase()==="a"&&(v=b.getAttribute("href"),v=k&&v&&Pv(v)&&v),dn($w(b),"ph-no-capture")&&(w=!0),p.push(QZ(b,s,o,a));var N=function(M){if(!bM(M))return{};var P={};return $n(M.attributes,function(A){if(A.name&&A.name.indexOf("data-ph-capture-attribute")===0){var R=A.name.replace("data-ph-capture-attribute-",""),O=A.value;R&&O&&Pv(O)&&(P[R]=O)}}),P}(b);Rr(m,N)}),w)return{props:{},explicitNoCapture:w};if(o||(n.tagName.toLowerCase()==="a"||n.tagName.toLowerCase()==="button"?p[0].$el_text=d5(n):p[0].$el_text=Py(n)),v){var _,g;p[0].attr__href=v;var E=(_=qw(v))==null?void 0:_.host,S=ve==null||(g=ve.location)==null?void 0:g.host;E&&S&&E!==S&&(f=v)}return{props:Rr({$event_type:i.type,$ce_version:1},l?{}:{$elements:p},{$elements_chain:qZ(p)},(t=p[0])!=null&&t.$el_text?{$el_text:(r=p[0])==null?void 0:r.$el_text}:{},f&&i.type==="click"?{$external_click_url:f}:{},m)}}class JZ{constructor(e){this.P=!1,this.T=null,this.R=!1,this.instance=e,this.rageclicks=new p5(e.config.rageclick),this.I=null}get F(){var e,t,r=ui(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map(i=>new RegExp(i)),r.url_ignorelist=(t=r.url_ignorelist)==null?void 0:t.map(i=>new RegExp(i)),r}C(){if(this.isBrowserSupported()){if(ve&&Ze){var e=r=>{r=r||(ve==null?void 0:ve.event);try{this.M(r)}catch(i){cD.error("Failed to capture event",i)}};if(Vr(Ze,"submit",e,{capture:!0}),Vr(Ze,"change",e,{capture:!0}),Vr(Ze,"click",e,{capture:!0}),this.F.capture_copied_text){var t=r=>{r=r||(ve==null?void 0:ve.event),this.M(r,LT)};Vr(Ze,"copy",t,{capture:!0}),Vr(Ze,"cut",t,{capture:!0})}}}else cD.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.C(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.R=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[JL]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.I=e}getElementSelectors(e){var t,r=[];return(t=this.I)==null||t.forEach(i=>{var s=Ze==null?void 0:Ze.querySelectorAll(i);s==null||s.forEach(o=>{e===o&&r.push(i)})}),r}get isEnabled(){var e,t,r=(e=this.instance.persistence)==null?void 0:e.props[JL],i=this.T;if(Xl(i)&&!Kc(r)&&!this.instance.O())return!1;var s=(t=this.T)!==null&&t!==void 0?t:!!r;return!!this.instance.config.autocapture&&!s}M(e,t){if(t===void 0&&(t="$autocapture"),this.isEnabled){var r,i=s5(e);n5(i)&&(i=i.parentNode||null),t==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,e.timeStamp||new Date().getTime())&&BZ(i,this.instance.config.rageclick)&&this.M(e,"$rageclick");var s=t===LT;if(i&&HZ(i,e,this.F,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=ZZ(i,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.F.element_attribute_ignorelist,elementsChainAsString:this.R});if(a)return!1;var l=this.getElementSelectors(i);if(l&&l.length>0&&(o.$element_selectors=l),t===LT){var c,u=i5(ve==null||(c=ve.getSelection())==null?void 0:c.toString()),f=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=f}return this.instance.capture(t,o),!0}}}isBrowserSupported(){return Yc(Ze==null?void 0:Ze.querySelectorAll)}}Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)}),Number.isInteger||(Number.isInteger=function(n){return $a(n)&&isFinite(n)&&Math.floor(n)===n});var uD="0123456789abcdef";class Kw{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,r,i){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||t<0||r<0||i<0||e>0xffffffffffff||t>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|t>>>8,s[7]=t,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new Kw(s)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+uD.charAt(this.bytes[t]>>>4)+uD.charAt(15&this.bytes[t]),t!==3&&t!==5&&t!==7&&t!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Kw(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var t=0;t<16;t++){var r=this.bytes[t]-e.bytes[t];if(r!==0)return Math.sign(r)}return 0}}class eJ{constructor(){this.A=0,this.D=0,this.j=new tJ}generate(){var e=this.generateOrAbort();if(Xe(e)){this.A=0;var t=this.generateOrAbort();if(Xe(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return Kw.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var hD,m5=n=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<n.length;e++)n[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return n};ve&&!Xe(ve.crypto)&&crypto.getRandomValues&&(m5=n=>crypto.getRandomValues(n));class tJ{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(m5(this.N),this.U=0),this.N[this.U++]}}var Uc=()=>nJ().toString(),nJ=()=>(hD||(hD=new eJ)).generate(),Ym="",rJ=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function iJ(n,e){if(e){var t=function(i,s){if(s===void 0&&(s=Ze),Ym)return Ym;if(!s||["localhost","127.0.0.1"].includes(i))return"";for(var o=i.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Uc();!Ym&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",Ym=c)}return Ym}(n);if(!t){var r=(i=>{var s=i.match(rJ);return s?s[0]:""})(n);r!==t&&et.info("Warning: cookie subdomain discovery mismatch",r,t),t=r}return t?"; domain=."+t:""}return""}var La={H:()=>!!Ze,B:function(n){et.error("cookieStore error: "+n)},q:function(n){if(Ze){try{for(var e=n+"=",t=Ze.cookie.split(";").filter(s=>s.length),r=0;r<t.length;r++){for(var i=t[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},W:function(n){var e;try{e=JSON.parse(La.q(n))||{}}catch{}return e},G:function(n,e,t,r,i){if(Ze)try{var s="",o="",a=iJ(Ze.location.hostname,r);if(t){var l=new Date;l.setTime(l.getTime()+24*t*60*60*1e3),s="; expires="+l.toUTCString()}i&&(o="; secure");var c=n+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&et.warn("cookieStore warning: large cookie, len="+c.length),Ze.cookie=c,c}catch{return}},V:function(n,e){if(Ze!=null&&Ze.cookie)try{La.G(n,"",-1,e)}catch{return}}},OT=null,dr={H:function(){if(!Xl(OT))return OT;var n=!0;if(Xe(ve))n=!1;else try{var e="__mplssupport__";dr.G(e,"xyz"),dr.q(e)!=='"xyz"'&&(n=!1),dr.V(e)}catch{n=!1}return n||et.error("localStorage unsupported; falling back to cookie store"),OT=n,n},B:function(n){et.error("localStorage error: "+n)},q:function(n){try{return ve==null?void 0:ve.localStorage.getItem(n)}catch(e){dr.B(e)}return null},W:function(n){try{return JSON.parse(dr.q(n))||{}}catch{}return null},G:function(n,e){try{ve==null||ve.localStorage.setItem(n,JSON.stringify(e))}catch(t){dr.B(t)}},V:function(n){try{ve==null||ve.localStorage.removeItem(n)}catch(e){dr.B(e)}}},sJ=["distinct_id",Hw,e5,Ww,Gw],y0=ut({},dr,{W:function(n){try{var e={};try{e=La.W(n)||{}}catch{}var t=Rr(e,JSON.parse(dr.q(n)||"{}"));return dr.G(n,t),t}catch{}return null},G:function(n,e,t,r,i,s){try{dr.G(n,e,void 0,void 0,s);var o={};sJ.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&La.G(n,o,t,r,i,s)}catch(a){dr.B(a)}},V:function(n,e){try{ve==null||ve.localStorage.removeItem(n),La.V(n,e)}catch(t){dr.B(t)}}}),_0={},oJ={H:function(){return!0},B:function(n){et.error("memoryStorage error: "+n)},q:function(n){return _0[n]||null},W:function(n){return _0[n]||null},G:function(n,e){_0[n]=e},V:function(n){delete _0[n]}},Zu=null,gi={H:function(){if(!Xl(Zu))return Zu;if(Zu=!0,Xe(ve))Zu=!1;else try{var n="__support__";gi.G(n,"xyz"),gi.q(n)!=='"xyz"'&&(Zu=!1),gi.V(n)}catch{Zu=!1}return Zu},B:function(n){et.error("sessionStorage error: ",n)},q:function(n){try{return ve==null?void 0:ve.sessionStorage.getItem(n)}catch(e){gi.B(e)}return null},W:function(n){try{return JSON.parse(gi.q(n))||null}catch{}return null},G:function(n,e){try{ve==null||ve.sessionStorage.setItem(n,JSON.stringify(e))}catch(t){gi.B(t)}},V:function(n){try{ve==null||ve.sessionStorage.removeItem(n)}catch(e){gi.B(e)}}},yl=function(n){return n[n.PENDING=-1]="PENDING",n[n.DENIED=0]="DENIED",n[n.GRANTED=1]="GRANTED",n}({});class aJ{constructor(e){this._instance=e}get F(){return this._instance.config}get consent(){return this.J()?yl.DENIED:this.K}isOptedOut(){return this.F.cookieless_mode==="always"||this.consent===yl.DENIED||this.consent===yl.PENDING&&(this.F.opt_out_capturing_by_default||this.F.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===yl.DENIED}optInOut(e){this.Y.G(this.X,e?1:0,this.F.cookie_expiration,this.F.cross_subdomain_cookie,this.F.secure_cookie)}reset(){this.Y.V(this.X,this.F.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:r}=this._instance.config;return r||(t?t+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return PT(e)?yl.GRANTED:dn(hZ,e)?yl.DENIED:yl.PENDING}get Y(){if(!this.Z){var e=this.F.opt_out_capturing_persistence_type;this.Z=e==="localStorage"?dr:La;var t=e==="localStorage"?La:dr;t.q(this.X)&&(this.Z.q(this.X)||this.optInOut(PT(t.q(this.X))),t.V(this.X,this.F.cross_subdomain_cookie))}return this.Z}J(){return!!this.F.respect_dnt&&!!QB([eo==null?void 0:eo.doNotTrack,eo==null?void 0:eo.msDoNotTrack,Bt.doNotTrack],e=>PT(e))}}var x0=ti("[Dead Clicks]"),lJ=()=>!0,cJ=n=>{var e,t=!((e=n.instance.persistence)==null||!e.get_property(JB)),r=n.instance.config.capture_dead_clicks;return Kc(r)?r:!!ui(r)||t};class g5{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,t,r){this.instance=e,this.isEnabled=t,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[JB]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(e){var t,r;(t=Bt.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture&&e(),(r=Bt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",i=>{i?x0.error("failed to load script",i):e()})}et(){var e;if(Ze){if(!this.tt&&(e=Bt.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var t=ui(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.tt=Bt.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.tt.start(Ze),x0.info("starting...")}}else x0.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,x0.info("stopping..."))}}var Km=ti("[ExceptionAutocapture]");class uJ{constructor(e){var t,r,i;this.rt=()=>{var s;if(ve&&this.isEnabled&&(s=Bt.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Bt.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Bt.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Bt.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.F.capture_unhandled_errors&&(this.st=o(this.captureException.bind(this))),!this.nt&&this.F.capture_unhandled_rejections&&(this.nt=a(this.captureException.bind(this))),!this.ot&&this.F.capture_console_errors&&(this.ot=l(this.captureException.bind(this)))}catch(c){Km.error("failed to start",c),this.lt()}}},this._instance=e,this.ut=!((t=this._instance.persistence)==null||!t.props[eD]),this.F=this.ht(),this.vt=new dZ({refillRate:(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&r!==void 0?r:1,bucketSize:(i=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&i!==void 0?i:10,refillInterval:1e4,h:Km}),this.startIfEnabled()}ht(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return ui(e)?t=ut({},t,e):(Xe(e)?this.ut:e)&&(t=ut({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.F.capture_console_errors||this.F.capture_unhandled_errors||this.F.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Km.info("enabled"),this.it(this.rt))}it(e){var t,r;(t=Bt.__PosthogExtensions__)!=null&&t.errorWrappingFunctions&&e(),(r=Bt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",i=>{if(i)return Km.error("failed to load script",i);e()})}lt(){var e,t,r;(e=this.st)==null||e.call(this),this.st=void 0,(t=this.nt)==null||t.call(this),this.nt=void 0,(r=this.ot)==null||r.call(this),this.ot=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.ut=!!t||!1,this.F=this.ht(),this._instance.persistence&&this._instance.persistence.register({[eD]:this.ut}),this.startIfEnabled()}captureException(e){var t,r,i=(t=e==null||(r=e.$exception_list)==null||(r=r[0])==null?void 0:r.type)!==null&&t!==void 0?t:"Exception";this.vt.consumeRateLimit(i)?Km.info("Skipping exception capture because of client rate limiting.",{exception:i}):this._instance.exceptions.sendExceptionEvent(e)}}function dD(n,e,t){try{if(!(e in n))return()=>{};var r=n[e],i=t(r);return Yc(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}class hJ{constructor(e){var t;this._instance=e,this.dt=(ve==null||(t=ve.location)==null?void 0:t.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(et.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ct&&this.ct(),this.ct=void 0,et.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(ve&&ve.history){var r=this;(e=ve.history.pushState)!=null&&e.__posthog_wrapped__||dD(ve.history,"pushState",i=>function(s,o,a){i.call(this,s,o,a),r.ft("pushState")}),(t=ve.history.replaceState)!=null&&t.__posthog_wrapped__||dD(ve.history,"replaceState",i=>function(s,o,a){i.call(this,s,o,a),r.ft("replaceState")}),this.gt()}}ft(e){try{var t,r=ve==null||(t=ve.location)==null?void 0:t.pathname;if(!r)return;r!==this.dt&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.dt=r}catch(i){et.error("Error capturing "+e+" pageview",i)}}gt(){if(!this.ct){var e=()=>{this.ft("popstate")};Vr(ve,"popstate",e),this.ct=()=>{ve&&ve.removeEventListener("popstate",e)}}}}var FT=ti("[SegmentIntegration]");function dJ(n,e){var t=n.config.segment;if(!t)return e();(function(r,i){var s=r.config.segment;if(!s)return i();var o=l=>{var c=()=>l.anonymousId()||Uc();r.config.get_device_id=c,l.id()&&(r.register({distinct_id:l.id(),$device_id:c()}),r.persistence.set_property(vl,"identified")),i()},a=s.user();"then"in a&&Yc(a.then)?a.then(l=>o(l)):o(a)})(n,()=>{t.register((r=>{Promise&&Promise.resolve||FT.warn("This browser does not have Promise support, and can not use the segment integration");var i=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===r.get_distinct_id()||(FT.info("No userId set, resetting PostHog"),r.reset()),s.event.userId&&s.event.userId!==r.get_distinct_id()&&(FT.info("UserId set, identifying with PostHog"),r.identify(s.event.userId));var a=r.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>i(s,s.event.event),page:s=>i(s,"$pageview"),identify:s=>i(s,"$identify"),screen:s=>i(s,"$screen")}})(n)).then(()=>{e()})})}var v5="posthog-js";function y5(n,e){var{organization:t,projectId:r,prefix:i,severityAllowList:s=["error"],sendExceptionsToPostHog:o=!0}=e===void 0?{}:e;return a=>{var l,c,u,f,p;if(!(s==="*"||s.includes(a.level))||!n.__loaded)return a;a.tags||(a.tags={});var m=n.requestRouter.endpointFor("ui","/project/"+n.config.token+"/person/"+n.get_distinct_id());a.tags["PostHog Person URL"]=m,n.sessionRecordingStarted()&&(a.tags["PostHog Recording URL"]=n.get_session_replay_url({withTimestamp:!0}));var v=((l=a.exception)==null?void 0:l.values)||[],w=v.map(g=>ut({},g,{stacktrace:g.stacktrace?ut({},g.stacktrace,{type:"raw",frames:(g.stacktrace.frames||[]).map(E=>ut({},E,{platform:"web:javascript"}))}):void 0})),_={$exception_message:((c=v[0])==null?void 0:c.value)||a.message,$exception_type:(u=v[0])==null?void 0:u.type,$exception_level:a.level,$exception_list:w,$sentry_event_id:a.event_id,$sentry_exception:a.exception,$sentry_exception_message:((f=v[0])==null?void 0:f.value)||a.message,$sentry_exception_type:(p=v[0])==null?void 0:p.type,$sentry_tags:a.tags};return t&&r&&(_.$sentry_url=(i||"https://sentry.io/organizations/")+t+"/issues/?project="+r+"&query="+a.event_id),o&&n.exceptions.sendExceptionEvent(_),a}}class fJ{constructor(e,t,r,i,s,o){this.name=v5,this.setupOnce=function(a){a(y5(e,{organization:t,projectId:r,prefix:i,severityAllowList:s,sendExceptionsToPostHog:o==null||o}))}}}var pJ=ve!=null&&ve.location?Yw(ve.location.hash,"__posthog")||Yw(location.hash,"state"):null,fD="_postHogToolbarParams",pD=ti("[Toolbar]"),yc=function(n){return n[n.UNINITIALIZED=0]="UNINITIALIZED",n[n.LOADING=1]="LOADING",n[n.LOADED=2]="LOADED",n}(yc||{});class mJ{constructor(e){this.instance=e}_t(e){Bt.ph_toolbar_state=e}yt(){var e;return(e=Bt.ph_toolbar_state)!==null&&e!==void 0?e:yc.UNINITIALIZED}maybeLoadToolbar(e,t,r){if(e===void 0&&(e=void 0),t===void 0&&(t=void 0),r===void 0&&(r=void 0),!ve||!Ze)return!1;e=e??ve.location,r=r??ve.history;try{if(!t){try{ve.localStorage.setItem("test","test"),ve.localStorage.removeItem("test")}catch{return!1}t=ve==null?void 0:ve.localStorage}var i,s=pJ||Yw(e.hash,"__posthog")||Yw(e.hash,"state"),o=s?ZL(()=>JSON.parse(atob(decodeURIComponent(s))))||ZL(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((i=o).source="url",i&&Object.keys(i).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((i=JSON.parse(t.getItem(fD)||"{}")).source="localstorage",delete i.userIntent),!(!i.token||this.instance.config.token!==i.token)&&(this.loadToolbar(i),!0)}catch{return!1}}bt(e){var t=Bt.ph_load_toolbar||Bt.ph_load_editor;!zn(t)&&Yc(t)?t(e,this.instance):pD.warn("No toolbar load function found")}loadToolbar(e){var t=!(Ze==null||!Ze.getElementById(t5));if(!ve||t)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=ut({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(ve.localStorage.setItem(fD,JSON.stringify(ut({},i,{source:void 0}))),this.yt()===yc.LOADED)this.bt(i);else if(this.yt()===yc.UNINITIALIZED){var s;this._t(yc.LOADING),(s=Bt.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return pD.error("[Toolbar] Failed to load",o),void this._t(yc.UNINITIALIZED);this._t(yc.LOADED),this.bt(i)}),Vr(ve,"turbolinks:load",()=>{this._t(yc.UNINITIALIZED),this.loadToolbar(i)})}return!0}wt(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,r){return e===void 0&&(e=void 0),t===void 0&&(t=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,t,r)}}var gJ=ti("[TracingHeaders]");class vJ{constructor(e){this.xt=void 0,this.St=void 0,this.rt=()=>{var t,r;Xe(this.xt)&&((t=Bt.__PosthogExtensions__)==null||(t=t.tracingHeadersPatchFns)==null||t._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),Xe(this.St)&&((r=Bt.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var t,r;(t=Bt.__PosthogExtensions__)!=null&&t.tracingHeadersPatchFns&&e(),(r=Bt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",i=>{if(i)return gJ.error("failed to load script",i);e()})}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.it(this.rt):((e=this.xt)==null||e.call(this),(t=this.St)==null||t.call(this),this.xt=void 0,this.St=void 0)}}var Ro="Mobile",Qw="iOS",Ia="Android",Nv="Tablet",_5=Ia+" "+Nv,x5="iPad",w5="Apple",E5=w5+" Watch",kv="Safari",Cp="BlackBerry",S5="Samsung",T5=S5+"Browser",b5=S5+" Internet",Yh="Chrome",yJ=Yh+" OS",A5=Yh+" "+Qw,CI="Internet Explorer",M5=CI+" "+Ro,RI="Opera",_J=RI+" Mini",II="Edge",C5="Microsoft "+II,tp="Firefox",R5=tp+" "+Qw,Lv="Nintendo",Dv="PlayStation",np="Xbox",I5=Ia+" "+Ro,P5=Ro+" "+kv,Mg="Windows",AM=Mg+" Phone",mD="Nokia",MM="Ouya",N5="Generic",xJ=N5+" "+Ro.toLowerCase(),k5=N5+" "+Nv.toLowerCase(),CM="Konqueror",rs="(\\d+(\\.\\d+)?)",UT=new RegExp("Version/"+rs),wJ=new RegExp(np,"i"),EJ=new RegExp(Dv+" \\w+","i"),SJ=new RegExp(Lv+" \\w+","i"),PI=new RegExp(Cp+"|PlayBook|BB10","i"),TJ={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},bJ=(n,e)=>e&&dn(e,w5)||function(t){return dn(t,kv)&&!dn(t,Yh)&&!dn(t,Ia)}(n),L5=function(n,e){return e=e||"",dn(n," OPR/")&&dn(n,"Mini")?_J:dn(n," OPR/")?RI:PI.test(n)?Cp:dn(n,"IE"+Ro)||dn(n,"WPDesktop")?M5:dn(n,T5)?b5:dn(n,II)||dn(n,"Edg/")?C5:dn(n,"FBIOS")?"Facebook "+Ro:dn(n,"UCWEB")||dn(n,"UCBrowser")?"UC Browser":dn(n,"CriOS")?A5:dn(n,"CrMo")||dn(n,Yh)?Yh:dn(n,Ia)&&dn(n,kv)?I5:dn(n,"FxiOS")?R5:dn(n.toLowerCase(),CM.toLowerCase())?CM:bJ(n,e)?dn(n,Ro)?P5:kv:dn(n,tp)?tp:dn(n,"MSIE")||dn(n,"Trident/")?CI:dn(n,"Gecko")?tp:""},AJ={[M5]:[new RegExp("rv:"+rs)],[C5]:[new RegExp(II+"?\\/"+rs)],[Yh]:[new RegExp("("+Yh+"|CrMo)\\/"+rs)],[A5]:[new RegExp("CriOS\\/"+rs)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+rs)],[kv]:[UT],[P5]:[UT],[RI]:[new RegExp("(Opera|OPR)\\/"+rs)],[tp]:[new RegExp(tp+"\\/"+rs)],[R5]:[new RegExp("FxiOS\\/"+rs)],[CM]:[new RegExp("Konqueror[:/]?"+rs,"i")],[Cp]:[new RegExp(Cp+" "+rs),UT],[I5]:[new RegExp("android\\s"+rs,"i")],[b5]:[new RegExp(T5+"\\/"+rs)],[CI]:[new RegExp("(rv:|MSIE )"+rs)],Mozilla:[new RegExp("rv:"+rs)]},MJ=function(n,e){var t=L5(n,e),r=AJ[t];if(Xe(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=n.match(s);if(o)return parseFloat(o[o.length-2])}return null},gD=[[new RegExp(np+"; "+np+" (.*?)[);]","i"),n=>[np,n&&n[1]||""]],[new RegExp(Lv,"i"),[Lv,""]],[new RegExp(Dv,"i"),[Dv,""]],[PI,[Cp,""]],[new RegExp(Mg,"i"),(n,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[AM,""];if(new RegExp(Ro).test(e)&&!/IEMobile\b/.test(e))return[Mg+" "+Ro,""];var t=/Windows NT ([0-9.]+)/i.exec(e);if(t&&t[1]){var r=t[1],i=TJ[r]||"";return/arm/i.test(e)&&(i="RT"),[Mg,i]}return[Mg,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,n=>{if(n&&n[3]){var e=[n[3],n[4],n[5]||"0"];return[Qw,e.join(".")]}return[Qw,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,n=>{var e="";return n&&n.length>=3&&(e=Xe(n[2])?n[3]:n[2]),["watchOS",e]}],[new RegExp("("+Ia+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Ia+")","i"),n=>{if(n&&n[2]){var e=[n[2],n[3],n[4]||"0"];return[Ia,e.join(".")]}return[Ia,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,n=>{var e=["Mac OS X",""];if(n&&n[1]){var t=[n[1],n[2],n[3]||"0"];e[1]=t.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[yJ,""]],[/Linux|debian/i,["Linux",""]]],vD=function(n){return SJ.test(n)?Lv:EJ.test(n)?Dv:wJ.test(n)?np:new RegExp(MM,"i").test(n)?MM:new RegExp("("+AM+"|WPDesktop)","i").test(n)?AM:/iPad/.test(n)?x5:/iPod/.test(n)?"iPod Touch":/iPhone/.test(n)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(n)?E5:PI.test(n)?Cp:/(kobo)\s(ereader|touch)/i.test(n)?"Kobo":new RegExp(mD,"i").test(n)?mD:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(n)||/(kf[a-z]+)( bui|\)).+silk\//i.test(n)?"Kindle Fire":/(Android|ZTE)/i.test(n)?!new RegExp(Ro).test(n)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(n)?/pixel[\daxl ]{1,6}/i.test(n)&&!/pixel c/i.test(n)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(n)||/lmy47v/i.test(n)&&!/QTAQZ3/i.test(n)?Ia:_5:Ia:new RegExp("(pda|"+Ro+")","i").test(n)?xJ:new RegExp(Nv,"i").test(n)&&!new RegExp(Nv+" pc","i").test(n)?k5:""},w0="https?://(.*)",tm=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],CJ=em(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],tm),ky="<masked>",RJ=["li_fat_id"];function D5(n,e,t){if(!Ze)return{};var r,i=e?em([],tm,t||[]):[],s=O5(Ny(Ze.URL,i,ky),n),o=(r={},$n(RJ,function(a){var l=La.q(a);r[a]=l||null}),r);return Rr(o,s)}function O5(n,e){var t=CJ.concat(e||[]),r={};return $n(t,function(i){var s=Xw(n,i);r[i]=s||null}),r}function F5(n){var e=function(s){return s?s.search(w0+"google.([^/?]*)")===0?"google":s.search(w0+"bing.com")===0?"bing":s.search(w0+"yahoo.com")===0?"yahoo":s.search(w0+"duckduckgo.com")===0?"duckduckgo":null:null}(n),t=e!="yahoo"?"q":"p",r={};if(!Xl(e)){r.$search_engine=e;var i=Ze?Xw(Ze.referrer,t):"";i.length&&(r.ph_keyword=i)}return r}function yD(){return navigator.language||navigator.userLanguage}function U5(){return(Ze==null?void 0:Ze.referrer)||"$direct"}function V5(n,e){var t=n?em([],tm,e||[]):[],r=Cs==null?void 0:Cs.href.substring(0,1e3);return{r:U5().substring(0,1e3),u:r?Ny(r,t,ky):void 0}}function z5(n){var e,{r:t,u:r}=n,i={$referrer:t,$referring_domain:t==null?void 0:t=="$direct"?"$direct":(e=qw(t))==null?void 0:e.host};if(r){i.$current_url=r;var s=qw(r);i.$host=s==null?void 0:s.host,i.$pathname=s==null?void 0:s.pathname;var o=O5(r);Rr(i,o)}if(t){var a=F5(t);Rr(i,a)}return i}function B5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function IJ(){try{return new Date().getTimezoneOffset()}catch{return}}function PJ(n,e){if(!Ts)return{};var t,r,i,s=n?em([],tm,e||[]):[],[o,a]=function(l){for(var c=0;c<gD.length;c++){var[u,f]=gD[c],p=u.exec(l),m=p&&(Yc(f)?f(p,l):f);if(m)return m}return["",""]}(Ts);return Rr(TI({$os:o,$os_version:a,$browser:L5(Ts,navigator.vendor),$device:vD(Ts),$device_type:(r=Ts,i=vD(r),i===x5||i===_5||i==="Kobo"||i==="Kindle Fire"||i===k5?Nv:i===Lv||i===np||i===Dv||i===MM?"Console":i===E5?"Wearable":i?Ro:"Desktop"),$timezone:B5(),$timezone_offset:IJ()}),{$current_url:Ny(Cs==null?void 0:Cs.href,s,ky),$host:Cs==null?void 0:Cs.host,$pathname:Cs==null?void 0:Cs.pathname,$raw_user_agent:Ts.length>1e3?Ts.substring(0,997)+"...":Ts,$browser_version:MJ(Ts,navigator.vendor),$browser_language:yD(),$browser_language_prefix:(t=yD(),typeof t=="string"?t.split("-")[0]:void 0),$screen_height:ve==null?void 0:ve.screen.height,$screen_width:ve==null?void 0:ve.screen.width,$viewport_height:ve==null?void 0:ve.innerHeight,$viewport_width:ve==null?void 0:ve.innerWidth,$lib:"web",$lib_version:gl.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var ac=ti("[Web Vitals]"),_D=9e5;class NJ{constructor(e){var t;this.Et=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.$t=()=>{clearTimeout(this.kt),this.N.metrics.length!==0&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((r,i)=>ut({},r,{["$web_vitals_"+i.name+"_event"]:ut({},i),["$web_vitals_"+i.name+"_value"]:i.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Pt=r=>{var i,s=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(Xe(s))ac.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.Tt();Xe(o)||(zn(r==null?void 0:r.name)||zn(r==null?void 0:r.value)?ac.error("Invalid metric received",r):this.Rt&&r.value>=this.Rt?ac.error("Ignoring metric with value >= "+this.Rt,r):(this.N.url!==o&&(this.$t(),this.kt=setTimeout(this.$t,this.flushToCaptureTimeoutMs)),Xe(this.N.url)&&(this.N.url=o),this.N.firstMetricTimestamp=Xe(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.N.metrics.push(ut({},r,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.$t()))}},this.rt=()=>{var r,i,s,o,a=Bt.__PosthogExtensions__;Xe(a)||Xe(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),r&&i&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Pt.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.Pt.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Pt.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Pt.bind(this)),this.P=!0):ac.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Et=!((t=this._instance.persistence)==null||!t.props[nD]),this.startIfEnabled()}get allowedMetrics(){var e,t,r=ui(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return Xe(r)?((t=this._instance.persistence)==null?void 0:t.props[rD])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(ui(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Rt(){var e=ui(this._instance.config.capture_performance)&&$a(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:_D;return 0<e&&e<=6e4?_D:e}get isEnabled(){var e=Cs==null?void 0:Cs.protocol;if(e!=="http:"&&e!=="https:")return ac.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=ui(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Kc(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Kc(t)?t:this.Et}startIfEnabled(){this.isEnabled&&!this.P&&(ac.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var t=ui(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=ui(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[nD]:t}),this._instance.persistence.register({[rD]:r})),this.Et=t,this.startIfEnabled()}it(e){var t,r;(t=Bt.__PosthogExtensions__)!=null&&t.postHogWebVitalsCallbacks&&e(),(r=Bt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",i=>{i?ac.error("failed to load script",i):e()})}Tt(){var e=ve?ve.location.href:void 0;if(e){var t=this._instance.config.mask_personal_data_properties,r=this._instance.config.custom_personal_data_properties,i=t?em([],tm,r||[]):[];return Ny(e,i,ky)}ac.error("Could not determine current URL")}}var kJ=ti("[Heatmaps]");function xD(n){return ui(n)&&"clientX"in n&&"clientY"in n&&$a(n.clientX)&&$a(n.clientY)}class LJ{constructor(e){var t;this.Et=!1,this.P=!1,this.It=null,this.instance=e,this.Et=!((t=this.instance.persistence)==null||!t.props[vM]),this.rageclicks=new p5(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return ui(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Xe(this.instance.config.capture_heatmaps)?Xe(this.instance.config.enable_heatmaps)?this.Et:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.P)return;kJ.info("starting..."),this.Ft(),this.Ct()}else{var e;clearInterval((e=this.It)!==null&&e!==void 0?e:void 0),this.Mt(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[vM]:t}),this.Et=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Ot(e){this.At(e.originalEvent,"deadclick")}Ct(){this.It&&clearInterval(this.It),this.It=function(e){return(e==null?void 0:e.visibilityState)==="visible"}(Ze)?setInterval(this.Dt.bind(this),this.flushIntervalMilliseconds):null}Ft(){ve&&Ze&&(this.jt=this.Dt.bind(this),Vr(ve,"beforeunload",this.jt),this.Lt=e=>this.At(e||(ve==null?void 0:ve.event)),Vr(Ze,"click",this.Lt,{capture:!0}),this.Nt=e=>this.Ut(e||(ve==null?void 0:ve.event)),Vr(Ze,"mousemove",this.Nt,{capture:!0}),this.zt=new g5(this.instance,lJ,this.Ot.bind(this)),this.zt.startIfEnabled(),this.Ht=this.Ct.bind(this),Vr(Ze,"visibilitychange",this.Ht),this.P=!0)}Mt(){var e;ve&&Ze&&(this.jt&&ve.removeEventListener("beforeunload",this.jt),this.Lt&&Ze.removeEventListener("click",this.Lt,{capture:!0}),this.Nt&&Ze.removeEventListener("mousemove",this.Nt,{capture:!0}),this.Ht&&Ze.removeEventListener("visibilitychange",this.Ht),clearTimeout(this.Bt),(e=this.zt)==null||e.stop(),this.P=!1)}qt(e,t){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&lE(u)&&!Zc(u,"body");){if(u===c)return!1;if(dn(l,ve==null?void 0:ve.getComputedStyle(u).position))return!0;u=a5(u)}return!1}(s5(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:i),y:e.clientY+(o?0:r),target_fixed:o,type:t}}At(e,t){var r;if(t===void 0&&(t="click"),!iD(e.target)&&xD(e)){var i=this.qt(e,t);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.Wt(ut({},i,{type:"rageclick"})),this.Wt(i)}}Ut(e){!iD(e.target)&&xD(e)&&(clearTimeout(this.Bt),this.Bt=setTimeout(()=>{this.Wt(this.qt(e,"mousemove"))},500))}Wt(e){if(ve){var t=ve.location.href,r=this.instance.config.mask_personal_data_properties,i=this.instance.config.custom_personal_data_properties,s=r?em([],tm,i||[]):[],o=Ny(t,s,ky);this.N=this.N||{},this.N[o]||(this.N[o]=[]),this.N[o].push(e)}}Dt(){this.N&&!Uf(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class DJ{constructor(e){this._instance=e}doPageView(e,t){var r,i=this.Gt(e,t);return this.Vt={pathname:(r=ve==null?void 0:ve.location.pathname)!==null&&r!==void 0?r:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),i}doPageLeave(e){var t;return this.Gt(e,(t=this.Vt)==null?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.Vt)==null?void 0:e.pageViewId}}Gt(e,t){var r=this.Vt;if(!r)return{$pageview_id:t};var i={$pageview_id:t,$prev_pageview_id:r.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:f}=s;if(!(Xe(o)||Xe(a)||Xe(l)||Xe(c)||Xe(u)||Xe(f))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),f=Math.ceil(f);var p=o<=1?1:Ra(a/o,0,1,et),m=o<=1?1:Ra(l/o,0,1,et),v=c<=1?1:Ra(u/c,0,1,et),w=c<=1?1:Ra(f/c,0,1,et);i=Rr(i,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:p,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:m,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:v,$prev_pageview_max_content:f,$prev_pageview_max_content_percentage:w})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),i}}var Io=Uint8Array,Ns=Uint16Array,Rp=Uint32Array,NI=new Io([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kI=new Io([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wD=new Io([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),H5=function(n,e){for(var t=new Ns(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];var i=new Rp(t[30]);for(r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},j5=H5(NI,2),OJ=j5[0],RM=j5[1];OJ[28]=258,RM[258]=28;for(var ED=H5(kI,0)[1],G5=new Ns(32768),Jn=0;Jn<32768;++Jn){var Ju=(43690&Jn)>>>1|(21845&Jn)<<1;Ju=(61680&(Ju=(52428&Ju)>>>2|(13107&Ju)<<2))>>>4|(3855&Ju)<<4,G5[Jn]=((65280&Ju)>>>8|(255&Ju)<<8)>>>1}var Xg=function(n,e,t){for(var r=n.length,i=0,s=new Ns(e);i<r;++i)++s[n[i]-1];var o,a=new Ns(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;for(o=new Ns(r),i=0;i<r;++i)o[i]=G5[a[n[i]-1]++]>>>15-n[i];return o},Kh=new Io(288);for(Jn=0;Jn<144;++Jn)Kh[Jn]=8;for(Jn=144;Jn<256;++Jn)Kh[Jn]=9;for(Jn=256;Jn<280;++Jn)Kh[Jn]=7;for(Jn=280;Jn<288;++Jn)Kh[Jn]=8;var Zw=new Io(32);for(Jn=0;Jn<32;++Jn)Zw[Jn]=5;var FJ=Xg(Kh,9),UJ=Xg(Zw,5),W5=function(n){return(n/8>>0)+(7&n&&1)},$5=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Ns?Ns:n instanceof Rp?Rp:Io)(t-e);return r.set(n.subarray(e,t)),r},ol=function(n,e,t){t<<=7&e;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8},Qm=function(n,e,t){t<<=7&e;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},VT=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[new Io(0),0];if(i==1){var o=new Io(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(k,N){return k.f-N.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,u=1,f=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=t[t[c].f<t[f].f?c++:f++],l=t[c!=u&&t[c].f<t[f].f?c++:f++],t[u++]={s:-1,f:a.f+l.f,l:a,r:l};var p=s[0].s;for(r=1;r<i;++r)s[r].s>p&&(p=s[r].s);var m=new Ns(p+1),v=IM(t[u-1],m,0);if(v>e){r=0;var w=0,_=v-e,g=1<<_;for(s.sort(function(k,N){return m[N.s]-m[k.s]||k.f-N.f});r<i;++r){var E=s[r].s;if(!(m[E]>e))break;w+=g-(1<<v-m[E]),m[E]=e}for(w>>>=_;w>0;){var S=s[r].s;m[S]<e?w-=1<<e-m[S]++-1:++r}for(;r>=0&&w;--r){var b=s[r].s;m[b]==e&&(--m[b],++w)}v=e}return[new Io(m),v]},IM=function(n,e,t){return n.s==-1?Math.max(IM(n.l,e,t+1),IM(n.r,e,t+1)):e[n.s]=t},SD=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ns(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return[t.subarray(0,r),e]},Zm=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},PM=function(n,e,t){var r=t.length,i=W5(e+2);n[i]=255&r,n[i+1]=r>>>8,n[i+2]=255^n[i],n[i+3]=255^n[i+1];for(var s=0;s<r;++s)n[i+s+4]=t[s];return 8*(i+4+r)},TD=function(n,e,t,r,i,s,o,a,l,c,u){ol(e,u++,t),++i[256];for(var f=VT(i,15),p=f[0],m=f[1],v=VT(s,15),w=v[0],_=v[1],g=SD(p),E=g[0],S=g[1],b=SD(w),k=b[0],N=b[1],M=new Ns(19),P=0;P<E.length;++P)M[31&E[P]]++;for(P=0;P<k.length;++P)M[31&k[P]]++;for(var A=VT(M,7),R=A[0],O=A[1],U=19;U>4&&!R[wD[U-1]];--U);var V,$,Z,ne,ae=c+5<<3,z=Zm(i,Kh)+Zm(s,Zw)+o,j=Zm(i,p)+Zm(s,w)+o+14+3*U+Zm(M,R)+(2*M[16]+3*M[17]+7*M[18]);if(ae<=z&&ae<=j)return PM(e,u,n.subarray(l,l+c));if(ol(e,u,1+(j<z)),u+=2,j<z){V=Xg(p,m),$=p,Z=Xg(w,_),ne=w;var X=Xg(R,O);for(ol(e,u,S-257),ol(e,u+5,N-1),ol(e,u+10,U-4),u+=14,P=0;P<U;++P)ol(e,u+3*P,R[wD[P]]);u+=3*U;for(var ee=[E,k],te=0;te<2;++te){var J=ee[te];for(P=0;P<J.length;++P){var oe=31&J[P];ol(e,u,X[oe]),u+=R[oe],oe>15&&(ol(e,u,J[P]>>>5&127),u+=J[P]>>>12)}}}else V=FJ,$=Kh,Z=UJ,ne=Zw;for(P=0;P<a;++P)if(r[P]>255){oe=r[P]>>>18&31,Qm(e,u,V[oe+257]),u+=$[oe+257],oe>7&&(ol(e,u,r[P]>>>23&31),u+=NI[oe]);var we=31&r[P];Qm(e,u,Z[we]),u+=ne[we],we>3&&(Qm(e,u,r[P]>>>5&8191),u+=kI[we])}else Qm(e,u,V[r[P]]),u+=$[r[P]];return Qm(e,u,V[256]),u+$[256]},VJ=new Rp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),zJ=function(){for(var n=new Rp(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(1&t&&3988292384)^t>>>1;n[e]=t}return n}(),BJ=function(n,e,t,r,i){return function(s,o,a,l,c,u){var f=s.length,p=new Io(l+f+5*(1+Math.floor(f/7e3))+c),m=p.subarray(l,p.length-c),v=0;if(!o||f<8)for(var w=0;w<=f;w+=65535){var _=w+65535;_<f?v=PM(m,v,s.subarray(w,_)):(m[w]=u,v=PM(m,v,s.subarray(w,f)))}else{for(var g=VJ[o-1],E=g>>>13,S=8191&g,b=(1<<a)-1,k=new Ns(32768),N=new Ns(b+1),M=Math.ceil(a/3),P=2*M,A=function(it){return(s[it]^s[it+1]<<M^s[it+2]<<P)&b},R=new Rp(25e3),O=new Ns(288),U=new Ns(32),V=0,$=0,Z=(w=0,0),ne=0,ae=0;w<f;++w){var z=A(w),j=32767&w,X=N[z];if(k[j]=X,N[z]=j,ne<=w){var ee=f-w;if((V>7e3||Z>24576)&&ee>423){v=TD(s,m,0,R,O,U,$,Z,ae,w-ae,v),Z=V=$=0,ae=w;for(var te=0;te<286;++te)O[te]=0;for(te=0;te<30;++te)U[te]=0}var J=2,oe=0,we=S,Pe=j-X&32767;if(ee>2&&z==A(w-Pe))for(var Te=Math.min(E,ee)-1,mt=Math.min(32767,w),vt=Math.min(258,ee);Pe<=mt&&--we&&j!=X;){if(s[w+J]==s[w+J-Pe]){for(var Ge=0;Ge<vt&&s[w+Ge]==s[w+Ge-Pe];++Ge);if(Ge>J){if(J=Ge,oe=Pe,Ge>Te)break;var rt=Math.min(Pe,Ge-2),Q=0;for(te=0;te<rt;++te){var be=w-Pe+te+32768&32767,xe=be-k[be]+32768&32767;xe>Q&&(Q=xe,X=be)}}}Pe+=(j=X)-(X=k[j])+32768&32767}if(oe){R[Z++]=268435456|RM[J]<<18|ED[oe];var Le=31&RM[J],_e=31&ED[oe];$+=NI[Le]+kI[_e],++O[257+Le],++U[_e],ne=w+J,++V}else R[Z++]=s[w],++O[s[w]]}}v=TD(s,m,u,R,O,U,$,Z,ae,w-ae,v)}return $5(p,0,l+W5(v)+c)}(n,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+e.mem,t,r,!0)},zT=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};function HJ(n,e){e===void 0&&(e={});var t=function(){var a=4294967295;return{p:function(l){for(var c=a,u=0;u<l.length;++u)c=zJ[255&c^l[u]]^c>>>8;a=c},d:function(){return 4294967295^a}}}(),r=n.length;t.p(n);var i,s=BJ(n,e,10+((i=e).filename&&i.filename.length+1||0),8),o=s.length;return function(a,l){var c=l.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=l.level<2?4:l.level==9?2:0,a[9]=3,l.mtime!=0&&zT(a,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),c){a[3]=8;for(var u=0;u<=c.length;++u)a[u+10]=c.charCodeAt(u)}}(s,e),zT(s,o-8,t.d()),zT(s,o-4,r),s}var jJ=function(n){var e,t,r,i,s="";for(e=t=0,r=(n=(n+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var o=n.charCodeAt(i),a=null;o<128?t++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Xl(a)||(t>e&&(s+=n.substring(e,t)),s+=a,e=t=i+1)}return t>e&&(s+=n.substring(e,n.length)),s},GJ=!!dM||!!hM,bD="text/plain",Jw=function(n,e,t){var r;t===void 0&&(t=!0);var[i,s]=n.split("?"),o=ut({},e),a=(r=s==null?void 0:s.split("&").map(c=>{var u,[f,p]=c.split("="),m=t&&(u=o[f])!==null&&u!==void 0?u:p;return delete o[f],f+"="+m}))!==null&&r!==void 0?r:[],l=YZ(o);return l&&a.push(l),i+"?"+a.join("&")},Cg=(n,e)=>JSON.stringify(n,(t,r)=>typeof r=="bigint"?r.toString():r,e),BT=n=>{var{data:e,compression:t}=n;if(e){if(t===wl.GZipJS){var r=HJ(function(l,c){var u=l.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(l);for(var f=new Io(l.length+(l.length>>>1)),p=0,m=function(g){f[p++]=g},v=0;v<u;++v){if(p+5>f.length){var w=new Io(p+8+(u-v<<1));w.set(f),f=w}var _=l.charCodeAt(v);_<128||c?m(_):_<2048?(m(192|_>>>6),m(128|63&_)):_>55295&&_<57344?(m(240|(_=65536+(1047552&_)|1023&l.charCodeAt(++v))>>>18),m(128|_>>>12&63),m(128|_>>>6&63),m(128|63&_)):(m(224|_>>>12),m(128|_>>>6&63),m(128|63&_))}return $5(f,0,p)}(Cg(e)),{mtime:0}),i=new Blob([r],{type:bD});return{contentType:bD,body:i,estimatedSize:i.size}}if(t===wl.Base64){var s=function(l){var c,u,f,p,m,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w=0,_=0,g="",E=[];if(!l)return l;l=jJ(l);do c=(m=l.charCodeAt(w++)<<16|l.charCodeAt(w++)<<8|l.charCodeAt(w++))>>18&63,u=m>>12&63,f=m>>6&63,p=63&m,E[_++]=v.charAt(c)+v.charAt(u)+v.charAt(f)+v.charAt(p);while(w<l.length);switch(g=E.join(""),l.length%3){case 1:g=g.slice(0,-2)+"==";break;case 2:g=g.slice(0,-1)+"="}return g}(Cg(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Cg(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Cg(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Bx=[];hM&&Bx.push({transport:"fetch",method:n=>{var e,t,{contentType:r,body:i,estimatedSize:s}=(e=BT(n))!==null&&e!==void 0?e:{},o=new Headers;$n(n.headers,function(u,f){o.append(f,u)}),r&&o.append("Content-Type",r);var a=n.url,l=null;if(GL){var c=new GL;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),n.timeout)}}hM(a,ut({method:(n==null?void 0:n.method)||"GET",headers:o,keepalive:n.method==="POST"&&(s||0)<52428.8,body:i,signal:(t=l)==null?void 0:t.signal},n.fetchOptions)).then(u=>u.text().then(f=>{var p={statusCode:u.status,text:f};if(u.status===200)try{p.json=JSON.parse(f)}catch(m){et.error(m)}n.callback==null||n.callback(p)})).catch(u=>{et.error(u),n.callback==null||n.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),dM&&Bx.push({transport:"XHR",method:n=>{var e,t=new dM;t.open(n.method||"GET",n.url,!0);var{contentType:r,body:i}=(e=BT(n))!==null&&e!==void 0?e:{};$n(n.headers,function(s,o){t.setRequestHeader(o,s)}),r&&t.setRequestHeader("Content-Type",r),n.timeout&&(t.timeout=n.timeout),n.disableXHRCredentials||(t.withCredentials=!0),t.onreadystatechange=()=>{if(t.readyState===4){var s={statusCode:t.status,text:t.responseText};if(t.status===200)try{s.json=JSON.parse(t.responseText)}catch{}n.callback==null||n.callback(s)}},t.send(i)}}),eo!=null&&eo.sendBeacon&&Bx.push({transport:"sendBeacon",method:n=>{var e=Jw(n.url,{beacon:"1"});try{var t,{contentType:r,body:i}=(t=BT(n))!==null&&t!==void 0?t:{},s=typeof i=="string"?new Blob([i],{type:r}):i;eo.sendBeacon(e,s)}catch{}}});var e1=function(n,e){if(!function(t){try{new RegExp(t)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(n)}catch{return!1}};function AD(n,e,t){return Cg({distinct_id:n,userPropertiesToSet:e,userPropertiesToSetOnce:t})}var q5={exact:(n,e)=>e.some(t=>n.some(r=>t===r)),is_not:(n,e)=>e.every(t=>n.every(r=>t!==r)),regex:(n,e)=>e.some(t=>n.some(r=>e1(t,r))),not_regex:(n,e)=>e.every(t=>n.every(r=>!e1(t,r))),icontains:(n,e)=>e.map(E0).some(t=>n.map(E0).some(r=>t.includes(r))),not_icontains:(n,e)=>e.map(E0).every(t=>n.map(E0).every(r=>!t.includes(r)))},E0=n=>n.toLowerCase();function X5(n,e){return!n||Object.entries(n).every(t=>{var[r,i]=t,s=e==null?void 0:e[r];if(Xe(s)||Xl(s))return!1;var o=[String(s)],a=q5[i.operator];return!!a&&a(i.values,o)})}var HT=ti("[Error tracking]");class WJ{constructor(e){var t,r;this.Jt=[],this.Kt=new mZ([new TZ,new kZ,new AZ,new bZ,new PZ,new IZ,new CZ,new NZ],SZ("web:javascript",_Z,EZ)),this._instance=e,this.Jt=(t=(r=this._instance.persistence)==null?void 0:r.get_property(yM))!==null&&t!==void 0?t:[]}onRemoteConfig(e){var t,r,i,s=(t=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&t!==void 0?t:[],o=(i=e.errorTracking)==null?void 0:i.captureExtensionExceptions;this.Jt=s,this._instance.persistence&&this._instance.persistence.register({[yM]:this.Jt,[tD]:o})}get Yt(){var e,t=!!this._instance.get_property(tD),r=this._instance.config.error_tracking.captureExtensionExceptions;return(e=r??t)!==null&&e!==void 0&&e}buildProperties(e,t){return this.Kt.buildFromUnknown(e,{syntheticException:t==null?void 0:t.syntheticException,mechanism:{handled:t==null?void 0:t.handled}})}sendExceptionEvent(e){var t=e.$exception_list;if(this.Xt(t)){if(this.Qt(t))return void HT.info("Skipping exception capture because a suppression rule matched");if(!this.Yt&&this.Zt(t))return void HT.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ti(t))return void HT.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}Qt(e){if(e.length===0)return!1;var t=e.reduce((r,i)=>{var{type:s,value:o}=i;return qr(s)&&s.length>0&&r.$exception_types.push(s),qr(o)&&o.length>0&&r.$exception_values.push(o),r},{$exception_types:[],$exception_values:[]});return this.Jt.some(r=>{var i=r.values.map(s=>{var o,a=q5[s.operator],l=jn(s.value)?s.value:[s.value],c=(o=t[s.key])!==null&&o!==void 0?o:[];return l.length>0&&a(l,c)});return r.type==="OR"?i.some(Boolean):i.every(Boolean)})}Zt(e){return e.flatMap(t=>{var r,i;return(r=(i=t.stacktrace)==null?void 0:i.frames)!==null&&r!==void 0?r:[]}).some(t=>t.filename&&t.filename.startsWith("chrome-extension://"))}ti(e){if(e.length>0){var t,r,i,s,o=(t=(r=e[0].stacktrace)==null?void 0:r.frames)!==null&&t!==void 0?t:[],a=o[o.length-1];return(i=a==null||(s=a.filename)==null?void 0:s.includes("posthog.com/static"))!==null&&i!==void 0&&i}return!1}Xt(e){return!zn(e)&&jn(e)}}var jo=ti("[FeatureFlags]"),Jm=ti("[FeatureFlags]",{debugEnabled:!0}),jT="$active_feature_flags",Wd="$override_feature_flags",MD="$feature_flag_payloads",eg="$override_feature_flag_payloads",CD="$feature_flag_request_id",RD="$feature_flag_evaluated_at",ID=n=>{var e={};for(var[t,r]of zx(n||{}))r&&(e[t]=r);return e},$J=n=>{var e=n.flags;return e?(n.featureFlags=Object.fromEntries(Object.keys(e).map(t=>{var r;return[t,(r=e[t].variant)!==null&&r!==void 0?r:e[t].enabled]})),n.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(t=>e[t].enabled).filter(t=>{var r;return(r=e[t].metadata)==null?void 0:r.payload}).map(t=>{var r;return[t,(r=e[t].metadata)==null?void 0:r.payload]}))):jo.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),n},qJ=function(n){return n.FeatureFlags="feature_flags",n.Recordings="recordings",n}({});class XJ{constructor(e){this.ii=!1,this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this._instance=e,this.featureFlagEventHandlers=[]}li(){var e=this._instance.config.evaluation_environments;return e!=null&&e.length?e.filter(t=>{var r=t&&typeof t=="string"&&t.trim().length>0;return r||jo.error("Invalid evaluation environment found:",t,"Expected non-empty string"),r}):[]}ui(){return this.li().length>0}flags(){if(this._instance.config.__preview_remote_config)this.oi=!0;else{var e=!this.hi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.vi({disableFlags:e})}}get hasLoadedFlags(){return this.ei}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(_M),t=this._instance.get_property(Wd),r=this._instance.get_property(eg);if(!r&&!t)return e||{};var i=Rr({},e||{}),s=[...new Set([...Object.keys(r||{}),...Object.keys(t||{})])];for(var o of s){var a,l,c=i[o],u=t==null?void 0:t[o],f=Xe(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,p=Xe(u)?c.variant:typeof u=="string"?u:void 0,m=r==null?void 0:r[o],v=ut({},c,{enabled:f,variant:f?p??(c==null?void 0:c.variant):void 0});f!==(c==null?void 0:c.enabled)&&(v.original_enabled=c==null?void 0:c.enabled),p!==(c==null?void 0:c.variant)&&(v.original_variant=c==null?void 0:c.variant),m&&(v.metadata=ut({},c==null?void 0:c.metadata,{payload:m,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),i[o]=v}return this.ii||(jo.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:i}),this.ii=!0),i}getFlagVariants(){var e=this._instance.get_property(Vf),t=this._instance.get_property(Wd);if(!t)return e||{};for(var r=Rr({},e),i=Object.keys(t),s=0;s<i.length;s++)r[i[s]]=t[i[s]];return this.ii||(jo.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:r}),this.ii=!0),r}getFlagPayloads(){var e=this._instance.get_property(MD),t=this._instance.get_property(eg);if(!t)return e||{};for(var r=Rr({},e||{}),i=Object.keys(t),s=0;s<i.length;s++)r[i[s]]=t[i[s]];return this.ii||(jo.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:r}),this.ii=!0),r}reloadFeatureFlags(){this.si||this._instance.config.advanced_disable_feature_flags||this.hi||(this.hi=setTimeout(()=>{this.vi()},5))}di(){clearTimeout(this.hi),this.hi=void 0}ensureFlagsLoaded(){this.ei||this.ri||this.hi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.si=e}vi(e){var t;if(this.di(),!this._instance.O())if(this.ri)this.ni=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:ut({},((t=this._instance.persistence)==null?void 0:t.get_initial_props())||{},this._instance.get_property(Ag)||{}),group_properties:this._instance.get_property(fh)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0),this.ui()&&(r.evaluation_environments=this.li());var i=this._instance.config.__preview_remote_config,s=i?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("flags",s+o);i&&(r.timezone=B5()),this.ri=!0,this._instance.ci({method:"POST",url:a,data:r,compression:this._instance.config.disable_compression?void 0:wl.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,f=!0;if(l.statusCode===200&&(this.ni||(this.$anon_distinct_id=void 0),f=!1),this.ri=!1,this.oi||(this.oi=!0,this._instance.fi((u=l.json)!==null&&u!==void 0?u:{})),!r.disable_flags||this.ni)if(this.ai=!f,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(qJ.FeatureFlags))jo.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var p;r.disable_flags||this.receivedFeatureFlags((p=l.json)!==null&&p!==void 0?p:{},f),this.ni&&(this.ni=!1,this.vi())}}})}}getFeatureFlag(e,t){if(t===void 0&&(t={}),this.ei||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],i=""+r,s=this._instance.get_property(CD)||void 0,o=this._instance.get_property(RD)||void 0,a=this._instance.get_property(jw)||{};if((t.send_event||!("send_event"in t))&&(!(e in a)||!a[e].includes(i))){var l,c,u,f,p,m,v,w,_;jn(a[e])?a[e].push(i):a[e]=[i],(l=this._instance.persistence)==null||l.register({[jw]:a});var g=this.getFeatureFlagDetails(e),E={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_evaluated_at:o,$feature_flag_bootstrapped_response:((c=this._instance.config.bootstrap)==null||(c=c.featureFlags)==null?void 0:c[e])||null,$feature_flag_bootstrapped_payload:((u=this._instance.config.bootstrap)==null||(u=u.featureFlagPayloads)==null?void 0:u[e])||null,$used_bootstrap_value:!this.ai};Xe(g==null||(f=g.metadata)==null?void 0:f.version)||(E.$feature_flag_version=g.metadata.version);var S,b=(p=g==null||(m=g.reason)==null?void 0:m.description)!==null&&p!==void 0?p:g==null||(v=g.reason)==null?void 0:v.code;b&&(E.$feature_flag_reason=b),g!=null&&(w=g.metadata)!=null&&w.id&&(E.$feature_flag_id=g.metadata.id),Xe(g==null?void 0:g.original_variant)&&Xe(g==null?void 0:g.original_enabled)||(E.$feature_flag_original_response=Xe(g.original_variant)?g.original_enabled:g.original_variant),g!=null&&(_=g.metadata)!=null&&_.original_payload&&(E.$feature_flag_original_payload=g==null||(S=g.metadata)==null?void 0:S.original_payload),this._instance.capture("$feature_flag_called",E)}return r}jo.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var r=this._instance.config.token,i={distinct_id:this._instance.get_distinct_id(),token:r};this.ui()&&(i.evaluation_environments=this.li()),this._instance.ci({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:i,compression:this._instance.config.disable_compression?void 0:wl.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:s=>{var o,a=(o=s.json)==null?void 0:o.featureFlagPayloads;t((a==null?void 0:a[e])||void 0)}})}isFeatureEnabled(e,t){if(t===void 0&&(t={}),this.ei||this.getFlags()&&this.getFlags().length>0){var r=this.getFeatureFlag(e,t);return Xe(r)?void 0:!!r}jo.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this._instance.persistence){this.ei=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var f=$J(o),p=f.flags,m=f.featureFlags,v=f.featureFlagPayloads;if(m){var w=o.requestId,_=o.evaluatedAt;if(jn(m)){jo.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var g={};if(m)for(var E=0;E<m.length;E++)g[m[E]]=!0;a&&a.register({[jT]:m,[Vf]:g})}else{var S=m,b=v,k=p;o.errorsWhileComputingFlags&&(S=ut({},l,S),b=ut({},c,b),k=ut({},u,k)),a&&a.register(ut({[jT]:Object.keys(ID(S)),[Vf]:S||{},[MD]:b||{},[_M]:k||{}},w?{[CD]:w}:{},_?{[RD]:_}:{}))}}})(e,this._instance.persistence,r,i,s),this.pi(t)}}override(e,t){t===void 0&&(t=!1),jo.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return jo.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(Wd),this._instance.persistence.unregister(eg),this.pi(),Jm.info("All overrides cleared");if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var t,r=e;if(this.ii=!!((t=r.suppressWarning)!==null&&t!==void 0&&t),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(Wd),Jm.info("Flag overrides cleared");else if(r.flags){if(jn(r.flags)){for(var i={},s=0;s<r.flags.length;s++)i[r.flags[s]]=!0;this._instance.persistence.register({[Wd]:i})}else this._instance.persistence.register({[Wd]:r.flags});Jm.info("Flag overrides set",{flags:r.flags})}}return"payloads"in r&&(r.payloads===!1?(this._instance.persistence.unregister(eg),Jm.info("Payload overrides cleared")):r.payloads&&(this._instance.persistence.register({[eg]:r.payloads}),Jm.info("Payload overrides set",{payloads:r.payloads}))),void this.pi()}this.pi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ei){var{flags:t,flagVariants:r}=this.gi();e(t,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,r){var i,s=(this._instance.get_property(bg)||[]).find(c=>c.flagKey===e),o={["$feature_enrollment/"+e]:t},a={$feature_flag:e,$feature_enrollment:t,$set:o};s&&(a.$early_access_feature_name=s.name),r&&(a.$feature_enrollment_stage=r),this._instance.capture("$feature_enrollment_update",a),this.setPersonPropertiesForFlags(o,!1);var l=ut({},this.getFlagVariants(),{[e]:t});(i=this._instance.persistence)==null||i.register({[jT]:Object.keys(ID(l)),[Vf]:l}),this.pi()}getEarlyAccessFeatures(e,t,r){t===void 0&&(t=!1);var i=this._instance.get_property(bg),s=r?"&"+r.map(o=>"stage="+o).join("&"):"";if(i&&!t)return e(i);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a,l;if(o.json){var c=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.unregister(bg),(l=this._instance.persistence)==null||l.register({[bg]:c}),e(c)}}})}gi(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(r=>t[r]),flagVariants:Object.keys(t).filter(r=>t[r]).reduce((r,i)=>(r[i]=t[i],r),{})}}pi(e){var{flags:t,flagVariants:r}=this.gi();this.featureFlagEventHandlers.forEach(i=>i(t,r,{errorsLoading:e}))}setPersonPropertiesForFlags(e,t){t===void 0&&(t=!0);var r=this._instance.get_property(Ag)||{};this._instance.register({[Ag]:ut({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Ag)}setGroupPropertiesForFlags(e,t){t===void 0&&(t=!0);var r=this._instance.get_property(fh)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(i=>{r[i]=ut({},r[i],e[i]),delete e[i]}),this._instance.register({[fh]:ut({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(fh)||{};this._instance.register({[fh]:ut({},t,{[e]:{}})})}else this._instance.unregister(fh)}reset(){this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this.$anon_distinct_id=void 0,this.di(),this.ii=!1}}var YJ=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class GT{constructor(e,t){this.F=e,this.props={},this.mi=!1,this.yi=(r=>{var i="";return r.token&&(i=r.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),r.persistence_name?"ph_"+r.persistence_name:"ph_"+i+"_posthog"})(e),this.Y=this.bi(e),this.load(),e.debug&&et.info("Persistence loaded",e.persistence,ut({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.wi}bi(e){YJ.indexOf(e.persistence.toLowerCase())===-1&&(et.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return t==="localstorage"&&dr.H()?dr:t==="localstorage+cookie"&&y0.H()?y0:t==="sessionstorage"&&gi.H()?gi:t==="memory"?oJ:t==="cookie"?La:y0.H()?y0:La}properties(){var e={};return $n(this.props,function(t,r){if(r===Vf&&ui(t))for(var i=Object.keys(t),s=0;s<i.length;s++)e["$feature/"+i[s]]=t[i[s]];else a=r,l=!1,(Xl(o=VZ)?l:jL&&o.indexOf===jL?o.indexOf(a)!=-1:($n(o,function(c){if(l||(l=c===a))return Bw}),l))||(e[r]=t);var o,a,l}),e}load(){if(!this.wi){var e=this.Y.W(this.yi);e&&(this.props=Rr({},e))}}save(){this.wi||this.Y.G(this.yi,this.props,this.xi,this.Si,this.Ei,this.F.debug)}remove(){this.Y.V(this.yi,!1),this.Y.V(this.yi,!0)}clear(){this.remove(),this.props={}}register_once(e,t,r){if(ui(e)){Xe(t)&&(t="None"),this.xi=Xe(r)?this.$i:r;var i=!1;if($n(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==t||(this.props[o]=s,i=!0)}),i)return this.save(),!0}return!1}register(e,t){if(ui(e)){this.xi=Xe(t)?this.$i:t;var r=!1;if($n(e,(i,s)=>{e.hasOwnProperty(s)&&this.props[s]!==i&&(this.props[s]=i,r=!0)}),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.mi){var e=D5(this.F.custom_campaign_params,this.F.mask_personal_data_properties,this.F.custom_personal_data_properties);Uf(TI(e))||this.register(e),this.mi=!0}}update_search_keyword(){var e;this.register((e=Ze==null?void 0:Ze.referrer)?F5(e):{})}update_referrer_info(){var e;this.register_once({$referrer:U5(),$referring_domain:Ze!=null&&Ze.referrer&&((e=qw(Ze.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[SM]||this.props[TM]||this.register_once({[Gw]:V5(this.F.mask_personal_data_properties,this.F.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};$n([TM,SM],o=>{var a=this.props[o];a&&$n(a,function(l,c){e["$initial_"+fM(c)]=l})});var t,r,i=this.props[Gw];if(i){var s=(t=z5(i),r={},$n(t,function(o,a){r["$initial_"+fM(a)]=o}),r);Rr(e,s)}return e}safe_merge(e){return $n(this.props,function(t,r){r in e||(e[r]=t)}),e}update_config(e,t,r){if(this.$i=this.xi=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!r),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var i=this.bi(e),s=this.props;this.clear(),this.Y=i,this.props=s,this.save()}}set_disabled(e){this.wi=e,this.wi?this.remove():this.save()}set_cross_subdomain(e){e!==this.Si&&(this.Si=e,this.remove(),this.save())}set_secure(e){e!==this.Ei&&(this.Ei=e,this.remove(),this.save())}set_event_timer(e,t){var r=this.props[Tg]||{};r[e]=t,this.props[Tg]=r,this.save()}remove_event_timer(e){var t=(this.props[Tg]||{})[e];return Xe(t)||(delete this.props[Tg][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}var tg=function(n){return n.Activation="events",n.Cancellation="cancelEvents",n}({});(function(n){return n.Button="button",n.Tab="tab",n.Selector="selector",n})({});(function(n){return n.TopLeft="top_left",n.TopRight="top_right",n.TopCenter="top_center",n.MiddleLeft="middle_left",n.MiddleRight="middle_right",n.MiddleCenter="middle_center",n.Left="left",n.Center="center",n.Right="right",n.NextToTrigger="next_to_trigger",n})({});(function(n){return n.Top="top",n.Left="left",n.Right="right",n.Bottom="bottom",n})({});var WT=function(n){return n.Popover="popover",n.API="api",n.Widget="widget",n.ExternalSurvey="external_survey",n}({});(function(n){return n.Open="open",n.MultipleChoice="multiple_choice",n.SingleChoice="single_choice",n.Rating="rating",n.Link="link",n})({});(function(n){return n.NextQuestion="next_question",n.End="end",n.ResponseBased="response_based",n.SpecificQuestion="specific_question",n})({});(function(n){return n.Once="once",n.Recurring="recurring",n.Always="always",n})({});var Hx=function(n){return n.SHOWN="survey shown",n.DISMISSED="survey dismissed",n.SENT="survey sent",n}({}),PD=function(n){return n.SURVEY_ID="$survey_id",n.SURVEY_NAME="$survey_name",n.SURVEY_RESPONSE="$survey_response",n.SURVEY_ITERATION="$survey_iteration",n.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",n.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",n.SURVEY_SUBMISSION_ID="$survey_submission_id",n.SURVEY_QUESTIONS="$survey_questions",n.SURVEY_COMPLETED="$survey_completed",n}({}),Y5=function(n){return n.Popover="popover",n.Inline="inline",n}({});class LI{constructor(){this.ki={},this.ki={}}on(e,t){return this.ki[e]||(this.ki[e]=[]),this.ki[e].push(t),()=>{this.ki[e]=this.ki[e].filter(r=>r!==t)}}emit(e,t){for(var r of this.ki[e]||[])r(t);for(var i of this.ki["*"]||[])i(e,t)}}function $d(n,e,t){if(zn(n))return!1;switch(t){case"exact":return n===e;case"contains":var r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*");return new RegExp(r,"i").test(n);case"regex":try{return new RegExp(e).test(n)}catch{return!1}default:return!1}}class KJ{constructor(e){this.Pi=new LI,this.Ti=(t,r)=>this.Ri(t,r)&&this.Ii(t,r)&&this.Fi(t,r)&&this.Ci(t,r),this.Ri=(t,r)=>r==null||!r.event||(t==null?void 0:t.event)===(r==null?void 0:r.event),this._instance=e,this.Mi=new Set,this.Oi=new Set}init(){var e;if(!Xe((e=this._instance)==null?void 0:e.Ai)){var t;(t=this._instance)==null||t.Ai((r,i)=>{this.on(r,i)})}}register(e){var t,r;if(!Xe((t=this._instance)==null?void 0:t.Ai)&&(e.forEach(o=>{var a,l;(a=this.Oi)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.Mi)==null||u.add((c==null?void 0:c.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var i,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(i=this._instance)==null||i.autocapture.setElementSelectors(s)}}on(e,t){var r;t!=null&&e.length!=0&&(this.Mi.has(e)||this.Mi.has(t==null?void 0:t.event))&&this.Oi&&((r=this.Oi)==null?void 0:r.size)>0&&this.Oi.forEach(i=>{this.Di(t,i)&&this.Pi.emit("actionCaptured",i.name)})}ji(e){this.onAction("actionCaptured",t=>e(t))}Di(e,t){if((t==null?void 0:t.steps)==null)return!1;for(var r of t.steps)if(this.Ti(e,r))return!0;return!1}onAction(e,t){return this.Pi.on(e,t)}Ii(e,t){if(t!=null&&t.url){var r,i=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!$d(i,t.url,t.url_matching||"contains"))return!1}return!0}Fi(e,t){return!!this.Li(e,t)&&!!this.Ni(e,t)&&!!this.Ui(e,t)}Li(e,t){var r;if(t==null||!t.href)return!0;var i=this.zi(e);if(i.length>0)return i.some(a=>$d(a.href,t.href,t.href_matching||"exact"));var s,o=(e==null||(r=e.properties)==null?void 0:r.$elements_chain)||"";return!!o&&$d((s=o.match(/(?::|")href="(.*?)"/))?s[1]:"",t.href,t.href_matching||"exact")}Ni(e,t){var r;if(t==null||!t.text)return!0;var i=this.zi(e);if(i.length>0)return i.some(c=>$d(c.text,t.text,t.text_matching||"exact")||$d(c.$el_text,t.text,t.text_matching||"exact"));var s,o,a,l=(e==null||(r=e.properties)==null?void 0:r.$elements_chain)||"";return!!l&&(s=function(c){for(var u,f=[],p=/(?::|")text="(.*?)"/g;!zn(u=p.exec(c));)f.includes(u[1])||f.push(u[1]);return f}(l),o=t.text,a=t.text_matching||"exact",s.some(c=>$d(c,o,a)))}Ui(e,t){var r,i;if(t==null||!t.selector)return!0;var s=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(s!=null&&s.includes(t.selector))return!0;var o=(e==null||(i=e.properties)==null?void 0:i.$elements_chain)||"";if(t.selector_regex&&o)try{return new RegExp(t.selector_regex).test(o)}catch{return!1}return!1}zi(e){var t;return(e==null||(t=e.properties)==null?void 0:t.$elements)==null?[]:e==null?void 0:e.properties.$elements}Ci(e,t){return t==null||!t.properties||t.properties.length===0||X5(t.properties.reduce((r,i)=>{var s=jn(i.value)?i.value.map(String):i.value!=null?[String(i.value)]:[];return r[i.key]={values:s,operator:i.operator||"exact"},r},{}),e==null?void 0:e.properties)}}var Dn=ti("[Surveys]"),NM="seenSurvey_",QJ=(n,e)=>{var t="$survey_"+e+"/"+n.id;return n.current_iteration&&n.current_iteration>0&&(t="$survey_"+e+"/"+n.id+"/"+n.current_iteration),t},ND=n=>{var e=""+NM+n.id;return n.current_iteration&&n.current_iteration>0&&(e=""+NM+n.id+"_"+n.current_iteration),e},ZJ=[WT.Popover,WT.Widget,WT.API],JJ={ignoreConditions:!1,ignoreDelay:!1,displayType:Y5.Popover};class eee{constructor(e){this._instance=e,this.Hi=new Map,this.Bi=new Map,this.qi=new Map}Wi(e,t){return!!e&&X5(e.propertyFilters,t==null?void 0:t.properties)}Gi(e,t){var r=new Map;return e.forEach(i=>{var s;(s=i.conditions)==null||(s=s[t])==null||(s=s.values)==null||s.forEach(o=>{if(o!=null&&o.name){var a=r.get(o.name)||[];a.push(i.id),r.set(o.name,a)}})}),r}Vi(e,t,r){var i,s=(r===tg.Activation?this.Hi:this.Bi).get(e),o=[];return(i=this._instance)==null||i.getSurveys(a=>{o=a.filter(l=>s==null?void 0:s.includes(l.id))}),o.filter(a=>{var l,c=(l=a.conditions)==null||(l=l[r])==null||(l=l.values)==null?void 0:l.find(u=>u.name===e);return this.Wi(c,t)})}register(e){var t;Xe((t=this._instance)==null?void 0:t.Ai)||(this.Ji(e),this.Ki(e))}Ki(e){var t=e.filter(r=>{var i,s;return((i=r.conditions)==null?void 0:i.actions)&&((s=r.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});t.length!==0&&(this.Yi==null&&(this.Yi=new KJ(this._instance),this.Yi.init(),this.Yi.ji(r=>{this.onAction(r)})),t.forEach(r=>{var i,s,o,a,l;r.conditions&&(i=r.conditions)!=null&&i.actions&&(s=r.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=r.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.Yi)==null||a.register(r.conditions.actions.values),(l=r.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.qi.get(c.name);u&&u.push(r.id),this.qi.set(c.name,u||[r.id])}}))}))}Ji(e){var t,r=e.filter(s=>{var o,a;return((o=s.conditions)==null?void 0:o.events)&&((a=s.conditions)==null||(a=a.events)==null||(a=a.values)==null?void 0:a.length)>0}),i=e.filter(s=>{var o,a;return((o=s.conditions)==null?void 0:o.cancelEvents)&&((a=s.conditions)==null||(a=a.cancelEvents)==null||(a=a.values)==null?void 0:a.length)>0});(r.length!==0||i.length!==0)&&((t=this._instance)==null||t.Ai((s,o)=>{this.onEvent(s,o)}),this.Hi=this.Gi(e,tg.Activation),this.Bi=this.Gi(e,tg.Cancellation))}onEvent(e,t){var r,i=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[v0])||[];if(Hx.SHOWN===e&&t&&i.length>0){var s;Dn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:t,existingActivatedSurveys:i});var o=t==null||(s=t.properties)==null?void 0:s.$survey_id;if(o){var a=i.indexOf(o);a>=0&&(i.splice(a,1),this.Xi(i))}}else{if(this.Bi.has(e)){var l=this.Vi(e,t,tg.Cancellation);l.length>0&&(Dn.info("cancel event matched, cancelling surveys",{event:e,surveysToCancel:l.map(u=>u.id)}),l.forEach(u=>{var f,p=i.indexOf(u.id);p>=0&&i.splice(p,1),(f=this._instance)==null||f.cancelPendingSurvey(u.id)}),this.Xi(i))}if(this.Hi.has(e)){Dn.info("survey event name matched",{event:e,eventPayload:t,surveys:this.Hi.get(e)});var c=this.Vi(e,t,tg.Activation);this.Xi(i.concat(c.map(u=>u.id)||[]))}}}onAction(e){var t,r=((t=this._instance)==null||(t=t.persistence)==null?void 0:t.props[v0])||[];this.qi.has(e)&&this.Xi(r.concat(this.qi.get(e)||[]))}Xi(e){var t;Dn.info("updating activated surveys",{activatedSurveys:e}),(t=this._instance)==null||(t=t.persistence)==null||t.register({[v0]:[...new Set(e)]})}getSurveys(){var e,t=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[v0];return t||[]}getEventToSurveys(){return this.Hi}Qi(){return this.Yi}}class tee{constructor(e){this.Zi=void 0,this._surveyManager=null,this.te=!1,this.ie=!1,this.ee=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(zn(t))return Dn.warn("Flags not loaded yet. Not loading surveys.");var r=jn(t);this.Zi=r?t.length>0:t,Dn.info("flags response received, isSurveysEnabled: "+this.Zi),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);(r!=null&&r.startsWith(NM)||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach(i=>localStorage.removeItem(i))}loadIfEnabled(){if(!this._surveyManager)if(this.ie)Dn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Dn.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())Dn.info("Not loading surveys in cookieless mode without consent.");else{var e=Bt==null?void 0:Bt.__PosthogExtensions__;if(e){if(!Xe(this.Zi)||this._instance.config.advanced_enable_surveys){var t=this.Zi||this._instance.config.advanced_enable_surveys;this.ie=!0;try{var r=e.generateSurveys;if(r)return void this.re(r,t);var i=e.loadExternalDependency;if(!i)return void this.se("PostHog loadExternalDependency extension not found.");i(this._instance,"surveys",s=>{s||!e.generateSurveys?this.se("Could not load surveys script",s):this.re(e.generateSurveys,t)})}catch(s){throw this.se("Error initializing surveys",s),s}finally{this.ie=!1}}}else Dn.error("PostHog Extensions not found.")}}re(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new eee(this._instance),Dn.info("Surveys loaded successfully"),this.ne({isLoaded:!0})}se(e,t){Dn.error(e,t),this.ne({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.ee.push(e),this._surveyManager&&this.ne({isLoaded:!0}),()=>{this.ee=this.ee.filter(t=>t!==e)}}getSurveys(e,t){if(t===void 0&&(t=!1),this._instance.config.disable_surveys)return Dn.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(xM);if(r&&!t)return e(r,{isLoaded:!0});if(this.te)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.te=!0,this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var s;this.te=!1;var o=i.statusCode;if(o!==200||!i.json){var a="Surveys API could not be loaded, status: "+o;return Dn.error(a),e([],{isLoaded:!1,error:a})}var l,c=i.json.surveys||[],u=c.filter(f=>function(p){return!(!p.start_date||p.end_date)}(f)&&(function(p){var m;return!((m=p.conditions)==null||(m=m.events)==null||(m=m.values)==null||!m.length)}(f)||function(p){var m;return!((m=p.conditions)==null||(m=m.actions)==null||(m=m.values)==null||!m.length)}(f)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[xM]:c}),e(c,{isLoaded:!0})}})}catch(i){throw this.te=!1,i}}ne(e){for(var t of this.ee)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(r){Dn.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,t){if(t===void 0&&(t=!1),!zn(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);Dn.warn("init was not called")}oe(e){var t=null;return this.getSurveys(r=>{var i;t=(i=r.find(s=>s.id===e))!==null&&i!==void 0?i:null}),t}ae(e){if(zn(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t=typeof e=="string"?this.oe(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(zn(this._surveyManager))return Dn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.ae(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return zn(this._surveyManager)?(Dn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(i=>{var s,o=(s=i.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.ae(o);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},t)})}renderSurvey(e,t){var r;if(zn(this._surveyManager))Dn.warn("init was not called");else{var i=typeof e=="string"?this.oe(e):e;if(i!=null&&i.id)if(ZJ.includes(i.type)){var s=Ze==null?void 0:Ze.querySelector(t);if(s)return(r=i.appearance)!=null&&r.surveyPopupDelaySeconds?(Dn.info("Rendering survey "+i.id+" with delay of "+i.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var o,a;Dn.info("Rendering survey "+i.id+" with delay of "+((o=i.appearance)==null?void 0:o.surveyPopupDelaySeconds)+" seconds"),(a=this._surveyManager)==null||a.renderSurvey(i,s),Dn.info("Survey "+i.id+" rendered")},1e3*i.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(i,s);Dn.warn("Survey element not found")}else Dn.warn("Surveys of type "+i.type+" cannot be rendered in the app");else Dn.warn("Survey not found")}}displaySurvey(e,t){var r;if(zn(this._surveyManager))Dn.warn("init was not called");else{var i=this.oe(e);if(i){var s=i;if((r=i.appearance)!=null&&r.surveyPopupDelaySeconds&&t.ignoreDelay&&(s=ut({},i,{appearance:ut({},i.appearance,{surveyPopupDelaySeconds:0})})),t.ignoreConditions===!1){var o=this.canRenderSurvey(i);if(!o.visible)return void Dn.warn("Survey is not eligible to be displayed: ",o.disabledReason)}t.displayType!==Y5.Inline?this._surveyManager.handlePopoverSurvey(s):this.renderSurvey(s,t.selector)}else Dn.warn("Survey not found")}}cancelPendingSurvey(e){zn(this._surveyManager)?Dn.warn("init was not called"):this._surveyManager.cancelSurvey(e)}}var kD=ti("[RateLimiter]");class nee{constructor(e){var t,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var s=i.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{kD.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void kD.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((t=e.config.rate_limiting)==null?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var t,r,i;e===void 0&&(e=!1);var s=new Date().getTime(),o=(t=(r=this.instance.persistence)==null?void 0:r.get_property(EM))!==null&&t!==void 0?t:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)==null||i.set_property(EM,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return t!==!1&&new Date().getTime()<t}}var eh=ti("[RemoteConfig]");class ree{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Bt._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}le(e){var t,r;(t=Bt.__PosthogExtensions__)!=null&&t.loadExternalDependency?(r=Bt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(eh.error("PostHog Extensions not found. Cannot load remote config."),e())}ue(e){this._instance.ci({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return eh.info("Using preloaded remote config",this.remoteConfig),void this.fi(this.remoteConfig);if(this._instance.O())return void eh.warn("Remote config is disabled. Falling back to local config.");this.le(e=>{if(!e)return eh.info("No config found after loading remote JS config. Falling back to JSON."),void this.ue(t=>{this.fi(t)});this.fi(e)})}catch(e){eh.error("Error loading remote config",e)}}fi(e){e?this._instance.config.__preview_remote_config?(this._instance.fi(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):eh.info("__preview_remote_config is disabled. Logging config instead",e):eh.error("Failed to fetch remote config from PostHog.")}}var kM=3e3;class iee{constructor(e,t){this.he=!0,this.ve=[],this.de=Ra((t==null?void 0:t.flush_interval_ms)||kM,250,5e3,et.createLogger("flush interval"),kM),this.ce=e}enqueue(e){this.ve.push(e),this.fe||this.pe()}unload(){this.ge();var e=this.ve.length>0?this._e():{},t=Object.values(e);[...t.filter(r=>r.url.indexOf("/e")===0),...t.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.ce(ut({},r,{transport:"sendBeacon"}))})}enable(){this.he=!1,this.pe()}pe(){var e=this;this.he||(this.fe=setTimeout(()=>{if(this.ge(),this.ve.length>0){var t=this._e(),r=function(){var s=t[i],o=new Date().getTime();s.data&&jn(s.data)&&$n(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.ce(s)};for(var i in t)r()}},this.de))}ge(){clearTimeout(this.fe),this.fe=void 0}_e(){var e={};return $n(this.ve,t=>{var r,i=t,s=(i?i.batchKey:null)||i.url;Xe(e[s])&&(e[s]=ut({},i,{data:[]})),(r=e[s].data)==null||r.push(i.data)}),this.ve=[],e}}var see=["retriesPerformedSoFar"];class oee{constructor(e){this.me=!1,this.ye=3e3,this.ve=[],this._instance=e,this.ve=[],this.be=!0,!Xe(ve)&&"onLine"in ve.navigator&&(this.be=ve.navigator.onLine,this.we=()=>{this.be=!0,this.Dt()},this.xe=()=>{this.be=!1},Vr(ve,"online",this.we),Vr(ve,"offline",this.xe))}get length(){return this.ve.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,r=GB(e,see);$a(t)&&t>0&&(r.url=Jw(r.url,{retry_count:t})),this._instance.ci(ut({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(t??0)<10?this.Se(ut({retriesPerformedSoFar:t},r)):r.callback==null||r.callback(i)}}))}Se(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var r=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(t),i=Date.now()+r;this.ve.push({retryAt:i,requestOptions:e});var s="Enqueued failed request for retry in "+r;navigator.onLine||(s+=" (Browser is offline)"),et.warn(s),this.me||(this.me=!0,this.Ee())}Ee(){if(this.$e&&clearTimeout(this.$e),this.ve.length===0)return this.me=!1,void(this.$e=void 0);this.$e=setTimeout(()=>{this.be&&this.ve.length>0&&this.Dt(),this.Ee()},this.ye)}Dt(){var e=Date.now(),t=[],r=this.ve.filter(s=>s.retryAt<e||(t.push(s),!1));if(this.ve=t,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:e}of(this.$e&&(clearTimeout(this.$e),this.$e=void 0),this.me=!1,Xe(ve)||(this.we&&(ve.removeEventListener("online",this.we),this.we=void 0),this.xe&&(ve.removeEventListener("offline",this.xe),this.xe=void 0)),this.ve))try{this._instance.ci(ut({},e,{transport:"sendBeacon"}))}catch(t){et.error(t)}this.ve=[]}}class aee{constructor(e){this.ke=()=>{var t,r,i,s;this.Pe||(this.Pe={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Pe.lastScrollY=Math.ceil(a),this.Pe.maxScrollY=Math.max(a,(t=this.Pe.maxScrollY)!==null&&t!==void 0?t:0),this.Pe.maxScrollHeight=Math.max(l,(r=this.Pe.maxScrollHeight)!==null&&r!==void 0?r:0),this.Pe.lastContentY=c,this.Pe.maxContentY=Math.max(c,(i=this.Pe.maxContentY)!==null&&i!==void 0?i:0),this.Pe.maxContentHeight=Math.max(u,(s=this.Pe.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Pe}resetContext(){var e=this.Pe;return setTimeout(this.ke,0),e}startMeasuringScrollPosition(){Vr(ve,"scroll",this.ke,{capture:!0}),Vr(ve,"scrollend",this.ke,{capture:!0}),Vr(ve,"resize",this.ke)}scrollElement(){if(!this._instance.config.scroll_root_selector)return ve==null?void 0:ve.document.documentElement;var e=jn(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var t of e){var r=ve==null?void 0:ve.document.querySelector(t);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return ve&&(ve.scrollY||ve.pageYOffset||ve.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return ve&&(ve.scrollX||ve.pageXOffset||ve.document.documentElement.scrollLeft)||0}}var lee=n=>V5(n==null?void 0:n.config.mask_personal_data_properties,n==null?void 0:n.config.custom_personal_data_properties);class LD{constructor(e,t,r,i){this.Te=s=>{var o=this.Re();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.Ie(this._instance)};this.Fe.register({[wM]:a})}},this._instance=e,this.Ce=t,this.Fe=r,this.Ie=i||lee,this.Ce.onSessionId(this.Te)}Re(){return this.Fe.props[wM]}getSetOnceProps(){var e,t=(e=this.Re())==null?void 0:e.props;return t?"r"in t?z5(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return $n(TI(this.getSetOnceProps()),(t,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+fM(r)]=t}),e}}var $T=ti("[SessionId]");class DD{on(e,t){return this.Me.on(e,t)}constructor(e,t,r){var i;if(this.Oe=[],this.Ae=void 0,this.Me=new LI,this.De=(u,f)=>Math.abs(u-f)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.F=e.config,this.Fe=e.persistence,this.je=void 0,this.Le=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Ne=t||Uc,this.Ue=r||Uc;var s=this.F.persistence_name||this.F.token,o=this.F.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Ra(o,60,36e3,$T.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.ze(),this.He="ph_"+s+"_window_id",this.Be="ph_"+s+"_primary_window_exists",this.qe()){var a=gi.W(this.He),l=gi.W(this.Be);a&&!l?this.je=a:gi.V(this.He),gi.G(this.Be,!0)}if((i=this.F.bootstrap)!=null&&i.sessionID)try{var c=(u=>{var f=u.replace(/-/g,"");if(f.length!==32)throw new Error("Not a valid UUID");if(f[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(f.substring(0,12),16)})(this.F.bootstrap.sessionID);this.We(this.F.bootstrap.sessionID,new Date().getTime(),c)}catch(u){$T.error("Invalid sessionID in bootstrap",u)}this.Ge()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Xe(this.Oe)&&(this.Oe=[]),this.Oe.push(e),this.Le&&e(this.Le,this.je),()=>{this.Oe=this.Oe.filter(t=>t!==e)}}qe(){return this.F.persistence!=="memory"&&!this.Fe.wi&&gi.H()}Ve(e){e!==this.je&&(this.je=e,this.qe()&&gi.G(this.He,e))}Je(){return this.je?this.je:this.qe()?gi.W(this.He):null}We(e,t,r){e===this.Le&&t===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=t,this.Le=e,this.Fe.register({[Hw]:[t,e,r]}))}Ke(){var e=this.Fe.props[Hw];return jn(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.We(null,null,null)}destroy(){clearTimeout(this.Ye),this.Ye=void 0,this.Ae&&ve&&(ve.removeEventListener("beforeunload",this.Ae,{capture:!1}),this.Ae=void 0),this.Oe=[]}Ge(){this.Ae=()=>{this.qe()&&gi.V(this.Be)},Vr(ve,"beforeunload",this.Ae,{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(e===void 0&&(e=!1),t===void 0&&(t=null),this.F.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var r=t||new Date().getTime(),[i,s,o]=this.Ke(),a=this.Je(),l=$a(o)&&o>0&&Math.abs(r-o)>864e5,c=!1,u=!s,f=!u&&!e&&this.De(r,i);u||f||l?(s=this.Ne(),a=this.Ue(),$T.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:f,sessionPastMaximumLength:l}}),o=r,c=!0):a||(a=this.Ue(),c=!0);var p=i===0||!e||l?r:i,m=o===0?new Date().getTime():o;return this.Ve(a),this.We(s,p,m),e||this.ze(),c&&this.Oe.forEach(v=>v(s,a,c?{noSessionId:u,activityTimeout:f,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:m,changeReason:c?{noSessionId:u,activityTimeout:f,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:i}}ze(){clearTimeout(this.Ye),this.Ye=setTimeout(()=>{var[e]=this.Ke();if(this.De(new Date().getTime(),e)){var t=this.Le;this.resetSessionId(),this.Me.emit("forcedIdleReset",{idleSessionId:t})}},1.1*this.sessionTimeoutMs)}}var cee=["$set_once","$set"],lc=ti("[SiteApps]");class uee{constructor(e){this._instance=e,this.Xe=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Qe(e,t){if(t){var r=this.globalsForEvent(t);this.Xe.push(r),this.Xe.length>1e3&&(this.Xe=this.Xe.slice(10))}}get siteAppLoaders(){var e;return(e=Bt._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ai(this.Qe.bind(this));this.Ze=()=>{e(),this.Xe=[],this.Ze=void 0}}}globalsForEvent(e){var t,r,i,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],f=this._instance.get_property("$stored_group_properties")||{};for(var[p,m]of Object.entries(f))c[p]={id:u[p],type:p,properties:m};var{$set_once:v,$set:w}=e;return{event:ut({},GB(e,cee),{properties:ut({},e.properties,w?{$set:ut({},(t=(r=e.properties)==null?void 0:r.$set)!==null&&t!==void 0?t:{},w)}:{},v?{$set_once:ut({},(i=(s=e.properties)==null?void 0:s.$set_once)!==null&&i!==void 0?i:{},v)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var t=this.apps[e.id],r=()=>{var a;!t.errored&&this.Xe.length&&(lc.info("Processing "+this.Xe.length+" events for site app with id "+e.id),this.Xe.forEach(l=>t.processEvent==null?void 0:t.processEvent(l)),t.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.Ze)==null||a.call(this))},i=!1,s=a=>{t.errored=!a,t.loaded=!0,lc.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),i&&r()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(t.processEvent=o),i=!0}catch(a){lc.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(i&&t.loaded)try{r()}catch(a){lc.error("Error while processing buffered events PostHog app with config id "+e.id,a),t.errored=!0}}tr(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}ir(e){if(Object.keys(this.apps).length!==0){var t=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(t)}catch(i){lc.error("Error while processing event "+e.event+" for site app "+r.id,i)}}}onRemoteConfig(e){var t,r,i,s=this;if((t=this.siteAppLoaders)!=null&&t.length)return this.isEnabled?(this.tr(),void this._instance.on("eventCaptured",c=>this.ir(c))):void lc.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Ze)==null||r.call(this),(i=e.siteApps)!=null&&i.length)if(this.isEnabled){var o=function(c){var u;Bt["__$$ph_site_app_"+c]=s._instance,(u=Bt.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,f=>{if(f)return lc.error("Error while initializing PostHog app with config id "+c,f)})};for(var{id:a,url:l}of e.siteApps)o(a)}else lc.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var K5=function(n,e){if(!n)return!1;var t=n.userAgent;if(t&&qL(t,e))return!0;try{var r=n==null?void 0:n.userAgentData;if(r!=null&&r.brands&&r.brands.some(i=>qL(i==null?void 0:i.brand,e)))return!0}catch{}return!!n.webdriver},Rg=function(n){return n.US="us",n.EU="eu",n.CUSTOM="custom",n}({}),OD="i.posthog.com";class hee{constructor(e){this.er={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,t=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+OD,".posthog.com")),t==="https://app.posthog.com"?"https://us.posthog.com":t}get region(){return this.er[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.er[this.apiHost]=Rg.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.er[this.apiHost]=Rg.EU:this.er[this.apiHost]=Rg.CUSTOM),this.er[this.apiHost]}endpointFor(e,t){if(t===void 0&&(t=""),t&&(t=t[0]==="/"?t:"/"+t),e==="ui")return this.uiHost+t;if(e==="flags")return this.flagsApiHost+t;if(this.region===Rg.CUSTOM)return this.apiHost+t;var r=OD+t;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var dee={icontains:(n,e)=>!!ve&&e.href.toLowerCase().indexOf(n.toLowerCase())>-1,not_icontains:(n,e)=>!!ve&&e.href.toLowerCase().indexOf(n.toLowerCase())===-1,regex:(n,e)=>!!ve&&e1(e.href,n),not_regex:(n,e)=>!!ve&&!e1(e.href,n),exact:(n,e)=>e.href===n,is_not:(n,e)=>e.href!==n};class zi{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),t.getWebExperiments(i=>{zi.rr("retrieved web experiments from the server"),t.sr=new Map,i.forEach(s=>{if(s.feature_flag_key){var o;t.sr&&(zi.rr("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=t.sr)==null||o.set(s.feature_flag_key,s));var a=t._instance.getFeatureFlag(s.feature_flag_key);qr(a)&&s.variants[a]&&t.nr(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];zi.ar(c)&&t.nr(s.name,l,c.transforms)}})},r)},this._instance=e,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(e){if(this._is_bot())zi.rr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(zn(this.sr))return this.sr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();zi.rr("applying feature flags",e),e.forEach(t=>{var r;if(this.sr&&(r=this.sr)!=null&&r.has(t)){var i,s=this._instance.getFeatureFlag(t),o=(i=this.sr)==null?void 0:i.get(t);s&&o!=null&&o.variants[s]&&this.nr(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=zi.getWindowLocation();if(e!=null&&e.search){var t=Xw(e==null?void 0:e.search,"__experiment_id"),r=Xw(e==null?void 0:e.search,"__experiment_variant");t&&r&&(zi.rr("previewing web experiments "+t+" && "+r),this.getWebExperiments(i=>{this.lr(parseInt(t),r,i)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var i=this._instance.get_property("$web_experiments");if(i&&!t)return e(i);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}lr(e,t,r){var i=r.filter(s=>s.id===e);i&&i.length>0&&(zi.rr("Previewing web experiment ["+i[0].name+"] with variant ["+t+"]"),this.nr(i[0].name,t,i[0].variants[t].transforms))}static ar(e){return!zn(e.conditions)&&zi.ur(e)&&zi.hr(e)}static ur(e){var t;if(zn(e.conditions)||zn((t=e.conditions)==null?void 0:t.url))return!0;var r,i,s,o=zi.getWindowLocation();return!!o&&((r=e.conditions)==null||!r.url||dee[(i=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&i!==void 0?i:"icontains"](e.conditions.url,o))}static getWindowLocation(){return ve==null?void 0:ve.location}static hr(e){var t;if(zn(e.conditions)||zn((t=e.conditions)==null?void 0:t.utm))return!0;var r=D5();if(r.utm_source){var i,s,o,a,l,c,u,f,p=(i=e.conditions)==null||(i=i.utm)==null||!i.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==r.utm_campaign,m=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==r.utm_source,v=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==r.utm_medium,w=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((f=e.conditions)==null||(f=f.utm)==null?void 0:f.utm_term)==r.utm_term;return p&&v&&w&&m}return!1}static rr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];et.info("[WebExperiments] "+e,r)}nr(e,t,r){this._is_bot()?zi.rr("Refusing to render web experiment since the viewer is a likely bot"):t!=="control"?r.forEach(i=>{if(i.selector){var s;zi.rr("applying transform of variant "+t+" for experiment "+e+" ",i);var o=(s=document)==null?void 0:s.querySelectorAll(i.selector);o==null||o.forEach(a=>{var l=a;i.html&&(l.innerHTML=i.html),i.css&&l.setAttribute("style",i.css)})}}):zi.rr("Control variants leave the page unmodified.")}_is_bot(){return eo&&this._instance?K5(eo,this._instance.config.custom_blocked_useragents):void 0}}var fee=ti("[PostHog ExternalIntegrations]"),pee={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class mee{constructor(e){this._instance=e}it(e,t){var r;(r=Bt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,e,i=>{if(i)return fee.error("failed to load script",i);t()})}startIfEnabledOrStop(){var e=this,t=function(o){var a,l,c;!i||(a=Bt.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.it(pee[o],()=>{var u;(u=Bt.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!i&&(l=Bt.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Bt.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[r,i]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;t(r)}}}var LM="[SessionRecording]",ng=ti(LM);class FD{get started(){var e;return!((e=this.vr)==null||!e.isStarted)}get status(){return this.vr?this.vr.status:this.dr&&!this.cr?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.dr=!1,this.pr=void 0,this._instance=e,!this._instance.sessionManager)throw ng.error("started without valid sessionManager"),new Error(LM+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(LM+' cannot be used with cookieless_mode="always"')}get cr(){var e,t=!((e=this._instance.get_property(kT))==null||!e.enabled),r=!this._instance.config.disable_session_recording,i=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return ve&&t&&r&&!i}startIfEnabledOrStop(e){var t;if(!this.cr||(t=this.vr)==null||!t.isStarted){var r=!Xe(Object.assign)&&!Xe(Array.from);this.cr&&r?(this.gr(e),ng.info("starting")):this.stopRecording()}}gr(e){var t,r,i;this.cr&&(Bt!=null&&(t=Bt.__PosthogExtensions__)!=null&&(t=t.rrweb)!=null&&t.record&&(r=Bt.__PosthogExtensions__)!=null&&r.initSessionRecording?this._r(e):(i=Bt.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,this.mr,s=>{if(s)return ng.error("could not load recorder",s);this._r(e)}))}stopRecording(){var e,t;(e=this.pr)==null||e.call(this),this.pr=void 0,(t=this.vr)==null||t.stop()}yr(){var e;(e=this._instance.persistence)==null||e.unregister(e5)}br(e){if(this._instance.persistence){var t,r,i=this._instance.persistence,s=()=>{var o=e.sessionRecording===!1?void 0:e.sessionRecording,a=o==null?void 0:o.sampleRate,l=zn(a)?null:parseFloat(a);zn(l)&&this.yr();var c=o==null?void 0:o.minimumDurationMilliseconds;i.register({[kT]:ut({enabled:!!o},o,{networkPayloadCapture:ut({capturePerformance:e.capturePerformance},o==null?void 0:o.networkPayloadCapture),canvasRecording:{enabled:o==null?void 0:o.recordCanvas,fps:o==null?void 0:o.canvasFps,quality:o==null?void 0:o.canvasQuality},sampleRate:l,minimumDurationMilliseconds:Xe(c)?null:c,endpoint:o==null?void 0:o.endpoint,triggerMatchType:o==null?void 0:o.triggerMatchType,masking:o==null?void 0:o.masking,urlTriggers:o==null?void 0:o.urlTriggers})})};s(),(t=this.pr)==null||t.call(this),this.pr=(r=this._instance.sessionManager)==null?void 0:r.onSessionId(s)}}onRemoteConfig(e){"sessionRecording"in e?e.sessionRecording!==!1?(this.br(e),this.dr=!0,this.startIfEnabledOrStop()):this.dr=!0:ng.info("skipping remote config with no sessionRecording",e)}log(e,t){var r;t===void 0&&(t="log"),(r=this.vr)!=null&&r.log?this.vr.log(e,t):ng.warn("log called before recorder was ready")}get mr(){var e,t,r=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.get_property(kT);return(r==null||(t=r.scriptConfig)==null?void 0:t.script)||"lazy-recorder"}_r(e){var t,r;if((t=Bt.__PosthogExtensions__)==null||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.vr||(this.vr=(r=Bt.__PosthogExtensions__)==null?void 0:r.initSessionRecording(this._instance),this.vr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.vr.start(e)}onRRwebEmit(e){var t;(t=this.vr)==null||t.onRRwebEmit==null||t.onRRwebEmit(e)}overrideLinkedFlag(){var e,t;this.vr||(t=this._instance.persistence)==null||t.register({$replay_override_linked_flag:!0}),(e=this.vr)==null||e.overrideLinkedFlag()}overrideSampling(){var e,t;this.vr||(t=this._instance.persistence)==null||t.register({$replay_override_sampling:!0}),(e=this.vr)==null||e.overrideSampling()}overrideTrigger(e){var t,r;this.vr||(r=this._instance.persistence)==null||r.register({[e==="url"?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),(t=this.vr)==null||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return((e=this.vr)==null?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,t){var r;return!((r=this.vr)==null||!r.tryAddCustomEvent(e,t))}}var Yg={},DM=()=>{},yf="posthog",Q5=!GJ&&(Ts==null?void 0:Ts.indexOf("MSIE"))===-1&&(Ts==null?void 0:Ts.indexOf("Mozilla"))===-1,UD=n=>{var e;return ut({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:UZ(Ze==null?void 0:Ze.location),persistence:"localStorage+cookie",persistence_name:"",loaded:DM,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:n??"unset",__preview_deferred_init_extensions:!1,debug:Cs&&qr(Cs==null?void 0:Cs.search)&&Cs.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(ve==null||(e=ve.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var r="Bad HTTP status: "+t.statusCode+" "+t.text;et.error(r)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:kM},error_tracking:{},_onCapture:DM,__preview_eager_load_replay:!1},(t=>({rageclick:!(t&&t>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(t&&t>="2025-05-24")||"history_change",session_recording:t&&t>="2025-11-30"?{strictMinimumDuration:!0}:{}}))(n))},VD=n=>{var e={};Xe(n.process_person)||(e.person_profiles=n.process_person),Xe(n.xhr_headers)||(e.request_headers=n.xhr_headers),Xe(n.cookie_name)||(e.persistence_name=n.cookie_name),Xe(n.disable_cookie)||(e.disable_persistence=n.disable_cookie),Xe(n.store_google)||(e.save_campaign_params=n.store_google),Xe(n.verbose)||(e.debug=n.verbose);var t=Rr({},e,n);return jn(n.property_blacklist)&&(Xe(n.property_denylist)?t.property_denylist=n.property_blacklist:jn(n.property_denylist)?t.property_denylist=[...n.property_blacklist,...n.property_denylist]:et.error("Invalid value for property_denylist config: "+n.property_denylist)),t};class gee{constructor(){this.__forceAllowLocalhost=!1}get wr(){return this.__forceAllowLocalhost}set wr(e){et.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class cE{get decideEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)==null?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)==null?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new gee,this.Sr=!1,this.version=gl.LIB_VERSION,this.Er=new LI,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=UD(),this.SentryIntegration=fJ,this.sentryIntegration=e=>function(t,r){var i=y5(t,r);return{name:v5,processEvent:s=>i(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.$r=!1,this.kr=null,this.Pr=null,this.Tr=null,this.featureFlags=new XJ(this),this.toolbar=new mJ(this),this.scrollManager=new aee(this),this.pageViewManager=new DJ(this),this.surveys=new tee(this),this.experiments=new zi(this),this.exceptions=new WJ(this),this.rateLimiter=new nee(this),this.requestRouter=new hee(this),this.consent=new aJ(this),this.externalIntegrations=new mee(this),this.people={set:(e,t,r)=>{var i=qr(e)?{[e]:t}:e;this.setPersonProperties(i),r==null||r({})},set_once:(e,t,r)=>{var i=qr(e)?{[e]:t}:e;this.setPersonProperties(void 0,i),r==null||r({})}},this.on("eventCaptured",e=>et.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,t,r){if(r&&r!==yf){var i,s=(i=Yg[r])!==null&&i!==void 0?i:new cE;return s._init(e,t,r),Yg[r]=s,Yg[yf][r]=s,s}return this._init(e,t,r)}_init(e,t,r){var i;if(t===void 0&&(t={}),Xe(e)||pM(e))return et.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},t.debug=this.Rr(t.debug),this.Ir=t,this.Fr=[],t.person_profiles&&(this.Pr=t.person_profiles),this.set_config(Rr({},UD(t.defaults),VD(t),{name:r,token:e})),this.config.on_xhr_error&&et.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:wl.GZipJS;var s=this.Cr();this.persistence=new GT(this.config,s),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new GT(ut({},this.config,{persistence:"sessionStorage"}),s);var o=ut({},this.persistence.props),a=ut({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.Mr=new iee(E=>this.Or(E),this.config.request_queue_config),this.Ar=new oee(this),this.__request_queue=[];var l=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(l||(this.sessionManager=new DD(this),this.sessionPropsManager=new LD(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(et.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.Dr(l)},0)):(et.info("Initializing extensions synchronously"),this.Dr(l)),gl.DEBUG=gl.DEBUG||this.config.debug,gl.DEBUG&&et.info("Starting in debug mode",{this:this,config:t,thisC:ut({},this.config),p:o,s:a}),((i=t.bootstrap)==null?void 0:i.distinctID)!==void 0){var c,u,f=this.config.get_device_id(Uc()),p=(c=t.bootstrap)!=null&&c.isIdentifiedID?f:t.bootstrap.distinctID;this.persistence.set_property(vl,(u=t.bootstrap)!=null&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:p})}if(this.jr()){var m,v,w=Object.keys(((m=t.bootstrap)==null?void 0:m.featureFlags)||{}).filter(E=>{var S;return!((S=t.bootstrap)==null||(S=S.featureFlags)==null||!S[E])}).reduce((E,S)=>{var b;return E[S]=((b=t.bootstrap)==null||(b=b.featureFlags)==null?void 0:b[S])||!1,E},{}),_=Object.keys(((v=t.bootstrap)==null?void 0:v.featureFlagPayloads)||{}).filter(E=>w[E]).reduce((E,S)=>{var b,k;return(b=t.bootstrap)!=null&&(b=b.featureFlagPayloads)!=null&&b[S]&&(E[S]=(k=t.bootstrap)==null||(k=k.featureFlagPayloads)==null?void 0:k[S]),E},{});this.featureFlags.receivedFeatureFlags({featureFlags:w,featureFlagPayloads:_})}if(l)this.register_once({distinct_id:Xm,$device_id:null},"");else if(!this.get_distinct_id()){var g=this.config.get_device_id(Uc());this.register_once({distinct_id:g,$device_id:g},""),this.persistence.set_property(vl,"anonymous")}return Vr(ve,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?dJ(this,()=>this.Lr()):this.Lr(),Yc(this.config._onCapture)&&this.config._onCapture!==DM&&(et.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",E=>this.config._onCapture(E.event,E))),this.config.ip&&et.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Dr(e){var t=performance.now();this.historyAutocapture=new hJ(this),this.historyAutocapture.startIfEnabled();var r=[];r.push(()=>{new vJ(this).startIfEnabledOrStop()}),r.push(()=>{var i;this.siteApps=new uee(this),(i=this.siteApps)==null||i.init()}),e||r.push(()=>{this.sessionRecording=new FD(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||r.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),r.push(()=>{this.autocapture=new JZ(this),this.autocapture.startIfEnabled()}),r.push(()=>{this.surveys.loadIfEnabled()}),r.push(()=>{this.heatmaps=new LJ(this),this.heatmaps.startIfEnabled()}),r.push(()=>{this.webVitalsAutocapture=new NJ(this)}),r.push(()=>{this.exceptionObserver=new uJ(this),this.exceptionObserver.startIfEnabled()}),r.push(()=>{this.deadClicksAutocapture=new g5(this,cJ),this.deadClicksAutocapture.startIfEnabled()}),r.push(()=>{if(this.Nr){var i=this.Nr;this.Nr=void 0,this.fi(i)}}),this.Ur(r,t)}Ur(e,t){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-t>=30&&e.length>0)return void setTimeout(()=>{this.Ur(e,t)},0);var r=e.shift();if(r)try{r()}catch(s){et.error("Error initializing extension:",s)}}var i=Math.round(performance.now()-t);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:i}),this.config.__preview_deferred_init_extensions&&et.info("PostHog extensions initialized ("+i+"ms)")}fi(e){var t,r,i,s,o,a,l,c;if(!Ze||!Ze.body)return et.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.fi(e)},500);this.config.__preview_deferred_init_extensions&&(this.Nr=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=dn(e.supportedCompression,wl.GZipJS)?wl.GZipJS:dn(e.supportedCompression,wl.Base64)?wl.Base64:void 0),(t=e.analytics)!=null&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Pr?this.Pr:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(i=this.sessionRecording)==null||i.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Lr(){try{this.config.loaded(this)}catch(e){et.critical("`loaded` function failed",e)}this.zr(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.Hr()},1),new ree(this).load(),this.featureFlags.flags()}zr(){var e;this.is_capturing()&&this.config.request_batching&&((e=this.Mr)==null||e.enable())}_dom_loaded(){this.is_capturing()&&Qc(this.__request_queue,e=>this.Or(e)),this.__request_queue=[],this.zr()}_handle_unload(){var e,t;this.config.request_batching?(this.Br()&&this.capture("$pageleave"),(e=this.Mr)==null||e.unload(),(t=this.Ar)==null||t.unload()):this.Br()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}ci(e){this.__loaded&&(Q5?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Jw(e.url,{ip:this.config.ip?1:0}),e.headers=ut({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(t=>{var r,i,s,o=ut({},t);o.timeout=o.timeout||6e4,o.url=Jw(o.url,{_:new Date().getTime().toString(),ver:gl.LIB_VERSION,compression:o.compression});var a=(r=o.transport)!==null&&r!==void 0?r:"fetch",l=Bx.filter(u=>!o.disableTransport||!u.transport||!o.disableTransport.includes(u.transport)),c=(i=(s=QB(l,u=>u.transport===a))==null?void 0:s.method)!==null&&i!==void 0?i:l[0].method;if(!c)throw new Error("No available transport method");c(o)})(ut({},e,{callback:t=>{var r,i;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,t)),e.callback==null||e.callback(t)}}))))}Or(e){this.Ar?this.Ar.retriableRequest(e):this.ci(e)}_execute_array(e){var t,r=[],i=[],s=[];Qc(e,a=>{a&&(t=a[0],jn(t)?s.push(a):Yc(a)?a.call(this):jn(a)&&t==="alias"?r.push(a):jn(a)&&t.indexOf("capture")!==-1&&Yc(this[t])?s.push(a):i.push(a))});var o=function(a,l){Qc(a,function(c){if(jn(c[0])){var u=l;$n(c,function(f){u=u[f[0]].apply(u,f.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(r,this),o(i,this),o(s,this)}jr(){var e,t;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((t=this.config.bootstrap)==null?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Mr){if(this.is_capturing())if(!Xe(e)&&qr(e)){var s=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(s&&!this.config.__preview_capture_bot_pageviews)){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){t!=null&&t.$current_url&&!qr(t==null?void 0:t.$current_url)&&(et.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),t==null||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var a=new Date,l=(r==null?void 0:r.timestamp)||a,c=Uc(),u={uuid:c,event:e,properties:this.calculateEventProperties(e,t||{},l,c)};e==="$pageview"&&this.config.__preview_capture_bot_pageviews&&s&&(u.event="$bot_pageview",u.properties.$browser_type="bot"),o&&(u.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r!=null&&r.$set&&(u.$set=r==null?void 0:r.$set);var f,p=this.qr(r==null?void 0:r.$set_once);if(p&&(u.$set_once=p),(u=OZ(u,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=l,Xe(r==null?void 0:r.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=a),e===Hx.DISMISSED||e===Hx.SENT){var m=t==null?void 0:t[PD.SURVEY_ID],v=t==null?void 0:t[PD.SURVEY_ITERATION];f={id:m,current_iteration:v},localStorage.getItem(ND(f))||localStorage.setItem(ND(f),"true"),u.$set=ut({},u.$set,{[QJ({id:m,current_iteration:v},e===Hx.SENT?"responded":"dismissed")]:!0})}var w=ut({},u.properties.$set,u.$set);if(Uf(w)||this.setPersonPropertiesForFlags(w),!zn(this.config.before_send)){var _=this.Wr(u);if(!_)return;u=_}this.Er.emit("eventCaptured",u);var g={method:"POST",url:(i=r==null?void 0:r._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.Or(g):this.Mr.enqueue(g),u}et.critical("This capture call is ignored due to client rate limiting.")}}else et.error("No event name provided to posthog.capture")}else et.uninitializedWarning("posthog.capture")}Ai(e){return this.on("eventCaptured",t=>e(t.event,t))}calculateEventProperties(e,t,r,i,s){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return t;var o=s?void 0:this.persistence.remove_event_timer(e),a=ut({},t);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=ut({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!qr(a.distinct_id)&&!$a(a.distinct_id)||pM(a.distinct_id))&&et.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=PJ(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:f,windowId:p}=this.sessionManager.checkAndGetSessionAndWindowId(s,r.getTime());a.$session_id=f,a.$window_id=p}this.sessionPropsManager&&Rr(a,this.sessionPropsManager.getSessionProps());try{var m;this.sessionRecording&&Rr(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(m=this.Ar)==null?void 0:m.length}catch(g){a.$sdk_debug_error_capturing_properties=String(g)}if(this.requestRouter.region===Rg.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,i),a=Rr(a,c),e==="$pageview"&&Ze&&(a.title=Ze.title),!Xe(o)){var v=r.getTime()-o;a.$duration=parseFloat((v/1e3).toFixed(3))}Ts&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=Rr({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),jn(this.config.property_denylist)?$n(this.config.property_denylist,function(g){delete a[g]}):et.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var w=this.config.sanitize_properties;w&&(et.error("sanitize_properties is deprecated. Use before_send instead"),a=w(a,e));var _=this.Gr();return a.$process_person_profile=_,_&&!s&&this.Vr("_calculate_event_properties"),a}qr(e){var t;if(!this.persistence||!this.Gr()||this.Sr)return e;var r=this.persistence.get_initial_props(),i=(t=this.sessionPropsManager)==null?void 0:t.getSetOnceProps(),s=Rr({},r,i||{},e||{}),o=this.config.sanitize_properties;return o&&(et.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.Sr=!0,Uf(s)?void 0:s}register(e,t){var r;(r=this.persistence)==null||r.register(e,t)}register_once(e,t,r){var i;(i=this.persistence)==null||i.register_once(e,t,r)}register_for_session(e){var t;(t=this.sessionPersistence)==null||t.register(e)}unregister(e){var t;(t=this.persistence)==null||t.unregister(e)}unregister_for_session(e){var t;(t=this.sessionPersistence)==null||t.unregister(e)}Jr(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch{return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t,r){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,r)}getEarlyAccessFeatures(e,t,r){return t===void 0&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,r)}on(e,t){return this.Er.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,r;return(t=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&t!==void 0?t:()=>{}}getSurveys(e,t){t===void 0&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){t===void 0&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}displaySurvey(e,t){t===void 0&&(t=JJ),this.surveys.displaySurvey(e,t)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return t===void 0&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,r){if(!this.__loaded||!this.persistence)return et.uninitializedWarning("posthog.identify");if($a(e)&&(e=e.toString(),et.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))et.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Xm){if(this.Vr("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==i&&e!==this.get_property(Sg)&&(this.unregister(Sg),this.register({distinct_id:e}));var o=(this.persistence.get_property(vl)||"anonymous")==="anonymous";e!==i&&o?(this.persistence.set_property(vl,"identified"),this.setPersonPropertiesForFlags(ut({},r||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:t||{},$set_once:r||{}}),this.Tr=AD(e,t,r),this.featureFlags.setAnonymousDistinctId(i)):(t||r)&&this.setPersonProperties(t,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(jw))}}else et.critical('The string "'+Xm+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else et.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.Vr("posthog.setPersonProperties")){var r=AD(this.get_distinct_id(),e,t);this.Tr!==r?(this.setPersonPropertiesForFlags(ut({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Tr=r):et.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,r){if(e&&t){if(this.Vr("posthog.group")){var i=this.getGroups();i[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:ut({},i,{[e]:t})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),i[e]===t||r||this.reloadFeatureFlags()}}else et.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){t===void 0&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){t===void 0&&(t=!0),this.Vr("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,r,i,s;if(et.info("reset"),!this.__loaded)return et.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(t=this.persistence)==null||t.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),this.featureFlags.reset(),(i=this.persistence)==null||i.set_property(vl,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Tr=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:Xm,$device_id:null},"");else{var a=this.config.get_device_id(Uc());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return(e=(t=this.sessionManager)==null?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(e!=null&&e.withTimestamp&&r){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-o,0)}return i}alias(e,t){return e===this.get_property(ZB)?(et.critical("Attempting to create alias for existing People user - aborting."),-2):this.Vr("posthog.alias")?(Xe(t)&&(t=this.get_distinct_id()),e!==t?(this.Jr(Sg,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(et.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=ut({},this.config);if(ui(e)){var r,i,s,o,a;Rr(this.config,VD(e));var l=this.Cr();(r=this.persistence)==null||r.update_config(this.config,t,l),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new GT(ut({},this.config,{persistence:"sessionStorage"}),l);var c=this.Rr(this.config.debug);Kc(c)&&(this.config.debug=c),Kc(this.config.debug)&&(this.config.debug?(gl.DEBUG=!0,dr.H()&&dr.G("ph_debug","true"),et.info("set_config",{config:e,oldConfig:t,newConfig:ut({},this.config)})):(gl.DEBUG=!1,dr.H()&&dr.V("ph_debug"))),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(s=this.autocapture)==null||s.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),this.surveys.loadIfEnabled(),this.Kr(),(a=this.externalIntegrations)==null||a.startIfEnabledOrStop()}}startSessionRecording(e){var t=e===!0,r={sampling:t||!(e==null||!e.sampling),linked_flag:t||!(e==null||!e.linked_flag),url_trigger:t||!(e==null||!e.url_trigger),event_trigger:t||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var i,s,o,a,l;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),r.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,t){var r=new Error("PostHog syntheticException"),i=this.exceptions.buildProperties(e,{handled:!0,syntheticException:r});return this.exceptions.sendExceptionEvent(ut({},i,t))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return(t=this.persistence)==null?void 0:t.props[e]}getSessionProperty(e){var t;return(t=this.sessionPersistence)==null?void 0:t.props[e]}toString(){var e,t=(e=this.config.name)!==null&&e!==void 0?e:yf;return t!==yf&&(t=yf+"."+t),t}_isIdentified(){var e,t;return((e=this.persistence)==null?void 0:e.get_property(vl))==="identified"||((t=this.sessionPersistence)==null?void 0:t.get_property(vl))==="identified"}Gr(){var e,t;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Uf(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Sg])&&((t=this.persistence)==null||(t=t.props)==null||!t[Ww]))}Br(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Gr()||this.Vr("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Vr(e){return this.config.person_profiles==="never"?(et.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Jr(Ww,!0),!0)}Cr(){if(this.config.cookieless_mode==="always")return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||e&&!!t}Kr(){var e,t,r,i,s=this.Cr();return((e=this.persistence)==null?void 0:e.wi)!==s&&((r=this.persistence)==null||r.set_disabled(s)),((t=this.sessionPersistence)==null?void 0:t.wi)!==s&&((i=this.sessionPersistence)==null||i.set_disabled(s)),s}opt_in_capturing(e){var t;if(this.config.cookieless_mode!=="always"){var r,i;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),(r=this.sessionManager)==null||r.destroy(),this.sessionManager=new DD(this),this.persistence&&(this.sessionPropsManager=new LD(this,this.sessionManager,this.persistence)),this.sessionRecording=new FD(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.Kr(),this.zr(),(t=this.sessionRecording)==null||t.startIfEnabledOrStop(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(Xe(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((i=e==null?void 0:e.captureEventName)!==null&&i!==void 0?i:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Hr()}else et.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,t;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.Kr(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:Xm,$device_id:null}),(e=this.sessionManager)==null||e.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,(t=this.sessionRecording)==null||t.stopRecording(),this.sessionRecording=void 0,this.Hr())):et.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===yl.GRANTED?"granted":e===yl.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.Kr()}_is_bot(){return eo?K5(eo,this.config.custom_blocked_useragents):void 0}Hr(){Ze&&(Ze.visibilityState==="visible"?this.$r||(this.$r=!0,this.capture("$pageview",{title:Ze.title},{send_instantly:!0}),this.kr&&(Ze.removeEventListener("visibilitychange",this.kr),this.kr=null)):this.kr||(this.kr=this.Hr.bind(this),Vr(Ze,"visibilitychange",this.kr)))}debug(e){e===!1?(ve==null||ve.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(ve==null||ve.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,t,r,i,s,o,a,l=this.Ir||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(et.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",i=!1,s=et,o=(t="advanced_disable_flags")in(e=l)&&!Xe(e[t]),a=r in e&&!Xe(e[r]),o?e[t]:a?(s&&s.warn("Config field '"+r+"' is deprecated. Please use '"+t+"' instead. The old field will be removed in a future major version."),e[r]):i)}Wr(e){if(zn(this.config.before_send))return e;var t=jn(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var i of t){if(r=i(r),zn(r)){var s="Event '"+e.event+"' was rejected in beforeSend function";return cZ(e.event)?et.warn(s+". This can cause unexpected behavior."):et.info(s),null}r.properties&&!Uf(r.properties)||et.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.Vt)==null?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(r)})}Rr(e){var t=Kc(e)&&!e,r=dr.H()&&dr.q("ph_debug")==="true";return!t&&(!!r||e)}}(function(n,e){for(var t=0;t<e.length;t++)n.prototype[e[t]]=DZ(n.prototype[e[t]])})(cE,["identify"]);var zD,Z5=(zD=Yg[yf]=new cE,function(){function n(){n.done||(n.done=!0,Q5=!1,$n(Yg,function(e){e._dom_loaded()}))}Ze!=null&&Ze.addEventListener?Ze.readyState==="complete"?n():Vr(Ze,"DOMContentLoaded",n,{capture:!1}):ve&&et.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),zD);const OM="phc_placeholder",vee="https://app.posthog.com",yee=()=>{typeof window<"u"&&OM!=="phc_placeholder"&&Z5.init(OM,{api_host:vee,capture_pageview:!0,capture_pageleave:!0,autocapture:!0,persistence:"localStorage"})},vh=(n,e)=>{typeof window<"u"&&OM!=="phc_placeholder"&&Z5.capture(n,e)},_ee=n=>{vh("page_view",{page:n})},BD=[{label:"Home",href:"#home"},{label:"Experience",href:"#experience"},{label:"Projects",href:"#projects"},{label:"Skills",href:"#skills"},{label:"Blog",href:"#blog"},{label:"Contact",href:"#contact"}],xee=()=>{const[n,e]=H.useState(!1),[t,r]=H.useState(!1);H.useEffect(()=>{const s=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const i=()=>{vh("cv_download",{source:"navigation"}),window.open("/Apoorv_Mishra_CV.pdf","_blank")};return L.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ${t?"bg-background/90 backdrop-blur-md border-b border-primary/20":"bg-transparent"}`,children:L.jsxs("div",{className:"container mx-auto px-6",children:[L.jsxs("div",{className:"flex items-center justify-between h-20",children:[L.jsxs("a",{href:"#home",className:"group flex items-center gap-2",children:[L.jsx("span",{className:"text-2xl font-bold text-gradient",children:"AM"}),L.jsx("div",{className:"h-6 w-[2px] bg-primary group-hover:animate-pulse-glow"})]}),L.jsx("div",{className:"hidden lg:flex items-center gap-6",children:BD.map(s=>L.jsxs("a",{href:s.href,className:"relative text-sm font-medium text-muted-foreground hover:text-primary transition-colors duration-300 uppercase tracking-wider group",children:[s.label,L.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-[2px] bg-primary transition-all duration-300 group-hover:w-full"})]},s.label))}),L.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[L.jsx(BL,{}),L.jsxs(Wi,{variant:"ghost",size:"sm",onClick:i,className:"border-2 border-border hover:border-secondary/50",children:[L.jsx(eM,{size:16}),"CV"]}),L.jsx(Wi,{variant:"outline",size:"sm",asChild:!0,children:L.jsx("a",{href:"#contact",children:"Let's Talk"})})]}),L.jsxs("div",{className:"flex md:hidden items-center gap-2",children:[L.jsx(BL,{}),L.jsx("button",{onClick:()=>e(!n),className:"text-foreground hover:text-primary transition-colors p-2",children:n?L.jsx(Uz,{size:24}):L.jsx(Iq,{size:24})})]})]}),L.jsx("div",{className:`lg:hidden overflow-hidden transition-all duration-500 ${n?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:L.jsxs("div",{className:"py-6 border-t border-border/50 space-y-4",children:[BD.map((s,o)=>L.jsxs("a",{href:s.href,onClick:()=>e(!1),className:"block text-lg font-medium text-muted-foreground hover:text-primary transition-colors duration-300 uppercase tracking-wider",children:[L.jsxs("span",{className:"text-primary font-mono text-sm mr-2",children:["0",o+1]}),s.label]},s.label)),L.jsxs("div",{className:"flex gap-3 pt-4",children:[L.jsxs(Wi,{variant:"ghost",size:"sm",onClick:i,className:"flex-1",children:[L.jsx(eM,{size:16}),"Download CV"]}),L.jsx(Wi,{variant:"outline",className:"flex-1",asChild:!0,children:L.jsx("a",{href:"#contact",children:"Let's Talk"})})]})]})})]})})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const uE="160",wee={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Eee={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},J5=0,FM=1,e6=2,See=3,t6=0,hE=1,Kg=2,$o=3,Vl=0,us=1,Ma=2,Tee=2,Il=0,Oh=1,UM=2,VM=3,zM=4,n6=5,bc=100,r6=101,i6=102,BM=103,HM=104,s6=200,o6=201,a6=202,l6=203,t1=204,n1=205,c6=206,u6=207,h6=208,d6=209,f6=210,p6=211,m6=212,g6=213,v6=214,y6=0,_6=1,x6=2,Ov=3,w6=4,E6=5,S6=6,T6=7,Ly=0,b6=1,A6=2,Da=0,M6=1,C6=2,R6=3,DI=4,I6=5,P6=6,jM="attached",N6="detached",dE=300,zl=301,mu=302,Fv=303,Uv=304,nm=306,Vv=1e3,Gi=1001,zv=1002,Ir=1003,r1=1004,bee=1004,Qg=1005,Aee=1005,Nr=1006,OI=1007,Mee=1007,gu=1008,Cee=1008,Oa=1009,k6=1010,L6=1011,fE=1012,FI=1013,bl=1014,Jo=1015,Ip=1016,UI=1017,VI=1018,Jc=1020,D6=1021,ls=1023,O6=1024,F6=1025,eu=1026,Qh=1027,U6=1028,zI=1029,V6=1030,BI=1031,HI=1033,jx=33776,Gx=33777,Wx=33778,$x=33779,GM=35840,WM=35841,$M=35842,qM=35843,jI=36196,XM=37492,YM=37496,KM=37808,QM=37809,ZM=37810,JM=37811,eC=37812,tC=37813,nC=37814,rC=37815,iC=37816,sC=37817,oC=37818,aC=37819,lC=37820,cC=37821,qx=36492,uC=36494,hC=36495,z6=36283,dC=36284,fC=36285,pC=36286,B6=2200,H6=2201,j6=2202,Bv=2300,Hv=2301,Xx=2302,Eh=2400,Sh=2401,jv=2402,pE=2500,GI=2501,Ree=0,Iee=1,Pee=2,WI=3e3,tu=3001,G6=3200,W6=3201,Iu=0,$6=1,Zs="",Wr="srgb",qa="srgb-linear",mE="display-p3",Dy="display-p3-linear",Gv="linear",Wn="srgb",Wv="rec709",$v="p3",Nee=0,ph=7680,kee=7681,Lee=7682,Dee=7683,Oee=34055,Fee=34056,Uee=5386,Vee=512,zee=513,Bee=514,Hee=515,jee=516,Gee=517,Wee=518,mC=519,q6=512,X6=513,Y6=514,$I=515,K6=516,Q6=517,Z6=518,J6=519,qv=35044,$ee=35048,qee=35040,Xee=35045,Yee=35049,Kee=35041,Qee=35046,Zee=35050,Jee=35042,ete="100",gC="300 es",i1=1035,ea=2e3,Pp=2001;class Yl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Oi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let HD=1234567;const Fh=Math.PI/180,Np=180/Math.PI;function ro(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Oi[n&255]+Oi[n>>8&255]+Oi[n>>16&255]+Oi[n>>24&255]+"-"+Oi[e&255]+Oi[e>>8&255]+"-"+Oi[e>>16&15|64]+Oi[e>>24&255]+"-"+Oi[t&63|128]+Oi[t>>8&255]+"-"+Oi[t>>16&255]+Oi[t>>24&255]+Oi[r&255]+Oi[r>>8&255]+Oi[r>>16&255]+Oi[r>>24&255]).toLowerCase()}function Sr(n,e,t){return Math.max(e,Math.min(t,n))}function qI(n,e){return(n%e+e)%e}function tte(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function nte(n,e,t){return n!==e?(t-n)/(e-n):0}function Zg(n,e,t){return(1-t)*n+t*e}function rte(n,e,t,r){return Zg(n,e,1-Math.exp(-t*r))}function ite(n,e=1){return e-Math.abs(qI(n,e*2)-e)}function ste(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function ote(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function ate(n,e){return n+Math.floor(Math.random()*(e-n+1))}function lte(n,e){return n+Math.random()*(e-n)}function cte(n){return n*(.5-Math.random())}function ute(n){n!==void 0&&(HD=n);let e=HD+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function hte(n){return n*Fh}function dte(n){return n*Np}function vC(n){return(n&n-1)===0&&n!==0}function fte(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function s1(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function pte(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*u,a*c);break;case"XZX":n.set(a*u,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Is(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function tn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const eH={DEG2RAD:Fh,RAD2DEG:Np,generateUUID:ro,clamp:Sr,euclideanModulo:qI,mapLinear:tte,inverseLerp:nte,lerp:Zg,damp:rte,pingpong:ite,smoothstep:ste,smootherstep:ote,randInt:ate,randFloat:lte,randFloatSpread:cte,seededRandom:ute,degToRad:hte,radToDeg:dte,isPowerOfTwo:vC,ceilPowerOfTwo:fte,floorPowerOfTwo:s1,setQuaternionFromProperEuler:pte,normalize:tn,denormalize:Is};class Re{constructor(e=0,t=0){Re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class sn{constructor(e,t,r,i,s,o,a,l,c){sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],f=r[7],p=r[2],m=r[5],v=r[8],w=i[0],_=i[3],g=i[6],E=i[1],S=i[4],b=i[7],k=i[2],N=i[5],M=i[8];return s[0]=o*w+a*E+l*k,s[3]=o*_+a*S+l*N,s[6]=o*g+a*b+l*M,s[1]=c*w+u*E+f*k,s[4]=c*_+u*S+f*N,s[7]=c*g+u*b+f*M,s[2]=p*w+m*E+v*k,s[5]=p*_+m*S+v*N,s[8]=p*g+m*b+v*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,p=a*l-u*s,m=c*s-o*l,v=t*f+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/v;return e[0]=f*w,e[1]=(i*c-u*r)*w,e[2]=(a*r-i*o)*w,e[3]=p*w,e[4]=(u*t-i*l)*w,e[5]=(i*s-a*t)*w,e[6]=m*w,e[7]=(r*l-c*t)*w,e[8]=(o*t-r*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(qT.makeScale(e,t)),this}rotate(e){return this.premultiply(qT.makeRotation(-e)),this}translate(e,t){return this.premultiply(qT.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const qT=new sn;function tH(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const mte={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zf(n,e){return new mte[n](e)}function Xv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function nH(){const n=Xv("canvas");return n.style.display="block",n}const jD={};function Jg(n){n in jD||(jD[n]=!0,console.warn(n))}const GD=new sn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),WD=new sn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),S0={[qa]:{transfer:Gv,primaries:Wv,toReference:n=>n,fromReference:n=>n},[Wr]:{transfer:Wn,primaries:Wv,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Dy]:{transfer:Gv,primaries:$v,toReference:n=>n.applyMatrix3(WD),fromReference:n=>n.applyMatrix3(GD)},[mE]:{transfer:Wn,primaries:$v,toReference:n=>n.convertSRGBToLinear().applyMatrix3(WD),fromReference:n=>n.applyMatrix3(GD).convertLinearToSRGB()}},gte=new Set([qa,Dy]),On={enabled:!0,_workingColorSpace:qa,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!gte.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=S0[e].toReference,i=S0[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return S0[n].primaries},getTransfer:function(n){return n===Zs?Gv:S0[n].transfer}};function rp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function XT(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let qd;class XI{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{qd===void 0&&(qd=Xv("canvas")),qd.width=e.width,qd.height=e.height;const r=qd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=qd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Xv("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=rp(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(rp(t[r]/255)*255):t[r]=rp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let vte=0;class Th{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:vte++}),this.uuid=ro(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(YT(i[o].image)):s.push(YT(i[o]))}else s=YT(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function YT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?XI.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yte=0;class kr extends Yl{constructor(e=kr.DEFAULT_IMAGE,t=kr.DEFAULT_MAPPING,r=Gi,i=Gi,s=Nr,o=gu,a=ls,l=Oa,c=kr.DEFAULT_ANISOTROPY,u=Zs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yte++}),this.uuid=ro(),this.name="",this.source=new Th(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Re(0,0),this.repeat=new Re(1,1),this.center=new Re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Jg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===tu?Wr:Zs),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==dE)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Vv:e.x=e.x-Math.floor(e.x);break;case Gi:e.x=e.x<0?0:1;break;case zv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Vv:e.y=e.y-Math.floor(e.y);break;case Gi:e.y=e.y<0?0:1;break;case zv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Jg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Wr?tu:WI}set encoding(e){Jg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===tu?Wr:Zs}}kr.DEFAULT_IMAGE=null;kr.DEFAULT_MAPPING=dE;kr.DEFAULT_ANISOTROPY=1;class Fn{constructor(e=0,t=0,r=0,i=1){Fn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],p=l[1],m=l[5],v=l[9],w=l[2],_=l[6],g=l[10];if(Math.abs(u-p)<.01&&Math.abs(f-w)<.01&&Math.abs(v-_)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+w)<.1&&Math.abs(v+_)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,b=(m+1)/2,k=(g+1)/2,N=(u+p)/4,M=(f+w)/4,P=(v+_)/4;return S>b&&S>k?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=N/r,s=M/r):b>k?b<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=N/i,s=P/i):k<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(k),r=M/s,i=P/s),this.set(r,i,s,t),this}let E=Math.sqrt((_-v)*(_-v)+(f-w)*(f-w)+(p-u)*(p-u));return Math.abs(E)<.001&&(E=1),this.x=(_-v)/E,this.y=(f-w)/E,this.z=(p-u)/E,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class rH extends Yl{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Fn(0,0,e,t),this.scissorTest=!1,this.viewport=new Fn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(Jg("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===tu?Wr:Zs),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Nr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new kr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Th(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ua extends rH{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class gE extends kr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ir,this.minFilter=Ir,this.wrapR=Gi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _te extends ua{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new gE(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class YI extends kr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ir,this.minFilter=Ir,this.wrapR=Gi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xte extends ua{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new YI(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class wte extends ua{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Os{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],w=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=w;return}if(f!==w||l!==p||c!==m||u!==v){let _=1-a;const g=l*p+c*m+u*v+f*w,E=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const k=Math.sqrt(S),N=Math.atan2(k,g*E);_=Math.sin(_*N)/k,a=Math.sin(a*N)/k}const b=a*E;if(l=l*_+p*b,c=c*_+m*b,u=u*_+v*b,f=f*_+w*b,_===1-a){const k=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=k,c*=k,u*=k,f*=k}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+u*f+l*m-c*p,e[t+1]=l*v+u*p+c*f-a*m,e[t+2]=c*v+u*m+a*p-l*f,e[t+3]=u*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),f=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*u*f+c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f-p*m*v;break;case"YXZ":this._x=p*u*f+c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f+p*m*v;break;case"ZXY":this._x=p*u*f-c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f-p*m*v;break;case"ZYX":this._x=p*u*f-c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f+p*m*v;break;case"YZX":this._x=p*u*f+c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f-p*m*v;break;case"XZY":this._x=p*u*f-c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],p=r+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Sr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,r=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion($D.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion($D.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),f=2*(s*r-o*t);return this.x=t+l*c+o*f-a*u,this.y=r+l*u+a*c-s*f,this.z=i+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return KT.copy(this).projectOnVector(e),this.sub(KT)}reflect(e){return this.sub(KT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const KT=new Y,$D=new Os;class hs{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(zo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(zo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=zo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,zo):zo.fromBufferAttribute(s,o),zo.applyMatrix4(e.matrixWorld),this.expandByPoint(zo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),T0.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),T0.copy(r.boundingBox)),T0.applyMatrix4(e.matrixWorld),this.union(T0)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,zo),zo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rg),b0.subVectors(this.max,rg),Xd.subVectors(e.a,rg),Yd.subVectors(e.b,rg),Kd.subVectors(e.c,rg),cc.subVectors(Yd,Xd),uc.subVectors(Kd,Yd),th.subVectors(Xd,Kd);let t=[0,-cc.z,cc.y,0,-uc.z,uc.y,0,-th.z,th.y,cc.z,0,-cc.x,uc.z,0,-uc.x,th.z,0,-th.x,-cc.y,cc.x,0,-uc.y,uc.x,0,-th.y,th.x,0];return!QT(t,Xd,Yd,Kd,b0)||(t=[1,0,0,0,1,0,0,0,1],!QT(t,Xd,Yd,Kd,b0))?!1:(A0.crossVectors(cc,uc),t=[A0.x,A0.y,A0.z],QT(t,Xd,Yd,Kd,b0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(zo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(al[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),al[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),al[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),al[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),al[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),al[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),al[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),al[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(al),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const al=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],zo=new Y,T0=new hs,Xd=new Y,Yd=new Y,Kd=new Y,cc=new Y,uc=new Y,th=new Y,rg=new Y,b0=new Y,A0=new Y,nh=new Y;function QT(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){nh.fromArray(n,s);const a=i.x*Math.abs(nh.x)+i.y*Math.abs(nh.y)+i.z*Math.abs(nh.z),l=e.dot(nh),c=t.dot(nh),u=r.dot(nh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Ete=new hs,ig=new Y,ZT=new Y;class $i{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Ete.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ig.subVectors(e,this.center);const t=ig.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(ig,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ZT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ig.copy(e.center).add(ZT)),this.expandByPoint(ig.copy(e.center).sub(ZT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ll=new Y,JT=new Y,M0=new Y,hc=new Y,eb=new Y,C0=new Y,tb=new Y;class rm{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ll)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ll.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ll.copy(this.origin).addScaledVector(this.direction,t),ll.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){JT.copy(e).add(t).multiplyScalar(.5),M0.copy(t).sub(e).normalize(),hc.copy(this.origin).sub(JT);const s=e.distanceTo(t)*.5,o=-this.direction.dot(M0),a=hc.dot(this.direction),l=-hc.dot(M0),c=hc.lengthSq(),u=Math.abs(1-o*o);let f,p,m,v;if(u>0)if(f=o*l-a,p=o*a-l,v=s*u,f>=0)if(p>=-v)if(p<=v){const w=1/u;f*=w,p*=w,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(JT).addScaledVector(M0,p),m}intersectSphere(e,t){ll.subVectors(e.center,this.origin);const r=ll.dot(this.direction),i=ll.dot(ll)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,ll)!==null}intersectTriangle(e,t,r,i,s){eb.subVectors(t,e),C0.subVectors(r,e),tb.crossVectors(eb,C0);let o=this.direction.dot(tb),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;hc.subVectors(this.origin,e);const l=a*this.direction.dot(C0.crossVectors(hc,C0));if(l<0)return null;const c=a*this.direction.dot(eb.cross(hc));if(c<0||l+c>o)return null;const u=-a*hc.dot(tb);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ht{constructor(e,t,r,i,s,o,a,l,c,u,f,p,m,v,w,_){Ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,f,p,m,v,w,_)}set(e,t,r,i,s,o,a,l,c,u,f,p,m,v,w,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=w,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ht().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Qd.setFromMatrixColumn(e,0).length(),s=1/Qd.setFromMatrixColumn(e,1).length(),o=1/Qd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*f,v=a*u,w=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=p-w*c,t[9]=-a*l,t[2]=w-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*f,v=c*u,w=c*f;t[0]=p+w*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=m*a-v,t[6]=w+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*f,v=c*u,w=c*f;t[0]=p-w*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*u,t[9]=w-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*f,v=a*u,w=a*f;t[0]=l*u,t[4]=v*c-m,t[8]=p*c+w,t[1]=l*f,t[5]=w*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,w=a*c;t[0]=l*u,t[4]=w-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*f+v,t[10]=p-w*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,w=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=p*f+w,t[5]=o*u,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*u,t[10]=w*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ste,e,Tte)}lookAt(e,t,r){const i=this.elements;return Xs.subVectors(e,t),Xs.lengthSq()===0&&(Xs.z=1),Xs.normalize(),dc.crossVectors(r,Xs),dc.lengthSq()===0&&(Math.abs(r.z)===1?Xs.x+=1e-4:Xs.z+=1e-4,Xs.normalize(),dc.crossVectors(r,Xs)),dc.normalize(),R0.crossVectors(Xs,dc),i[0]=dc.x,i[4]=R0.x,i[8]=Xs.x,i[1]=dc.y,i[5]=R0.y,i[9]=Xs.y,i[2]=dc.z,i[6]=R0.z,i[10]=Xs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],f=r[5],p=r[9],m=r[13],v=r[2],w=r[6],_=r[10],g=r[14],E=r[3],S=r[7],b=r[11],k=r[15],N=i[0],M=i[4],P=i[8],A=i[12],R=i[1],O=i[5],U=i[9],V=i[13],$=i[2],Z=i[6],ne=i[10],ae=i[14],z=i[3],j=i[7],X=i[11],ee=i[15];return s[0]=o*N+a*R+l*$+c*z,s[4]=o*M+a*O+l*Z+c*j,s[8]=o*P+a*U+l*ne+c*X,s[12]=o*A+a*V+l*ae+c*ee,s[1]=u*N+f*R+p*$+m*z,s[5]=u*M+f*O+p*Z+m*j,s[9]=u*P+f*U+p*ne+m*X,s[13]=u*A+f*V+p*ae+m*ee,s[2]=v*N+w*R+_*$+g*z,s[6]=v*M+w*O+_*Z+g*j,s[10]=v*P+w*U+_*ne+g*X,s[14]=v*A+w*V+_*ae+g*ee,s[3]=E*N+S*R+b*$+k*z,s[7]=E*M+S*O+b*Z+k*j,s[11]=E*P+S*U+b*ne+k*X,s[15]=E*A+S*V+b*ae+k*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],p=e[10],m=e[14],v=e[3],w=e[7],_=e[11],g=e[15];return v*(+s*l*f-i*c*f-s*a*p+r*c*p+i*a*m-r*l*m)+w*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+_*(+t*c*f-t*a*m-s*o*f+r*o*m+s*a*u-r*c*u)+g*(-i*a*u-t*l*f+t*a*p+i*o*f-r*o*p+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],p=e[10],m=e[11],v=e[12],w=e[13],_=e[14],g=e[15],E=f*_*c-w*p*c+w*l*m-a*_*m-f*l*g+a*p*g,S=v*p*c-u*_*c-v*l*m+o*_*m+u*l*g-o*p*g,b=u*w*c-v*f*c+v*a*m-o*w*m-u*a*g+o*f*g,k=v*f*l-u*w*l-v*a*p+o*w*p+u*a*_-o*f*_,N=t*E+r*S+i*b+s*k;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/N;return e[0]=E*M,e[1]=(w*p*s-f*_*s-w*i*m+r*_*m+f*i*g-r*p*g)*M,e[2]=(a*_*s-w*l*s+w*i*c-r*_*c-a*i*g+r*l*g)*M,e[3]=(f*l*s-a*p*s-f*i*c+r*p*c+a*i*m-r*l*m)*M,e[4]=S*M,e[5]=(u*_*s-v*p*s+v*i*m-t*_*m-u*i*g+t*p*g)*M,e[6]=(v*l*s-o*_*s-v*i*c+t*_*c+o*i*g-t*l*g)*M,e[7]=(o*p*s-u*l*s+u*i*c-t*p*c-o*i*m+t*l*m)*M,e[8]=b*M,e[9]=(v*f*s-u*w*s-v*r*m+t*w*m+u*r*g-t*f*g)*M,e[10]=(o*w*s-v*a*s+v*r*c-t*w*c-o*r*g+t*a*g)*M,e[11]=(u*a*s-o*f*s-u*r*c+t*f*c+o*r*m-t*a*m)*M,e[12]=k*M,e[13]=(u*w*i-v*f*i+v*r*p-t*w*p-u*r*_+t*f*_)*M,e[14]=(v*a*i-o*w*i-v*r*l+t*w*l+o*r*_-t*a*_)*M,e[15]=(o*f*i-u*a*i+u*r*l-t*f*l-o*r*p+t*a*p)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,p=s*c,m=s*u,v=s*f,w=o*u,_=o*f,g=a*f,E=l*c,S=l*u,b=l*f,k=r.x,N=r.y,M=r.z;return i[0]=(1-(w+g))*k,i[1]=(m+b)*k,i[2]=(v-S)*k,i[3]=0,i[4]=(m-b)*N,i[5]=(1-(p+g))*N,i[6]=(_+E)*N,i[7]=0,i[8]=(v+S)*M,i[9]=(_-E)*M,i[10]=(1-(p+w))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Qd.set(i[0],i[1],i[2]).length();const o=Qd.set(i[4],i[5],i[6]).length(),a=Qd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Bo.copy(this);const c=1/s,u=1/o,f=1/a;return Bo.elements[0]*=c,Bo.elements[1]*=c,Bo.elements[2]*=c,Bo.elements[4]*=u,Bo.elements[5]*=u,Bo.elements[6]*=u,Bo.elements[8]*=f,Bo.elements[9]*=f,Bo.elements[10]*=f,t.setFromRotationMatrix(Bo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=ea){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),f=(t+e)/(t-e),p=(r+i)/(r-i);let m,v;if(a===ea)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Pp)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=ea){const l=this.elements,c=1/(t-e),u=1/(r-i),f=1/(o-s),p=(t+e)*c,m=(r+i)*u;let v,w;if(a===ea)v=(o+s)*f,w=-2*f;else if(a===Pp)v=s*f,w=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=w,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Qd=new Y,Bo=new Ht,Ste=new Y(0,0,0),Tte=new Y(1,1,1),dc=new Y,R0=new Y,Xs=new Y,qD=new Ht,XD=new Os;class Oy{constructor(e=0,t=0,r=0,i=Oy.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],f=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Sr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Sr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Sr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Sr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Sr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Sr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return qD.makeRotationFromQuaternion(e),this.setFromRotationMatrix(qD,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return XD.setFromEuler(this),this.setFromQuaternion(XD,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Oy.DEFAULT_ORDER="XYZ";class Uh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let bte=0;const YD=new Y,Zd=new Os,cl=new Ht,I0=new Y,sg=new Y,Ate=new Y,Mte=new Os,KD=new Y(1,0,0),QD=new Y(0,1,0),ZD=new Y(0,0,1),Cte={type:"added"},Rte={type:"removed"};class Rn extends Yl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:bte++}),this.uuid=ro(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rn.DEFAULT_UP.clone();const e=new Y,t=new Oy,r=new Os,i=new Y(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ht},normalMatrix:{value:new sn}}),this.matrix=new Ht,this.matrixWorld=new Ht,this.matrixAutoUpdate=Rn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Uh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.multiply(Zd),this}rotateOnWorldAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.premultiply(Zd),this}rotateX(e){return this.rotateOnAxis(KD,e)}rotateY(e){return this.rotateOnAxis(QD,e)}rotateZ(e){return this.rotateOnAxis(ZD,e)}translateOnAxis(e,t){return YD.copy(e).applyQuaternion(this.quaternion),this.position.add(YD.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(KD,e)}translateY(e){return this.translateOnAxis(QD,e)}translateZ(e){return this.translateOnAxis(ZD,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(cl.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?I0.copy(e):I0.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),sg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cl.lookAt(sg,I0,this.up):cl.lookAt(I0,sg,this.up),this.quaternion.setFromRotationMatrix(cl),i&&(cl.extractRotation(i.matrixWorld),Zd.setFromRotationMatrix(cl),this.quaternion.premultiply(Zd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Cte)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Rte)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),cl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),cl.multiply(e.parent.matrixWorld)),e.applyMatrix4(cl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sg,e,Ate),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sg,Mte,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Rn.DEFAULT_UP=new Y(0,1,0);Rn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ho=new Y,ul=new Y,nb=new Y,hl=new Y,Jd=new Y,ef=new Y,JD=new Y,rb=new Y,ib=new Y,sb=new Y;let P0=!1;class Rs{constructor(e=new Y,t=new Y,r=new Y){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ho.subVectors(e,t),i.cross(Ho);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ho.subVectors(i,t),ul.subVectors(r,t),nb.subVectors(e,t);const o=Ho.dot(Ho),a=Ho.dot(ul),l=Ho.dot(nb),c=ul.dot(ul),u=ul.dot(nb),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*u)*p,v=(o*u-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,hl)===null?!1:hl.x>=0&&hl.y>=0&&hl.x+hl.y<=1}static getUV(e,t,r,i,s,o,a,l){return P0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),P0=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,hl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,hl.x),l.addScaledVector(o,hl.y),l.addScaledVector(a,hl.z),l)}static isFrontFacing(e,t,r,i){return Ho.subVectors(r,t),ul.subVectors(e,t),Ho.cross(ul).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ho.subVectors(this.c,this.b),ul.subVectors(this.a,this.b),Ho.cross(ul).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Rs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Rs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return P0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),P0=!0),Rs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return Rs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Rs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Rs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Jd.subVectors(i,r),ef.subVectors(s,r),rb.subVectors(e,r);const l=Jd.dot(rb),c=ef.dot(rb);if(l<=0&&c<=0)return t.copy(r);ib.subVectors(e,i);const u=Jd.dot(ib),f=ef.dot(ib);if(u>=0&&f<=u)return t.copy(i);const p=l*f-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Jd,o);sb.subVectors(e,s);const m=Jd.dot(sb),v=ef.dot(sb);if(v>=0&&m<=v)return t.copy(s);const w=m*c-l*v;if(w<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(ef,a);const _=u*v-m*f;if(_<=0&&f-u>=0&&m-v>=0)return JD.subVectors(s,i),a=(f-u)/(f-u+(m-v)),t.copy(i).addScaledVector(JD,a);const g=1/(_+w+p);return o=w*g,a=p*g,t.copy(r).addScaledVector(Jd,o).addScaledVector(ef,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const iH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fc={h:0,s:0,l:0},N0={h:0,s:0,l:0};function ob(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class lt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Wr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,On.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=On.workingColorSpace){return this.r=e,this.g=t,this.b=r,On.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=On.workingColorSpace){if(e=qI(e,1),t=Sr(t,0,1),r=Sr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=ob(o,s,e+1/3),this.g=ob(o,s,e),this.b=ob(o,s,e-1/3)}return On.toWorkingColorSpace(this,i),this}setStyle(e,t=Wr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Wr){const r=iH[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rp(e.r),this.g=rp(e.g),this.b=rp(e.b),this}copyLinearToSRGB(e){return this.r=XT(e.r),this.g=XT(e.g),this.b=XT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Wr){return On.fromWorkingColorSpace(Fi.copy(this),e),Math.round(Sr(Fi.r*255,0,255))*65536+Math.round(Sr(Fi.g*255,0,255))*256+Math.round(Sr(Fi.b*255,0,255))}getHexString(e=Wr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=On.workingColorSpace){On.fromWorkingColorSpace(Fi.copy(this),t);const r=Fi.r,i=Fi.g,s=Fi.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=On.workingColorSpace){return On.fromWorkingColorSpace(Fi.copy(this),t),e.r=Fi.r,e.g=Fi.g,e.b=Fi.b,e}getStyle(e=Wr){On.fromWorkingColorSpace(Fi.copy(this),e);const t=Fi.r,r=Fi.g,i=Fi.b;return e!==Wr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(fc),this.setHSL(fc.h+e,fc.s+t,fc.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(fc),e.getHSL(N0);const r=Zg(fc.h,N0.h,t),i=Zg(fc.s,N0.s,t),s=Zg(fc.l,N0.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Fi=new lt;lt.NAMES=iH;let Ite=0;class Yi extends Yl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ite++}),this.uuid=ro(),this.name="",this.type="Material",this.blending=Oh,this.side=Vl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=t1,this.blendDst=n1,this.blendEquation=bc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new lt(0,0,0),this.blendAlpha=0,this.depthFunc=Ov,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ph,this.stencilZFail=ph,this.stencilZPass=ph,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Oh&&(r.blending=this.blending),this.side!==Vl&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==t1&&(r.blendSrc=this.blendSrc),this.blendDst!==n1&&(r.blendDst=this.blendDst),this.blendEquation!==bc&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Ov&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==mC&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ph&&(r.stencilFail=this.stencilFail),this.stencilZFail!==ph&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==ph&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Pu extends Yi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ly,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const El=Pte();function Pte(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function ws(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Sr(n,-65504,65504),El.floatView[0]=n;const e=El.uint32View[0],t=e>>23&511;return El.baseTable[t]+((e&8388607)>>El.shiftTable[t])}function Ig(n){const e=n>>10;return El.uint32View[0]=El.mantissaTable[El.offsetTable[e]+(n&1023)]+El.exponentTable[e],El.floatView[0]}const Nte={toHalfFloat:ws,fromHalfFloat:Ig},Or=new Y,k0=new Re;class Vn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=qv,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Jo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)k0.fromBufferAttribute(this,t),k0.applyMatrix3(e),this.setXY(t,k0.x,k0.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Or.fromBufferAttribute(this,t),Or.applyMatrix3(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Or.fromBufferAttribute(this,t),Or.applyMatrix4(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Or.fromBufferAttribute(this,t),Or.applyNormalMatrix(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Or.fromBufferAttribute(this,t),Or.transformDirection(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Is(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=tn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Is(t,this.array)),t}setX(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Is(t,this.array)),t}setY(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Is(t,this.array)),t}setZ(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Is(t,this.array)),t}setW(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array),s=tn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qv&&(e.usage=this.usage),e}}class kte extends Vn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class Lte extends Vn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class Dte extends Vn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class Ote extends Vn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class KI extends Vn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Fte extends Vn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class QI extends Vn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Ute extends Vn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Ig(this.array[e*this.itemSize]);return this.normalized&&(t=Is(t,this.array)),t}setX(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize]=ws(t),this}getY(e){let t=Ig(this.array[e*this.itemSize+1]);return this.normalized&&(t=Is(t,this.array)),t}setY(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+1]=ws(t),this}getZ(e){let t=Ig(this.array[e*this.itemSize+2]);return this.normalized&&(t=Is(t,this.array)),t}setZ(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+2]=ws(t),this}getW(e){let t=Ig(this.array[e*this.itemSize+3]);return this.normalized&&(t=Is(t,this.array)),t}setW(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+3]=ws(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array)),this.array[e+0]=ws(t),this.array[e+1]=ws(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array)),this.array[e+0]=ws(t),this.array[e+1]=ws(r),this.array[e+2]=ws(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array),s=tn(s,this.array)),this.array[e+0]=ws(t),this.array[e+1]=ws(r),this.array[e+2]=ws(i),this.array[e+3]=ws(s),this}}class gt extends Vn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class Vte extends Vn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let zte=0;const wo=new Ht,ab=new Rn,tf=new Y,Ys=new hs,og=new hs,ai=new Y;class on extends Yl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zte++}),this.uuid=ro(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tH(e)?QI:KI)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new sn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return wo.makeRotationFromQuaternion(e),this.applyMatrix4(wo),this}rotateX(e){return wo.makeRotationX(e),this.applyMatrix4(wo),this}rotateY(e){return wo.makeRotationY(e),this.applyMatrix4(wo),this}rotateZ(e){return wo.makeRotationZ(e),this.applyMatrix4(wo),this}translate(e,t,r){return wo.makeTranslation(e,t,r),this.applyMatrix4(wo),this}scale(e,t,r){return wo.makeScale(e,t,r),this.applyMatrix4(wo),this}lookAt(e){return ab.lookAt(e),ab.updateMatrix(),this.applyMatrix4(ab.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tf).negate(),this.translate(tf.x,tf.y,tf.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new gt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Ys.setFromBufferAttribute(s),this.morphTargetsRelative?(ai.addVectors(this.boundingBox.min,Ys.min),this.boundingBox.expandByPoint(ai),ai.addVectors(this.boundingBox.max,Ys.max),this.boundingBox.expandByPoint(ai)):(this.boundingBox.expandByPoint(Ys.min),this.boundingBox.expandByPoint(Ys.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $i);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Y,1/0);return}if(e){const r=this.boundingSphere.center;if(Ys.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];og.setFromBufferAttribute(a),this.morphTargetsRelative?(ai.addVectors(Ys.min,og.min),Ys.expandByPoint(ai),ai.addVectors(Ys.max,og.max),Ys.expandByPoint(ai)):(Ys.expandByPoint(og.min),Ys.expandByPoint(og.max))}Ys.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ai.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ai));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ai.fromBufferAttribute(a,c),l&&(tf.fromBufferAttribute(e,c),ai.add(tf)),i=Math.max(i,r.distanceToSquared(ai))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Vn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let R=0;R<a;R++)c[R]=new Y,u[R]=new Y;const f=new Y,p=new Y,m=new Y,v=new Re,w=new Re,_=new Re,g=new Y,E=new Y;function S(R,O,U){f.fromArray(i,R*3),p.fromArray(i,O*3),m.fromArray(i,U*3),v.fromArray(o,R*2),w.fromArray(o,O*2),_.fromArray(o,U*2),p.sub(f),m.sub(f),w.sub(v),_.sub(v);const V=1/(w.x*_.y-_.x*w.y);isFinite(V)&&(g.copy(p).multiplyScalar(_.y).addScaledVector(m,-w.y).multiplyScalar(V),E.copy(m).multiplyScalar(w.x).addScaledVector(p,-_.x).multiplyScalar(V),c[R].add(g),c[O].add(g),c[U].add(g),u[R].add(E),u[O].add(E),u[U].add(E))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let R=0,O=b.length;R<O;++R){const U=b[R],V=U.start,$=U.count;for(let Z=V,ne=V+$;Z<ne;Z+=3)S(r[Z+0],r[Z+1],r[Z+2])}const k=new Y,N=new Y,M=new Y,P=new Y;function A(R){M.fromArray(s,R*3),P.copy(M);const O=c[R];k.copy(O),k.sub(M.multiplyScalar(M.dot(O))).normalize(),N.crossVectors(P,O);const V=N.dot(u[R])<0?-1:1;l[R*4]=k.x,l[R*4+1]=k.y,l[R*4+2]=k.z,l[R*4+3]=V}for(let R=0,O=b.length;R<O;++R){const U=b[R],V=U.start,$=U.count;for(let Z=V,ne=V+$;Z<ne;Z+=3)A(r[Z+0]),A(r[Z+1]),A(r[Z+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Vn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new Y,s=new Y,o=new Y,a=new Y,l=new Y,c=new Y,u=new Y,f=new Y;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),w=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,_),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,w),c.fromBufferAttribute(r,_),a.add(u),l.add(u),c.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(w,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ai.fromBufferAttribute(e,t),ai.normalize(),e.setXYZ(t,ai.x,ai.y,ai.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,p=new c.constructor(l.length*u);let m=0,v=0;for(let w=0,_=l.length;w<_;w++){a.isInterleavedBufferAttribute?m=l[w]*a.data.stride+a.offset:m=l[w]*u;for(let g=0;g<u;g++)p[v++]=c[m++]}return new Vn(p,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new on,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const p=c[u],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let p=0,m=f.length;p<m;p++)u.push(f[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const eO=new Ht,rh=new rm,L0=new $i,tO=new Y,nf=new Y,rf=new Y,sf=new Y,lb=new Y,D0=new Y,O0=new Re,F0=new Re,U0=new Re,nO=new Y,rO=new Y,iO=new Y,V0=new Y,z0=new Y;class Yr extends Rn{constructor(e=new on,t=new Pu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){D0.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(lb.fromBufferAttribute(f,e),o?D0.addScaledVector(lb,u):D0.addScaledVector(lb.sub(t),u))}t.add(D0)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),L0.copy(r.boundingSphere),L0.applyMatrix4(s),rh.copy(e.ray).recast(e.near),!(L0.containsPoint(rh.origin)===!1&&(rh.intersectSphere(L0,tO)===null||rh.origin.distanceToSquared(tO)>(e.far-e.near)**2))&&(eO.copy(s).invert(),rh.copy(e.ray).applyMatrix4(eO),!(r.boundingBox!==null&&rh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,rh)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,w=p.length;v<w;v++){const _=p[v],g=o[_.materialIndex],E=Math.max(_.start,m.start),S=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let b=E,k=S;b<k;b+=3){const N=a.getX(b),M=a.getX(b+1),P=a.getX(b+2);i=B0(this,g,e,r,c,u,f,N,M,P),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),w=Math.min(a.count,m.start+m.count);for(let _=v,g=w;_<g;_+=3){const E=a.getX(_),S=a.getX(_+1),b=a.getX(_+2);i=B0(this,o,e,r,c,u,f,E,S,b),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,w=p.length;v<w;v++){const _=p[v],g=o[_.materialIndex],E=Math.max(_.start,m.start),S=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let b=E,k=S;b<k;b+=3){const N=b,M=b+1,P=b+2;i=B0(this,g,e,r,c,u,f,N,M,P),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),w=Math.min(l.count,m.start+m.count);for(let _=v,g=w;_<g;_+=3){const E=_,S=_+1,b=_+2;i=B0(this,o,e,r,c,u,f,E,S,b),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function Bte(n,e,t,r,i,s,o,a){let l;if(e.side===us?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Vl,a),l===null)return null;z0.copy(a),z0.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(z0);return c<t.near||c>t.far?null:{distance:c,point:z0.clone(),object:n}}function B0(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,nf),n.getVertexPosition(l,rf),n.getVertexPosition(c,sf);const u=Bte(n,e,t,r,nf,rf,sf,V0);if(u){i&&(O0.fromBufferAttribute(i,a),F0.fromBufferAttribute(i,l),U0.fromBufferAttribute(i,c),u.uv=Rs.getInterpolation(V0,nf,rf,sf,O0,F0,U0,new Re)),s&&(O0.fromBufferAttribute(s,a),F0.fromBufferAttribute(s,l),U0.fromBufferAttribute(s,c),u.uv1=Rs.getInterpolation(V0,nf,rf,sf,O0,F0,U0,new Re),u.uv2=u.uv1),o&&(nO.fromBufferAttribute(o,a),rO.fromBufferAttribute(o,l),iO.fromBufferAttribute(o,c),u.normal=Rs.getInterpolation(V0,nf,rf,sf,nO,rO,iO,new Y),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new Y,materialIndex:0};Rs.getNormal(nf,rf,sf,f.normal),u.face=f}return u}class ud extends on{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new gt(c,3)),this.setAttribute("normal",new gt(u,3)),this.setAttribute("uv",new gt(f,2));function v(w,_,g,E,S,b,k,N,M,P,A){const R=b/M,O=k/P,U=b/2,V=k/2,$=N/2,Z=M+1,ne=P+1;let ae=0,z=0;const j=new Y;for(let X=0;X<ne;X++){const ee=X*O-V;for(let te=0;te<Z;te++){const J=te*R-U;j[w]=J*E,j[_]=ee*S,j[g]=$,c.push(j.x,j.y,j.z),j[w]=0,j[_]=0,j[g]=N>0?1:-1,u.push(j.x,j.y,j.z),f.push(te/M),f.push(1-X/P),ae+=1}}for(let X=0;X<P;X++)for(let ee=0;ee<M;ee++){const te=p+ee+Z*X,J=p+ee+Z*(X+1),oe=p+(ee+1)+Z*(X+1),we=p+(ee+1)+Z*X;l.push(te,J,we),l.push(J,oe,we),z+=6}a.addGroup(m,z,A),m+=z,p+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ud(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kp(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function is(n){const e={};for(let t=0;t<n.length;t++){const r=kp(n[t]);for(const i in r)e[i]=r[i]}return e}function Hte(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function sH(n){return n.getRenderTarget()===null?n.outputColorSpace:On.workingColorSpace}const oH={clone:kp,merge:is};var jte=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Gte=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Xa extends Yi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=jte,this.fragmentShader=Gte,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kp(e.uniforms),this.uniformsGroups=Hte(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Fy extends Rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ht,this.projectionMatrix=new Ht,this.projectionMatrixInverse=new Ht,this.coordinateSystem=ea}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class hi extends Fy{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Np*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Fh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Np*2*Math.atan(Math.tan(Fh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Fh*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const of=-90,af=1;class aH extends Rn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new hi(of,af,e,t);i.layers=this.layers,this.add(i);const s=new hi(of,af,e,t);s.layers=this.layers,this.add(s);const o=new hi(of,af,e,t);o.layers=this.layers,this.add(o);const a=new hi(of,af,e,t);a.layers=this.layers,this.add(a);const l=new hi(of,af,e,t);l.layers=this.layers,this.add(l);const c=new hi(of,af,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===ea)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Pp)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const w=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=w,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(f,p,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Uy extends kr{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:zl,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lH extends ua{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(Jg("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===tu?Wr:Zs),this.texture=new Uy(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Nr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ud(5,5,5),s=new Xa({name:"CubemapFromEquirect",uniforms:kp(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:us,blending:Il});s.uniforms.tEquirect.value=t;const o=new Yr(i,s),a=t.minFilter;return t.minFilter===gu&&(t.minFilter=Nr),new aH(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const cb=new Y,Wte=new Y,$te=new sn;class wc{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=cb.subVectors(r,t).cross(Wte.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(cb),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||$te.getNormalMatrix(e),i=this.coplanarPoint(cb).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ih=new $i,H0=new Y;class Vy{constructor(e=new wc,t=new wc,r=new wc,i=new wc,s=new wc,o=new wc){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=ea){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],p=i[7],m=i[8],v=i[9],w=i[10],_=i[11],g=i[12],E=i[13],S=i[14],b=i[15];if(r[0].setComponents(l-s,p-c,_-m,b-g).normalize(),r[1].setComponents(l+s,p+c,_+m,b+g).normalize(),r[2].setComponents(l+o,p+u,_+v,b+E).normalize(),r[3].setComponents(l-o,p-u,_-v,b-E).normalize(),r[4].setComponents(l-a,p-f,_-w,b-S).normalize(),t===ea)r[5].setComponents(l+a,p+f,_+w,b+S).normalize();else if(t===Pp)r[5].setComponents(a,f,w,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ih.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ih.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ih)}intersectsSprite(e){return ih.center.set(0,0,0),ih.radius=.7071067811865476,ih.applyMatrix4(e.matrixWorld),this.intersectsSphere(ih)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(H0.x=i.normal.x>0?e.max.x:e.min.x,H0.y=i.normal.y>0?e.max.y:e.min.y,H0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(H0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function cH(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function qte(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,p=c.usage,m=f.byteLength,v=n.createBuffer();n.bindBuffer(u,v),n.bufferData(u,f,p),c.onUploadCallback();let w;if(f instanceof Float32Array)w=n.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)w=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)w=n.SHORT;else if(f instanceof Uint32Array)w=n.UNSIGNED_INT;else if(f instanceof Int32Array)w=n.INT;else if(f instanceof Int8Array)w=n.BYTE;else if(f instanceof Uint8Array)w=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)w=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:w,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,u,f){const p=u.array,m=u._updateRange,v=u.updateRanges;if(n.bindBuffer(f,c),m.count===-1&&v.length===0&&n.bufferSubData(f,0,p),v.length!==0){for(let w=0,_=v.length;w<_;w++){const g=v[w];t?n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}u.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);if(f===void 0)r.set(c,i(c,u));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,c,u),f.version=c.version}}return{get:o,remove:a,update:l}}class zy extends on{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,f=e/a,p=t/l,m=[],v=[],w=[],_=[];for(let g=0;g<u;g++){const E=g*p-o;for(let S=0;S<c;S++){const b=S*f-s;v.push(b,-E,0),w.push(0,0,1),_.push(S/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let E=0;E<a;E++){const S=E+c*g,b=E+c*(g+1),k=E+1+c*(g+1),N=E+1+c*g;m.push(S,b,N),m.push(b,k,N)}this.setIndex(m),this.setAttribute("position",new gt(v,3)),this.setAttribute("normal",new gt(w,3)),this.setAttribute("uv",new gt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zy(e.width,e.height,e.widthSegments,e.heightSegments)}}var Xte=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Yte=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Kte=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Qte=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Zte=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Jte=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ene=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,tne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,nne=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,rne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,ine=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,sne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,one=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ane=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,lne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,cne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,une=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,hne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,dne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,pne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,gne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,vne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,yne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,_ne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,xne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,wne=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Ene=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Sne=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Tne="gl_FragColor = linearToOutputTexel( gl_FragColor );",bne=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Ane=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Mne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Cne=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Rne=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ine=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Pne=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Nne=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kne=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Lne=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Dne=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,One=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Fne=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Une=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Vne=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,zne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Bne=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Hne=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jne=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Gne=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Wne=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$ne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,qne=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Xne=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Yne=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Kne=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Qne=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Zne=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Jne=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,ere=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,tre=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,nre=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,rre=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ire=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sre=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ore=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,are=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,lre=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,cre=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,ure=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,hre=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,dre=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mre=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,gre=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,vre=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,yre=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,_re=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,xre=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,wre=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Ere=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Sre=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Tre=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bre=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Are=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Mre=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Cre=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Rre=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Ire=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Pre=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Nre=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,kre=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Lre=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Dre=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ore=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Fre=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ure=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Vre=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,zre=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Bre=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Hre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,jre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Gre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Wre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$re=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Xre=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Yre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Kre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Qre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Zre=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,eie=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,tie=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,nie=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,rie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,iie=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sie=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oie=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,aie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,lie=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cie=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uie=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hie=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,die=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fie=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,pie=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,mie=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,yie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_ie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wie=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Eie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Sie=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tie=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bie=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Aie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,en={alphahash_fragment:Xte,alphahash_pars_fragment:Yte,alphamap_fragment:Kte,alphamap_pars_fragment:Qte,alphatest_fragment:Zte,alphatest_pars_fragment:Jte,aomap_fragment:ene,aomap_pars_fragment:tne,batching_pars_vertex:nne,batching_vertex:rne,begin_vertex:ine,beginnormal_vertex:sne,bsdfs:one,iridescence_fragment:ane,bumpmap_pars_fragment:lne,clipping_planes_fragment:cne,clipping_planes_pars_fragment:une,clipping_planes_pars_vertex:hne,clipping_planes_vertex:dne,color_fragment:fne,color_pars_fragment:pne,color_pars_vertex:mne,color_vertex:gne,common:vne,cube_uv_reflection_fragment:yne,defaultnormal_vertex:_ne,displacementmap_pars_vertex:xne,displacementmap_vertex:wne,emissivemap_fragment:Ene,emissivemap_pars_fragment:Sne,colorspace_fragment:Tne,colorspace_pars_fragment:bne,envmap_fragment:Ane,envmap_common_pars_fragment:Mne,envmap_pars_fragment:Cne,envmap_pars_vertex:Rne,envmap_physical_pars_fragment:Bne,envmap_vertex:Ine,fog_vertex:Pne,fog_pars_vertex:Nne,fog_fragment:kne,fog_pars_fragment:Lne,gradientmap_pars_fragment:Dne,lightmap_fragment:One,lightmap_pars_fragment:Fne,lights_lambert_fragment:Une,lights_lambert_pars_fragment:Vne,lights_pars_begin:zne,lights_toon_fragment:Hne,lights_toon_pars_fragment:jne,lights_phong_fragment:Gne,lights_phong_pars_fragment:Wne,lights_physical_fragment:$ne,lights_physical_pars_fragment:qne,lights_fragment_begin:Xne,lights_fragment_maps:Yne,lights_fragment_end:Kne,logdepthbuf_fragment:Qne,logdepthbuf_pars_fragment:Zne,logdepthbuf_pars_vertex:Jne,logdepthbuf_vertex:ere,map_fragment:tre,map_pars_fragment:nre,map_particle_fragment:rre,map_particle_pars_fragment:ire,metalnessmap_fragment:sre,metalnessmap_pars_fragment:ore,morphcolor_vertex:are,morphnormal_vertex:lre,morphtarget_pars_vertex:cre,morphtarget_vertex:ure,normal_fragment_begin:hre,normal_fragment_maps:dre,normal_pars_fragment:fre,normal_pars_vertex:pre,normal_vertex:mre,normalmap_pars_fragment:gre,clearcoat_normal_fragment_begin:vre,clearcoat_normal_fragment_maps:yre,clearcoat_pars_fragment:_re,iridescence_pars_fragment:xre,opaque_fragment:wre,packing:Ere,premultiplied_alpha_fragment:Sre,project_vertex:Tre,dithering_fragment:bre,dithering_pars_fragment:Are,roughnessmap_fragment:Mre,roughnessmap_pars_fragment:Cre,shadowmap_pars_fragment:Rre,shadowmap_pars_vertex:Ire,shadowmap_vertex:Pre,shadowmask_pars_fragment:Nre,skinbase_vertex:kre,skinning_pars_vertex:Lre,skinning_vertex:Dre,skinnormal_vertex:Ore,specularmap_fragment:Fre,specularmap_pars_fragment:Ure,tonemapping_fragment:Vre,tonemapping_pars_fragment:zre,transmission_fragment:Bre,transmission_pars_fragment:Hre,uv_pars_fragment:jre,uv_pars_vertex:Gre,uv_vertex:Wre,worldpos_vertex:$re,background_vert:qre,background_frag:Xre,backgroundCube_vert:Yre,backgroundCube_frag:Kre,cube_vert:Qre,cube_frag:Zre,depth_vert:Jre,depth_frag:eie,distanceRGBA_vert:tie,distanceRGBA_frag:nie,equirect_vert:rie,equirect_frag:iie,linedashed_vert:sie,linedashed_frag:oie,meshbasic_vert:aie,meshbasic_frag:lie,meshlambert_vert:cie,meshlambert_frag:uie,meshmatcap_vert:hie,meshmatcap_frag:die,meshnormal_vert:fie,meshnormal_frag:pie,meshphong_vert:mie,meshphong_frag:gie,meshphysical_vert:vie,meshphysical_frag:yie,meshtoon_vert:_ie,meshtoon_frag:xie,points_vert:wie,points_frag:Eie,shadow_vert:Sie,shadow_frag:Tie,sprite_vert:bie,sprite_frag:Aie},$e={common:{diffuse:{value:new lt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new sn},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new sn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new sn},normalScale:{value:new Re(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0},uvTransform:{value:new sn}},sprite:{diffuse:{value:new lt(16777215)},opacity:{value:1},center:{value:new Re(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new sn},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0}}},Qo={basic:{uniforms:is([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.fog]),vertexShader:en.meshbasic_vert,fragmentShader:en.meshbasic_frag},lambert:{uniforms:is([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new lt(0)}}]),vertexShader:en.meshlambert_vert,fragmentShader:en.meshlambert_frag},phong:{uniforms:is([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new lt(0)},specular:{value:new lt(1118481)},shininess:{value:30}}]),vertexShader:en.meshphong_vert,fragmentShader:en.meshphong_frag},standard:{uniforms:is([$e.common,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.roughnessmap,$e.metalnessmap,$e.fog,$e.lights,{emissive:{value:new lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:en.meshphysical_vert,fragmentShader:en.meshphysical_frag},toon:{uniforms:is([$e.common,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.gradientmap,$e.fog,$e.lights,{emissive:{value:new lt(0)}}]),vertexShader:en.meshtoon_vert,fragmentShader:en.meshtoon_frag},matcap:{uniforms:is([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,{matcap:{value:null}}]),vertexShader:en.meshmatcap_vert,fragmentShader:en.meshmatcap_frag},points:{uniforms:is([$e.points,$e.fog]),vertexShader:en.points_vert,fragmentShader:en.points_frag},dashed:{uniforms:is([$e.common,$e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:en.linedashed_vert,fragmentShader:en.linedashed_frag},depth:{uniforms:is([$e.common,$e.displacementmap]),vertexShader:en.depth_vert,fragmentShader:en.depth_frag},normal:{uniforms:is([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,{opacity:{value:1}}]),vertexShader:en.meshnormal_vert,fragmentShader:en.meshnormal_frag},sprite:{uniforms:is([$e.sprite,$e.fog]),vertexShader:en.sprite_vert,fragmentShader:en.sprite_frag},background:{uniforms:{uvTransform:{value:new sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:en.background_vert,fragmentShader:en.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:en.backgroundCube_vert,fragmentShader:en.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:en.cube_vert,fragmentShader:en.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:en.equirect_vert,fragmentShader:en.equirect_frag},distanceRGBA:{uniforms:is([$e.common,$e.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:en.distanceRGBA_vert,fragmentShader:en.distanceRGBA_frag},shadow:{uniforms:is([$e.lights,$e.fog,{color:{value:new lt(0)},opacity:{value:1}}]),vertexShader:en.shadow_vert,fragmentShader:en.shadow_frag}};Qo.physical={uniforms:is([Qo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new sn},clearcoatNormalScale:{value:new Re(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new sn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new sn},sheen:{value:0},sheenColor:{value:new lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new sn},transmissionSamplerSize:{value:new Re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new sn},attenuationDistance:{value:0},attenuationColor:{value:new lt(0)},specularColor:{value:new lt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new sn},anisotropyVector:{value:new Re},anisotropyMap:{value:null},anisotropyMapTransform:{value:new sn}}]),vertexShader:en.meshphysical_vert,fragmentShader:en.meshphysical_frag};const j0={r:0,b:0,g:0};function Mie(n,e,t,r,i,s,o){const a=new lt(0);let l=s===!0?0:1,c,u,f=null,p=0,m=null;function v(_,g){let E=!1,S=g.isScene===!0?g.background:null;S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?w(a,l):S&&S.isColor&&(w(S,1),E=!0);const b=n.xr.getEnvironmentBlendMode();b==="additive"?r.buffers.color.setClear(0,0,0,1,o):b==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===nm)?(u===void 0&&(u=new Yr(new ud(1,1,1),new Xa({name:"BackgroundCubeMaterial",uniforms:kp(Qo.backgroundCube.uniforms),vertexShader:Qo.backgroundCube.vertexShader,fragmentShader:Qo.backgroundCube.fragmentShader,side:us,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(k,N,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=On.getTransfer(S.colorSpace)!==Wn,(f!==S||p!==S.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=S,p=S.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Yr(new zy(2,2),new Xa({name:"BackgroundMaterial",uniforms:kp(Qo.background.uniforms),vertexShader:Qo.background.vertexShader,fragmentShader:Qo.background.fragmentShader,side:Vl,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=On.getTransfer(S.colorSpace)!==Wn,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||p!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=S,p=S.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function w(_,g){_.getRGB(j0,sH(n)),r.buffers.color.setClear(j0.r,j0.g,j0.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(_,g=1){a.set(_),l=g,w(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,w(a,l)},render:v}}function Cie(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=_(null);let c=l,u=!1;function f($,Z,ne,ae,z){let j=!1;if(o){const X=w(ae,ne,Z);c!==X&&(c=X,m(c.object)),j=g($,ae,ne,z),j&&E($,ae,ne,z)}else{const X=Z.wireframe===!0;(c.geometry!==ae.id||c.program!==ne.id||c.wireframe!==X)&&(c.geometry=ae.id,c.program=ne.id,c.wireframe=X,j=!0)}z!==null&&t.update(z,n.ELEMENT_ARRAY_BUFFER),(j||u)&&(u=!1,P($,Z,ne,ae),z!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(z).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m($){return r.isWebGL2?n.bindVertexArray($):s.bindVertexArrayOES($)}function v($){return r.isWebGL2?n.deleteVertexArray($):s.deleteVertexArrayOES($)}function w($,Z,ne){const ae=ne.wireframe===!0;let z=a[$.id];z===void 0&&(z={},a[$.id]=z);let j=z[Z.id];j===void 0&&(j={},z[Z.id]=j);let X=j[ae];return X===void 0&&(X=_(p()),j[ae]=X),X}function _($){const Z=[],ne=[],ae=[];for(let z=0;z<i;z++)Z[z]=0,ne[z]=0,ae[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Z,enabledAttributes:ne,attributeDivisors:ae,object:$,attributes:{},index:null}}function g($,Z,ne,ae){const z=c.attributes,j=Z.attributes;let X=0;const ee=ne.getAttributes();for(const te in ee)if(ee[te].location>=0){const oe=z[te];let we=j[te];if(we===void 0&&(te==="instanceMatrix"&&$.instanceMatrix&&(we=$.instanceMatrix),te==="instanceColor"&&$.instanceColor&&(we=$.instanceColor)),oe===void 0||oe.attribute!==we||we&&oe.data!==we.data)return!0;X++}return c.attributesNum!==X||c.index!==ae}function E($,Z,ne,ae){const z={},j=Z.attributes;let X=0;const ee=ne.getAttributes();for(const te in ee)if(ee[te].location>=0){let oe=j[te];oe===void 0&&(te==="instanceMatrix"&&$.instanceMatrix&&(oe=$.instanceMatrix),te==="instanceColor"&&$.instanceColor&&(oe=$.instanceColor));const we={};we.attribute=oe,oe&&oe.data&&(we.data=oe.data),z[te]=we,X++}c.attributes=z,c.attributesNum=X,c.index=ae}function S(){const $=c.newAttributes;for(let Z=0,ne=$.length;Z<ne;Z++)$[Z]=0}function b($){k($,0)}function k($,Z){const ne=c.newAttributes,ae=c.enabledAttributes,z=c.attributeDivisors;ne[$]=1,ae[$]===0&&(n.enableVertexAttribArray($),ae[$]=1),z[$]!==Z&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($,Z),z[$]=Z)}function N(){const $=c.newAttributes,Z=c.enabledAttributes;for(let ne=0,ae=Z.length;ne<ae;ne++)Z[ne]!==$[ne]&&(n.disableVertexAttribArray(ne),Z[ne]=0)}function M($,Z,ne,ae,z,j,X){X===!0?n.vertexAttribIPointer($,Z,ne,z,j):n.vertexAttribPointer($,Z,ne,ae,z,j)}function P($,Z,ne,ae){if(r.isWebGL2===!1&&($.isInstancedMesh||ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const z=ae.attributes,j=ne.getAttributes(),X=Z.defaultAttributeValues;for(const ee in j){const te=j[ee];if(te.location>=0){let J=z[ee];if(J===void 0&&(ee==="instanceMatrix"&&$.instanceMatrix&&(J=$.instanceMatrix),ee==="instanceColor"&&$.instanceColor&&(J=$.instanceColor)),J!==void 0){const oe=J.normalized,we=J.itemSize,Pe=t.get(J);if(Pe===void 0)continue;const Te=Pe.buffer,mt=Pe.type,vt=Pe.bytesPerElement,Ge=r.isWebGL2===!0&&(mt===n.INT||mt===n.UNSIGNED_INT||J.gpuType===FI);if(J.isInterleavedBufferAttribute){const rt=J.data,Q=rt.stride,be=J.offset;if(rt.isInstancedInterleavedBuffer){for(let xe=0;xe<te.locationSize;xe++)k(te.location+xe,rt.meshPerAttribute);$.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=rt.meshPerAttribute*rt.count)}else for(let xe=0;xe<te.locationSize;xe++)b(te.location+xe);n.bindBuffer(n.ARRAY_BUFFER,Te);for(let xe=0;xe<te.locationSize;xe++)M(te.location+xe,we/te.locationSize,mt,oe,Q*vt,(be+we/te.locationSize*xe)*vt,Ge)}else{if(J.isInstancedBufferAttribute){for(let rt=0;rt<te.locationSize;rt++)k(te.location+rt,J.meshPerAttribute);$.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let rt=0;rt<te.locationSize;rt++)b(te.location+rt);n.bindBuffer(n.ARRAY_BUFFER,Te);for(let rt=0;rt<te.locationSize;rt++)M(te.location+rt,we/te.locationSize,mt,oe,we*vt,we/te.locationSize*rt*vt,Ge)}}else if(X!==void 0){const oe=X[ee];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(te.location,oe);break;case 3:n.vertexAttrib3fv(te.location,oe);break;case 4:n.vertexAttrib4fv(te.location,oe);break;default:n.vertexAttrib1fv(te.location,oe)}}}}N()}function A(){U();for(const $ in a){const Z=a[$];for(const ne in Z){const ae=Z[ne];for(const z in ae)v(ae[z].object),delete ae[z];delete Z[ne]}delete a[$]}}function R($){if(a[$.id]===void 0)return;const Z=a[$.id];for(const ne in Z){const ae=Z[ne];for(const z in ae)v(ae[z].object),delete ae[z];delete Z[ne]}delete a[$.id]}function O($){for(const Z in a){const ne=a[Z];if(ne[$.id]===void 0)continue;const ae=ne[$.id];for(const z in ae)v(ae[z].object),delete ae[z];delete ne[$.id]}}function U(){V(),u=!0,c!==l&&(c=l,m(c.object))}function V(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:U,resetDefaultState:V,dispose:A,releaseStatesOfGeometry:R,releaseStatesOfProgram:O,initAttributes:S,enableAttribute:b,disableUnusedAttributes:N}}function Rie(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,f){n.drawArrays(s,u,f),t.update(f,s,1)}function l(u,f,p){if(p===0)return;let m,v;if(i)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,u,f,p),t.update(f,s,p)}function c(u,f,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<p;v++)this.render(u[v],f[v]);else{m.multiDrawArraysWEBGL(s,u,0,f,0,p);let v=0;for(let w=0;w<p;w++)v+=f[w];t.update(v,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function Iie(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,b=o||e.has("OES_texture_float"),k=S&&b,N=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:w,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:E,vertexTextures:S,floatFragmentTextures:b,floatVertexTextures:k,maxSamples:N}}function Pie(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new wc,a=new sn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=u(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,w=f.clipIntersection,_=f.clipShadows,g=n.get(f);if(!i||v===null||v.length===0||s&&!_)s?u(null):c();else{const E=s?0:r,S=E*4;let b=g.clippingState||null;l.value=b,b=u(v,p,S,m);for(let k=0;k!==S;++k)b[k]=t[k];g.clippingState=b,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=E}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,p,m,v){const w=f!==null?f.length:0;let _=null;if(w!==0){if(_=l.value,v!==!0||_===null){const g=m+w*4,E=p.matrixWorldInverse;a.getNormalMatrix(E),(_===null||_.length<g)&&(_=new Float32Array(g));for(let S=0,b=m;S!==w;++S,b+=4)o.copy(f[S]).applyMatrix4(E,a),o.normal.toArray(_,b),_[b+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,_}}function Nie(n){let e=new WeakMap;function t(o,a){return a===Fv?o.mapping=zl:a===Uv&&(o.mapping=mu),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Fv||a===Uv)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new lH(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class By extends Fy{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Bf=4,sO=[.125,.215,.35,.446,.526,.582],yh=20,ub=new By,oO=new lt;let hb=null,db=0,fb=0;const mh=(1+Math.sqrt(5))/2,lf=1/mh,aO=[new Y(1,1,1),new Y(-1,1,1),new Y(1,1,-1),new Y(-1,1,-1),new Y(0,mh,lf),new Y(0,mh,-lf),new Y(lf,0,mh),new Y(-lf,0,mh),new Y(mh,lf,0),new Y(-mh,lf,0)];class yC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){hb=this._renderer.getRenderTarget(),db=this._renderer.getActiveCubeFace(),fb=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=uO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=cO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(hb,db,fb),e.scissorTest=!1,G0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zl||e.mapping===mu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),hb=this._renderer.getRenderTarget(),db=this._renderer.getActiveCubeFace(),fb=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Nr,minFilter:Nr,generateMipmaps:!1,type:Ip,format:ls,colorSpace:qa,depthBuffer:!1},i=lO(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=lO(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=kie(s)),this._blurMaterial=Lie(s,e,t)}return i}_compileMaterial(e){const t=new Yr(this._lodPlanes[0],e);this._renderer.compile(t,ub)}_sceneToCubeUV(e,t,r,i){const a=new hi(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(oO),u.toneMapping=Da,u.autoClear=!1;const m=new Pu({name:"PMREM.Background",side:us,depthWrite:!1,depthTest:!1}),v=new Yr(new ud,m);let w=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,w=!0):(m.color.copy(oO),w=!0);for(let g=0;g<6;g++){const E=g%3;E===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):E===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;G0(i,E*S,g>2?S:0,S,S),u.setRenderTarget(i),w&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===zl||e.mapping===mu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=uO()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=cO());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Yr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;G0(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,ub)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=aO[(i-1)%aO.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Yr(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*yh-1),w=s/v,_=isFinite(s)?1+Math.floor(u*w):yh;_>yh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${yh}`);const g=[];let E=0;for(let M=0;M<yh;++M){const P=M/w,A=Math.exp(-P*P/2);g.push(A),M===0?E+=A:M<_&&(E+=2*A)}for(let M=0;M<g.length;M++)g[M]=g[M]/E;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-r;const b=this._sizeLods[i],k=3*b*(i>S-Bf?i-S+Bf:0),N=4*(this._cubeSize-b);G0(t,k,N,3*b,2*b),l.setRenderTarget(t),l.render(f,ub)}}function kie(n){const e=[],t=[],r=[];let i=n;const s=n-Bf+1+sO.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Bf?l=sO[o-n+Bf-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,f=1+c,p=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,v=6,w=3,_=2,g=1,E=new Float32Array(w*v*m),S=new Float32Array(_*v*m),b=new Float32Array(g*v*m);for(let N=0;N<m;N++){const M=N%3*2/3-1,P=N>2?0:-1,A=[M,P,0,M+2/3,P,0,M+2/3,P+1,0,M,P,0,M+2/3,P+1,0,M,P+1,0];E.set(A,w*v*N),S.set(p,_*v*N);const R=[N,N,N,N,N,N];b.set(R,g*v*N)}const k=new on;k.setAttribute("position",new Vn(E,w)),k.setAttribute("uv",new Vn(S,_)),k.setAttribute("faceIndex",new Vn(b,g)),e.push(k),i>Bf&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function lO(n,e,t){const r=new ua(n,e,t);return r.texture.mapping=nm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function G0(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Lie(n,e,t){const r=new Float32Array(yh),i=new Y(0,1,0);return new Xa({name:"SphericalGaussianBlur",defines:{n:yh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:ZI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Il,depthTest:!1,depthWrite:!1})}function cO(){return new Xa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ZI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Il,depthTest:!1,depthWrite:!1})}function uO(){return new Xa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ZI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Il,depthTest:!1,depthWrite:!1})}function ZI(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Die(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Fv||l===Uv,u=l===zl||l===mu;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new yC(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&i(f)){t===null&&(t=new yC(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Oie(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Fie(n,e,t,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const w=p.morphAttributes[v];for(let _=0,g=w.length;_<g;_++)e.remove(w[_])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const w=m[v];for(let _=0,g=w.length;_<g;_++)e.update(w[_],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let w=0;if(m!==null){const E=m.array;w=m.version;for(let S=0,b=E.length;S<b;S+=3){const k=E[S+0],N=E[S+1],M=E[S+2];p.push(k,N,N,M,M,k)}}else if(v!==void 0){const E=v.array;w=v.version;for(let S=0,b=E.length/3-1;S<b;S+=3){const k=S+0,N=S+1,M=S+2;p.push(k,N,N,M,M,k)}}else return;const _=new(tH(p)?QI:KI)(p,1);_.version=w;const g=s.get(f);g&&e.remove(g),s.set(f,_)}function u(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function Uie(n,e,t,r){const i=r.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function u(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function f(m,v,w){if(w===0)return;let _,g;if(i)_=n,g="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[g](s,v,a,m*l,w),t.update(v,s,w)}function p(m,v,w){if(w===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<w;g++)this.render(m[g]/l,v[g]);else{_.multiDrawElementsWEBGL(s,v,0,a,m,0,w);let g=0;for(let E=0;E<w;E++)g+=v[E];t.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f,this.renderMultiDraw=p}function Vie(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function zie(n,e){return n[0]-e[0]}function Bie(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Hie(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Fn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,w=v!==void 0?v.length:0;let _=s.get(u);if(_===void 0||_.count!==w){let Z=function(){V.dispose(),s.delete(u),u.removeEventListener("dispose",Z)};var m=Z;_!==void 0&&_.texture.dispose();const S=u.morphAttributes.position!==void 0,b=u.morphAttributes.normal!==void 0,k=u.morphAttributes.color!==void 0,N=u.morphAttributes.position||[],M=u.morphAttributes.normal||[],P=u.morphAttributes.color||[];let A=0;S===!0&&(A=1),b===!0&&(A=2),k===!0&&(A=3);let R=u.attributes.position.count*A,O=1;R>e.maxTextureSize&&(O=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const U=new Float32Array(R*O*4*w),V=new gE(U,R,O,w);V.type=Jo,V.needsUpdate=!0;const $=A*4;for(let ne=0;ne<w;ne++){const ae=N[ne],z=M[ne],j=P[ne],X=R*O*4*ne;for(let ee=0;ee<ae.count;ee++){const te=ee*$;S===!0&&(o.fromBufferAttribute(ae,ee),U[X+te+0]=o.x,U[X+te+1]=o.y,U[X+te+2]=o.z,U[X+te+3]=0),b===!0&&(o.fromBufferAttribute(z,ee),U[X+te+4]=o.x,U[X+te+5]=o.y,U[X+te+6]=o.z,U[X+te+7]=0),k===!0&&(o.fromBufferAttribute(j,ee),U[X+te+8]=o.x,U[X+te+9]=o.y,U[X+te+10]=o.z,U[X+te+11]=j.itemSize===4?o.w:1)}}_={count:w,texture:V,size:new Re(R,O)},s.set(u,_),u.addEventListener("dispose",Z)}let g=0;for(let S=0;S<p.length;S++)g+=p[S];const E=u.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",E),f.getUniforms().setValue(n,"morphTargetInfluences",p),f.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=p===void 0?0:p.length;let w=r[u.id];if(w===void 0||w.length!==v){w=[];for(let b=0;b<v;b++)w[b]=[b,0];r[u.id]=w}for(let b=0;b<v;b++){const k=w[b];k[0]=b,k[1]=p[b]}w.sort(Bie);for(let b=0;b<8;b++)b<v&&w[b][1]?(a[b][0]=w[b][0],a[b][1]=w[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(zie);const _=u.morphAttributes.position,g=u.morphAttributes.normal;let E=0;for(let b=0;b<8;b++){const k=a[b],N=k[0],M=k[1];N!==Number.MAX_SAFE_INTEGER&&M?(_&&u.getAttribute("morphTarget"+b)!==_[N]&&u.setAttribute("morphTarget"+b,_[N]),g&&u.getAttribute("morphNormal"+b)!==g[N]&&u.setAttribute("morphNormal"+b,g[N]),i[b]=M,E+=M):(_&&u.hasAttribute("morphTarget"+b)===!0&&u.deleteAttribute("morphTarget"+b),g&&u.hasAttribute("morphNormal"+b)===!0&&u.deleteAttribute("morphNormal"+b),i[b]=0)}const S=u.morphTargetsRelative?1:1-E;f.getUniforms().setValue(n,"morphTargetBaseInfluence",S),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function jie(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class JI extends kr{constructor(e,t,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:eu,u!==eu&&u!==Qh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===eu&&(r=bl),r===void 0&&u===Qh&&(r=Jc),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ir,this.minFilter=l!==void 0?l:Ir,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const uH=new kr,hH=new JI(1,1);hH.compareFunction=$I;const dH=new gE,fH=new YI,pH=new Uy,hO=[],dO=[],fO=new Float32Array(16),pO=new Float32Array(9),mO=new Float32Array(4);function im(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=hO[i];if(s===void 0&&(s=new Float32Array(i),hO[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Jr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ei(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function vE(n,e){let t=dO[e];t===void 0&&(t=new Int32Array(e),dO[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Gie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Wie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Jr(t,e))return;n.uniform2fv(this.addr,e),ei(t,e)}}function $ie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Jr(t,e))return;n.uniform3fv(this.addr,e),ei(t,e)}}function qie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Jr(t,e))return;n.uniform4fv(this.addr,e),ei(t,e)}}function Xie(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Jr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ei(t,e)}else{if(Jr(t,r))return;mO.set(r),n.uniformMatrix2fv(this.addr,!1,mO),ei(t,r)}}function Yie(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Jr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ei(t,e)}else{if(Jr(t,r))return;pO.set(r),n.uniformMatrix3fv(this.addr,!1,pO),ei(t,r)}}function Kie(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Jr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ei(t,e)}else{if(Jr(t,r))return;fO.set(r),n.uniformMatrix4fv(this.addr,!1,fO),ei(t,r)}}function Qie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Zie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Jr(t,e))return;n.uniform2iv(this.addr,e),ei(t,e)}}function Jie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Jr(t,e))return;n.uniform3iv(this.addr,e),ei(t,e)}}function ese(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Jr(t,e))return;n.uniform4iv(this.addr,e),ei(t,e)}}function tse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function nse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Jr(t,e))return;n.uniform2uiv(this.addr,e),ei(t,e)}}function rse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Jr(t,e))return;n.uniform3uiv(this.addr,e),ei(t,e)}}function ise(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Jr(t,e))return;n.uniform4uiv(this.addr,e),ei(t,e)}}function sse(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?hH:uH;t.setTexture2D(e||s,i)}function ose(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||fH,i)}function ase(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||pH,i)}function lse(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||dH,i)}function cse(n){switch(n){case 5126:return Gie;case 35664:return Wie;case 35665:return $ie;case 35666:return qie;case 35674:return Xie;case 35675:return Yie;case 35676:return Kie;case 5124:case 35670:return Qie;case 35667:case 35671:return Zie;case 35668:case 35672:return Jie;case 35669:case 35673:return ese;case 5125:return tse;case 36294:return nse;case 36295:return rse;case 36296:return ise;case 35678:case 36198:case 36298:case 36306:case 35682:return sse;case 35679:case 36299:case 36307:return ose;case 35680:case 36300:case 36308:case 36293:return ase;case 36289:case 36303:case 36311:case 36292:return lse}}function use(n,e){n.uniform1fv(this.addr,e)}function hse(n,e){const t=im(e,this.size,2);n.uniform2fv(this.addr,t)}function dse(n,e){const t=im(e,this.size,3);n.uniform3fv(this.addr,t)}function fse(n,e){const t=im(e,this.size,4);n.uniform4fv(this.addr,t)}function pse(n,e){const t=im(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function mse(n,e){const t=im(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function gse(n,e){const t=im(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function vse(n,e){n.uniform1iv(this.addr,e)}function yse(n,e){n.uniform2iv(this.addr,e)}function _se(n,e){n.uniform3iv(this.addr,e)}function xse(n,e){n.uniform4iv(this.addr,e)}function wse(n,e){n.uniform1uiv(this.addr,e)}function Ese(n,e){n.uniform2uiv(this.addr,e)}function Sse(n,e){n.uniform3uiv(this.addr,e)}function Tse(n,e){n.uniform4uiv(this.addr,e)}function bse(n,e,t){const r=this.cache,i=e.length,s=vE(t,i);Jr(r,s)||(n.uniform1iv(this.addr,s),ei(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||uH,s[o])}function Ase(n,e,t){const r=this.cache,i=e.length,s=vE(t,i);Jr(r,s)||(n.uniform1iv(this.addr,s),ei(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||fH,s[o])}function Mse(n,e,t){const r=this.cache,i=e.length,s=vE(t,i);Jr(r,s)||(n.uniform1iv(this.addr,s),ei(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||pH,s[o])}function Cse(n,e,t){const r=this.cache,i=e.length,s=vE(t,i);Jr(r,s)||(n.uniform1iv(this.addr,s),ei(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||dH,s[o])}function Rse(n){switch(n){case 5126:return use;case 35664:return hse;case 35665:return dse;case 35666:return fse;case 35674:return pse;case 35675:return mse;case 35676:return gse;case 5124:case 35670:return vse;case 35667:case 35671:return yse;case 35668:case 35672:return _se;case 35669:case 35673:return xse;case 5125:return wse;case 36294:return Ese;case 36295:return Sse;case 36296:return Tse;case 35678:case 36198:case 36298:case 36306:case 35682:return bse;case 35679:case 36299:case 36307:return Ase;case 35680:case 36300:case 36308:case 36293:return Mse;case 36289:case 36303:case 36311:case 36292:return Cse}}class Ise{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=cse(t.type)}}class Pse{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Rse(t.type)}}class Nse{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const pb=/(\w+)(\])?(\[|\.)?/g;function gO(n,e){n.seq.push(e),n.map[e.id]=e}function kse(n,e,t){const r=n.name,i=r.length;for(pb.lastIndex=0;;){const s=pb.exec(r),o=pb.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){gO(t,c===void 0?new Ise(a,n,e):new Pse(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new Nse(a),gO(t,f)),t=f}}}class Yx{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);kse(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function vO(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Lse=37297;let Dse=0;function Ose(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Fse(n){const e=On.getPrimaries(On.workingColorSpace),t=On.getPrimaries(n);let r;switch(e===t?r="":e===$v&&t===Wv?r="LinearDisplayP3ToLinearSRGB":e===Wv&&t===$v&&(r="LinearSRGBToLinearDisplayP3"),n){case qa:case Dy:return[r,"LinearTransferOETF"];case Wr:case mE:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function yO(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Ose(n.getShaderSource(e),o)}else return i}function Use(n,e){const t=Fse(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Vse(n,e){let t;switch(e){case M6:t="Linear";break;case C6:t="Reinhard";break;case R6:t="OptimizedCineon";break;case DI:t="ACESFilmic";break;case P6:t="AgX";break;case I6:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function zse(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Hf).join(`
`)}function Bse(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Hf).join(`
`)}function Hse(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function jse(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Hf(n){return n!==""}function _O(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xO(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Gse=/^[ \t]*#include +<([\w\d./]+)>/gm;function _C(n){return n.replace(Gse,$se)}const Wse=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function $se(n,e){let t=en[e];if(t===void 0){const r=Wse.get(e);if(r!==void 0)t=en[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return _C(t)}const qse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wO(n){return n.replace(qse,Xse)}function Xse(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function EO(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Yse(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===hE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Kg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===$o&&(e="SHADOWMAP_TYPE_VSM"),e}function Kse(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case zl:case mu:e="ENVMAP_TYPE_CUBE";break;case nm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Qse(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case mu:e="ENVMAP_MODE_REFRACTION";break}return e}function Zse(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ly:e="ENVMAP_BLENDING_MULTIPLY";break;case b6:e="ENVMAP_BLENDING_MIX";break;case A6:e="ENVMAP_BLENDING_ADD";break}return e}function Jse(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function eoe(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Yse(t),c=Kse(t),u=Qse(t),f=Zse(t),p=Jse(t),m=t.isWebGL2?"":zse(t),v=Bse(t),w=Hse(s),_=i.createProgram();let g,E,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Hf).join(`
`),g.length>0&&(g+=`
`),E=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Hf).join(`
`),E.length>0&&(E+=`
`)):(g=[EO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Hf).join(`
`),E=[m,EO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Da?"#define TONE_MAPPING":"",t.toneMapping!==Da?en.tonemapping_pars_fragment:"",t.toneMapping!==Da?Vse("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",en.colorspace_pars_fragment,Use("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Hf).join(`
`)),o=_C(o),o=_O(o,t),o=xO(o,t),a=_C(a),a=_O(a,t),a=xO(a,t),o=wO(o),a=wO(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,g=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,E=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===gC?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===gC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const b=S+g+o,k=S+E+a,N=vO(i,i.VERTEX_SHADER,b),M=vO(i,i.FRAGMENT_SHADER,k);i.attachShader(_,N),i.attachShader(_,M),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function P(U){if(n.debug.checkShaderErrors){const V=i.getProgramInfoLog(_).trim(),$=i.getShaderInfoLog(N).trim(),Z=i.getShaderInfoLog(M).trim();let ne=!0,ae=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(ne=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,N,M);else{const z=yO(i,N,"vertex"),j=yO(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Program Info Log: `+V+`
`+z+`
`+j)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):($===""||Z==="")&&(ae=!1);ae&&(U.diagnostics={runnable:ne,programLog:V,vertexShader:{log:$,prefix:g},fragmentShader:{log:Z,prefix:E}})}i.deleteShader(N),i.deleteShader(M),A=new Yx(i,_),R=jse(i,_)}let A;this.getUniforms=function(){return A===void 0&&P(this),A};let R;this.getAttributes=function(){return R===void 0&&P(this),R};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=i.getProgramParameter(_,Lse)),O},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Dse++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=N,this.fragmentShader=M,this}let toe=0;class noe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new roe(e),t.set(e,r)),r}}class roe{constructor(e){this.id=toe++,this.code=e,this.usedTimes=0}}function ioe(n,e,t,r,i,s,o){const a=new Uh,l=new noe,c=[],u=i.isWebGL2,f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(A){return A===0?"uv":`uv${A}`}function _(A,R,O,U,V){const $=U.fog,Z=V.geometry,ne=A.isMeshStandardMaterial?U.environment:null,ae=(A.isMeshStandardMaterial?t:e).get(A.envMap||ne),z=ae&&ae.mapping===nm?ae.image.height:null,j=v[A.type];A.precision!==null&&(m=i.getMaxPrecision(A.precision),m!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",m,"instead."));const X=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,ee=X!==void 0?X.length:0;let te=0;Z.morphAttributes.position!==void 0&&(te=1),Z.morphAttributes.normal!==void 0&&(te=2),Z.morphAttributes.color!==void 0&&(te=3);let J,oe,we,Pe;if(j){const Sn=Qo[j];J=Sn.vertexShader,oe=Sn.fragmentShader}else J=A.vertexShader,oe=A.fragmentShader,l.update(A),we=l.getVertexShaderID(A),Pe=l.getFragmentShaderID(A);const Te=n.getRenderTarget(),mt=V.isInstancedMesh===!0,vt=V.isBatchedMesh===!0,Ge=!!A.map,rt=!!A.matcap,Q=!!ae,be=!!A.aoMap,xe=!!A.lightMap,Le=!!A.bumpMap,_e=!!A.normalMap,it=!!A.displacementMap,We=!!A.emissiveMap,G=!!A.metalnessMap,B=!!A.roughnessMap,le=A.anisotropy>0,Ne=A.clearcoat>0,Me=A.iridescence>0,Ce=A.sheen>0,st=A.transmission>0,Fe=le&&!!A.anisotropyMap,qe=Ne&&!!A.clearcoatMap,Et=Ne&&!!A.clearcoatNormalMap,Ft=Ne&&!!A.clearcoatRoughnessMap,Ie=Me&&!!A.iridescenceMap,cn=Me&&!!A.iridescenceThicknessMap,Gt=Ce&&!!A.sheenColorMap,Mt=Ce&&!!A.sheenRoughnessMap,dt=!!A.specularMap,tt=!!A.specularColorMap,St=!!A.specularIntensityMap,hn=st&&!!A.transmissionMap,In=st&&!!A.thicknessMap,jt=!!A.gradientMap,Ue=!!A.alphaMap,re=A.alphaTest>0,De=!!A.alphaHash,je=!!A.extensions,Tt=!!Z.attributes.uv1,ke=!!Z.attributes.uv2,_t=!!Z.attributes.uv3;let At=Da;return A.toneMapped&&(Te===null||Te.isXRRenderTarget===!0)&&(At=n.toneMapping),{isWebGL2:u,shaderID:j,shaderType:A.type,shaderName:A.name,vertexShader:J,fragmentShader:oe,defines:A.defines,customVertexShaderID:we,customFragmentShaderID:Pe,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:m,batching:vt,instancing:mt,instancingColor:mt&&V.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:Te===null?n.outputColorSpace:Te.isXRRenderTarget===!0?Te.texture.colorSpace:qa,map:Ge,matcap:rt,envMap:Q,envMapMode:Q&&ae.mapping,envMapCubeUVHeight:z,aoMap:be,lightMap:xe,bumpMap:Le,normalMap:_e,displacementMap:p&&it,emissiveMap:We,normalMapObjectSpace:_e&&A.normalMapType===$6,normalMapTangentSpace:_e&&A.normalMapType===Iu,metalnessMap:G,roughnessMap:B,anisotropy:le,anisotropyMap:Fe,clearcoat:Ne,clearcoatMap:qe,clearcoatNormalMap:Et,clearcoatRoughnessMap:Ft,iridescence:Me,iridescenceMap:Ie,iridescenceThicknessMap:cn,sheen:Ce,sheenColorMap:Gt,sheenRoughnessMap:Mt,specularMap:dt,specularColorMap:tt,specularIntensityMap:St,transmission:st,transmissionMap:hn,thicknessMap:In,gradientMap:jt,opaque:A.transparent===!1&&A.blending===Oh,alphaMap:Ue,alphaTest:re,alphaHash:De,combine:A.combine,mapUv:Ge&&w(A.map.channel),aoMapUv:be&&w(A.aoMap.channel),lightMapUv:xe&&w(A.lightMap.channel),bumpMapUv:Le&&w(A.bumpMap.channel),normalMapUv:_e&&w(A.normalMap.channel),displacementMapUv:it&&w(A.displacementMap.channel),emissiveMapUv:We&&w(A.emissiveMap.channel),metalnessMapUv:G&&w(A.metalnessMap.channel),roughnessMapUv:B&&w(A.roughnessMap.channel),anisotropyMapUv:Fe&&w(A.anisotropyMap.channel),clearcoatMapUv:qe&&w(A.clearcoatMap.channel),clearcoatNormalMapUv:Et&&w(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ft&&w(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ie&&w(A.iridescenceMap.channel),iridescenceThicknessMapUv:cn&&w(A.iridescenceThicknessMap.channel),sheenColorMapUv:Gt&&w(A.sheenColorMap.channel),sheenRoughnessMapUv:Mt&&w(A.sheenRoughnessMap.channel),specularMapUv:dt&&w(A.specularMap.channel),specularColorMapUv:tt&&w(A.specularColorMap.channel),specularIntensityMapUv:St&&w(A.specularIntensityMap.channel),transmissionMapUv:hn&&w(A.transmissionMap.channel),thicknessMapUv:In&&w(A.thicknessMap.channel),alphaMapUv:Ue&&w(A.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(_e||le),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,vertexUv1s:Tt,vertexUv2s:ke,vertexUv3s:_t,pointsUvs:V.isPoints===!0&&!!Z.attributes.uv&&(Ge||Ue),fog:!!$,useFog:A.fog===!0,fogExp2:$&&$.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:V.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:te,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:At,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ge&&A.map.isVideoTexture===!0&&On.getTransfer(A.map.colorSpace)===Wn,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===Ma,flipSided:A.side===us,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:je&&A.extensions.derivatives===!0,extensionFragDepth:je&&A.extensions.fragDepth===!0,extensionDrawBuffers:je&&A.extensions.drawBuffers===!0,extensionShaderTextureLOD:je&&A.extensions.shaderTextureLOD===!0,extensionClipCullDistance:je&&A.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()}}function g(A){const R=[];if(A.shaderID?R.push(A.shaderID):(R.push(A.customVertexShaderID),R.push(A.customFragmentShaderID)),A.defines!==void 0)for(const O in A.defines)R.push(O),R.push(A.defines[O]);return A.isRawShaderMaterial===!1&&(E(R,A),S(R,A),R.push(n.outputColorSpace)),R.push(A.customProgramCacheKey),R.join()}function E(A,R){A.push(R.precision),A.push(R.outputColorSpace),A.push(R.envMapMode),A.push(R.envMapCubeUVHeight),A.push(R.mapUv),A.push(R.alphaMapUv),A.push(R.lightMapUv),A.push(R.aoMapUv),A.push(R.bumpMapUv),A.push(R.normalMapUv),A.push(R.displacementMapUv),A.push(R.emissiveMapUv),A.push(R.metalnessMapUv),A.push(R.roughnessMapUv),A.push(R.anisotropyMapUv),A.push(R.clearcoatMapUv),A.push(R.clearcoatNormalMapUv),A.push(R.clearcoatRoughnessMapUv),A.push(R.iridescenceMapUv),A.push(R.iridescenceThicknessMapUv),A.push(R.sheenColorMapUv),A.push(R.sheenRoughnessMapUv),A.push(R.specularMapUv),A.push(R.specularColorMapUv),A.push(R.specularIntensityMapUv),A.push(R.transmissionMapUv),A.push(R.thicknessMapUv),A.push(R.combine),A.push(R.fogExp2),A.push(R.sizeAttenuation),A.push(R.morphTargetsCount),A.push(R.morphAttributeCount),A.push(R.numDirLights),A.push(R.numPointLights),A.push(R.numSpotLights),A.push(R.numSpotLightMaps),A.push(R.numHemiLights),A.push(R.numRectAreaLights),A.push(R.numDirLightShadows),A.push(R.numPointLightShadows),A.push(R.numSpotLightShadows),A.push(R.numSpotLightShadowsWithMaps),A.push(R.numLightProbes),A.push(R.shadowMapType),A.push(R.toneMapping),A.push(R.numClippingPlanes),A.push(R.numClipIntersection),A.push(R.depthPacking)}function S(A,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),R.alphaHash&&a.enable(18),R.batching&&a.enable(19),A.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.useLegacyLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),A.push(a.mask)}function b(A){const R=v[A.type];let O;if(R){const U=Qo[R];O=oH.clone(U.uniforms)}else O=A.uniforms;return O}function k(A,R){let O;for(let U=0,V=c.length;U<V;U++){const $=c[U];if($.cacheKey===R){O=$,++O.usedTimes;break}}return O===void 0&&(O=new eoe(n,R,A,s),c.push(O)),O}function N(A){if(--A.usedTimes===0){const R=c.indexOf(A);c[R]=c[c.length-1],c.pop(),A.destroy()}}function M(A){l.remove(A)}function P(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:b,acquireProgram:k,releaseProgram:N,releaseShaderCache:M,programs:c,dispose:P}}function soe(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function ooe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function SO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function TO(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,p,m,v,w,_){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:w,group:_},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=w,g.group=_),e++,g}function a(f,p,m,v,w,_){const g=o(f,p,m,v,w,_);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(f,p,m,v,w,_){const g=o(f,p,m,v,w,_);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||ooe),r.length>1&&r.sort(p||SO),i.length>1&&i.sort(p||SO)}function u(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function aoe(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new TO,n.set(r,[o])):i>=s.length?(o=new TO,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function loe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new lt};break;case"SpotLight":t={position:new Y,direction:new Y,color:new lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new lt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new lt,groundColor:new lt};break;case"RectAreaLight":t={color:new lt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return n[e.id]=t,t}}}function coe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let uoe=0;function hoe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function doe(n,e){const t=new loe,r=coe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new Y);const s=new Y,o=new Ht,a=new Ht;function l(u,f){let p=0,m=0,v=0;for(let U=0;U<9;U++)i.probe[U].set(0,0,0);let w=0,_=0,g=0,E=0,S=0,b=0,k=0,N=0,M=0,P=0,A=0;u.sort(hoe);const R=f===!0?Math.PI:1;for(let U=0,V=u.length;U<V;U++){const $=u[U],Z=$.color,ne=$.intensity,ae=$.distance,z=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)p+=Z.r*ne*R,m+=Z.g*ne*R,v+=Z.b*ne*R;else if($.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector($.sh.coefficients[j],ne);A++}else if($.isDirectionalLight){const j=t.get($);if(j.color.copy($.color).multiplyScalar($.intensity*R),$.castShadow){const X=$.shadow,ee=r.get($);ee.shadowBias=X.bias,ee.shadowNormalBias=X.normalBias,ee.shadowRadius=X.radius,ee.shadowMapSize=X.mapSize,i.directionalShadow[w]=ee,i.directionalShadowMap[w]=z,i.directionalShadowMatrix[w]=$.shadow.matrix,b++}i.directional[w]=j,w++}else if($.isSpotLight){const j=t.get($);j.position.setFromMatrixPosition($.matrixWorld),j.color.copy(Z).multiplyScalar(ne*R),j.distance=ae,j.coneCos=Math.cos($.angle),j.penumbraCos=Math.cos($.angle*(1-$.penumbra)),j.decay=$.decay,i.spot[g]=j;const X=$.shadow;if($.map&&(i.spotLightMap[M]=$.map,M++,X.updateMatrices($),$.castShadow&&P++),i.spotLightMatrix[g]=X.matrix,$.castShadow){const ee=r.get($);ee.shadowBias=X.bias,ee.shadowNormalBias=X.normalBias,ee.shadowRadius=X.radius,ee.shadowMapSize=X.mapSize,i.spotShadow[g]=ee,i.spotShadowMap[g]=z,N++}g++}else if($.isRectAreaLight){const j=t.get($);j.color.copy(Z).multiplyScalar(ne),j.halfWidth.set($.width*.5,0,0),j.halfHeight.set(0,$.height*.5,0),i.rectArea[E]=j,E++}else if($.isPointLight){const j=t.get($);if(j.color.copy($.color).multiplyScalar($.intensity*R),j.distance=$.distance,j.decay=$.decay,$.castShadow){const X=$.shadow,ee=r.get($);ee.shadowBias=X.bias,ee.shadowNormalBias=X.normalBias,ee.shadowRadius=X.radius,ee.shadowMapSize=X.mapSize,ee.shadowCameraNear=X.camera.near,ee.shadowCameraFar=X.camera.far,i.pointShadow[_]=ee,i.pointShadowMap[_]=z,i.pointShadowMatrix[_]=$.shadow.matrix,k++}i.point[_]=j,_++}else if($.isHemisphereLight){const j=t.get($);j.skyColor.copy($.color).multiplyScalar(ne*R),j.groundColor.copy($.groundColor).multiplyScalar(ne*R),i.hemi[S]=j,S++}}E>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=$e.LTC_FLOAT_1,i.rectAreaLTC2=$e.LTC_FLOAT_2):(i.rectAreaLTC1=$e.LTC_HALF_1,i.rectAreaLTC2=$e.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=$e.LTC_FLOAT_1,i.rectAreaLTC2=$e.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=$e.LTC_HALF_1,i.rectAreaLTC2=$e.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const O=i.hash;(O.directionalLength!==w||O.pointLength!==_||O.spotLength!==g||O.rectAreaLength!==E||O.hemiLength!==S||O.numDirectionalShadows!==b||O.numPointShadows!==k||O.numSpotShadows!==N||O.numSpotMaps!==M||O.numLightProbes!==A)&&(i.directional.length=w,i.spot.length=g,i.rectArea.length=E,i.point.length=_,i.hemi.length=S,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=k,i.pointShadowMap.length=k,i.spotShadow.length=N,i.spotShadowMap.length=N,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=k,i.spotLightMatrix.length=N+M-P,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=P,i.numLightProbes=A,O.directionalLength=w,O.pointLength=_,O.spotLength=g,O.rectAreaLength=E,O.hemiLength=S,O.numDirectionalShadows=b,O.numPointShadows=k,O.numSpotShadows=N,O.numSpotMaps=M,O.numLightProbes=A,i.version=uoe++)}function c(u,f){let p=0,m=0,v=0,w=0,_=0;const g=f.matrixWorldInverse;for(let E=0,S=u.length;E<S;E++){const b=u[E];if(b.isDirectionalLight){const k=i.directional[p];k.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(g),p++}else if(b.isSpotLight){const k=i.spot[v];k.position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(g),k.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(g),v++}else if(b.isRectAreaLight){const k=i.rectArea[w];k.position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(g),a.identity(),o.copy(b.matrixWorld),o.premultiply(g),a.extractRotation(o),k.halfWidth.set(b.width*.5,0,0),k.halfHeight.set(0,b.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),w++}else if(b.isPointLight){const k=i.point[m];k.position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(g),m++}else if(b.isHemisphereLight){const k=i.hemi[_];k.direction.setFromMatrixPosition(b.matrixWorld),k.direction.transformDirection(g),_++}}}return{setup:l,setupView:c,state:i}}function bO(n,e){const t=new doe(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){t.setup(r,f)}function c(f){t.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function foe(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new bO(n,e),t.set(s,[l])):o>=a.length?(l=new bO(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class eP extends Yi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=G6,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tP extends Yi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const poe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,moe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function goe(n,e,t){let r=new Vy;const i=new Re,s=new Re,o=new Fn,a=new eP({depthPacking:W6}),l=new tP,c={},u=t.maxTextureSize,f={[Vl]:us,[us]:Vl,[Ma]:Ma},p=new Xa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Re},radius:{value:4}},vertexShader:poe,fragmentShader:moe}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new on;v.setAttribute("position",new Vn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Yr(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hE;let g=this.type;this.render=function(N,M,P){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||N.length===0)return;const A=n.getRenderTarget(),R=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),U=n.state;U.setBlending(Il),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const V=g!==$o&&this.type===$o,$=g===$o&&this.type!==$o;for(let Z=0,ne=N.length;Z<ne;Z++){const ae=N[Z],z=ae.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;i.copy(z.mapSize);const j=z.getFrameExtents();if(i.multiply(j),s.copy(z.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/j.x),i.x=s.x*j.x,z.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/j.y),i.y=s.y*j.y,z.mapSize.y=s.y)),z.map===null||V===!0||$===!0){const ee=this.type!==$o?{minFilter:Ir,magFilter:Ir}:{};z.map!==null&&z.map.dispose(),z.map=new ua(i.x,i.y,ee),z.map.texture.name=ae.name+".shadowMap",z.camera.updateProjectionMatrix()}n.setRenderTarget(z.map),n.clear();const X=z.getViewportCount();for(let ee=0;ee<X;ee++){const te=z.getViewport(ee);o.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),U.viewport(o),z.updateMatrices(ae,ee),r=z.getFrustum(),b(M,P,z.camera,ae,this.type)}z.isPointLightShadow!==!0&&this.type===$o&&E(z,P),z.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(A,R,O)};function E(N,M){const P=e.update(w);p.defines.VSM_SAMPLES!==N.blurSamples&&(p.defines.VSM_SAMPLES=N.blurSamples,m.defines.VSM_SAMPLES=N.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new ua(i.x,i.y)),p.uniforms.shadow_pass.value=N.map.texture,p.uniforms.resolution.value=N.mapSize,p.uniforms.radius.value=N.radius,n.setRenderTarget(N.mapPass),n.clear(),n.renderBufferDirect(M,null,P,p,w,null),m.uniforms.shadow_pass.value=N.mapPass.texture,m.uniforms.resolution.value=N.mapSize,m.uniforms.radius.value=N.radius,n.setRenderTarget(N.map),n.clear(),n.renderBufferDirect(M,null,P,m,w,null)}function S(N,M,P,A){let R=null;const O=P.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(O!==void 0)R=O;else if(R=P.isPointLight===!0?l:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const U=R.uuid,V=M.uuid;let $=c[U];$===void 0&&($={},c[U]=$);let Z=$[V];Z===void 0&&(Z=R.clone(),$[V]=Z,M.addEventListener("dispose",k)),R=Z}if(R.visible=M.visible,R.wireframe=M.wireframe,A===$o?R.side=M.shadowSide!==null?M.shadowSide:M.side:R.side=M.shadowSide!==null?M.shadowSide:f[M.side],R.alphaMap=M.alphaMap,R.alphaTest=M.alphaTest,R.map=M.map,R.clipShadows=M.clipShadows,R.clippingPlanes=M.clippingPlanes,R.clipIntersection=M.clipIntersection,R.displacementMap=M.displacementMap,R.displacementScale=M.displacementScale,R.displacementBias=M.displacementBias,R.wireframeLinewidth=M.wireframeLinewidth,R.linewidth=M.linewidth,P.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const U=n.properties.get(R);U.light=P}return R}function b(N,M,P,A,R){if(N.visible===!1)return;if(N.layers.test(M.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&R===$o)&&(!N.frustumCulled||r.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,N.matrixWorld);const V=e.update(N),$=N.material;if(Array.isArray($)){const Z=V.groups;for(let ne=0,ae=Z.length;ne<ae;ne++){const z=Z[ne],j=$[z.materialIndex];if(j&&j.visible){const X=S(N,j,A,R);N.onBeforeShadow(n,N,M,P,V,X,z),n.renderBufferDirect(P,null,V,X,N,z),N.onAfterShadow(n,N,M,P,V,X,z)}}}else if($.visible){const Z=S(N,$,A,R);N.onBeforeShadow(n,N,M,P,V,Z,null),n.renderBufferDirect(P,null,V,Z,N,null),N.onAfterShadow(n,N,M,P,V,Z,null)}}const U=N.children;for(let V=0,$=U.length;V<$;V++)b(U[V],M,P,A,R)}function k(N){N.target.removeEventListener("dispose",k);for(const P in c){const A=c[P],R=N.target.uuid;R in A&&(A[R].dispose(),delete A[R])}}}function voe(n,e,t){const r=t.isWebGL2;function i(){let re=!1;const De=new Fn;let je=null;const Tt=new Fn(0,0,0,0);return{setMask:function(ke){je!==ke&&!re&&(n.colorMask(ke,ke,ke,ke),je=ke)},setLocked:function(ke){re=ke},setClear:function(ke,_t,At,nn,Sn){Sn===!0&&(ke*=nn,_t*=nn,At*=nn),De.set(ke,_t,At,nn),Tt.equals(De)===!1&&(n.clearColor(ke,_t,At,nn),Tt.copy(De))},reset:function(){re=!1,je=null,Tt.set(-1,0,0,0)}}}function s(){let re=!1,De=null,je=null,Tt=null;return{setTest:function(ke){ke?vt(n.DEPTH_TEST):Ge(n.DEPTH_TEST)},setMask:function(ke){De!==ke&&!re&&(n.depthMask(ke),De=ke)},setFunc:function(ke){if(je!==ke){switch(ke){case y6:n.depthFunc(n.NEVER);break;case _6:n.depthFunc(n.ALWAYS);break;case x6:n.depthFunc(n.LESS);break;case Ov:n.depthFunc(n.LEQUAL);break;case w6:n.depthFunc(n.EQUAL);break;case E6:n.depthFunc(n.GEQUAL);break;case S6:n.depthFunc(n.GREATER);break;case T6:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}je=ke}},setLocked:function(ke){re=ke},setClear:function(ke){Tt!==ke&&(n.clearDepth(ke),Tt=ke)},reset:function(){re=!1,De=null,je=null,Tt=null}}}function o(){let re=!1,De=null,je=null,Tt=null,ke=null,_t=null,At=null,nn=null,Sn=null;return{setTest:function(an){re||(an?vt(n.STENCIL_TEST):Ge(n.STENCIL_TEST))},setMask:function(an){De!==an&&!re&&(n.stencilMask(an),De=an)},setFunc:function(an,Nn,Bn){(je!==an||Tt!==Nn||ke!==Bn)&&(n.stencilFunc(an,Nn,Bn),je=an,Tt=Nn,ke=Bn)},setOp:function(an,Nn,Bn){(_t!==an||At!==Nn||nn!==Bn)&&(n.stencilOp(an,Nn,Bn),_t=an,At=Nn,nn=Bn)},setLocked:function(an){re=an},setClear:function(an){Sn!==an&&(n.clearStencil(an),Sn=an)},reset:function(){re=!1,De=null,je=null,Tt=null,ke=null,_t=null,At=null,nn=null,Sn=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let p={},m={},v=new WeakMap,w=[],_=null,g=!1,E=null,S=null,b=null,k=null,N=null,M=null,P=null,A=new lt(0,0,0),R=0,O=!1,U=null,V=null,$=null,Z=null,ne=null;const ae=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,j=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(X)[1]),z=j>=1):X.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),z=j>=2);let ee=null,te={};const J=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),we=new Fn().fromArray(J),Pe=new Fn().fromArray(oe);function Te(re,De,je,Tt){const ke=new Uint8Array(4),_t=n.createTexture();n.bindTexture(re,_t),n.texParameteri(re,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(re,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let At=0;At<je;At++)r&&(re===n.TEXTURE_3D||re===n.TEXTURE_2D_ARRAY)?n.texImage3D(De,0,n.RGBA,1,1,Tt,0,n.RGBA,n.UNSIGNED_BYTE,ke):n.texImage2D(De+At,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ke);return _t}const mt={};mt[n.TEXTURE_2D]=Te(n.TEXTURE_2D,n.TEXTURE_2D,1),mt[n.TEXTURE_CUBE_MAP]=Te(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(mt[n.TEXTURE_2D_ARRAY]=Te(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),mt[n.TEXTURE_3D]=Te(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),vt(n.DEPTH_TEST),l.setFunc(Ov),We(!1),G(FM),vt(n.CULL_FACE),_e(Il);function vt(re){p[re]!==!0&&(n.enable(re),p[re]=!0)}function Ge(re){p[re]!==!1&&(n.disable(re),p[re]=!1)}function rt(re,De){return m[re]!==De?(n.bindFramebuffer(re,De),m[re]=De,r&&(re===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=De),re===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=De)),!0):!1}function Q(re,De){let je=w,Tt=!1;if(re)if(je=v.get(De),je===void 0&&(je=[],v.set(De,je)),re.isWebGLMultipleRenderTargets){const ke=re.texture;if(je.length!==ke.length||je[0]!==n.COLOR_ATTACHMENT0){for(let _t=0,At=ke.length;_t<At;_t++)je[_t]=n.COLOR_ATTACHMENT0+_t;je.length=ke.length,Tt=!0}}else je[0]!==n.COLOR_ATTACHMENT0&&(je[0]=n.COLOR_ATTACHMENT0,Tt=!0);else je[0]!==n.BACK&&(je[0]=n.BACK,Tt=!0);Tt&&(t.isWebGL2?n.drawBuffers(je):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(je))}function be(re){return _!==re?(n.useProgram(re),_=re,!0):!1}const xe={[bc]:n.FUNC_ADD,[r6]:n.FUNC_SUBTRACT,[i6]:n.FUNC_REVERSE_SUBTRACT};if(r)xe[BM]=n.MIN,xe[HM]=n.MAX;else{const re=e.get("EXT_blend_minmax");re!==null&&(xe[BM]=re.MIN_EXT,xe[HM]=re.MAX_EXT)}const Le={[s6]:n.ZERO,[o6]:n.ONE,[a6]:n.SRC_COLOR,[t1]:n.SRC_ALPHA,[f6]:n.SRC_ALPHA_SATURATE,[h6]:n.DST_COLOR,[c6]:n.DST_ALPHA,[l6]:n.ONE_MINUS_SRC_COLOR,[n1]:n.ONE_MINUS_SRC_ALPHA,[d6]:n.ONE_MINUS_DST_COLOR,[u6]:n.ONE_MINUS_DST_ALPHA,[p6]:n.CONSTANT_COLOR,[m6]:n.ONE_MINUS_CONSTANT_COLOR,[g6]:n.CONSTANT_ALPHA,[v6]:n.ONE_MINUS_CONSTANT_ALPHA};function _e(re,De,je,Tt,ke,_t,At,nn,Sn,an){if(re===Il){g===!0&&(Ge(n.BLEND),g=!1);return}if(g===!1&&(vt(n.BLEND),g=!0),re!==n6){if(re!==E||an!==O){if((S!==bc||N!==bc)&&(n.blendEquation(n.FUNC_ADD),S=bc,N=bc),an)switch(re){case Oh:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case UM:n.blendFunc(n.ONE,n.ONE);break;case VM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case zM:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case Oh:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case UM:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case VM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case zM:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}b=null,k=null,M=null,P=null,A.set(0,0,0),R=0,E=re,O=an}return}ke=ke||De,_t=_t||je,At=At||Tt,(De!==S||ke!==N)&&(n.blendEquationSeparate(xe[De],xe[ke]),S=De,N=ke),(je!==b||Tt!==k||_t!==M||At!==P)&&(n.blendFuncSeparate(Le[je],Le[Tt],Le[_t],Le[At]),b=je,k=Tt,M=_t,P=At),(nn.equals(A)===!1||Sn!==R)&&(n.blendColor(nn.r,nn.g,nn.b,Sn),A.copy(nn),R=Sn),E=re,O=!1}function it(re,De){re.side===Ma?Ge(n.CULL_FACE):vt(n.CULL_FACE);let je=re.side===us;De&&(je=!je),We(je),re.blending===Oh&&re.transparent===!1?_e(Il):_e(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.blendColor,re.blendAlpha,re.premultipliedAlpha),l.setFunc(re.depthFunc),l.setTest(re.depthTest),l.setMask(re.depthWrite),a.setMask(re.colorWrite);const Tt=re.stencilWrite;c.setTest(Tt),Tt&&(c.setMask(re.stencilWriteMask),c.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),c.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),le(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?vt(n.SAMPLE_ALPHA_TO_COVERAGE):Ge(n.SAMPLE_ALPHA_TO_COVERAGE)}function We(re){U!==re&&(re?n.frontFace(n.CW):n.frontFace(n.CCW),U=re)}function G(re){re!==J5?(vt(n.CULL_FACE),re!==V&&(re===FM?n.cullFace(n.BACK):re===e6?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ge(n.CULL_FACE),V=re}function B(re){re!==$&&(z&&n.lineWidth(re),$=re)}function le(re,De,je){re?(vt(n.POLYGON_OFFSET_FILL),(Z!==De||ne!==je)&&(n.polygonOffset(De,je),Z=De,ne=je)):Ge(n.POLYGON_OFFSET_FILL)}function Ne(re){re?vt(n.SCISSOR_TEST):Ge(n.SCISSOR_TEST)}function Me(re){re===void 0&&(re=n.TEXTURE0+ae-1),ee!==re&&(n.activeTexture(re),ee=re)}function Ce(re,De,je){je===void 0&&(ee===null?je=n.TEXTURE0+ae-1:je=ee);let Tt=te[je];Tt===void 0&&(Tt={type:void 0,texture:void 0},te[je]=Tt),(Tt.type!==re||Tt.texture!==De)&&(ee!==je&&(n.activeTexture(je),ee=je),n.bindTexture(re,De||mt[re]),Tt.type=re,Tt.texture=De)}function st(){const re=te[ee];re!==void 0&&re.type!==void 0&&(n.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function Fe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function qe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Et(){try{n.texSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ft(){try{n.texSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function cn(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Gt(){try{n.texStorage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Mt(){try{n.texStorage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function dt(){try{n.texImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function tt(){try{n.texImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function St(re){we.equals(re)===!1&&(n.scissor(re.x,re.y,re.z,re.w),we.copy(re))}function hn(re){Pe.equals(re)===!1&&(n.viewport(re.x,re.y,re.z,re.w),Pe.copy(re))}function In(re,De){let je=f.get(De);je===void 0&&(je=new WeakMap,f.set(De,je));let Tt=je.get(re);Tt===void 0&&(Tt=n.getUniformBlockIndex(De,re.name),je.set(re,Tt))}function jt(re,De){const Tt=f.get(De).get(re);u.get(De)!==Tt&&(n.uniformBlockBinding(De,Tt,re.__bindingPointIndex),u.set(De,Tt))}function Ue(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},ee=null,te={},m={},v=new WeakMap,w=[],_=null,g=!1,E=null,S=null,b=null,k=null,N=null,M=null,P=null,A=new lt(0,0,0),R=0,O=!1,U=null,V=null,$=null,Z=null,ne=null,we.set(0,0,n.canvas.width,n.canvas.height),Pe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:vt,disable:Ge,bindFramebuffer:rt,drawBuffers:Q,useProgram:be,setBlending:_e,setMaterial:it,setFlipSided:We,setCullFace:G,setLineWidth:B,setPolygonOffset:le,setScissorTest:Ne,activeTexture:Me,bindTexture:Ce,unbindTexture:st,compressedTexImage2D:Fe,compressedTexImage3D:qe,texImage2D:dt,texImage3D:tt,updateUBOMapping:In,uniformBlockBinding:jt,texStorage2D:Gt,texStorage3D:Mt,texSubImage2D:Et,texSubImage3D:Ft,compressedTexSubImage2D:Ie,compressedTexSubImage3D:cn,scissor:St,viewport:hn,reset:Ue}}function yoe(n,e,t,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(G,B){return m?new OffscreenCanvas(G,B):Xv("canvas")}function w(G,B,le,Ne){let Me=1;if((G.width>Ne||G.height>Ne)&&(Me=Ne/Math.max(G.width,G.height)),Me<1||B===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const Ce=B?s1:Math.floor,st=Ce(Me*G.width),Fe=Ce(Me*G.height);f===void 0&&(f=v(st,Fe));const qe=le?v(st,Fe):f;return qe.width=st,qe.height=Fe,qe.getContext("2d").drawImage(G,0,0,st,Fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+st+"x"+Fe+")."),qe}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function _(G){return vC(G.width)&&vC(G.height)}function g(G){return a?!1:G.wrapS!==Gi||G.wrapT!==Gi||G.minFilter!==Ir&&G.minFilter!==Nr}function E(G,B){return G.generateMipmaps&&B&&G.minFilter!==Ir&&G.minFilter!==Nr}function S(G){n.generateMipmap(G)}function b(G,B,le,Ne,Me=!1){if(a===!1)return B;if(G!==null){if(n[G]!==void 0)return n[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let Ce=B;if(B===n.RED&&(le===n.FLOAT&&(Ce=n.R32F),le===n.HALF_FLOAT&&(Ce=n.R16F),le===n.UNSIGNED_BYTE&&(Ce=n.R8)),B===n.RED_INTEGER&&(le===n.UNSIGNED_BYTE&&(Ce=n.R8UI),le===n.UNSIGNED_SHORT&&(Ce=n.R16UI),le===n.UNSIGNED_INT&&(Ce=n.R32UI),le===n.BYTE&&(Ce=n.R8I),le===n.SHORT&&(Ce=n.R16I),le===n.INT&&(Ce=n.R32I)),B===n.RG&&(le===n.FLOAT&&(Ce=n.RG32F),le===n.HALF_FLOAT&&(Ce=n.RG16F),le===n.UNSIGNED_BYTE&&(Ce=n.RG8)),B===n.RGBA){const st=Me?Gv:On.getTransfer(Ne);le===n.FLOAT&&(Ce=n.RGBA32F),le===n.HALF_FLOAT&&(Ce=n.RGBA16F),le===n.UNSIGNED_BYTE&&(Ce=st===Wn?n.SRGB8_ALPHA8:n.RGBA8),le===n.UNSIGNED_SHORT_4_4_4_4&&(Ce=n.RGBA4),le===n.UNSIGNED_SHORT_5_5_5_1&&(Ce=n.RGB5_A1)}return(Ce===n.R16F||Ce===n.R32F||Ce===n.RG16F||Ce===n.RG32F||Ce===n.RGBA16F||Ce===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ce}function k(G,B,le){return E(G,le)===!0||G.isFramebufferTexture&&G.minFilter!==Ir&&G.minFilter!==Nr?Math.log2(Math.max(B.width,B.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?B.mipmaps.length:1}function N(G){return G===Ir||G===r1||G===Qg?n.NEAREST:n.LINEAR}function M(G){const B=G.target;B.removeEventListener("dispose",M),A(B),B.isVideoTexture&&u.delete(B)}function P(G){const B=G.target;B.removeEventListener("dispose",P),O(B)}function A(G){const B=r.get(G);if(B.__webglInit===void 0)return;const le=G.source,Ne=p.get(le);if(Ne){const Me=Ne[B.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&R(G),Object.keys(Ne).length===0&&p.delete(le)}r.remove(G)}function R(G){const B=r.get(G);n.deleteTexture(B.__webglTexture);const le=G.source,Ne=p.get(le);delete Ne[B.__cacheKey],o.memory.textures--}function O(G){const B=G.texture,le=r.get(G),Ne=r.get(B);if(Ne.__webglTexture!==void 0&&(n.deleteTexture(Ne.__webglTexture),o.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++){if(Array.isArray(le.__webglFramebuffer[Me]))for(let Ce=0;Ce<le.__webglFramebuffer[Me].length;Ce++)n.deleteFramebuffer(le.__webglFramebuffer[Me][Ce]);else n.deleteFramebuffer(le.__webglFramebuffer[Me]);le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer[Me])}else{if(Array.isArray(le.__webglFramebuffer))for(let Me=0;Me<le.__webglFramebuffer.length;Me++)n.deleteFramebuffer(le.__webglFramebuffer[Me]);else n.deleteFramebuffer(le.__webglFramebuffer);if(le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&n.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let Me=0;Me<le.__webglColorRenderbuffer.length;Me++)le.__webglColorRenderbuffer[Me]&&n.deleteRenderbuffer(le.__webglColorRenderbuffer[Me]);le.__webglDepthRenderbuffer&&n.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let Me=0,Ce=B.length;Me<Ce;Me++){const st=r.get(B[Me]);st.__webglTexture&&(n.deleteTexture(st.__webglTexture),o.memory.textures--),r.remove(B[Me])}r.remove(B),r.remove(G)}let U=0;function V(){U=0}function $(){const G=U;return G>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+i.maxTextures),U+=1,G}function Z(G){const B=[];return B.push(G.wrapS),B.push(G.wrapT),B.push(G.wrapR||0),B.push(G.magFilter),B.push(G.minFilter),B.push(G.anisotropy),B.push(G.internalFormat),B.push(G.format),B.push(G.type),B.push(G.generateMipmaps),B.push(G.premultiplyAlpha),B.push(G.flipY),B.push(G.unpackAlignment),B.push(G.colorSpace),B.join()}function ne(G,B){const le=r.get(G);if(G.isVideoTexture&&it(G),G.isRenderTargetTexture===!1&&G.version>0&&le.__version!==G.version){const Ne=G.image;if(Ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(le,G,B);return}}t.bindTexture(n.TEXTURE_2D,le.__webglTexture,n.TEXTURE0+B)}function ae(G,B){const le=r.get(G);if(G.version>0&&le.__version!==G.version){we(le,G,B);return}t.bindTexture(n.TEXTURE_2D_ARRAY,le.__webglTexture,n.TEXTURE0+B)}function z(G,B){const le=r.get(G);if(G.version>0&&le.__version!==G.version){we(le,G,B);return}t.bindTexture(n.TEXTURE_3D,le.__webglTexture,n.TEXTURE0+B)}function j(G,B){const le=r.get(G);if(G.version>0&&le.__version!==G.version){Pe(le,G,B);return}t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture,n.TEXTURE0+B)}const X={[Vv]:n.REPEAT,[Gi]:n.CLAMP_TO_EDGE,[zv]:n.MIRRORED_REPEAT},ee={[Ir]:n.NEAREST,[r1]:n.NEAREST_MIPMAP_NEAREST,[Qg]:n.NEAREST_MIPMAP_LINEAR,[Nr]:n.LINEAR,[OI]:n.LINEAR_MIPMAP_NEAREST,[gu]:n.LINEAR_MIPMAP_LINEAR},te={[q6]:n.NEVER,[J6]:n.ALWAYS,[X6]:n.LESS,[$I]:n.LEQUAL,[Y6]:n.EQUAL,[Z6]:n.GEQUAL,[K6]:n.GREATER,[Q6]:n.NOTEQUAL};function J(G,B,le){if(le?(n.texParameteri(G,n.TEXTURE_WRAP_S,X[B.wrapS]),n.texParameteri(G,n.TEXTURE_WRAP_T,X[B.wrapT]),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,X[B.wrapR]),n.texParameteri(G,n.TEXTURE_MAG_FILTER,ee[B.magFilter]),n.texParameteri(G,n.TEXTURE_MIN_FILTER,ee[B.minFilter])):(n.texParameteri(G,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(G,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(B.wrapS!==Gi||B.wrapT!==Gi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(G,n.TEXTURE_MAG_FILTER,N(B.magFilter)),n.texParameteri(G,n.TEXTURE_MIN_FILTER,N(B.minFilter)),B.minFilter!==Ir&&B.minFilter!==Nr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),B.compareFunction&&(n.texParameteri(G,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(G,n.TEXTURE_COMPARE_FUNC,te[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ne=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===Ir||B.minFilter!==Qg&&B.minFilter!==gu||B.type===Jo&&e.has("OES_texture_float_linear")===!1||a===!1&&B.type===Ip&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||r.get(B).__currentAnisotropy)&&(n.texParameterf(G,Ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,i.getMaxAnisotropy())),r.get(B).__currentAnisotropy=B.anisotropy)}}function oe(G,B){let le=!1;G.__webglInit===void 0&&(G.__webglInit=!0,B.addEventListener("dispose",M));const Ne=B.source;let Me=p.get(Ne);Me===void 0&&(Me={},p.set(Ne,Me));const Ce=Z(B);if(Ce!==G.__cacheKey){Me[Ce]===void 0&&(Me[Ce]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Me[Ce].usedTimes++;const st=Me[G.__cacheKey];st!==void 0&&(Me[G.__cacheKey].usedTimes--,st.usedTimes===0&&R(B)),G.__cacheKey=Ce,G.__webglTexture=Me[Ce].texture}return le}function we(G,B,le){let Ne=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(Ne=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(Ne=n.TEXTURE_3D);const Me=oe(G,B),Ce=B.source;t.bindTexture(Ne,G.__webglTexture,n.TEXTURE0+le);const st=r.get(Ce);if(Ce.version!==st.__version||Me===!0){t.activeTexture(n.TEXTURE0+le);const Fe=On.getPrimaries(On.workingColorSpace),qe=B.colorSpace===Zs?null:On.getPrimaries(B.colorSpace),Et=B.colorSpace===Zs||Fe===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Et);const Ft=g(B)&&_(B.image)===!1;let Ie=w(B.image,Ft,!1,i.maxTextureSize);Ie=We(B,Ie);const cn=_(Ie)||a,Gt=s.convert(B.format,B.colorSpace);let Mt=s.convert(B.type),dt=b(B.internalFormat,Gt,Mt,B.colorSpace,B.isVideoTexture);J(Ne,B,cn);let tt;const St=B.mipmaps,hn=a&&B.isVideoTexture!==!0&&dt!==jI,In=st.__version===void 0||Me===!0,jt=k(B,Ie,cn);if(B.isDepthTexture)dt=n.DEPTH_COMPONENT,a?B.type===Jo?dt=n.DEPTH_COMPONENT32F:B.type===bl?dt=n.DEPTH_COMPONENT24:B.type===Jc?dt=n.DEPTH24_STENCIL8:dt=n.DEPTH_COMPONENT16:B.type===Jo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===eu&&dt===n.DEPTH_COMPONENT&&B.type!==fE&&B.type!==bl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=bl,Mt=s.convert(B.type)),B.format===Qh&&dt===n.DEPTH_COMPONENT&&(dt=n.DEPTH_STENCIL,B.type!==Jc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Jc,Mt=s.convert(B.type))),In&&(hn?t.texStorage2D(n.TEXTURE_2D,1,dt,Ie.width,Ie.height):t.texImage2D(n.TEXTURE_2D,0,dt,Ie.width,Ie.height,0,Gt,Mt,null));else if(B.isDataTexture)if(St.length>0&&cn){hn&&In&&t.texStorage2D(n.TEXTURE_2D,jt,dt,St[0].width,St[0].height);for(let Ue=0,re=St.length;Ue<re;Ue++)tt=St[Ue],hn?t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,tt.width,tt.height,Gt,Mt,tt.data):t.texImage2D(n.TEXTURE_2D,Ue,dt,tt.width,tt.height,0,Gt,Mt,tt.data);B.generateMipmaps=!1}else hn?(In&&t.texStorage2D(n.TEXTURE_2D,jt,dt,Ie.width,Ie.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ie.width,Ie.height,Gt,Mt,Ie.data)):t.texImage2D(n.TEXTURE_2D,0,dt,Ie.width,Ie.height,0,Gt,Mt,Ie.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){hn&&In&&t.texStorage3D(n.TEXTURE_2D_ARRAY,jt,dt,St[0].width,St[0].height,Ie.depth);for(let Ue=0,re=St.length;Ue<re;Ue++)tt=St[Ue],B.format!==ls?Gt!==null?hn?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,tt.width,tt.height,Ie.depth,Gt,tt.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ue,dt,tt.width,tt.height,Ie.depth,0,tt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):hn?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,tt.width,tt.height,Ie.depth,Gt,Mt,tt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ue,dt,tt.width,tt.height,Ie.depth,0,Gt,Mt,tt.data)}else{hn&&In&&t.texStorage2D(n.TEXTURE_2D,jt,dt,St[0].width,St[0].height);for(let Ue=0,re=St.length;Ue<re;Ue++)tt=St[Ue],B.format!==ls?Gt!==null?hn?t.compressedTexSubImage2D(n.TEXTURE_2D,Ue,0,0,tt.width,tt.height,Gt,tt.data):t.compressedTexImage2D(n.TEXTURE_2D,Ue,dt,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):hn?t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,tt.width,tt.height,Gt,Mt,tt.data):t.texImage2D(n.TEXTURE_2D,Ue,dt,tt.width,tt.height,0,Gt,Mt,tt.data)}else if(B.isDataArrayTexture)hn?(In&&t.texStorage3D(n.TEXTURE_2D_ARRAY,jt,dt,Ie.width,Ie.height,Ie.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,Gt,Mt,Ie.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,dt,Ie.width,Ie.height,Ie.depth,0,Gt,Mt,Ie.data);else if(B.isData3DTexture)hn?(In&&t.texStorage3D(n.TEXTURE_3D,jt,dt,Ie.width,Ie.height,Ie.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,Gt,Mt,Ie.data)):t.texImage3D(n.TEXTURE_3D,0,dt,Ie.width,Ie.height,Ie.depth,0,Gt,Mt,Ie.data);else if(B.isFramebufferTexture){if(In)if(hn)t.texStorage2D(n.TEXTURE_2D,jt,dt,Ie.width,Ie.height);else{let Ue=Ie.width,re=Ie.height;for(let De=0;De<jt;De++)t.texImage2D(n.TEXTURE_2D,De,dt,Ue,re,0,Gt,Mt,null),Ue>>=1,re>>=1}}else if(St.length>0&&cn){hn&&In&&t.texStorage2D(n.TEXTURE_2D,jt,dt,St[0].width,St[0].height);for(let Ue=0,re=St.length;Ue<re;Ue++)tt=St[Ue],hn?t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,Gt,Mt,tt):t.texImage2D(n.TEXTURE_2D,Ue,dt,Gt,Mt,tt);B.generateMipmaps=!1}else hn?(In&&t.texStorage2D(n.TEXTURE_2D,jt,dt,Ie.width,Ie.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Gt,Mt,Ie)):t.texImage2D(n.TEXTURE_2D,0,dt,Gt,Mt,Ie);E(B,cn)&&S(Ne),st.__version=Ce.version,B.onUpdate&&B.onUpdate(B)}G.__version=B.version}function Pe(G,B,le){if(B.image.length!==6)return;const Ne=oe(G,B),Me=B.source;t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+le);const Ce=r.get(Me);if(Me.version!==Ce.__version||Ne===!0){t.activeTexture(n.TEXTURE0+le);const st=On.getPrimaries(On.workingColorSpace),Fe=B.colorSpace===Zs?null:On.getPrimaries(B.colorSpace),qe=B.colorSpace===Zs||st===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,qe);const Et=B.isCompressedTexture||B.image[0].isCompressedTexture,Ft=B.image[0]&&B.image[0].isDataTexture,Ie=[];for(let Ue=0;Ue<6;Ue++)!Et&&!Ft?Ie[Ue]=w(B.image[Ue],!1,!0,i.maxCubemapSize):Ie[Ue]=Ft?B.image[Ue].image:B.image[Ue],Ie[Ue]=We(B,Ie[Ue]);const cn=Ie[0],Gt=_(cn)||a,Mt=s.convert(B.format,B.colorSpace),dt=s.convert(B.type),tt=b(B.internalFormat,Mt,dt,B.colorSpace),St=a&&B.isVideoTexture!==!0,hn=Ce.__version===void 0||Ne===!0;let In=k(B,cn,Gt);J(n.TEXTURE_CUBE_MAP,B,Gt);let jt;if(Et){St&&hn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,In,tt,cn.width,cn.height);for(let Ue=0;Ue<6;Ue++){jt=Ie[Ue].mipmaps;for(let re=0;re<jt.length;re++){const De=jt[re];B.format!==ls?Mt!==null?St?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,re,0,0,De.width,De.height,Mt,De.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,re,tt,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):St?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,re,0,0,De.width,De.height,Mt,dt,De.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,re,tt,De.width,De.height,0,Mt,dt,De.data)}}}else{jt=B.mipmaps,St&&hn&&(jt.length>0&&In++,t.texStorage2D(n.TEXTURE_CUBE_MAP,In,tt,Ie[0].width,Ie[0].height));for(let Ue=0;Ue<6;Ue++)if(Ft){St?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,0,0,Ie[Ue].width,Ie[Ue].height,Mt,dt,Ie[Ue].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,tt,Ie[Ue].width,Ie[Ue].height,0,Mt,dt,Ie[Ue].data);for(let re=0;re<jt.length;re++){const je=jt[re].image[Ue].image;St?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,re+1,0,0,je.width,je.height,Mt,dt,je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,re+1,tt,je.width,je.height,0,Mt,dt,je.data)}}else{St?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,0,0,Mt,dt,Ie[Ue]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,tt,Mt,dt,Ie[Ue]);for(let re=0;re<jt.length;re++){const De=jt[re];St?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,re+1,0,0,Mt,dt,De.image[Ue]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,re+1,tt,Mt,dt,De.image[Ue])}}}E(B,Gt)&&S(n.TEXTURE_CUBE_MAP),Ce.__version=Me.version,B.onUpdate&&B.onUpdate(B)}G.__version=B.version}function Te(G,B,le,Ne,Me,Ce){const st=s.convert(le.format,le.colorSpace),Fe=s.convert(le.type),qe=b(le.internalFormat,st,Fe,le.colorSpace);if(!r.get(B).__hasExternalTextures){const Ft=Math.max(1,B.width>>Ce),Ie=Math.max(1,B.height>>Ce);Me===n.TEXTURE_3D||Me===n.TEXTURE_2D_ARRAY?t.texImage3D(Me,Ce,qe,Ft,Ie,B.depth,0,st,Fe,null):t.texImage2D(Me,Ce,qe,Ft,Ie,0,st,Fe,null)}t.bindFramebuffer(n.FRAMEBUFFER,G),_e(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ne,Me,r.get(le).__webglTexture,0,Le(B)):(Me===n.TEXTURE_2D||Me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ne,Me,r.get(le).__webglTexture,Ce),t.bindFramebuffer(n.FRAMEBUFFER,null)}function mt(G,B,le){if(n.bindRenderbuffer(n.RENDERBUFFER,G),B.depthBuffer&&!B.stencilBuffer){let Ne=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(le||_e(B)){const Me=B.depthTexture;Me&&Me.isDepthTexture&&(Me.type===Jo?Ne=n.DEPTH_COMPONENT32F:Me.type===bl&&(Ne=n.DEPTH_COMPONENT24));const Ce=Le(B);_e(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ce,Ne,B.width,B.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ce,Ne,B.width,B.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ne,B.width,B.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,G)}else if(B.depthBuffer&&B.stencilBuffer){const Ne=Le(B);le&&_e(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ne,n.DEPTH24_STENCIL8,B.width,B.height):_e(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ne,n.DEPTH24_STENCIL8,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,G)}else{const Ne=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Me=0;Me<Ne.length;Me++){const Ce=Ne[Me],st=s.convert(Ce.format,Ce.colorSpace),Fe=s.convert(Ce.type),qe=b(Ce.internalFormat,st,Fe,Ce.colorSpace),Et=Le(B);le&&_e(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,qe,B.width,B.height):_e(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Et,qe,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,qe,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function vt(G,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,G),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),ne(B.depthTexture,0);const Ne=r.get(B.depthTexture).__webglTexture,Me=Le(B);if(B.depthTexture.format===eu)_e(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ne,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ne,0);else if(B.depthTexture.format===Qh)_e(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ne,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ne,0);else throw new Error("Unknown depthTexture format")}function Ge(G){const B=r.get(G),le=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!B.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");vt(B.__webglFramebuffer,G)}else if(le){B.__webglDepthbuffer=[];for(let Ne=0;Ne<6;Ne++)t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[Ne]),B.__webglDepthbuffer[Ne]=n.createRenderbuffer(),mt(B.__webglDepthbuffer[Ne],G,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer=n.createRenderbuffer(),mt(B.__webglDepthbuffer,G,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function rt(G,B,le){const Ne=r.get(G);B!==void 0&&Te(Ne.__webglFramebuffer,G,G.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),le!==void 0&&Ge(G)}function Q(G){const B=G.texture,le=r.get(G),Ne=r.get(B);G.addEventListener("dispose",P),G.isWebGLMultipleRenderTargets!==!0&&(Ne.__webglTexture===void 0&&(Ne.__webglTexture=n.createTexture()),Ne.__version=B.version,o.memory.textures++);const Me=G.isWebGLCubeRenderTarget===!0,Ce=G.isWebGLMultipleRenderTargets===!0,st=_(G)||a;if(Me){le.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)if(a&&B.mipmaps&&B.mipmaps.length>0){le.__webglFramebuffer[Fe]=[];for(let qe=0;qe<B.mipmaps.length;qe++)le.__webglFramebuffer[Fe][qe]=n.createFramebuffer()}else le.__webglFramebuffer[Fe]=n.createFramebuffer()}else{if(a&&B.mipmaps&&B.mipmaps.length>0){le.__webglFramebuffer=[];for(let Fe=0;Fe<B.mipmaps.length;Fe++)le.__webglFramebuffer[Fe]=n.createFramebuffer()}else le.__webglFramebuffer=n.createFramebuffer();if(Ce)if(i.drawBuffers){const Fe=G.texture;for(let qe=0,Et=Fe.length;qe<Et;qe++){const Ft=r.get(Fe[qe]);Ft.__webglTexture===void 0&&(Ft.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&G.samples>0&&_e(G)===!1){const Fe=Ce?B:[B];le.__webglMultisampledFramebuffer=n.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let qe=0;qe<Fe.length;qe++){const Et=Fe[qe];le.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,le.__webglColorRenderbuffer[qe]);const Ft=s.convert(Et.format,Et.colorSpace),Ie=s.convert(Et.type),cn=b(Et.internalFormat,Ft,Ie,Et.colorSpace,G.isXRRenderTarget===!0),Gt=Le(G);n.renderbufferStorageMultisample(n.RENDERBUFFER,Gt,cn,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,le.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),G.depthBuffer&&(le.__webglDepthRenderbuffer=n.createRenderbuffer(),mt(le.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Me){t.bindTexture(n.TEXTURE_CUBE_MAP,Ne.__webglTexture),J(n.TEXTURE_CUBE_MAP,B,st);for(let Fe=0;Fe<6;Fe++)if(a&&B.mipmaps&&B.mipmaps.length>0)for(let qe=0;qe<B.mipmaps.length;qe++)Te(le.__webglFramebuffer[Fe][qe],G,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,qe);else Te(le.__webglFramebuffer[Fe],G,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0);E(B,st)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ce){const Fe=G.texture;for(let qe=0,Et=Fe.length;qe<Et;qe++){const Ft=Fe[qe],Ie=r.get(Ft);t.bindTexture(n.TEXTURE_2D,Ie.__webglTexture),J(n.TEXTURE_2D,Ft,st),Te(le.__webglFramebuffer,G,Ft,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),E(Ft,st)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let Fe=n.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(a?Fe=G.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Fe,Ne.__webglTexture),J(Fe,B,st),a&&B.mipmaps&&B.mipmaps.length>0)for(let qe=0;qe<B.mipmaps.length;qe++)Te(le.__webglFramebuffer[qe],G,B,n.COLOR_ATTACHMENT0,Fe,qe);else Te(le.__webglFramebuffer,G,B,n.COLOR_ATTACHMENT0,Fe,0);E(B,st)&&S(Fe),t.unbindTexture()}G.depthBuffer&&Ge(G)}function be(G){const B=_(G)||a,le=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Ne=0,Me=le.length;Ne<Me;Ne++){const Ce=le[Ne];if(E(Ce,B)){const st=G.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Fe=r.get(Ce).__webglTexture;t.bindTexture(st,Fe),S(st),t.unbindTexture()}}}function xe(G){if(a&&G.samples>0&&_e(G)===!1){const B=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],le=G.width,Ne=G.height;let Me=n.COLOR_BUFFER_BIT;const Ce=[],st=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=r.get(G),qe=G.isWebGLMultipleRenderTargets===!0;if(qe)for(let Et=0;Et<B.length;Et++)t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Et,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Et,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglFramebuffer);for(let Et=0;Et<B.length;Et++){Ce.push(n.COLOR_ATTACHMENT0+Et),G.depthBuffer&&Ce.push(st);const Ft=Fe.__ignoreDepthValues!==void 0?Fe.__ignoreDepthValues:!1;if(Ft===!1&&(G.depthBuffer&&(Me|=n.DEPTH_BUFFER_BIT),G.stencilBuffer&&(Me|=n.STENCIL_BUFFER_BIT)),qe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Et]),Ft===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[st]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[st])),qe){const Ie=r.get(B[Et]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ie,0)}n.blitFramebuffer(0,0,le,Ne,0,0,le,Ne,Me,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ce)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let Et=0;Et<B.length;Et++){t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Et,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Et]);const Ft=r.get(B[Et]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Et,n.TEXTURE_2D,Ft,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer)}}function Le(G){return Math.min(i.maxSamples,G.samples)}function _e(G){const B=r.get(G);return a&&G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function it(G){const B=o.render.frame;u.get(G)!==B&&(u.set(G,B),G.update())}function We(G,B){const le=G.colorSpace,Ne=G.format,Me=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===i1||le!==qa&&le!==Zs&&(On.getTransfer(le)===Wn?a===!1?e.has("EXT_sRGB")===!0&&Ne===ls?(G.format=i1,G.minFilter=Nr,G.generateMipmaps=!1):B=XI.sRGBToLinear(B):(Ne!==ls||Me!==Oa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),B}this.allocateTextureUnit=$,this.resetTextureUnits=V,this.setTexture2D=ne,this.setTexture2DArray=ae,this.setTexture3D=z,this.setTextureCube=j,this.rebindTextures=rt,this.setupRenderTarget=Q,this.updateRenderTargetMipmap=be,this.updateMultisampleRenderTarget=xe,this.setupDepthRenderbuffer=Ge,this.setupFrameBufferTexture=Te,this.useMultisampledRTT=_e}function mH(n,e,t){const r=t.isWebGL2;function i(s,o=Zs){let a;const l=On.getTransfer(o);if(s===Oa)return n.UNSIGNED_BYTE;if(s===UI)return n.UNSIGNED_SHORT_4_4_4_4;if(s===VI)return n.UNSIGNED_SHORT_5_5_5_1;if(s===k6)return n.BYTE;if(s===L6)return n.SHORT;if(s===fE)return n.UNSIGNED_SHORT;if(s===FI)return n.INT;if(s===bl)return n.UNSIGNED_INT;if(s===Jo)return n.FLOAT;if(s===Ip)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===D6)return n.ALPHA;if(s===ls)return n.RGBA;if(s===O6)return n.LUMINANCE;if(s===F6)return n.LUMINANCE_ALPHA;if(s===eu)return n.DEPTH_COMPONENT;if(s===Qh)return n.DEPTH_STENCIL;if(s===i1)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===U6)return n.RED;if(s===zI)return n.RED_INTEGER;if(s===V6)return n.RG;if(s===BI)return n.RG_INTEGER;if(s===HI)return n.RGBA_INTEGER;if(s===jx||s===Gx||s===Wx||s===$x)if(l===Wn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===jx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Gx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Wx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===$x)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===jx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Gx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Wx)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===$x)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===GM||s===WM||s===$M||s===qM)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===GM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===WM)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$M)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===qM)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===jI)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===XM||s===YM)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===XM)return l===Wn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===YM)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===KM||s===QM||s===ZM||s===JM||s===eC||s===tC||s===nC||s===rC||s===iC||s===sC||s===oC||s===aC||s===lC||s===cC)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===KM)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===QM)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ZM)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===JM)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===eC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===tC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===nC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===rC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===iC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===sC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===oC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===aC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===lC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===cC)return l===Wn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===qx||s===uC||s===hC)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===qx)return l===Wn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===uC)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===hC)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===z6||s===dC||s===fC||s===pC)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===qx)return a.COMPRESSED_RED_RGTC1_EXT;if(s===dC)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===fC)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===pC)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Jc?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class gH extends hi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class jf extends Rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _oe={type:"move"};class mb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new jf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new jf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new jf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const w of e.hand.values()){const _=t.getJointPose(w,r),g=this._getHandJoint(c,w);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=u.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_oe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new jf;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class xoe extends Yl{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,p=null,m=null,v=null;const w=t.getContextAttributes();let _=null,g=null;const E=[],S=[],b=new Re;let k=null;const N=new hi;N.layers.enable(1),N.viewport=new Fn;const M=new hi;M.layers.enable(2),M.viewport=new Fn;const P=[N,M],A=new gH;A.layers.enable(1),A.layers.enable(2);let R=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let oe=E[J];return oe===void 0&&(oe=new mb,E[J]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(J){let oe=E[J];return oe===void 0&&(oe=new mb,E[J]=oe),oe.getGripSpace()},this.getHand=function(J){let oe=E[J];return oe===void 0&&(oe=new mb,E[J]=oe),oe.getHandSpace()};function U(J){const oe=S.indexOf(J.inputSource);if(oe===-1)return;const we=E[oe];we!==void 0&&(we.update(J.inputSource,J.frame,c||o),we.dispatchEvent({type:J.type,data:J.inputSource}))}function V(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",V),i.removeEventListener("inputsourceschange",$);for(let J=0;J<E.length;J++){const oe=S[J];oe!==null&&(S[J]=null,E[J].disconnect(oe))}R=null,O=null,e.setRenderTarget(_),m=null,p=null,f=null,i=null,g=null,te.stop(),r.isPresenting=!1,e.setPixelRatio(k),e.setSize(b.width,b.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){s=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){a=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(J){c=J},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(J){if(i=J,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",V),i.addEventListener("inputsourceschange",$),w.xrCompatible!==!0&&await t.makeXRCompatible(),k=e.getPixelRatio(),e.getSize(b),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const oe={antialias:i.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,oe),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),g=new ua(m.framebufferWidth,m.framebufferHeight,{format:ls,type:Oa,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let oe=null,we=null,Pe=null;w.depth&&(Pe=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,oe=w.stencil?Qh:eu,we=w.stencil?Jc:bl);const Te={colorFormat:t.RGBA8,depthFormat:Pe,scaleFactor:s};f=new XRWebGLBinding(i,t),p=f.createProjectionLayer(Te),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),g=new ua(p.textureWidth,p.textureHeight,{format:ls,type:Oa,depthTexture:new JI(p.textureWidth,p.textureHeight,we,void 0,void 0,void 0,void 0,void 0,void 0,oe),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const mt=e.properties.get(g);mt.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),te.setContext(i),te.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function $(J){for(let oe=0;oe<J.removed.length;oe++){const we=J.removed[oe],Pe=S.indexOf(we);Pe>=0&&(S[Pe]=null,E[Pe].disconnect(we))}for(let oe=0;oe<J.added.length;oe++){const we=J.added[oe];let Pe=S.indexOf(we);if(Pe===-1){for(let mt=0;mt<E.length;mt++)if(mt>=S.length){S.push(we),Pe=mt;break}else if(S[mt]===null){S[mt]=we,Pe=mt;break}if(Pe===-1)break}const Te=E[Pe];Te&&Te.connect(we)}}const Z=new Y,ne=new Y;function ae(J,oe,we){Z.setFromMatrixPosition(oe.matrixWorld),ne.setFromMatrixPosition(we.matrixWorld);const Pe=Z.distanceTo(ne),Te=oe.projectionMatrix.elements,mt=we.projectionMatrix.elements,vt=Te[14]/(Te[10]-1),Ge=Te[14]/(Te[10]+1),rt=(Te[9]+1)/Te[5],Q=(Te[9]-1)/Te[5],be=(Te[8]-1)/Te[0],xe=(mt[8]+1)/mt[0],Le=vt*be,_e=vt*xe,it=Pe/(-be+xe),We=it*-be;oe.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(We),J.translateZ(it),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const G=vt+it,B=Ge+it,le=Le-We,Ne=_e+(Pe-We),Me=rt*Ge/B*G,Ce=Q*Ge/B*G;J.projectionMatrix.makePerspective(le,Ne,Me,Ce,G,B),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}function z(J,oe){oe===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(oe.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(i===null)return;A.near=M.near=N.near=J.near,A.far=M.far=N.far=J.far,(R!==A.near||O!==A.far)&&(i.updateRenderState({depthNear:A.near,depthFar:A.far}),R=A.near,O=A.far);const oe=J.parent,we=A.cameras;z(A,oe);for(let Pe=0;Pe<we.length;Pe++)z(we[Pe],oe);we.length===2?ae(A,N,M):A.projectionMatrix.copy(N.projectionMatrix),j(J,A,oe)};function j(J,oe,we){we===null?J.matrix.copy(oe.matrixWorld):(J.matrix.copy(we.matrixWorld),J.matrix.invert(),J.matrix.multiply(oe.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(oe.projectionMatrix),J.projectionMatrixInverse.copy(oe.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=Np*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(J){l=J,p!==null&&(p.fixedFoveation=J),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=J)};let X=null;function ee(J,oe){if(u=oe.getViewerPose(c||o),v=oe,u!==null){const we=u.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let Pe=!1;we.length!==A.cameras.length&&(A.cameras.length=0,Pe=!0);for(let Te=0;Te<we.length;Te++){const mt=we[Te];let vt=null;if(m!==null)vt=m.getViewport(mt);else{const rt=f.getViewSubImage(p,mt);vt=rt.viewport,Te===0&&(e.setRenderTargetTextures(g,rt.colorTexture,p.ignoreDepthValues?void 0:rt.depthStencilTexture),e.setRenderTarget(g))}let Ge=P[Te];Ge===void 0&&(Ge=new hi,Ge.layers.enable(Te),Ge.viewport=new Fn,P[Te]=Ge),Ge.matrix.fromArray(mt.transform.matrix),Ge.matrix.decompose(Ge.position,Ge.quaternion,Ge.scale),Ge.projectionMatrix.fromArray(mt.projectionMatrix),Ge.projectionMatrixInverse.copy(Ge.projectionMatrix).invert(),Ge.viewport.set(vt.x,vt.y,vt.width,vt.height),Te===0&&(A.matrix.copy(Ge.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),Pe===!0&&A.cameras.push(Ge)}}for(let we=0;we<E.length;we++){const Pe=S[we],Te=E[we];Pe!==null&&Te!==void 0&&Te.update(Pe,oe,c||o)}X&&X(J,oe),oe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:oe}),v=null}const te=new cH;te.setAnimationLoop(ee),this.setAnimationLoop=function(J){X=J},this.dispose=function(){}}}function woe(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function r(_,g){g.color.getRGB(_.fogColor.value,sH(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function i(_,g,E,S,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),f(_,g)):g.isMeshPhongMaterial?(s(_,g),u(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,b)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),w(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,E,S):g.isSpriteMaterial?c(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===us&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===us&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const E=e.get(g).envMap;if(E&&(_.envMap.value=E,_.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,E,S){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*E,_.scale.value=S*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function u(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function f(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,E){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===us&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=E.texture,_.transmissionSamplerSize.value.set(E.width,E.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function w(_,g){const E=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(E.matrixWorld),_.nearDistance.value=E.shadow.camera.near,_.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Eoe(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(E,S){const b=S.program;r.uniformBlockBinding(E,b)}function c(E,S){let b=i[E.id];b===void 0&&(v(E),b=u(E),i[E.id]=b,E.addEventListener("dispose",_));const k=S.program;r.updateUBOMapping(E,k);const N=e.render.frame;s[E.id]!==N&&(p(E),s[E.id]=N)}function u(E){const S=f();E.__bindingPointIndex=S;const b=n.createBuffer(),k=E.__size,N=E.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,k,N),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,b),b}function f(){for(let E=0;E<a;E++)if(o.indexOf(E)===-1)return o.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(E){const S=i[E.id],b=E.uniforms,k=E.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let N=0,M=b.length;N<M;N++){const P=Array.isArray(b[N])?b[N]:[b[N]];for(let A=0,R=P.length;A<R;A++){const O=P[A];if(m(O,N,A,k)===!0){const U=O.__offset,V=Array.isArray(O.value)?O.value:[O.value];let $=0;for(let Z=0;Z<V.length;Z++){const ne=V[Z],ae=w(ne);typeof ne=="number"||typeof ne=="boolean"?(O.__data[0]=ne,n.bufferSubData(n.UNIFORM_BUFFER,U+$,O.__data)):ne.isMatrix3?(O.__data[0]=ne.elements[0],O.__data[1]=ne.elements[1],O.__data[2]=ne.elements[2],O.__data[3]=0,O.__data[4]=ne.elements[3],O.__data[5]=ne.elements[4],O.__data[6]=ne.elements[5],O.__data[7]=0,O.__data[8]=ne.elements[6],O.__data[9]=ne.elements[7],O.__data[10]=ne.elements[8],O.__data[11]=0):(ne.toArray(O.__data,$),$+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,O.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(E,S,b,k){const N=E.value,M=S+"_"+b;if(k[M]===void 0)return typeof N=="number"||typeof N=="boolean"?k[M]=N:k[M]=N.clone(),!0;{const P=k[M];if(typeof N=="number"||typeof N=="boolean"){if(P!==N)return k[M]=N,!0}else if(P.equals(N)===!1)return P.copy(N),!0}return!1}function v(E){const S=E.uniforms;let b=0;const k=16;for(let M=0,P=S.length;M<P;M++){const A=Array.isArray(S[M])?S[M]:[S[M]];for(let R=0,O=A.length;R<O;R++){const U=A[R],V=Array.isArray(U.value)?U.value:[U.value];for(let $=0,Z=V.length;$<Z;$++){const ne=V[$],ae=w(ne),z=b%k;z!==0&&k-z<ae.boundary&&(b+=k-z),U.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=b,b+=ae.storage}}}const N=b%k;return N>0&&(b+=k-N),E.__size=b,E.__cache={},this}function w(E){const S={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(S.boundary=4,S.storage=4):E.isVector2?(S.boundary=8,S.storage=8):E.isVector3||E.isColor?(S.boundary=16,S.storage=12):E.isVector4?(S.boundary=16,S.storage=16):E.isMatrix3?(S.boundary=48,S.storage=48):E.isMatrix4?(S.boundary=64,S.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),S}function _(E){const S=E.target;S.removeEventListener("dispose",_);const b=o.indexOf(S.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function g(){for(const E in i)n.deleteBuffer(i[E]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class nP{constructor(e={}){const{canvas:t=nH(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let w=null,_=null;const g=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Wr,this._useLegacyLights=!1,this.toneMapping=Da,this.toneMappingExposure=1;const S=this;let b=!1,k=0,N=0,M=null,P=-1,A=null;const R=new Fn,O=new Fn;let U=null;const V=new lt(0);let $=0,Z=t.width,ne=t.height,ae=1,z=null,j=null;const X=new Fn(0,0,Z,ne),ee=new Fn(0,0,Z,ne);let te=!1;const J=new Vy;let oe=!1,we=!1,Pe=null;const Te=new Ht,mt=new Re,vt=new Y,Ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function rt(){return M===null?ae:1}let Q=r;function be(q,ce){for(let pe=0;pe<q.length;pe++){const me=q[pe],de=t.getContext(me,ce);if(de!==null)return de}return null}try{const q={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${uE}`),t.addEventListener("webglcontextlost",Ue,!1),t.addEventListener("webglcontextrestored",re,!1),t.addEventListener("webglcontextcreationerror",De,!1),Q===null){const ce=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&ce.shift(),Q=be(ce,q),Q===null)throw be(ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Q instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Q.getShaderPrecisionFormat===void 0&&(Q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let xe,Le,_e,it,We,G,B,le,Ne,Me,Ce,st,Fe,qe,Et,Ft,Ie,cn,Gt,Mt,dt,tt,St,hn;function In(){xe=new Oie(Q),Le=new Iie(Q,xe,e),xe.init(Le),tt=new mH(Q,xe,Le),_e=new voe(Q,xe,Le),it=new Vie(Q),We=new soe,G=new yoe(Q,xe,_e,We,Le,tt,it),B=new Nie(S),le=new Die(S),Ne=new qte(Q,Le),St=new Cie(Q,xe,Ne,Le),Me=new Fie(Q,Ne,it,St),Ce=new jie(Q,Me,Ne,it),Gt=new Hie(Q,Le,G),Ft=new Pie(We),st=new ioe(S,B,le,xe,Le,St,Ft),Fe=new woe(S,We),qe=new aoe,Et=new foe(xe,Le),cn=new Mie(S,B,le,_e,Ce,p,l),Ie=new goe(S,Ce,Le),hn=new Eoe(Q,it,Le,_e),Mt=new Rie(Q,xe,it,Le),dt=new Uie(Q,xe,it,Le),it.programs=st.programs,S.capabilities=Le,S.extensions=xe,S.properties=We,S.renderLists=qe,S.shadowMap=Ie,S.state=_e,S.info=it}In();const jt=new xoe(S,Q);this.xr=jt,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const q=xe.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=xe.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(q){q!==void 0&&(ae=q,this.setSize(Z,ne,!1))},this.getSize=function(q){return q.set(Z,ne)},this.setSize=function(q,ce,pe=!0){if(jt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Z=q,ne=ce,t.width=Math.floor(q*ae),t.height=Math.floor(ce*ae),pe===!0&&(t.style.width=q+"px",t.style.height=ce+"px"),this.setViewport(0,0,q,ce)},this.getDrawingBufferSize=function(q){return q.set(Z*ae,ne*ae).floor()},this.setDrawingBufferSize=function(q,ce,pe){Z=q,ne=ce,ae=pe,t.width=Math.floor(q*pe),t.height=Math.floor(ce*pe),this.setViewport(0,0,q,ce)},this.getCurrentViewport=function(q){return q.copy(R)},this.getViewport=function(q){return q.copy(X)},this.setViewport=function(q,ce,pe,me){q.isVector4?X.set(q.x,q.y,q.z,q.w):X.set(q,ce,pe,me),_e.viewport(R.copy(X).multiplyScalar(ae).floor())},this.getScissor=function(q){return q.copy(ee)},this.setScissor=function(q,ce,pe,me){q.isVector4?ee.set(q.x,q.y,q.z,q.w):ee.set(q,ce,pe,me),_e.scissor(O.copy(ee).multiplyScalar(ae).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function(q){_e.setScissorTest(te=q)},this.setOpaqueSort=function(q){z=q},this.setTransparentSort=function(q){j=q},this.getClearColor=function(q){return q.copy(cn.getClearColor())},this.setClearColor=function(){cn.setClearColor.apply(cn,arguments)},this.getClearAlpha=function(){return cn.getClearAlpha()},this.setClearAlpha=function(){cn.setClearAlpha.apply(cn,arguments)},this.clear=function(q=!0,ce=!0,pe=!0){let me=0;if(q){let de=!1;if(M!==null){const Qe=M.texture.format;de=Qe===HI||Qe===BI||Qe===zI}if(de){const Qe=M.texture.type,ft=Qe===Oa||Qe===bl||Qe===fE||Qe===Jc||Qe===UI||Qe===VI,xt=cn.getClearColor(),Rt=cn.getClearAlpha(),Ut=xt.r,Nt=xt.g,Dt=xt.b;ft?(m[0]=Ut,m[1]=Nt,m[2]=Dt,m[3]=Rt,Q.clearBufferuiv(Q.COLOR,0,m)):(v[0]=Ut,v[1]=Nt,v[2]=Dt,v[3]=Rt,Q.clearBufferiv(Q.COLOR,0,v))}else me|=Q.COLOR_BUFFER_BIT}ce&&(me|=Q.DEPTH_BUFFER_BIT),pe&&(me|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ue,!1),t.removeEventListener("webglcontextrestored",re,!1),t.removeEventListener("webglcontextcreationerror",De,!1),qe.dispose(),Et.dispose(),We.dispose(),B.dispose(),le.dispose(),Ce.dispose(),St.dispose(),hn.dispose(),st.dispose(),jt.dispose(),jt.removeEventListener("sessionstart",Sn),jt.removeEventListener("sessionend",an),Pe&&(Pe.dispose(),Pe=null),Nn.stop()};function Ue(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function re(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const q=it.autoReset,ce=Ie.enabled,pe=Ie.autoUpdate,me=Ie.needsUpdate,de=Ie.type;In(),it.autoReset=q,Ie.enabled=ce,Ie.autoUpdate=pe,Ie.needsUpdate=me,Ie.type=de}function De(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function je(q){const ce=q.target;ce.removeEventListener("dispose",je),Tt(ce)}function Tt(q){ke(q),We.remove(q)}function ke(q){const ce=We.get(q).programs;ce!==void 0&&(ce.forEach(function(pe){st.releaseProgram(pe)}),q.isShaderMaterial&&st.releaseShaderCache(q))}this.renderBufferDirect=function(q,ce,pe,me,de,Qe){ce===null&&(ce=Ge);const ft=de.isMesh&&de.matrixWorld.determinant()<0,xt=Fu(q,ce,pe,me,de);_e.setMaterial(me,ft);let Rt=pe.index,Ut=1;if(me.wireframe===!0){if(Rt=Me.getWireframeAttribute(pe),Rt===void 0)return;Ut=2}const Nt=pe.drawRange,Dt=pe.attributes.position;let Gn=Nt.start*Ut,Tr=(Nt.start+Nt.count)*Ut;Qe!==null&&(Gn=Math.max(Gn,Qe.start*Ut),Tr=Math.min(Tr,(Qe.start+Qe.count)*Ut)),Rt!==null?(Gn=Math.max(Gn,0),Tr=Math.min(Tr,Rt.count)):Dt!=null&&(Gn=Math.max(Gn,0),Tr=Math.min(Tr,Dt.count));const Ln=Tr-Gn;if(Ln<0||Ln===1/0)return;St.setup(de,me,xt,pe,Rt);let br,It=Mt;if(Rt!==null&&(br=Ne.get(Rt),It=dt,It.setIndex(br)),de.isMesh)me.wireframe===!0?(_e.setLineWidth(me.wireframeLinewidth*rt()),It.setMode(Q.LINES)):It.setMode(Q.TRIANGLES);else if(de.isLine){let ot=me.linewidth;ot===void 0&&(ot=1),_e.setLineWidth(ot*rt()),de.isLineSegments?It.setMode(Q.LINES):de.isLineLoop?It.setMode(Q.LINE_LOOP):It.setMode(Q.LINE_STRIP)}else de.isPoints?It.setMode(Q.POINTS):de.isSprite&&It.setMode(Q.TRIANGLES);if(de.isBatchedMesh)It.renderMultiDraw(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount);else if(de.isInstancedMesh)It.renderInstances(Gn,Ln,de.count);else if(pe.isInstancedBufferGeometry){const ot=pe._maxInstanceCount!==void 0?pe._maxInstanceCount:1/0,gs=Math.min(pe.instanceCount,ot);It.renderInstances(Gn,Ln,gs)}else It.render(Gn,Ln)};function _t(q,ce,pe){q.transparent===!0&&q.side===Ma&&q.forceSinglePass===!1?(q.side=us,q.needsUpdate=!0,Ki(q,ce,pe),q.side=Vl,q.needsUpdate=!0,Ki(q,ce,pe),q.side=Ma):Ki(q,ce,pe)}this.compile=function(q,ce,pe=null){pe===null&&(pe=q),_=Et.get(pe),_.init(),E.push(_),pe.traverseVisible(function(de){de.isLight&&de.layers.test(ce.layers)&&(_.pushLight(de),de.castShadow&&_.pushShadow(de))}),q!==pe&&q.traverseVisible(function(de){de.isLight&&de.layers.test(ce.layers)&&(_.pushLight(de),de.castShadow&&_.pushShadow(de))}),_.setupLights(S._useLegacyLights);const me=new Set;return q.traverse(function(de){const Qe=de.material;if(Qe)if(Array.isArray(Qe))for(let ft=0;ft<Qe.length;ft++){const xt=Qe[ft];_t(xt,pe,de),me.add(xt)}else _t(Qe,pe,de),me.add(Qe)}),E.pop(),_=null,me},this.compileAsync=function(q,ce,pe=null){const me=this.compile(q,ce,pe);return new Promise(de=>{function Qe(){if(me.forEach(function(ft){We.get(ft).currentProgram.isReady()&&me.delete(ft)}),me.size===0){de(q);return}setTimeout(Qe,10)}xe.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let At=null;function nn(q){At&&At(q)}function Sn(){Nn.stop()}function an(){Nn.start()}const Nn=new cH;Nn.setAnimationLoop(nn),typeof self<"u"&&Nn.setContext(self),this.setAnimationLoop=function(q){At=q,jt.setAnimationLoop(q),q===null?Nn.stop():Nn.start()},jt.addEventListener("sessionstart",Sn),jt.addEventListener("sessionend",an),this.render=function(q,ce){if(ce!==void 0&&ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),ce.parent===null&&ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),jt.enabled===!0&&jt.isPresenting===!0&&(jt.cameraAutoUpdate===!0&&jt.updateCamera(ce),ce=jt.getCamera()),q.isScene===!0&&q.onBeforeRender(S,q,ce,M),_=Et.get(q,E.length),_.init(),E.push(_),Te.multiplyMatrices(ce.projectionMatrix,ce.matrixWorldInverse),J.setFromProjectionMatrix(Te),we=this.localClippingEnabled,oe=Ft.init(this.clippingPlanes,we),w=qe.get(q,g.length),w.init(),g.push(w),Bn(q,ce,0,S.sortObjects),w.finish(),S.sortObjects===!0&&w.sort(z,j),this.info.render.frame++,oe===!0&&Ft.beginShadows();const pe=_.state.shadowsArray;if(Ie.render(pe,q,ce),oe===!0&&Ft.endShadows(),this.info.autoReset===!0&&this.info.reset(),cn.render(w,q),_.setupLights(S._useLegacyLights),ce.isArrayCamera){const me=ce.cameras;for(let de=0,Qe=me.length;de<Qe;de++){const ft=me[de];fi(w,q,ft,ft.viewport)}}else fi(w,q,ce);M!==null&&(G.updateMultisampleRenderTarget(M),G.updateRenderTargetMipmap(M)),q.isScene===!0&&q.onAfterRender(S,q,ce),St.resetDefaultState(),P=-1,A=null,E.pop(),E.length>0?_=E[E.length-1]:_=null,g.pop(),g.length>0?w=g[g.length-1]:w=null};function Bn(q,ce,pe,me){if(q.visible===!1)return;if(q.layers.test(ce.layers)){if(q.isGroup)pe=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(ce);else if(q.isLight)_.pushLight(q),q.castShadow&&_.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||J.intersectsSprite(q)){me&&vt.setFromMatrixPosition(q.matrixWorld).applyMatrix4(Te);const ft=Ce.update(q),xt=q.material;xt.visible&&w.push(q,ft,xt,pe,vt.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||J.intersectsObject(q))){const ft=Ce.update(q),xt=q.material;if(me&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),vt.copy(q.boundingSphere.center)):(ft.boundingSphere===null&&ft.computeBoundingSphere(),vt.copy(ft.boundingSphere.center)),vt.applyMatrix4(q.matrixWorld).applyMatrix4(Te)),Array.isArray(xt)){const Rt=ft.groups;for(let Ut=0,Nt=Rt.length;Ut<Nt;Ut++){const Dt=Rt[Ut],Gn=xt[Dt.materialIndex];Gn&&Gn.visible&&w.push(q,ft,Gn,pe,vt.z,Dt)}}else xt.visible&&w.push(q,ft,xt,pe,vt.z,null)}}const Qe=q.children;for(let ft=0,xt=Qe.length;ft<xt;ft++)Bn(Qe[ft],ce,pe,me)}function fi(q,ce,pe,me){const de=q.opaque,Qe=q.transmissive,ft=q.transparent;_.setupLightsView(pe),oe===!0&&Ft.setGlobalState(S.clippingPlanes,pe),Qe.length>0&&Za(de,Qe,ce,pe),me&&_e.viewport(R.copy(me)),de.length>0&&lo(de,ce,pe),Qe.length>0&&lo(Qe,ce,pe),ft.length>0&&lo(ft,ce,pe),_e.buffers.depth.setTest(!0),_e.buffers.depth.setMask(!0),_e.buffers.color.setMask(!0),_e.setPolygonOffset(!1)}function Za(q,ce,pe,me){if((pe.isScene===!0?pe.overrideMaterial:null)!==null)return;const Qe=Le.isWebGL2;Pe===null&&(Pe=new ua(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")?Ip:Oa,minFilter:gu,samples:Qe?4:0})),S.getDrawingBufferSize(mt),Qe?Pe.setSize(mt.x,mt.y):Pe.setSize(s1(mt.x),s1(mt.y));const ft=S.getRenderTarget();S.setRenderTarget(Pe),S.getClearColor(V),$=S.getClearAlpha(),$<1&&S.setClearColor(16777215,.5),S.clear();const xt=S.toneMapping;S.toneMapping=Da,lo(q,pe,me),G.updateMultisampleRenderTarget(Pe),G.updateRenderTargetMipmap(Pe);let Rt=!1;for(let Ut=0,Nt=ce.length;Ut<Nt;Ut++){const Dt=ce[Ut],Gn=Dt.object,Tr=Dt.geometry,Ln=Dt.material,br=Dt.group;if(Ln.side===Ma&&Gn.layers.test(me.layers)){const It=Ln.side;Ln.side=us,Ln.needsUpdate=!0,ma(Gn,pe,me,Tr,Ln,br),Ln.side=It,Ln.needsUpdate=!0,Rt=!0}}Rt===!0&&(G.updateMultisampleRenderTarget(Pe),G.updateRenderTargetMipmap(Pe)),S.setRenderTarget(ft),S.setClearColor(V,$),S.toneMapping=xt}function lo(q,ce,pe){const me=ce.isScene===!0?ce.overrideMaterial:null;for(let de=0,Qe=q.length;de<Qe;de++){const ft=q[de],xt=ft.object,Rt=ft.geometry,Ut=me===null?ft.material:me,Nt=ft.group;xt.layers.test(pe.layers)&&ma(xt,ce,pe,Rt,Ut,Nt)}}function ma(q,ce,pe,me,de,Qe){q.onBeforeRender(S,ce,pe,me,de,Qe),q.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),de.onBeforeRender(S,ce,pe,me,q,Qe),de.transparent===!0&&de.side===Ma&&de.forceSinglePass===!1?(de.side=us,de.needsUpdate=!0,S.renderBufferDirect(pe,ce,me,de,q,Qe),de.side=Vl,de.needsUpdate=!0,S.renderBufferDirect(pe,ce,me,de,q,Qe),de.side=Ma):S.renderBufferDirect(pe,ce,me,de,q,Qe),q.onAfterRender(S,ce,pe,me,de,Qe)}function Ki(q,ce,pe){ce.isScene!==!0&&(ce=Ge);const me=We.get(q),de=_.state.lights,Qe=_.state.shadowsArray,ft=de.state.version,xt=st.getParameters(q,de.state,Qe,ce,pe),Rt=st.getProgramCacheKey(xt);let Ut=me.programs;me.environment=q.isMeshStandardMaterial?ce.environment:null,me.fog=ce.fog,me.envMap=(q.isMeshStandardMaterial?le:B).get(q.envMap||me.environment),Ut===void 0&&(q.addEventListener("dispose",je),Ut=new Map,me.programs=Ut);let Nt=Ut.get(Rt);if(Nt!==void 0){if(me.currentProgram===Nt&&me.lightsStateVersion===ft)return Ou(q,xt),Nt}else xt.uniforms=st.getUniforms(q),q.onBuild(pe,xt,S),q.onBeforeCompile(xt,S),Nt=st.acquireProgram(xt,Rt),Ut.set(Rt,Nt),me.uniforms=xt.uniforms;const Dt=me.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(Dt.clippingPlanes=Ft.uniform),Ou(q,xt),me.needsLights=xd(q),me.lightsStateVersion=ft,me.needsLights&&(Dt.ambientLightColor.value=de.state.ambient,Dt.lightProbe.value=de.state.probe,Dt.directionalLights.value=de.state.directional,Dt.directionalLightShadows.value=de.state.directionalShadow,Dt.spotLights.value=de.state.spot,Dt.spotLightShadows.value=de.state.spotShadow,Dt.rectAreaLights.value=de.state.rectArea,Dt.ltc_1.value=de.state.rectAreaLTC1,Dt.ltc_2.value=de.state.rectAreaLTC2,Dt.pointLights.value=de.state.point,Dt.pointLightShadows.value=de.state.pointShadow,Dt.hemisphereLights.value=de.state.hemi,Dt.directionalShadowMap.value=de.state.directionalShadowMap,Dt.directionalShadowMatrix.value=de.state.directionalShadowMatrix,Dt.spotShadowMap.value=de.state.spotShadowMap,Dt.spotLightMatrix.value=de.state.spotLightMatrix,Dt.spotLightMap.value=de.state.spotLightMap,Dt.pointShadowMap.value=de.state.pointShadowMap,Dt.pointShadowMatrix.value=de.state.pointShadowMatrix),me.currentProgram=Nt,me.uniformsList=null,Nt}function Du(q){if(q.uniformsList===null){const ce=q.currentProgram.getUniforms();q.uniformsList=Yx.seqWithValue(ce.seq,q.uniforms)}return q.uniformsList}function Ou(q,ce){const pe=We.get(q);pe.outputColorSpace=ce.outputColorSpace,pe.batching=ce.batching,pe.instancing=ce.instancing,pe.instancingColor=ce.instancingColor,pe.skinning=ce.skinning,pe.morphTargets=ce.morphTargets,pe.morphNormals=ce.morphNormals,pe.morphColors=ce.morphColors,pe.morphTargetsCount=ce.morphTargetsCount,pe.numClippingPlanes=ce.numClippingPlanes,pe.numIntersection=ce.numClipIntersection,pe.vertexAlphas=ce.vertexAlphas,pe.vertexTangents=ce.vertexTangents,pe.toneMapping=ce.toneMapping}function Fu(q,ce,pe,me,de){ce.isScene!==!0&&(ce=Ge),G.resetTextureUnits();const Qe=ce.fog,ft=me.isMeshStandardMaterial?ce.environment:null,xt=M===null?S.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:qa,Rt=(me.isMeshStandardMaterial?le:B).get(me.envMap||ft),Ut=me.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,Nt=!!pe.attributes.tangent&&(!!me.normalMap||me.anisotropy>0),Dt=!!pe.morphAttributes.position,Gn=!!pe.morphAttributes.normal,Tr=!!pe.morphAttributes.color;let Ln=Da;me.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Ln=S.toneMapping);const br=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,It=br!==void 0?br.length:0,ot=We.get(me),gs=_.state.lights;if(oe===!0&&(we===!0||q!==A)){const lr=q===A&&me.id===P;Ft.setState(me,q,lr)}let Ot=!1;me.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==gs.state.version||ot.outputColorSpace!==xt||de.isBatchedMesh&&ot.batching===!1||!de.isBatchedMesh&&ot.batching===!0||de.isInstancedMesh&&ot.instancing===!1||!de.isInstancedMesh&&ot.instancing===!0||de.isSkinnedMesh&&ot.skinning===!1||!de.isSkinnedMesh&&ot.skinning===!0||de.isInstancedMesh&&ot.instancingColor===!0&&de.instanceColor===null||de.isInstancedMesh&&ot.instancingColor===!1&&de.instanceColor!==null||ot.envMap!==Rt||me.fog===!0&&ot.fog!==Qe||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==Ft.numPlanes||ot.numIntersection!==Ft.numIntersection)||ot.vertexAlphas!==Ut||ot.vertexTangents!==Nt||ot.morphTargets!==Dt||ot.morphNormals!==Gn||ot.morphColors!==Tr||ot.toneMapping!==Ln||Le.isWebGL2===!0&&ot.morphTargetsCount!==It)&&(Ot=!0):(Ot=!0,ot.__version=me.version);let _n=ot.currentProgram;Ot===!0&&(_n=Ki(me,ce,de));let Ti=!1,ni=!1,vr=!1;const Vt=_n.getUniforms(),Qi=ot.uniforms;if(_e.useProgram(_n.program)&&(Ti=!0,ni=!0,vr=!0),me.id!==P&&(P=me.id,ni=!0),Ti||A!==q){Vt.setValue(Q,"projectionMatrix",q.projectionMatrix),Vt.setValue(Q,"viewMatrix",q.matrixWorldInverse);const lr=Vt.map.cameraPosition;lr!==void 0&&lr.setValue(Q,vt.setFromMatrixPosition(q.matrixWorld)),Le.logarithmicDepthBuffer&&Vt.setValue(Q,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&Vt.setValue(Q,"isOrthographic",q.isOrthographicCamera===!0),A!==q&&(A=q,ni=!0,vr=!0)}if(de.isSkinnedMesh){Vt.setOptional(Q,de,"bindMatrix"),Vt.setOptional(Q,de,"bindMatrixInverse");const lr=de.skeleton;lr&&(Le.floatVertexTextures?(lr.boneTexture===null&&lr.computeBoneTexture(),Vt.setValue(Q,"boneTexture",lr.boneTexture,G)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}de.isBatchedMesh&&(Vt.setOptional(Q,de,"batchingTexture"),Vt.setValue(Q,"batchingTexture",de._matricesTexture,G));const co=pe.morphAttributes;if((co.position!==void 0||co.normal!==void 0||co.color!==void 0&&Le.isWebGL2===!0)&&Gt.update(de,pe,_n),(ni||ot.receiveShadow!==de.receiveShadow)&&(ot.receiveShadow=de.receiveShadow,Vt.setValue(Q,"receiveShadow",de.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(Qi.envMap.value=Rt,Qi.flipEnvMap.value=Rt.isCubeTexture&&Rt.isRenderTargetTexture===!1?-1:1),ni&&(Vt.setValue(Q,"toneMappingExposure",S.toneMappingExposure),ot.needsLights&&Uu(Qi,vr),Qe&&me.fog===!0&&Fe.refreshFogUniforms(Qi,Qe),Fe.refreshMaterialUniforms(Qi,me,ae,ne,Pe),Yx.upload(Q,Du(ot),Qi,G)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(Yx.upload(Q,Du(ot),Qi,G),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&Vt.setValue(Q,"center",de.center),Vt.setValue(Q,"modelViewMatrix",de.modelViewMatrix),Vt.setValue(Q,"normalMatrix",de.normalMatrix),Vt.setValue(Q,"modelMatrix",de.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const lr=me.uniformsGroups;for(let Ql=0,bi=lr.length;Ql<bi;Ql++)if(Le.isWebGL2){const wd=lr[Ql];hn.update(wd,_n),hn.bind(wd,_n)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return _n}function Uu(q,ce){q.ambientLightColor.needsUpdate=ce,q.lightProbe.needsUpdate=ce,q.directionalLights.needsUpdate=ce,q.directionalLightShadows.needsUpdate=ce,q.pointLights.needsUpdate=ce,q.pointLightShadows.needsUpdate=ce,q.spotLights.needsUpdate=ce,q.spotLightShadows.needsUpdate=ce,q.rectAreaLights.needsUpdate=ce,q.hemisphereLights.needsUpdate=ce}function xd(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(q,ce,pe){We.get(q.texture).__webglTexture=ce,We.get(q.depthTexture).__webglTexture=pe;const me=We.get(q);me.__hasExternalTextures=!0,me.__hasExternalTextures&&(me.__autoAllocateDepthBuffer=pe===void 0,me.__autoAllocateDepthBuffer||xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),me.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(q,ce){const pe=We.get(q);pe.__webglFramebuffer=ce,pe.__useDefaultFramebuffer=ce===void 0},this.setRenderTarget=function(q,ce=0,pe=0){M=q,k=ce,N=pe;let me=!0,de=null,Qe=!1,ft=!1;if(q){const Rt=We.get(q);Rt.__useDefaultFramebuffer!==void 0?(_e.bindFramebuffer(Q.FRAMEBUFFER,null),me=!1):Rt.__webglFramebuffer===void 0?G.setupRenderTarget(q):Rt.__hasExternalTextures&&G.rebindTextures(q,We.get(q.texture).__webglTexture,We.get(q.depthTexture).__webglTexture);const Ut=q.texture;(Ut.isData3DTexture||Ut.isDataArrayTexture||Ut.isCompressedArrayTexture)&&(ft=!0);const Nt=We.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Nt[ce])?de=Nt[ce][pe]:de=Nt[ce],Qe=!0):Le.isWebGL2&&q.samples>0&&G.useMultisampledRTT(q)===!1?de=We.get(q).__webglMultisampledFramebuffer:Array.isArray(Nt)?de=Nt[pe]:de=Nt,R.copy(q.viewport),O.copy(q.scissor),U=q.scissorTest}else R.copy(X).multiplyScalar(ae).floor(),O.copy(ee).multiplyScalar(ae).floor(),U=te;if(_e.bindFramebuffer(Q.FRAMEBUFFER,de)&&Le.drawBuffers&&me&&_e.drawBuffers(q,de),_e.viewport(R),_e.scissor(O),_e.setScissorTest(U),Qe){const Rt=We.get(q.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Rt.__webglTexture,pe)}else if(ft){const Rt=We.get(q.texture),Ut=ce||0;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Rt.__webglTexture,pe||0,Ut)}P=-1},this.readRenderTargetPixels=function(q,ce,pe,me,de,Qe,ft){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let xt=We.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ft!==void 0&&(xt=xt[ft]),xt){_e.bindFramebuffer(Q.FRAMEBUFFER,xt);try{const Rt=q.texture,Ut=Rt.format,Nt=Rt.type;if(Ut!==ls&&tt.convert(Ut)!==Q.getParameter(Q.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Dt=Nt===Ip&&(xe.has("EXT_color_buffer_half_float")||Le.isWebGL2&&xe.has("EXT_color_buffer_float"));if(Nt!==Oa&&tt.convert(Nt)!==Q.getParameter(Q.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Nt===Jo&&(Le.isWebGL2||xe.has("OES_texture_float")||xe.has("WEBGL_color_buffer_float")))&&!Dt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ce>=0&&ce<=q.width-me&&pe>=0&&pe<=q.height-de&&Q.readPixels(ce,pe,me,de,tt.convert(Ut),tt.convert(Nt),Qe)}finally{const Rt=M!==null?We.get(M).__webglFramebuffer:null;_e.bindFramebuffer(Q.FRAMEBUFFER,Rt)}}},this.copyFramebufferToTexture=function(q,ce,pe=0){const me=Math.pow(2,-pe),de=Math.floor(ce.image.width*me),Qe=Math.floor(ce.image.height*me);G.setTexture2D(ce,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,pe,0,0,q.x,q.y,de,Qe),_e.unbindTexture()},this.copyTextureToTexture=function(q,ce,pe,me=0){const de=ce.image.width,Qe=ce.image.height,ft=tt.convert(pe.format),xt=tt.convert(pe.type);G.setTexture2D(pe,0),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,pe.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,pe.unpackAlignment),ce.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,me,q.x,q.y,de,Qe,ft,xt,ce.image.data):ce.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,me,q.x,q.y,ce.mipmaps[0].width,ce.mipmaps[0].height,ft,ce.mipmaps[0].data):Q.texSubImage2D(Q.TEXTURE_2D,me,q.x,q.y,ft,xt,ce.image),me===0&&pe.generateMipmaps&&Q.generateMipmap(Q.TEXTURE_2D),_e.unbindTexture()},this.copyTextureToTexture3D=function(q,ce,pe,me,de=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Qe=q.max.x-q.min.x+1,ft=q.max.y-q.min.y+1,xt=q.max.z-q.min.z+1,Rt=tt.convert(me.format),Ut=tt.convert(me.type);let Nt;if(me.isData3DTexture)G.setTexture3D(me,0),Nt=Q.TEXTURE_3D;else if(me.isDataArrayTexture||me.isCompressedArrayTexture)G.setTexture2DArray(me,0),Nt=Q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,me.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,me.unpackAlignment);const Dt=Q.getParameter(Q.UNPACK_ROW_LENGTH),Gn=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Tr=Q.getParameter(Q.UNPACK_SKIP_PIXELS),Ln=Q.getParameter(Q.UNPACK_SKIP_ROWS),br=Q.getParameter(Q.UNPACK_SKIP_IMAGES),It=pe.isCompressedTexture?pe.mipmaps[de]:pe.image;Q.pixelStorei(Q.UNPACK_ROW_LENGTH,It.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,It.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,q.min.x),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,q.min.y),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,q.min.z),pe.isDataTexture||pe.isData3DTexture?Q.texSubImage3D(Nt,de,ce.x,ce.y,ce.z,Qe,ft,xt,Rt,Ut,It.data):pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Q.compressedTexSubImage3D(Nt,de,ce.x,ce.y,ce.z,Qe,ft,xt,Rt,It.data)):Q.texSubImage3D(Nt,de,ce.x,ce.y,ce.z,Qe,ft,xt,Rt,Ut,It),Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Dt),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Gn),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Tr),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Ln),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,br),de===0&&me.generateMipmaps&&Q.generateMipmap(Nt),_e.unbindTexture()},this.initTexture=function(q){q.isCubeTexture?G.setTextureCube(q,0):q.isData3DTexture?G.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?G.setTexture2DArray(q,0):G.setTexture2D(q,0),_e.unbindTexture()},this.resetState=function(){k=0,N=0,M=null,_e.reset(),St.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ea}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===mE?"display-p3":"srgb",t.unpackColorSpace=On.workingColorSpace===Dy?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Wr?tu:WI}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===tu?Wr:qa}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class vH extends nP{}vH.prototype.isWebGL1Renderer=!0;class yE{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new lt(e),this.density=t}clone(){return new yE(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class _E{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new lt(e),this.near=t,this.far=r}clone(){return new _E(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class rP extends Rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class xE{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=qv,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ro()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ro()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ro()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ns=new Y;class Zh{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ns.fromBufferAttribute(this,t),ns.applyMatrix4(e),this.setXYZ(t,ns.x,ns.y,ns.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ns.fromBufferAttribute(this,t),ns.applyNormalMatrix(e),this.setXYZ(t,ns.x,ns.y,ns.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ns.fromBufferAttribute(this,t),ns.transformDirection(e),this.setXYZ(t,ns.x,ns.y,ns.z);return this}setX(e,t){return this.normalized&&(t=tn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Is(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Is(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Is(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Is(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array),s=tn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Vn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class iP extends Yi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let cf;const ag=new Y,uf=new Y,hf=new Y,df=new Re,lg=new Re,yH=new Ht,W0=new Y,cg=new Y,$0=new Y,AO=new Re,gb=new Re,MO=new Re;class _H extends Rn{constructor(e=new iP){if(super(),this.isSprite=!0,this.type="Sprite",cf===void 0){cf=new on;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new xE(t,5);cf.setIndex([0,1,2,0,2,3]),cf.setAttribute("position",new Zh(r,3,0,!1)),cf.setAttribute("uv",new Zh(r,2,3,!1))}this.geometry=cf,this.material=e,this.center=new Re(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),uf.setFromMatrixScale(this.matrixWorld),yH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),hf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&uf.multiplyScalar(-hf.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;q0(W0.set(-.5,-.5,0),hf,o,uf,i,s),q0(cg.set(.5,-.5,0),hf,o,uf,i,s),q0($0.set(.5,.5,0),hf,o,uf,i,s),AO.set(0,0),gb.set(1,0),MO.set(1,1);let a=e.ray.intersectTriangle(W0,cg,$0,!1,ag);if(a===null&&(q0(cg.set(-.5,.5,0),hf,o,uf,i,s),gb.set(0,1),a=e.ray.intersectTriangle(W0,$0,cg,!1,ag),a===null))return;const l=e.ray.origin.distanceTo(ag);l<e.near||l>e.far||t.push({distance:l,point:ag.clone(),uv:Rs.getInterpolation(ag,W0,cg,$0,AO,gb,MO,new Re),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function q0(n,e,t,r,i,s){df.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(lg.x=s*df.x-i*df.y,lg.y=i*df.x+s*df.y):lg.copy(df),n.copy(e),n.x+=lg.x,n.y+=lg.y,n.applyMatrix4(yH)}const X0=new Y,CO=new Y;class xH extends Rn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){X0.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(X0);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){X0.setFromMatrixPosition(e.matrixWorld),CO.setFromMatrixPosition(this.matrixWorld);const r=X0.distanceTo(CO)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const RO=new Y,IO=new Fn,PO=new Fn,Soe=new Y,NO=new Ht,Y0=new Y,vb=new $i,kO=new Ht,yb=new rm;class wH extends Yr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=jM,this.bindMatrix=new Ht,this.bindMatrixInverse=new Ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new hs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Y0),this.boundingBox.expandByPoint(Y0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new $i),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Y0),this.boundingSphere.expandByPoint(Y0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vb.copy(this.boundingSphere),vb.applyMatrix4(i),e.ray.intersectsSphere(vb)!==!1&&(kO.copy(i).invert(),yb.copy(e.ray).applyMatrix4(kO),!(this.boundingBox!==null&&yb.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,yb)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Fn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===jM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===N6?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;IO.fromBufferAttribute(i.attributes.skinIndex,e),PO.fromBufferAttribute(i.attributes.skinWeight,e),RO.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=PO.getComponent(s);if(o!==0){const a=IO.getComponent(s);NO.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Soe.copy(RO).applyMatrix4(NO),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class sP extends Rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Vh extends kr{constructor(e=null,t=1,r=1,i,s,o,a,l,c=Ir,u=Ir,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const LO=new Ht,Toe=new Ht;class wE{constructor(e=[],t=[]){this.uuid=ro(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Ht;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Toe;LO.multiplyMatrices(a,t[s]),LO.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new wE(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Vh(t,e,e,ls,Jo);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new sP),this.bones.push(o),this.boneInverses.push(new Ht().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Lp extends Vn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ff=new Ht,DO=new Ht,K0=[],OO=new hs,boe=new Ht,ug=new Yr,hg=new $i;class EH extends Yr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Lp(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,boe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new hs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,ff),OO.copy(e.boundingBox).applyMatrix4(ff),this.boundingBox.union(OO)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new $i),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,ff),hg.copy(e.boundingSphere).applyMatrix4(ff),this.boundingSphere.union(hg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(ug.geometry=this.geometry,ug.material=this.material,ug.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),hg.copy(this.boundingSphere),hg.applyMatrix4(r),e.ray.intersectsSphere(hg)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,ff),DO.multiplyMatrices(r,ff),ug.matrixWorld=DO,ug.raycast(e,K0);for(let o=0,a=K0.length;o<a;o++){const l=K0[o];l.instanceId=s,l.object=this,t.push(l)}K0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Lp(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Aoe(n,e){return n.z-e.z}function Moe(n,e){return e.z-n.z}class Coe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const pf="batchId",pc=new Ht,FO=new Ht,Roe=new Ht,UO=new Ht,_b=new Vy,Q0=new hs,sh=new $i,dg=new Y,xb=new Coe,Ui=new Yr,Z0=[];function Ioe(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class SH extends Yr{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new on,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Vh(t,e,e,ls,Jo);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:f}=l,p=new c.constructor(r*u),m=new l.constructor(p,u,f);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Vn(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(pf,new Vn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(pf))throw new Error(`BatchedMesh: Geometry cannot use attribute "${pf}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===pf)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hs);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,pc),this.getBoundingBoxAt(i,Q0).applyMatrix4(pc),t.union(Q0))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $i);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,pc),this.getBoundingSphereAt(i,sh).applyMatrix4(pc),t.union(sh))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;f.push(!0),p.push(!0);const w=this._geometryCount;this._geometryCount++,Roe.toArray(v,w*16),m.needsUpdate=!0,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new hs,sphereInitialized:!1,sphere:new $i});const _=this.geometry.getAttribute(pf);for(let g=0;g<i.vertexCount;g++)_.setX(i.vertexStart+g,w);return _.needsUpdate=!0,this.setGeometryAt(w,e),w}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===pf)continue;const v=t.getAttribute(m),w=r.getAttribute(m);Ioe(v,w,l);const _=v.itemSize;for(let g=v.count,E=c;g<E;g++){const S=l+g;for(let b=0;b<_;b++)w.setComponent(S,b,0)}w.needsUpdate=!0}if(i){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,w=a.indexCount;v<w;v++)s.setX(m+v,l);s.needsUpdate=!0}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,f=c.start+c.count;u<f;u++){let p=u;a&&(p=a.getX(p)),s.expandByPoint(dg.fromBufferAttribute(l,p))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Q0),Q0.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;a&&(m=a.getX(m)),dg.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(dg))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Ui.material=this.material,Ui.geometry.index=l.index,Ui.geometry.attributes=l.attributes,Ui.geometry.boundingBox===null&&(Ui.geometry.boundingBox=new hs),Ui.geometry.boundingSphere===null&&(Ui.geometry.boundingSphere=new $i);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];Ui.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,Ui.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Ui.geometry.boundingBox),this.getBoundingSphereAt(c,Ui.geometry.boundingSphere),Ui.raycast(e,Z0);for(let f=0,p=Z0.length;f<p;f++){const m=Z0[f];m.object=this,m.batchId=c,t.push(m)}Z0.length=0}Ui.material=null,Ui.geometry.index=null,Ui.geometry.attributes={},Ui.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._drawRanges,p=this.perObjectFrustumCulled;p&&(UO.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),_b.setFromProjectionMatrix(UO,e.isWebGPURenderer?Pp:ea));let m=0;if(this.sortObjects){FO.copy(this.matrixWorld).invert(),dg.setFromMatrixPosition(r.matrixWorld).applyMatrix4(FO);for(let _=0,g=l.length;_<g;_++)if(l[_]){this.getMatrixAt(_,pc),this.getBoundingSphereAt(_,sh).applyMatrix4(pc);let E=!1;if(p&&(E=!_b.intersectsSphere(sh)),!E){const S=dg.distanceTo(sh.center);xb.push(f[_],S)}}const v=xb.list,w=this.customSort;w===null?v.sort(s.transparent?Moe:Aoe):w.call(this,v,r);for(let _=0,g=v.length;_<g;_++){const E=v[_];c[m]=E.start*a,u[m]=E.count,m++}xb.reset()}else for(let v=0,w=l.length;v<w;v++)if(l[v]){let _=!1;if(p&&(this.getMatrixAt(v,pc),this.getBoundingSphereAt(v,sh).applyMatrix4(pc),_=!_b.intersectsSphere(sh)),!_){const g=f[v];c[m]=g.start*a,u[m]=g.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class ms extends Yi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new lt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const VO=new Y,zO=new Y,BO=new Ht,wb=new rm,J0=new $i;class vu extends Rn{constructor(e=new on,t=new ms){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)VO.fromBufferAttribute(t,i-1),zO.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=VO.distanceTo(zO);e.setAttribute("lineDistance",new gt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),J0.copy(r.boundingSphere),J0.applyMatrix4(i),J0.radius+=s,e.ray.intersectsSphere(J0)===!1)return;BO.copy(i).invert(),wb.copy(e.ray).applyMatrix4(BO);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new Y,u=new Y,f=new Y,p=new Y,m=this.isLineSegments?2:1,v=r.index,_=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),E=Math.min(v.count,o.start+o.count);for(let S=g,b=E-1;S<b;S+=m){const k=v.getX(S),N=v.getX(S+1);if(c.fromBufferAttribute(_,k),u.fromBufferAttribute(_,N),wb.distanceSqToSegment(c,u,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(p);P<e.near||P>e.far||t.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),E=Math.min(_.count,o.start+o.count);for(let S=g,b=E-1;S<b;S+=m){if(c.fromBufferAttribute(_,S),u.fromBufferAttribute(_,S+1),wb.distanceSqToSegment(c,u,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(p);N<e.near||N>e.far||t.push({distance:N,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const HO=new Y,jO=new Y;class Qa extends vu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)HO.fromBufferAttribute(t,i),jO.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+HO.distanceTo(jO);e.setAttribute("lineDistance",new gt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class TH extends vu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class oP extends Yi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const GO=new Ht,xC=new rm,ex=new $i,tx=new Y;class bH extends Rn{constructor(e=new on,t=new oP){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ex.copy(r.boundingSphere),ex.applyMatrix4(i),ex.radius+=s,e.ray.intersectsSphere(ex)===!1)return;GO.copy(i).invert(),xC.copy(e.ray).applyMatrix4(GO);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,w=m;v<w;v++){const _=c.getX(v);tx.fromBufferAttribute(f,_),WO(tx,_,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,w=m;v<w;v++)tx.fromBufferAttribute(f,v),WO(tx,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function WO(n,e,t,r,i,s,o){const a=xC.distanceSqToPoint(n);if(a<t){const l=new Y;xC.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Poe extends kr{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Nr,this.magFilter=s!==void 0?s:Nr,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Noe extends kr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ir,this.minFilter=Ir,this.generateMipmaps=!1,this.needsUpdate=!0}}class EE extends kr{constructor(e,t,r,i,s,o,a,l,c,u,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class koe extends EE{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Gi}}class Loe extends EE{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,zl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Doe extends kr{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class fa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Re:new Y);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Y,i=[],s=[],o=[],a=new Y,l=new Ht;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new Y)}s[0]=new Y,o[0]=new Y;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Sr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Sr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class SE extends fa{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Re,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*f+this.aX,c=p*f+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class AH extends SE{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function aP(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+f)+(l-a)/f;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const nx=new Y,Eb=new aP,Sb=new aP,Tb=new aP;class MH extends fa{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Y){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(nx.subVectors(i[0],i[1]).add(i[0]),c=nx);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(nx.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=nx),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),w=Math.pow(f.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(u),m);w<1e-4&&(w=1),v<1e-4&&(v=w),_<1e-4&&(_=w),Eb.initNonuniformCatmullRom(c.x,f.x,p.x,u.x,v,w,_),Sb.initNonuniformCatmullRom(c.y,f.y,p.y,u.y,v,w,_),Tb.initNonuniformCatmullRom(c.z,f.z,p.z,u.z,v,w,_)}else this.curveType==="catmullrom"&&(Eb.initCatmullRom(c.x,f.x,p.x,u.x,this.tension),Sb.initCatmullRom(c.y,f.y,p.y,u.y,this.tension),Tb.initCatmullRom(c.z,f.z,p.z,u.z,this.tension));return r.set(Eb.calc(l),Sb.calc(l),Tb.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Y().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function $O(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Ooe(n,e){const t=1-n;return t*t*e}function Foe(n,e){return 2*(1-n)*n*e}function Uoe(n,e){return n*n*e}function ev(n,e,t,r){return Ooe(n,e)+Foe(n,t)+Uoe(n,r)}function Voe(n,e){const t=1-n;return t*t*t*e}function zoe(n,e){const t=1-n;return 3*t*t*n*e}function Boe(n,e){return 3*(1-n)*n*n*e}function Hoe(n,e){return n*n*n*e}function tv(n,e,t,r,i){return Voe(n,e)+zoe(n,t)+Boe(n,r)+Hoe(n,i)}class lP extends fa{constructor(e=new Re,t=new Re,r=new Re,i=new Re){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Re){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(tv(e,i.x,s.x,o.x,a.x),tv(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CH extends fa{constructor(e=new Y,t=new Y,r=new Y,i=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Y){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(tv(e,i.x,s.x,o.x,a.x),tv(e,i.y,s.y,o.y,a.y),tv(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class cP extends fa{constructor(e=new Re,t=new Re){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Re){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RH extends fa{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uP extends fa{constructor(e=new Re,t=new Re,r=new Re){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Re){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(ev(e,i.x,s.x,o.x),ev(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hP extends fa{constructor(e=new Y,t=new Y,r=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Y){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(ev(e,i.x,s.x,o.x),ev(e,i.y,s.y,o.y),ev(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dP extends fa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Re){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set($O(a,l.x,c.x,u.x,f.x),$O(a,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Re().fromArray(i))}return this}}var o1=Object.freeze({__proto__:null,ArcCurve:AH,CatmullRomCurve3:MH,CubicBezierCurve:lP,CubicBezierCurve3:CH,EllipseCurve:SE,LineCurve:cP,LineCurve3:RH,QuadraticBezierCurve:uP,QuadraticBezierCurve3:hP,SplineCurve:dP});class IH extends fa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new o1[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new o1[i.type]().fromJSON(i))}return this}}class Yv extends IH{constructor(e){super(),this.type="Path",this.currentPoint=new Re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new cP(this.currentPoint.clone(),new Re(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new uP(this.currentPoint.clone(),new Re(e,t),new Re(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new lP(this.currentPoint.clone(),new Re(e,t),new Re(r,i),new Re(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new dP(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new SE(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Hy extends on{constructor(e=[new Re(0,-.5),new Re(.5,0),new Re(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Sr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new Y,p=new Re,m=new Y,v=new Y,w=new Y;let _=0,g=0;for(let E=0;E<=e.length-1;E++)switch(E){case 0:_=e[E+1].x-e[E].x,g=e[E+1].y-e[E].y,m.x=g*1,m.y=-_,m.z=g*0,w.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(w.x,w.y,w.z);break;default:_=e[E+1].x-e[E].x,g=e[E+1].y-e[E].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=w.x,m.y+=w.y,m.z+=w.z,m.normalize(),l.push(m.x,m.y,m.z),w.copy(v)}for(let E=0;E<=t;E++){const S=r+E*u*i,b=Math.sin(S),k=Math.cos(S);for(let N=0;N<=e.length-1;N++){f.x=e[N].x*b,f.y=e[N].y,f.z=e[N].x*k,o.push(f.x,f.y,f.z),p.x=E/t,p.y=N/(e.length-1),a.push(p.x,p.y);const M=l[3*N+0]*b,P=l[3*N+1],A=l[3*N+0]*k;c.push(M,P,A)}}for(let E=0;E<t;E++)for(let S=0;S<e.length-1;S++){const b=S+E*e.length,k=b,N=b+e.length,M=b+e.length+1,P=b+1;s.push(k,N,P),s.push(M,P,N)}this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("uv",new gt(a,2)),this.setAttribute("normal",new gt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hy(e.points,e.segments,e.phiStart,e.phiLength)}}class TE extends Hy{constructor(e=1,t=1,r=4,i=8){const s=new Yv;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new TE(e.radius,e.length,e.capSegments,e.radialSegments)}}class bE extends on{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new Y,u=new Re;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=r+f/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("normal",new gt(a,3)),this.setAttribute("uv",new gt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class sm extends on{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],p=[],m=[];let v=0;const w=[],_=r/2;let g=0;E(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(p,3)),this.setAttribute("uv",new gt(m,2));function E(){const b=new Y,k=new Y;let N=0;const M=(t-e)/r;for(let P=0;P<=s;P++){const A=[],R=P/s,O=R*(t-e)+e;for(let U=0;U<=i;U++){const V=U/i,$=V*l+a,Z=Math.sin($),ne=Math.cos($);k.x=O*Z,k.y=-R*r+_,k.z=O*ne,f.push(k.x,k.y,k.z),b.set(Z,M,ne).normalize(),p.push(b.x,b.y,b.z),m.push(V,1-R),A.push(v++)}w.push(A)}for(let P=0;P<i;P++)for(let A=0;A<s;A++){const R=w[A][P],O=w[A+1][P],U=w[A+1][P+1],V=w[A][P+1];u.push(R,O,V),u.push(O,U,V),N+=6}c.addGroup(g,N,0),g+=N}function S(b){const k=v,N=new Re,M=new Y;let P=0;const A=b===!0?e:t,R=b===!0?1:-1;for(let U=1;U<=i;U++)f.push(0,_*R,0),p.push(0,R,0),m.push(.5,.5),v++;const O=v;for(let U=0;U<=i;U++){const $=U/i*l+a,Z=Math.cos($),ne=Math.sin($);M.x=A*ne,M.y=_*R,M.z=A*Z,f.push(M.x,M.y,M.z),p.push(0,R,0),N.x=Z*.5+.5,N.y=ne*.5*R+.5,m.push(N.x,N.y),v++}for(let U=0;U<i;U++){const V=k+U,$=O+U;b===!0?u.push($,$+1,V):u.push($+1,$,V),P+=3}c.addGroup(g,P,b===!0?1:2),g+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class AE extends sm{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new AE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Nu extends on{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new gt(s,3)),this.setAttribute("normal",new gt(s.slice(),3)),this.setAttribute("uv",new gt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(E){const S=new Y,b=new Y,k=new Y;for(let N=0;N<t.length;N+=3)m(t[N+0],S),m(t[N+1],b),m(t[N+2],k),l(S,b,k,E)}function l(E,S,b,k){const N=k+1,M=[];for(let P=0;P<=N;P++){M[P]=[];const A=E.clone().lerp(b,P/N),R=S.clone().lerp(b,P/N),O=N-P;for(let U=0;U<=O;U++)U===0&&P===N?M[P][U]=A:M[P][U]=A.clone().lerp(R,U/O)}for(let P=0;P<N;P++)for(let A=0;A<2*(N-P)-1;A++){const R=Math.floor(A/2);A%2===0?(p(M[P][R+1]),p(M[P+1][R]),p(M[P][R])):(p(M[P][R+1]),p(M[P+1][R+1]),p(M[P+1][R]))}}function c(E){const S=new Y;for(let b=0;b<s.length;b+=3)S.x=s[b+0],S.y=s[b+1],S.z=s[b+2],S.normalize().multiplyScalar(E),s[b+0]=S.x,s[b+1]=S.y,s[b+2]=S.z}function u(){const E=new Y;for(let S=0;S<s.length;S+=3){E.x=s[S+0],E.y=s[S+1],E.z=s[S+2];const b=_(E)/2/Math.PI+.5,k=g(E)/Math.PI+.5;o.push(b,1-k)}v(),f()}function f(){for(let E=0;E<o.length;E+=6){const S=o[E+0],b=o[E+2],k=o[E+4],N=Math.max(S,b,k),M=Math.min(S,b,k);N>.9&&M<.1&&(S<.2&&(o[E+0]+=1),b<.2&&(o[E+2]+=1),k<.2&&(o[E+4]+=1))}}function p(E){s.push(E.x,E.y,E.z)}function m(E,S){const b=E*3;S.x=e[b+0],S.y=e[b+1],S.z=e[b+2]}function v(){const E=new Y,S=new Y,b=new Y,k=new Y,N=new Re,M=new Re,P=new Re;for(let A=0,R=0;A<s.length;A+=9,R+=6){E.set(s[A+0],s[A+1],s[A+2]),S.set(s[A+3],s[A+4],s[A+5]),b.set(s[A+6],s[A+7],s[A+8]),N.set(o[R+0],o[R+1]),M.set(o[R+2],o[R+3]),P.set(o[R+4],o[R+5]),k.copy(E).add(S).add(b).divideScalar(3);const O=_(k);w(N,R+0,E,O),w(M,R+2,S,O),w(P,R+4,b,O)}}function w(E,S,b,k){k<0&&E.x===1&&(o[S]=E.x-1),b.x===0&&b.z===0&&(o[S]=k/2/Math.PI+.5)}function _(E){return Math.atan2(E.z,-E.x)}function g(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nu(e.vertices,e.indices,e.radius,e.details)}}class ME extends Nu{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ME(e.radius,e.detail)}}const rx=new Y,ix=new Y,bb=new Y,sx=new Rs;class PH extends on{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Fh*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:w,b:_,c:g}=sx;if(w.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),sx.getNormal(bb),f[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,f[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let E=0;E<3;E++){const S=(E+1)%3,b=f[E],k=f[S],N=sx[u[E]],M=sx[u[S]],P=`${b}_${k}`,A=`${k}_${b}`;A in p&&p[A]?(bb.dot(p[A].normal)<=s&&(m.push(N.x,N.y,N.z),m.push(M.x,M.y,M.z)),p[A]=null):P in p||(p[P]={index0:c[E],index1:c[S],normal:bb.clone()})}}for(const v in p)if(p[v]){const{index0:w,index1:_}=p[v];rx.fromBufferAttribute(a,w),ix.fromBufferAttribute(a,_),m.push(rx.x,rx.y,rx.z),m.push(ix.x,ix.y,ix.z)}this.setAttribute("position",new gt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class zh extends Yv{constructor(e){super(e),this.uuid=ro(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Yv().fromJSON(i))}return this}}const joe={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=NH(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,p,m;if(r&&(s=Xoe(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let v=t;v<i;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return Kv(s,o,t,a,l,m,0),o}};function NH(n,e,t,r,i){let s,o;if(i===sae(n,e,t,r)>0)for(s=e;s<t;s+=r)o=qO(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=qO(s,n[s],n[s+1],o);return o&&CE(o,o.next)&&(Zv(o),o=o.next),o}function Jh(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(CE(t,t.next)||fr(t.prev,t,t.next)===0)){if(Zv(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Kv(n,e,t,r,i,s,o){if(!n)return;!o&&s&&Joe(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Woe(n,r,i,s):Goe(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Zv(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=$oe(Jh(n),e,t),Kv(n,e,t,r,i,s,2)):o===2&&qoe(n,e,t,r,i,s):Kv(Jh(n),e,t,r,i,s,1);break}}}function Goe(n){const e=n.prev,t=n,r=n.next;if(fr(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=u&&v.x<=p&&v.y>=f&&v.y<=m&&Gf(i,a,s,l,o,c,v.x,v.y)&&fr(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Woe(n,e,t,r){const i=n.prev,s=n,o=n.next;if(fr(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=u<f?u<p?u:p:f<p?f:p,w=a>l?a>c?a:c:l>c?l:c,_=u>f?u>p?u:p:f>p?f:p,g=wC(m,v,e,t,r),E=wC(w,_,e,t,r);let S=n.prevZ,b=n.nextZ;for(;S&&S.z>=g&&b&&b.z<=E;){if(S.x>=m&&S.x<=w&&S.y>=v&&S.y<=_&&S!==i&&S!==o&&Gf(a,u,l,f,c,p,S.x,S.y)&&fr(S.prev,S,S.next)>=0||(S=S.prevZ,b.x>=m&&b.x<=w&&b.y>=v&&b.y<=_&&b!==i&&b!==o&&Gf(a,u,l,f,c,p,b.x,b.y)&&fr(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=w&&S.y>=v&&S.y<=_&&S!==i&&S!==o&&Gf(a,u,l,f,c,p,S.x,S.y)&&fr(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;b&&b.z<=E;){if(b.x>=m&&b.x<=w&&b.y>=v&&b.y<=_&&b!==i&&b!==o&&Gf(a,u,l,f,c,p,b.x,b.y)&&fr(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function $oe(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!CE(i,s)&&kH(i,r,r.next,s)&&Qv(i,s)&&Qv(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Zv(r),Zv(r.next),r=n=s),r=r.next}while(r!==n);return Jh(r)}function qoe(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&nae(o,a)){let l=LH(o,a);o=Jh(o,o.next),l=Jh(l,l.next),Kv(o,e,t,r,i,s,0),Kv(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function Xoe(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=NH(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(tae(c));for(i.sort(Yoe),s=0;s<i.length;s++)t=Koe(i[s],t);return t}function Yoe(n,e){return n.x-e.x}function Koe(n,e){const t=Qoe(n,e);if(!t)return e;const r=LH(t,n);return Jh(r,r.next),Jh(t,t.next)}function Qoe(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Gf(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Qv(t,n)&&(f<u||f===u&&(t.x>i.x||t.x===i.x&&Zoe(i,t)))&&(i=t,u=f)),t=t.next;while(t!==a);return i}function Zoe(n,e){return fr(n.prev,n,e.prev)<0&&fr(e.next,n,n.next)<0}function Joe(n,e,t,r){let i=n;do i.z===0&&(i.z=wC(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,eae(i)}function eae(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function wC(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function tae(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Gf(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function nae(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!rae(n,e)&&(Qv(n,e)&&Qv(e,n)&&iae(n,e)&&(fr(n.prev,n,e.prev)||fr(n,e.prev,e))||CE(n,e)&&fr(n.prev,n,n.next)>0&&fr(e.prev,e,e.next)>0)}function fr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function CE(n,e){return n.x===e.x&&n.y===e.y}function kH(n,e,t,r){const i=ax(fr(n,e,t)),s=ax(fr(n,e,r)),o=ax(fr(t,r,n)),a=ax(fr(t,r,e));return!!(i!==s&&o!==a||i===0&&ox(n,t,e)||s===0&&ox(n,r,e)||o===0&&ox(t,n,r)||a===0&&ox(t,e,r))}function ox(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ax(n){return n>0?1:n<0?-1:0}function rae(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&kH(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Qv(n,e){return fr(n.prev,n,n.next)<0?fr(n,e,n.next)>=0&&fr(n,n.prev,e)>=0:fr(n,e,n.prev)<0||fr(n,n.next,e)<0}function iae(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function LH(n,e){const t=new EC(n.i,n.x,n.y),r=new EC(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function qO(n,e,t,r){const i=new EC(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Zv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function EC(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sae(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Fa{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Fa.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];XO(e),YO(r,e);let o=e.length;t.forEach(XO);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,YO(r,t[l]);const a=joe.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function XO(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function YO(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class RE extends on{constructor(e=new zh([new Re(.5,.5),new Re(-.5,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new gt(i,3)),this.setAttribute("uv",new gt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,E=t.UVGenerator!==void 0?t.UVGenerator:oae;let S,b=!1,k,N,M,P;g&&(S=g.getSpacedPoints(u),b=!0,p=!1,k=g.computeFrenetFrames(u,!1),N=new Y,M=new Y,P=new Y),p||(_=0,m=0,v=0,w=0);const A=a.extractPoints(c);let R=A.shape;const O=A.holes;if(!Fa.isClockWise(R)){R=R.reverse();for(let Q=0,be=O.length;Q<be;Q++){const xe=O[Q];Fa.isClockWise(xe)&&(O[Q]=xe.reverse())}}const V=Fa.triangulateShape(R,O),$=R;for(let Q=0,be=O.length;Q<be;Q++){const xe=O[Q];R=R.concat(xe)}function Z(Q,be,xe){return be||console.error("THREE.ExtrudeGeometry: vec does not exist"),Q.clone().addScaledVector(be,xe)}const ne=R.length,ae=V.length;function z(Q,be,xe){let Le,_e,it;const We=Q.x-be.x,G=Q.y-be.y,B=xe.x-Q.x,le=xe.y-Q.y,Ne=We*We+G*G,Me=We*le-G*B;if(Math.abs(Me)>Number.EPSILON){const Ce=Math.sqrt(Ne),st=Math.sqrt(B*B+le*le),Fe=be.x-G/Ce,qe=be.y+We/Ce,Et=xe.x-le/st,Ft=xe.y+B/st,Ie=((Et-Fe)*le-(Ft-qe)*B)/(We*le-G*B);Le=Fe+We*Ie-Q.x,_e=qe+G*Ie-Q.y;const cn=Le*Le+_e*_e;if(cn<=2)return new Re(Le,_e);it=Math.sqrt(cn/2)}else{let Ce=!1;We>Number.EPSILON?B>Number.EPSILON&&(Ce=!0):We<-Number.EPSILON?B<-Number.EPSILON&&(Ce=!0):Math.sign(G)===Math.sign(le)&&(Ce=!0),Ce?(Le=-G,_e=We,it=Math.sqrt(Ne)):(Le=We,_e=G,it=Math.sqrt(Ne/2))}return new Re(Le/it,_e/it)}const j=[];for(let Q=0,be=$.length,xe=be-1,Le=Q+1;Q<be;Q++,xe++,Le++)xe===be&&(xe=0),Le===be&&(Le=0),j[Q]=z($[Q],$[xe],$[Le]);const X=[];let ee,te=j.concat();for(let Q=0,be=O.length;Q<be;Q++){const xe=O[Q];ee=[];for(let Le=0,_e=xe.length,it=_e-1,We=Le+1;Le<_e;Le++,it++,We++)it===_e&&(it=0),We===_e&&(We=0),ee[Le]=z(xe[Le],xe[it],xe[We]);X.push(ee),te=te.concat(ee)}for(let Q=0;Q<_;Q++){const be=Q/_,xe=m*Math.cos(be*Math.PI/2),Le=v*Math.sin(be*Math.PI/2)+w;for(let _e=0,it=$.length;_e<it;_e++){const We=Z($[_e],j[_e],Le);Te(We.x,We.y,-xe)}for(let _e=0,it=O.length;_e<it;_e++){const We=O[_e];ee=X[_e];for(let G=0,B=We.length;G<B;G++){const le=Z(We[G],ee[G],Le);Te(le.x,le.y,-xe)}}}const J=v+w;for(let Q=0;Q<ne;Q++){const be=p?Z(R[Q],te[Q],J):R[Q];b?(M.copy(k.normals[0]).multiplyScalar(be.x),N.copy(k.binormals[0]).multiplyScalar(be.y),P.copy(S[0]).add(M).add(N),Te(P.x,P.y,P.z)):Te(be.x,be.y,0)}for(let Q=1;Q<=u;Q++)for(let be=0;be<ne;be++){const xe=p?Z(R[be],te[be],J):R[be];b?(M.copy(k.normals[Q]).multiplyScalar(xe.x),N.copy(k.binormals[Q]).multiplyScalar(xe.y),P.copy(S[Q]).add(M).add(N),Te(P.x,P.y,P.z)):Te(xe.x,xe.y,f/u*Q)}for(let Q=_-1;Q>=0;Q--){const be=Q/_,xe=m*Math.cos(be*Math.PI/2),Le=v*Math.sin(be*Math.PI/2)+w;for(let _e=0,it=$.length;_e<it;_e++){const We=Z($[_e],j[_e],Le);Te(We.x,We.y,f+xe)}for(let _e=0,it=O.length;_e<it;_e++){const We=O[_e];ee=X[_e];for(let G=0,B=We.length;G<B;G++){const le=Z(We[G],ee[G],Le);b?Te(le.x,le.y+S[u-1].y,S[u-1].x+xe):Te(le.x,le.y,f+xe)}}}oe(),we();function oe(){const Q=i.length/3;if(p){let be=0,xe=ne*be;for(let Le=0;Le<ae;Le++){const _e=V[Le];mt(_e[2]+xe,_e[1]+xe,_e[0]+xe)}be=u+_*2,xe=ne*be;for(let Le=0;Le<ae;Le++){const _e=V[Le];mt(_e[0]+xe,_e[1]+xe,_e[2]+xe)}}else{for(let be=0;be<ae;be++){const xe=V[be];mt(xe[2],xe[1],xe[0])}for(let be=0;be<ae;be++){const xe=V[be];mt(xe[0]+ne*u,xe[1]+ne*u,xe[2]+ne*u)}}r.addGroup(Q,i.length/3-Q,0)}function we(){const Q=i.length/3;let be=0;Pe($,be),be+=$.length;for(let xe=0,Le=O.length;xe<Le;xe++){const _e=O[xe];Pe(_e,be),be+=_e.length}r.addGroup(Q,i.length/3-Q,1)}function Pe(Q,be){let xe=Q.length;for(;--xe>=0;){const Le=xe;let _e=xe-1;_e<0&&(_e=Q.length-1);for(let it=0,We=u+_*2;it<We;it++){const G=ne*it,B=ne*(it+1),le=be+Le+G,Ne=be+_e+G,Me=be+_e+B,Ce=be+Le+B;vt(le,Ne,Me,Ce)}}}function Te(Q,be,xe){l.push(Q),l.push(be),l.push(xe)}function mt(Q,be,xe){Ge(Q),Ge(be),Ge(xe);const Le=i.length/3,_e=E.generateTopUV(r,i,Le-3,Le-2,Le-1);rt(_e[0]),rt(_e[1]),rt(_e[2])}function vt(Q,be,xe,Le){Ge(Q),Ge(be),Ge(Le),Ge(be),Ge(xe),Ge(Le);const _e=i.length/3,it=E.generateSideWallUV(r,i,_e-6,_e-3,_e-2,_e-1);rt(it[0]),rt(it[1]),rt(it[3]),rt(it[1]),rt(it[2]),rt(it[3])}function Ge(Q){i.push(l[Q*3+0]),i.push(l[Q*3+1]),i.push(l[Q*3+2])}function rt(Q){s.push(Q.x),s.push(Q.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return aae(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new o1[i.type]().fromJSON(i)),new RE(r,e.options)}}const oae={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Re(s,o),new Re(a,l),new Re(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],w=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Re(o,1-l),new Re(c,1-f),new Re(p,1-v),new Re(w,1-g)]:[new Re(a,1-l),new Re(u,1-f),new Re(m,1-v),new Re(_,1-g)]}};function aae(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class IE extends Nu{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IE(e.radius,e.detail)}}class jy extends Nu{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jy(e.radius,e.detail)}}class PE extends on{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let f=e;const p=(t-e)/i,m=new Y,v=new Re;for(let w=0;w<=i;w++){for(let _=0;_<=r;_++){const g=s+_/r*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,u.push(v.x,v.y)}f+=p}for(let w=0;w<i;w++){const _=w*(r+1);for(let g=0;g<r;g++){const E=g+_,S=E,b=E+r+1,k=E+r+2,N=E+1;a.push(S,b,N),a.push(b,k,N)}}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(c,3)),this.setAttribute("uv",new gt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class NE extends on{constructor(e=new zh([new Re(0,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new gt(i,3)),this.setAttribute("normal",new gt(s,3)),this.setAttribute("uv",new gt(o,2));function c(u){const f=i.length/3,p=u.extractPoints(t);let m=p.shape;const v=p.holes;Fa.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const E=v[_];Fa.isClockWise(E)===!0&&(v[_]=E.reverse())}const w=Fa.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const E=v[_];m=m.concat(E)}for(let _=0,g=m.length;_<g;_++){const E=m[_];i.push(E.x,E.y,0),s.push(0,0,1),o.push(E.x,E.y)}for(let _=0,g=w.length;_<g;_++){const E=w[_],S=E[0]+f,b=E[1]+f,k=E[2]+f;r.push(S,b,k),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return lae(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new NE(r,e.curveSegments)}}function lae(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Gy extends on{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new Y,p=new Y,m=[],v=[],w=[],_=[];for(let g=0;g<=r;g++){const E=[],S=g/r;let b=0;g===0&&o===0?b=.5/t:g===r&&l===Math.PI&&(b=-.5/t);for(let k=0;k<=t;k++){const N=k/t;f.x=-e*Math.cos(i+N*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(i+N*s)*Math.sin(o+S*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),w.push(p.x,p.y,p.z),_.push(N+b,1-S),E.push(c++)}u.push(E)}for(let g=0;g<r;g++)for(let E=0;E<t;E++){const S=u[g][E+1],b=u[g][E],k=u[g+1][E],N=u[g+1][E+1];(g!==0||o>0)&&m.push(S,b,N),(g!==r-1||l<Math.PI)&&m.push(b,k,N)}this.setIndex(m),this.setAttribute("position",new gt(v,3)),this.setAttribute("normal",new gt(w,3)),this.setAttribute("uv",new gt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class kE extends Nu{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kE(e.radius,e.detail)}}class LE extends on{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new Y,f=new Y,p=new Y;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const w=v/i*s,_=m/r*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(w),f.y=(e+t*Math.cos(_))*Math.sin(w),f.z=t*Math.sin(_),a.push(f.x,f.y,f.z),u.x=e*Math.cos(w),u.y=e*Math.sin(w),p.subVectors(f,u).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const w=(i+1)*m+v-1,_=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,E=(i+1)*m+v;o.push(w,_,E),o.push(_,g,E)}this.setIndex(o),this.setAttribute("position",new gt(a,3)),this.setAttribute("normal",new gt(l,3)),this.setAttribute("uv",new gt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LE(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class DE extends on{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],f=new Y,p=new Y,m=new Y,v=new Y,w=new Y,_=new Y,g=new Y;for(let S=0;S<=r;++S){const b=S/r*s*Math.PI*2;E(b,s,o,e,m),E(b+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),w.crossVectors(_,g),g.crossVectors(w,_),w.normalize(),g.normalize();for(let k=0;k<=i;++k){const N=k/i*Math.PI*2,M=-t*Math.cos(N),P=t*Math.sin(N);f.x=m.x+(M*g.x+P*w.x),f.y=m.y+(M*g.y+P*w.y),f.z=m.z+(M*g.z+P*w.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),u.push(S/r),u.push(k/i)}}for(let S=1;S<=r;S++)for(let b=1;b<=i;b++){const k=(i+1)*(S-1)+(b-1),N=(i+1)*S+(b-1),M=(i+1)*S+b,P=(i+1)*(S-1)+b;a.push(k,N,P),a.push(N,M,P)}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(c,3)),this.setAttribute("uv",new gt(u,2));function E(S,b,k,N,M){const P=Math.cos(S),A=Math.sin(S),R=k/b*S,O=Math.cos(R);M.x=N*(2+O)*.5*P,M.y=N*(2+O)*A*.5,M.z=N*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class OE extends on{constructor(e=new hP(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Y,l=new Y,c=new Re;let u=new Y;const f=[],p=[],m=[],v=[];w(),this.setIndex(v),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(p,3)),this.setAttribute("uv",new gt(m,2));function w(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),E(),g()}function _(S){u=e.getPointAt(S/t,u);const b=o.normals[S],k=o.binormals[S];for(let N=0;N<=i;N++){const M=N/i*Math.PI*2,P=Math.sin(M),A=-Math.cos(M);l.x=A*b.x+P*k.x,l.y=A*b.y+P*k.y,l.z=A*b.z+P*k.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let b=1;b<=i;b++){const k=(i+1)*(S-1)+(b-1),N=(i+1)*S+(b-1),M=(i+1)*S+b,P=(i+1)*(S-1)+b;v.push(k,N,P),v.push(N,M,P)}}function E(){for(let S=0;S<=t;S++)for(let b=0;b<=i;b++)c.x=S/t,c.y=b/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new OE(new o1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class DH extends on{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new Y,s=new Y;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,w=p+m;v<w;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),E=a.getX(v+(_+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,E),KO(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),KO(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function KO(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var QO=Object.freeze({__proto__:null,BoxGeometry:ud,CapsuleGeometry:TE,CircleGeometry:bE,ConeGeometry:AE,CylinderGeometry:sm,DodecahedronGeometry:ME,EdgesGeometry:PH,ExtrudeGeometry:RE,IcosahedronGeometry:IE,LatheGeometry:Hy,OctahedronGeometry:jy,PlaneGeometry:zy,PolyhedronGeometry:Nu,RingGeometry:PE,ShapeGeometry:NE,SphereGeometry:Gy,TetrahedronGeometry:kE,TorusGeometry:LE,TorusKnotGeometry:DE,TubeGeometry:OE,WireframeGeometry:DH});class OH extends Yi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new lt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class FH extends Xa{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class fP extends Yi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new lt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pP extends fP{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Re(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Sr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new lt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new lt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new lt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class UH extends Yi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new lt(16777215),this.specular=new lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ly,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VH extends Yi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class zH extends Yi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class BH extends Yi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ly,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HH extends Yi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jH extends ms{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function bh(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function GH(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function WH(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function SC(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function mP(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function cae(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<t||v>=r)){f.push(c.times[m]);for(let w=0;w<u;++w)p.push(c.values[m*u+w])}}f.length!==0&&(c.times=bh(f,c.times.constructor),c.values=bh(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function uae(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let w;if(s<=a.times[0]){const g=u,E=f-u;w=a.values.slice(g,E)}else if(s>=a.times[v]){const g=v*f+u,E=g+f-u;w=a.values.slice(g,E)}else{const g=a.createInterpolant(),E=u,S=f-u;g.evaluate(s),w=g.resultBuffer.slice(E,S)}l==="quaternion"&&new Os().fromArray(w).normalize().conjugate().toArray(w);const _=c.times.length;for(let g=0;g<_;++g){const E=g*m+p;if(l==="quaternion")Os.multiplyQuaternionsFlat(c.values,E,w,0,c.values,E);else{const S=m-p*2;for(let b=0;b<S;++b)c.values[E+b]-=w[b]}}}return n.blendMode=GI,n}const hae={convertArray:bh,isTypedArray:GH,getKeyframeOrder:WH,sortedArray:SC,flattenJSON:mP,subclip:cae,makeClipAdditive:uae};class Wy{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $H extends Wy{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Eh,endingEnd:Eh}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Sh:s=e,a=2*t-r;break;case jv:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Sh:o=e,l=2*r-t;break;case jv:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),w=v*v,_=w*v,g=-p*_+2*p*w-p*v,E=(1+p)*_+(-1.5-2*p)*w+(-.5+p)*v+1,S=(-1-m)*_+(1.5+m)*w+.5*v,b=m*_-m*w;for(let k=0;k!==a;++k)s[k]=g*o[u+k]+E*o[c+k]+S*o[l+k]+b*o[f+k];return s}}class gP extends Wy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),f=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*u;return s}}class qH extends Wy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class pa{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=bh(t,this.TimeBufferType),this.values=bh(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:bh(e.times,Array),values:bh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new qH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new gP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $H(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bv:t=this.InterpolantFactoryMethodDiscrete;break;case Hv:t=this.InterpolantFactoryMethodLinear;break;case Xx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bv;case this.InterpolantFactoryMethodLinear:return Hv;case this.InterpolantFactoryMethodSmooth:return Xx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&GH(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Xx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,m=f+r;for(let v=0;v!==r;++v){const w=t[f+v];if(w!==t[p+v]||w!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}pa.prototype.TimeBufferType=Float32Array;pa.prototype.ValueBufferType=Float32Array;pa.prototype.DefaultInterpolation=Hv;class hd extends pa{}hd.prototype.ValueTypeName="bool";hd.prototype.ValueBufferType=Array;hd.prototype.DefaultInterpolation=Bv;hd.prototype.InterpolantFactoryMethodLinear=void 0;hd.prototype.InterpolantFactoryMethodSmooth=void 0;class vP extends pa{}vP.prototype.ValueTypeName="color";class Jv extends pa{}Jv.prototype.ValueTypeName="number";class XH extends Wy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Os.slerpFlat(s,0,o,c-a,o,c,l);return s}}class om extends pa{InterpolantFactoryMethodLinear(e){return new XH(this.times,this.values,this.getValueSize(),e)}}om.prototype.ValueTypeName="quaternion";om.prototype.DefaultInterpolation=Hv;om.prototype.InterpolantFactoryMethodSmooth=void 0;class dd extends pa{}dd.prototype.ValueTypeName="string";dd.prototype.ValueBufferType=Array;dd.prototype.DefaultInterpolation=Bv;dd.prototype.InterpolantFactoryMethodLinear=void 0;dd.prototype.InterpolantFactoryMethodSmooth=void 0;class ey extends pa{}ey.prototype.ValueTypeName="vector";class ty{constructor(e,t=-1,r,i=pE){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ro(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(fae(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(pa.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=WH(l);l=SC(l,1,u),c=SC(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Jv(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let p=i[f];p||(i[f]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,v,w){if(m.length!==0){const _=[],g=[];mP(m,_,g,v),_.length!==0&&w.push(new f(p,_,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let w=0;w<p[v].morphTargets.length;w++)m[p[v].morphTargets[w]]=-1;for(const w in m){const _=[],g=[];for(let E=0;E!==p[v].morphTargets.length;++E){const S=p[v];_.push(S.time),g.push(S.morphTarget===w?1:0)}i.push(new Jv(".morphTargetInfluence["+w+"]",_,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(ey,m+".position",p,"pos",i),r(om,m+".quaternion",p,"rot",i),r(ey,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function dae(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jv;case"vector":case"vector2":case"vector3":case"vector4":return ey;case"color":return vP;case"quaternion":return om;case"bool":case"boolean":return hd;case"string":return dd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function fae(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=dae(n.type);if(n.times===void 0){const t=[],r=[];mP(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Al={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class yP{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(u))return v}return null}}}const YH=new yP;class Us{constructor(e){this.manager=e!==void 0?e:YH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Us.DEFAULT_MATERIAL_NAME="__DEFAULT";const dl={};class pae extends Error{constructor(e,t){super(e),this.response=t}}class Bl extends Us{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Al.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(dl[e]!==void 0){dl[e].push({onLoad:t,onProgress:r,onError:i});return}dl[e]=[],dl[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=dl[e],f=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let w=0;const _=new ReadableStream({start(g){E();function E(){f.read().then(({done:S,value:b})=>{if(S)g.close();else{w+=b.byteLength;const k=new ProgressEvent("progress",{lengthComputable:v,loaded:w,total:m});for(let N=0,M=u.length;N<M;N++){const P=u[N];P.onProgress&&P.onProgress(k)}g.enqueue(b),E()}})}}});return new Response(_)}else throw new pae(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{Al.add(e,c);const u=dl[e];delete dl[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=dl[e];if(u===void 0)throw this.manager.itemError(e),c;delete dl[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class mae extends Us{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Bl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=ty.parse(e[r]);t.push(i)}return t}}class gae extends Us{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new EE,l=new Bl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Nr),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)u(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let w=0;w<p.mipmapCount;w++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+w]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Nr),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class ny extends Us{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Al.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Xv("img");function l(){u(),Al.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class vae extends Us{constructor(e){super(e)}load(e,t,r,i){const s=new Uy;s.colorSpace=Wr;const o=new ny(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class yae extends Us{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Vh,a=new Bl(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Gi,o.wrapT=c.wrapT!==void 0?c.wrapT:Gi,o.magFilter=c.magFilter!==void 0?c.magFilter:Nr,o.minFilter=c.minFilter!==void 0?c.minFilter:Nr,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=gu),c.mipmapCount===1&&(o.minFilter=Nr),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class _ae extends Us{constructor(e){super(e)}load(e,t,r,i){const s=new kr,o=new ny(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class ku extends Rn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new lt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class KH extends ku{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new lt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Ab=new Ht,ZO=new Y,JO=new Y;class _P{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Re(512,512),this.map=null,this.mapPass=null,this.matrix=new Ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vy,this._frameExtents=new Re(1,1),this._viewportCount=1,this._viewports=[new Fn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;ZO.setFromMatrixPosition(e.matrixWorld),t.position.copy(ZO),JO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(JO),t.updateMatrixWorld(),Ab.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ab),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Ab)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xae extends _P{constructor(){super(new hi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Np*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QH extends ku{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.target=new Rn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new xae}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const e3=new Ht,fg=new Y,Mb=new Y;class wae extends _P{constructor(){super(new hi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Re(4,2),this._viewportCount=6,this._viewports=[new Fn(2,1,1,1),new Fn(0,1,1,1),new Fn(3,1,1,1),new Fn(1,1,1,1),new Fn(3,0,1,1),new Fn(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),fg.setFromMatrixPosition(e.matrixWorld),r.position.copy(fg),Mb.copy(r.position),Mb.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Mb),r.updateMatrixWorld(),i.makeTranslation(-fg.x,-fg.y,-fg.z),e3.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(e3)}}class ZH extends ku{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new wae}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Eae extends _P{constructor(){super(new By(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class JH extends ku{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.target=new Rn,this.shadow=new Eae}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class e9 extends ku{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class t9 extends ku{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class n9{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class r9 extends ku{constructor(e=new n9,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class FE extends Us{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Bl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=FE.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new lt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new lt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Re().fromArray(o.value);break;case"v3":i.uniforms[s].value=new Y().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Fn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new sn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ht().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Re().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Re().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:OH,SpriteMaterial:iP,RawShaderMaterial:FH,ShaderMaterial:Xa,PointsMaterial:oP,MeshPhysicalMaterial:pP,MeshStandardMaterial:fP,MeshPhongMaterial:UH,MeshToonMaterial:VH,MeshNormalMaterial:zH,MeshLambertMaterial:BH,MeshDepthMaterial:eP,MeshDistanceMaterial:tP,MeshBasicMaterial:Pu,MeshMatcapMaterial:HH,LineDashedMaterial:jH,LineBasicMaterial:ms,Material:Yi};return new t[e]}}class TC{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class i9 extends on{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class s9 extends Us{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Bl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),E=zf(_.type,g),S=new xE(E,_.stride);return S.uuid=_.uuid,t[v]=S,S}function s(m,v){if(r[v]!==void 0)return r[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new i9:new on,a=e.data.index;if(a!==void 0){const m=zf(a.type,a.array);o.setIndex(new Vn(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let w;if(v.isInterleavedBufferAttribute){const _=i(e.data,v.data);w=new Zh(_,v.itemSize,v.offset,v.normalized)}else{const _=zf(v.type,v.array),g=v.isInstancedBufferAttribute?Lp:Vn;w=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(w.name=v.name),v.usage!==void 0&&w.setUsage(v.usage),o.setAttribute(m,w)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],w=[];for(let _=0,g=v.length;_<g;_++){const E=v[_];let S;if(E.isInterleavedBufferAttribute){const b=i(e.data,E.data);S=new Zh(b,E.itemSize,E.offset,E.normalized)}else{const b=zf(E.type,E.array);S=new Vn(b,E.itemSize,E.normalized)}E.name!==void 0&&(S.name=E.name),w.push(S)}o.morphAttributes[m]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const w=f[m];o.addGroup(w.start,w.count,w.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new Y;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new $i(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Sae extends Us{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?TC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Bl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?TC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Bl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new zh().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new wE().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new s9;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in QO?a=QO[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new FE;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=ty.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:zf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new yP(t);s=new ny(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,w=p.length;v<w;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Vh(g.data,g.width,g.height)))}i[f.uuid]=new Th(m)}else{const m=a(f.url);i[f.uuid]=new Th(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:zf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new ny(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new Vh(v.data,v.width,v.height)))}r[l.uuid]=new Th(u)}else{const u=await s(l.url);r[l.uuid]=new Th(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Uy,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Vh:u=new kr,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,Tae)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],t3),u.wrapT=r(a.wrap[1],t3)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,n3)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,n3)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,w=p.length;v<w;v++){const _=p[v];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(r[_])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,f;switch(e.type){case"Scene":o=new rP,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new lt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new _E(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new yE(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new hi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new By(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new e9(e.color,e.intensity);break;case"DirectionalLight":o=new JH(e.color,e.intensity);break;case"PointLight":o=new ZH(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new t9(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new QH(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new KH(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new r9().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new wH(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new Yr(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new EH(u,f,p),o.instanceMatrix=new Lp(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Lp(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new SH(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(w=>{const _=new hs;_.min.fromArray(w.boxMin),_.max.fromArray(w.boxMax);const g=new $i;return g.radius=w.sphereRadius,g.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:_,sphereInitialized:w.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new xH;break;case"Line":o=new vu(a(e.geometry),l(e.material));break;case"LineLoop":o=new TH(a(e.geometry),l(e.material));break;case"LineSegments":o=new Qa(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new bH(a(e.geometry),l(e.material));break;case"Sprite":o=new _H(l(e.material));break;case"Group":o=new jf;break;case"Bone":o=new sP;break;default:o=new Rn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],w=o.getObjectByProperty("uuid",v.object);w!==void 0&&o.addLevel(w,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Tae={UVMapping:dE,CubeReflectionMapping:zl,CubeRefractionMapping:mu,EquirectangularReflectionMapping:Fv,EquirectangularRefractionMapping:Uv,CubeUVReflectionMapping:nm},t3={RepeatWrapping:Vv,ClampToEdgeWrapping:Gi,MirroredRepeatWrapping:zv},n3={NearestFilter:Ir,NearestMipmapNearestFilter:r1,NearestMipmapLinearFilter:Qg,LinearFilter:Nr,LinearMipmapNearestFilter:OI,LinearMipmapLinearFilter:gu};class bae extends Us{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Al.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Al.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Al.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Al.add(e,l),s.manager.itemStart(e)}}let lx;class xP{static getContext(){return lx===void 0&&(lx=new(window.AudioContext||window.webkitAudioContext)),lx}static setContext(e){lx=e}}class Aae extends Us{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Bl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);xP.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const r3=new Ht,i3=new Ht,oh=new Ht;class Mae{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,oh.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Fh*t.fov*.5)/t.zoom;let a,l;i3.elements[12]=-i,r3.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,oh.elements[0]=2*t.near/(l-a),oh.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(oh),a=-o*t.aspect-s,l=o*t.aspect-s,oh.elements[0]=2*t.near/(l-a),oh.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(oh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(i3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(r3)}}class wP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=s3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=s3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function s3(){return(typeof performance>"u"?Date:performance).now()}const ah=new Y,o3=new Os,Cae=new Y,lh=new Y;class Rae extends Rn{constructor(){super(),this.type="AudioListener",this.context=xP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new wP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ah,o3,Cae),lh.set(0,0,-1).applyQuaternion(o3),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ah.x,i),t.positionY.linearRampToValueAtTime(ah.y,i),t.positionZ.linearRampToValueAtTime(ah.z,i),t.forwardX.linearRampToValueAtTime(lh.x,i),t.forwardY.linearRampToValueAtTime(lh.y,i),t.forwardZ.linearRampToValueAtTime(lh.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(ah.x,ah.y,ah.z),t.setOrientation(lh.x,lh.y,lh.z,r.x,r.y,r.z)}}class o9 extends Rn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ch=new Y,a3=new Os,Iae=new Y,uh=new Y;class Pae extends o9{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ch,a3,Iae),uh.set(0,0,1).applyQuaternion(a3);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ch.x,r),t.positionY.linearRampToValueAtTime(ch.y,r),t.positionZ.linearRampToValueAtTime(ch.z,r),t.orientationX.linearRampToValueAtTime(uh.x,r),t.orientationY.linearRampToValueAtTime(uh.y,r),t.orientationZ.linearRampToValueAtTime(uh.z,r)}else t.setPosition(ch.x,ch.y,ch.z),t.setOrientation(uh.x,uh.y,uh.z)}}class Nae{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class a9{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Os.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Os.multiplyQuaternionsFlat(e,o,e,t,e,r),Os.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const EP="\\[\\]\\.:\\/",kae=new RegExp("["+EP+"]","g"),SP="[^"+EP+"]",Lae="[^"+EP.replace("\\.","")+"]",Dae=/((?:WC+[\/:])*)/.source.replace("WC",SP),Oae=/(WCOD+)?/.source.replace("WCOD",Lae),Fae=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",SP),Uae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",SP),Vae=new RegExp("^"+Dae+Oae+Fae+Uae+"$"),zae=["material","materials","bones","map"];class Bae{constructor(e,t,r){const i=r||xn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class xn{constructor(e,t,r){this.path=t,this.parsedPath=r||xn.parseTrackName(t),this.node=xn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new xn.Composite(e,t,r):new xn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(kae,"")}static parseTrackName(e){const t=Vae.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);zae.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=xn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xn.Composite=Bae;xn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};xn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};xn.prototype.GetterByBindingType=[xn.prototype._getValue_direct,xn.prototype._getValue_array,xn.prototype._getValue_arrayElement,xn.prototype._getValue_toArray];xn.prototype.SetterByBindingTypeAndVersioning=[[xn.prototype._setValue_direct,xn.prototype._setValue_direct_setNeedsUpdate,xn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_array,xn.prototype._setValue_array_setNeedsUpdate,xn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_arrayElement,xn.prototype._setValue_arrayElement_setNeedsUpdate,xn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_fromArray,xn.prototype._setValue_fromArray_setNeedsUpdate,xn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Hae{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ro(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const p=arguments[u],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let w=0,_=o;w!==_;++w)s[w].push(new xn(p,r[w],i[w]))}else if(v<c){a=e[v];const w=--c,_=e[w];t[_.uuid]=v,e[v]=_,t[m]=w,e[w]=p;for(let g=0,E=o;g!==E;++g){const S=s[g],b=S[w];let k=S[v];S[v]=b,k===void 0&&(k=new xn(p,r[g],i[g])),S[w]=k}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,p=e[f];t[p.uuid]=u,e[u]=p,t[c]=f,e[f]=l;for(let m=0,v=i;m!==v;++m){const w=r[m],_=w[f],g=w[u];w[u]=_,w[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const p=--s,m=e[p],v=--o,w=e[v];t[m.uuid]=f,e[f]=m,t[w.uuid]=p,e[p]=w,e.pop();for(let _=0,g=i;_!==g;++_){const E=r[_],S=E[p],b=E[v];E[f]=S,E[p]=b,E.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,w=i;v!==w;++v){const _=r[v];_[f]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let p=u,m=l.length;p!==m;++p){const v=l[p];f[p]=new xn(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class l9{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Eh,endingEnd:Eh};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=H6,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case GI:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case pE:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===j6;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===B6){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Sh,i.endingEnd=Sh):(e?i.endingStart=this.zeroSlopeAtStart?Sh:Eh:i.endingStart=jv,t?i.endingEnd=this.zeroSlopeAtEnd?Sh:Eh:i.endingEnd=jv)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const jae=new Float32Array(1);class Gae extends Yl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const p=i[f],m=p.name;let v=u[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const w=t&&t._propertyBindings[f].binding.parsedPath;v=new a9(xn.create(r,m,w),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new gP(new Float32Array(2),new Float32Array(2),1,jae),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?ty.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=pE),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new l9(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?ty.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class TP{constructor(e){this.value=e}clone(){return new TP(this.value.clone===void 0?this.value:this.value.clone())}}let Wae=0;class $ae extends Yl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Wae++}),this.name="",this.usage=qv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class qae extends xE{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Xae{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class c9{constructor(e,t,r=0,i=1/0){this.ray=new rm(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Uh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return bC(e,this,r,t),r.sort(l3),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)bC(e[i],this,r,t);return r.sort(l3),r}}function l3(n,e){return n.distance-e.distance}function bC(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)bC(i[s],e,t,!0)}}class Yae{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Sr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Kae{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const c3=new Re;class Qae{constructor(e=new Re(1/0,1/0),t=new Re(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=c3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,c3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const u3=new Y,cx=new Y;class Zae{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){u3.subVectors(e,this.start),cx.subVectors(this.end,this.start);const r=cx.dot(cx);let s=cx.dot(u3)/r;return t&&(s=Sr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const h3=new Y;class Jae extends Rn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new on,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new gt(i,3));const s=new ms({fog:!1,toneMapped:!1});this.cone=new Qa(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),h3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(h3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const mc=new Y,ux=new Ht,Cb=new Ht;class ele extends Qa{constructor(e){const t=u9(e),r=new on,i=[],s=[],o=new lt(0,0,1),a=new lt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new gt(i,3)),r.setAttribute("color",new gt(s,3));const l=new ms({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");Cb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(ux.multiplyMatrices(Cb,a.matrixWorld),mc.setFromMatrixPosition(ux),i.setXYZ(o,mc.x,mc.y,mc.z),ux.multiplyMatrices(Cb,a.parent.matrixWorld),mc.setFromMatrixPosition(ux),i.setXYZ(o+1,mc.x,mc.y,mc.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function u9(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,u9(n.children[t]));return e}class tle extends Yr{constructor(e,t,r){const i=new Gy(t,4,2),s=new Pu({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const nle=new Y,d3=new lt,f3=new lt;class rle extends Rn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new jy(t);i.rotateY(Math.PI*.5),this.material=new Pu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Vn(o,3)),this.add(new Yr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");d3.copy(this.light.color),f3.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?d3:f3;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(nle.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ile extends Qa{constructor(e=10,t=10,r=4473924,i=8947848){r=new lt(r),i=new lt(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const w=p===s?r:i;w.toArray(c,m),m+=3,w.toArray(c,m),m+=3,w.toArray(c,m),m+=3,w.toArray(c,m),m+=3}const u=new on;u.setAttribute("position",new gt(l,3)),u.setAttribute("color",new gt(c,3));const f=new ms({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class sle extends Qa{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new lt(s),o=new lt(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const w=f&1?s:o;l.push(w.r,w.g,w.b),l.push(w.r,w.g,w.b)}for(let f=0;f<r;f++){const p=f&1?s:o,m=e-e/r*f;for(let v=0;v<i;v++){let w=v/i*(Math.PI*2),_=Math.sin(w)*m,g=Math.cos(w)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),w=(v+1)/i*(Math.PI*2),_=Math.sin(w)*m,g=Math.cos(w)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const c=new on;c.setAttribute("position",new gt(a,3)),c.setAttribute("color",new gt(l,3));const u=new ms({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const p3=new Y,hx=new Y,m3=new Y;class ole extends Rn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new on;i.setAttribute("position",new gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ms({fog:!1,toneMapped:!1});this.lightPlane=new vu(i,s),this.add(this.lightPlane),i=new on,i.setAttribute("position",new gt([0,0,0,0,0,1],3)),this.targetLine=new vu(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),p3.setFromMatrixPosition(this.light.matrixWorld),hx.setFromMatrixPosition(this.light.target.matrixWorld),m3.subVectors(hx,p3),this.lightPlane.lookAt(hx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(hx),this.targetLine.scale.z=m3.length()}}const dx=new Y,_r=new Fy;class ale extends Qa{constructor(e){const t=new on,r=new ms({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,w){l(v),l(w)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new gt(i,3)),t.setAttribute("color",new gt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new lt(16755200),u=new lt(16711680),f=new lt(43775),p=new lt(16777215),m=new lt(3355443);this.setColors(c,u,f,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;_r.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Mr("c",t,e,_r,0,0,-1),Mr("t",t,e,_r,0,0,1),Mr("n1",t,e,_r,-r,-i,-1),Mr("n2",t,e,_r,r,-i,-1),Mr("n3",t,e,_r,-r,i,-1),Mr("n4",t,e,_r,r,i,-1),Mr("f1",t,e,_r,-r,-i,1),Mr("f2",t,e,_r,r,-i,1),Mr("f3",t,e,_r,-r,i,1),Mr("f4",t,e,_r,r,i,1),Mr("u1",t,e,_r,r*.7,i*1.1,-1),Mr("u2",t,e,_r,-r*.7,i*1.1,-1),Mr("u3",t,e,_r,0,i*2,-1),Mr("cf1",t,e,_r,-r,0,1),Mr("cf2",t,e,_r,r,0,1),Mr("cf3",t,e,_r,0,-i,1),Mr("cf4",t,e,_r,0,i,1),Mr("cn1",t,e,_r,-r,0,-1),Mr("cn2",t,e,_r,r,0,-1),Mr("cn3",t,e,_r,0,-i,-1),Mr("cn4",t,e,_r,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Mr(n,e,t,r,i,s,o){dx.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],dx.x,dx.y,dx.z)}}const fx=new hs;class lle extends Qa{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new on;s.setIndex(new Vn(r,1)),s.setAttribute("position",new Vn(i,3)),super(s,new ms({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&fx.setFromObject(this.object),fx.isEmpty())return;const t=fx.min,r=fx.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cle extends Qa{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new on;s.setIndex(new Vn(r,1)),s.setAttribute("position",new gt(i,3)),super(s,new ms({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class ule extends vu{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new on;o.setAttribute("position",new gt(s,3)),o.computeBoundingSphere(),super(o,new ms({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new on;l.setAttribute("position",new gt(a,3)),l.computeBoundingSphere(),this.add(new Yr(l,new Pu({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const g3=new Y;let px,Rb;class hle extends Rn{constructor(e=new Y(0,0,1),t=new Y(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",px===void 0&&(px=new on,px.setAttribute("position",new gt([0,0,0,0,1,0],3)),Rb=new sm(0,.5,1,5,1),Rb.translate(0,-.5,0)),this.position.copy(t),this.line=new vu(px,new ms({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yr(Rb,new Pu({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{g3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(g3,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class dle extends Qa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new on;i.setAttribute("position",new gt(t,3)),i.setAttribute("color",new gt(r,3));const s=new ms({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new lt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fle{constructor(){this.type="ShapePath",this.color=new lt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Yv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const E=[];for(let S=0,b=g.length;S<b;S++){const k=g[S],N=new zh;N.curves=k.curves,E.push(N)}return E}function r(g,E){const S=E.length;let b=!1;for(let k=S-1,N=0;N<S;k=N++){let M=E[k],P=E[N],A=P.x-M.x,R=P.y-M.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(M=E[N],A=-A,P=E[k],R=-R),g.y<M.y||g.y>P.y)continue;if(g.y===M.y){if(g.x===M.x)return!0}else{const O=R*(g.x-M.x)-A*(g.y-M.y);if(O===0)return!0;if(O<0)continue;b=!b}}else{if(g.y!==M.y)continue;if(P.x<=g.x&&g.x<=M.x||M.x<=g.x&&g.x<=P.x)return!0}}return b}const i=Fa.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new zh,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const f=[],p=[];let m=[],v=0,w;p[v]=void 0,m[v]=[];for(let g=0,E=s.length;g<E;g++)a=s[g],w=a.getPoints(),o=i(w),o=e?!o:o,o?(!u&&p[v]&&v++,p[v]={s:new zh,p:w},p[v].s.curves=a.curves,u&&v++,m[v]=[]):m[v].push({h:a,p:w[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,E=0;for(let S=0,b=p.length;S<b;S++)f[S]=[];for(let S=0,b=p.length;S<b;S++){const k=m[S];for(let N=0;N<k.length;N++){const M=k[N];let P=!0;for(let A=0;A<p.length;A++)r(M.p,p[A].p)&&(S!==A&&E++,P?(P=!1,f[A].push(M)):g=!0);P&&f[S].push(M)}}E>0&&g===!1&&(m=f)}let _;for(let g=0,E=p.length;g<E;g++){l=p[g].s,c.push(l),_=m[g];for(let S=0,b=_.length;S<b;S++)l.holes.push(_[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uE);const ple=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:DI,AddEquation:bc,AddOperation:A6,AdditiveAnimationBlendMode:GI,AdditiveBlending:UM,AgXToneMapping:P6,AlphaFormat:D6,AlwaysCompare:J6,AlwaysDepth:_6,AlwaysStencilFunc:mC,AmbientLight:e9,AnimationAction:l9,AnimationClip:ty,AnimationLoader:mae,AnimationMixer:Gae,AnimationObjectGroup:Hae,AnimationUtils:hae,ArcCurve:AH,ArrayCamera:gH,ArrowHelper:hle,AttachedBindMode:jM,Audio:o9,AudioAnalyser:Nae,AudioContext:xP,AudioListener:Rae,AudioLoader:Aae,AxesHelper:dle,BackSide:us,BasicDepthPacking:G6,BasicShadowMap:t6,BatchedMesh:SH,Bone:sP,BooleanKeyframeTrack:hd,Box2:Qae,Box3:hs,Box3Helper:cle,BoxGeometry:ud,BoxHelper:lle,BufferAttribute:Vn,BufferGeometry:on,BufferGeometryLoader:s9,ByteType:k6,Cache:Al,Camera:Fy,CameraHelper:ale,CanvasTexture:Doe,CapsuleGeometry:TE,CatmullRomCurve3:MH,CineonToneMapping:R6,CircleGeometry:bE,ClampToEdgeWrapping:Gi,Clock:wP,Color:lt,ColorKeyframeTrack:vP,ColorManagement:On,CompressedArrayTexture:koe,CompressedCubeTexture:Loe,CompressedTexture:EE,CompressedTextureLoader:gae,ConeGeometry:AE,ConstantAlphaFactor:g6,ConstantColorFactor:p6,CubeCamera:aH,CubeReflectionMapping:zl,CubeRefractionMapping:mu,CubeTexture:Uy,CubeTextureLoader:vae,CubeUVReflectionMapping:nm,CubicBezierCurve:lP,CubicBezierCurve3:CH,CubicInterpolant:$H,CullFaceBack:FM,CullFaceFront:e6,CullFaceFrontBack:See,CullFaceNone:J5,Curve:fa,CurvePath:IH,CustomBlending:n6,CustomToneMapping:I6,CylinderGeometry:sm,Cylindrical:Kae,Data3DTexture:YI,DataArrayTexture:gE,DataTexture:Vh,DataTextureLoader:yae,DataUtils:Nte,DecrementStencilOp:Dee,DecrementWrapStencilOp:Fee,DefaultLoadingManager:YH,DepthFormat:eu,DepthStencilFormat:Qh,DepthTexture:JI,DetachedBindMode:N6,DirectionalLight:JH,DirectionalLightHelper:ole,DiscreteInterpolant:qH,DisplayP3ColorSpace:mE,DodecahedronGeometry:ME,DoubleSide:Ma,DstAlphaFactor:c6,DstColorFactor:h6,DynamicCopyUsage:Zee,DynamicDrawUsage:$ee,DynamicReadUsage:Yee,EdgesGeometry:PH,EllipseCurve:SE,EqualCompare:Y6,EqualDepth:w6,EqualStencilFunc:Bee,EquirectangularReflectionMapping:Fv,EquirectangularRefractionMapping:Uv,Euler:Oy,EventDispatcher:Yl,ExtrudeGeometry:RE,FileLoader:Bl,Float16BufferAttribute:Ute,Float32BufferAttribute:gt,Float64BufferAttribute:Vte,FloatType:Jo,Fog:_E,FogExp2:yE,FramebufferTexture:Noe,FrontSide:Vl,Frustum:Vy,GLBufferAttribute:Xae,GLSL1:ete,GLSL3:gC,GreaterCompare:K6,GreaterDepth:S6,GreaterEqualCompare:Z6,GreaterEqualDepth:E6,GreaterEqualStencilFunc:Wee,GreaterStencilFunc:jee,GridHelper:ile,Group:jf,HalfFloatType:Ip,HemisphereLight:KH,HemisphereLightHelper:rle,IcosahedronGeometry:IE,ImageBitmapLoader:bae,ImageLoader:ny,ImageUtils:XI,IncrementStencilOp:Lee,IncrementWrapStencilOp:Oee,InstancedBufferAttribute:Lp,InstancedBufferGeometry:i9,InstancedInterleavedBuffer:qae,InstancedMesh:EH,Int16BufferAttribute:Ote,Int32BufferAttribute:Fte,Int8BufferAttribute:kte,IntType:FI,InterleavedBuffer:xE,InterleavedBufferAttribute:Zh,Interpolant:Wy,InterpolateDiscrete:Bv,InterpolateLinear:Hv,InterpolateSmooth:Xx,InvertStencilOp:Uee,KeepStencilOp:ph,KeyframeTrack:pa,LOD:xH,LatheGeometry:Hy,Layers:Uh,LessCompare:X6,LessDepth:x6,LessEqualCompare:$I,LessEqualDepth:Ov,LessEqualStencilFunc:Hee,LessStencilFunc:zee,Light:ku,LightProbe:r9,Line:vu,Line3:Zae,LineBasicMaterial:ms,LineCurve:cP,LineCurve3:RH,LineDashedMaterial:jH,LineLoop:TH,LineSegments:Qa,LinearDisplayP3ColorSpace:Dy,LinearEncoding:WI,LinearFilter:Nr,LinearInterpolant:gP,LinearMipMapLinearFilter:Cee,LinearMipMapNearestFilter:Mee,LinearMipmapLinearFilter:gu,LinearMipmapNearestFilter:OI,LinearSRGBColorSpace:qa,LinearToneMapping:M6,LinearTransfer:Gv,Loader:Us,LoaderUtils:TC,LoadingManager:yP,LoopOnce:B6,LoopPingPong:j6,LoopRepeat:H6,LuminanceAlphaFormat:F6,LuminanceFormat:O6,MOUSE:wee,Material:Yi,MaterialLoader:FE,MathUtils:eH,Matrix3:sn,Matrix4:Ht,MaxEquation:HM,Mesh:Yr,MeshBasicMaterial:Pu,MeshDepthMaterial:eP,MeshDistanceMaterial:tP,MeshLambertMaterial:BH,MeshMatcapMaterial:HH,MeshNormalMaterial:zH,MeshPhongMaterial:UH,MeshPhysicalMaterial:pP,MeshStandardMaterial:fP,MeshToonMaterial:VH,MinEquation:BM,MirroredRepeatWrapping:zv,MixOperation:b6,MultiplyBlending:zM,MultiplyOperation:Ly,NearestFilter:Ir,NearestMipMapLinearFilter:Aee,NearestMipMapNearestFilter:bee,NearestMipmapLinearFilter:Qg,NearestMipmapNearestFilter:r1,NeverCompare:q6,NeverDepth:y6,NeverStencilFunc:Vee,NoBlending:Il,NoColorSpace:Zs,NoToneMapping:Da,NormalAnimationBlendMode:pE,NormalBlending:Oh,NotEqualCompare:Q6,NotEqualDepth:T6,NotEqualStencilFunc:Gee,NumberKeyframeTrack:Jv,Object3D:Rn,ObjectLoader:Sae,ObjectSpaceNormalMap:$6,OctahedronGeometry:jy,OneFactor:o6,OneMinusConstantAlphaFactor:v6,OneMinusConstantColorFactor:m6,OneMinusDstAlphaFactor:u6,OneMinusDstColorFactor:d6,OneMinusSrcAlphaFactor:n1,OneMinusSrcColorFactor:l6,OrthographicCamera:By,P3Primaries:$v,PCFShadowMap:hE,PCFSoftShadowMap:Kg,PMREMGenerator:yC,Path:Yv,PerspectiveCamera:hi,Plane:wc,PlaneGeometry:zy,PlaneHelper:ule,PointLight:ZH,PointLightHelper:tle,Points:bH,PointsMaterial:oP,PolarGridHelper:sle,PolyhedronGeometry:Nu,PositionalAudio:Pae,PropertyBinding:xn,PropertyMixer:a9,QuadraticBezierCurve:uP,QuadraticBezierCurve3:hP,Quaternion:Os,QuaternionKeyframeTrack:om,QuaternionLinearInterpolant:XH,RED_GREEN_RGTC2_Format:fC,RED_RGTC1_Format:z6,REVISION:uE,RGBADepthPacking:W6,RGBAFormat:ls,RGBAIntegerFormat:HI,RGBA_ASTC_10x10_Format:aC,RGBA_ASTC_10x5_Format:iC,RGBA_ASTC_10x6_Format:sC,RGBA_ASTC_10x8_Format:oC,RGBA_ASTC_12x10_Format:lC,RGBA_ASTC_12x12_Format:cC,RGBA_ASTC_4x4_Format:KM,RGBA_ASTC_5x4_Format:QM,RGBA_ASTC_5x5_Format:ZM,RGBA_ASTC_6x5_Format:JM,RGBA_ASTC_6x6_Format:eC,RGBA_ASTC_8x5_Format:tC,RGBA_ASTC_8x6_Format:nC,RGBA_ASTC_8x8_Format:rC,RGBA_BPTC_Format:qx,RGBA_ETC2_EAC_Format:YM,RGBA_PVRTC_2BPPV1_Format:qM,RGBA_PVRTC_4BPPV1_Format:$M,RGBA_S3TC_DXT1_Format:Gx,RGBA_S3TC_DXT3_Format:Wx,RGBA_S3TC_DXT5_Format:$x,RGB_BPTC_SIGNED_Format:uC,RGB_BPTC_UNSIGNED_Format:hC,RGB_ETC1_Format:jI,RGB_ETC2_Format:XM,RGB_PVRTC_2BPPV1_Format:WM,RGB_PVRTC_4BPPV1_Format:GM,RGB_S3TC_DXT1_Format:jx,RGFormat:V6,RGIntegerFormat:BI,RawShaderMaterial:FH,Ray:rm,Raycaster:c9,Rec709Primaries:Wv,RectAreaLight:t9,RedFormat:U6,RedIntegerFormat:zI,ReinhardToneMapping:C6,RenderTarget:rH,RepeatWrapping:Vv,ReplaceStencilOp:kee,ReverseSubtractEquation:i6,RingGeometry:PE,SIGNED_RED_GREEN_RGTC2_Format:pC,SIGNED_RED_RGTC1_Format:dC,SRGBColorSpace:Wr,SRGBTransfer:Wn,Scene:rP,ShaderChunk:en,ShaderLib:Qo,ShaderMaterial:Xa,ShadowMaterial:OH,Shape:zh,ShapeGeometry:NE,ShapePath:fle,ShapeUtils:Fa,ShortType:L6,Skeleton:wE,SkeletonHelper:ele,SkinnedMesh:wH,Source:Th,Sphere:$i,SphereGeometry:Gy,Spherical:Yae,SphericalHarmonics3:n9,SplineCurve:dP,SpotLight:QH,SpotLightHelper:Jae,Sprite:_H,SpriteMaterial:iP,SrcAlphaFactor:t1,SrcAlphaSaturateFactor:f6,SrcColorFactor:a6,StaticCopyUsage:Qee,StaticDrawUsage:qv,StaticReadUsage:Xee,StereoCamera:Mae,StreamCopyUsage:Jee,StreamDrawUsage:qee,StreamReadUsage:Kee,StringKeyframeTrack:dd,SubtractEquation:r6,SubtractiveBlending:VM,TOUCH:Eee,TangentSpaceNormalMap:Iu,TetrahedronGeometry:kE,Texture:kr,TextureLoader:_ae,TorusGeometry:LE,TorusKnotGeometry:DE,Triangle:Rs,TriangleFanDrawMode:Pee,TriangleStripDrawMode:Iee,TrianglesDrawMode:Ree,TubeGeometry:OE,TwoPassDoubleSide:Tee,UVMapping:dE,Uint16BufferAttribute:KI,Uint32BufferAttribute:QI,Uint8BufferAttribute:Lte,Uint8ClampedBufferAttribute:Dte,Uniform:TP,UniformsGroup:$ae,UniformsLib:$e,UniformsUtils:oH,UnsignedByteType:Oa,UnsignedInt248Type:Jc,UnsignedIntType:bl,UnsignedShort4444Type:UI,UnsignedShort5551Type:VI,UnsignedShortType:fE,VSMShadowMap:$o,Vector2:Re,Vector3:Y,Vector4:Fn,VectorKeyframeTrack:ey,VideoTexture:Poe,WebGL1Renderer:vH,WebGL3DRenderTarget:xte,WebGLArrayRenderTarget:_te,WebGLCoordinateSystem:ea,WebGLCubeRenderTarget:lH,WebGLMultipleRenderTargets:wte,WebGLRenderTarget:ua,WebGLRenderer:nP,WebGLUtils:mH,WebGPUCoordinateSystem:Pp,WireframeGeometry:DH,WrapAroundEnding:jv,ZeroCurvatureEnding:Eh,ZeroFactor:s6,ZeroSlopeEnding:Sh,ZeroStencilOp:Nee,_SRGBAFormat:i1,createCanvasElement:nH,sRGBEncoding:tu},Symbol.toStringTag,{value:"Module"}));var h9={exports:{}},fd={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */fd.ConcurrentRoot=1;fd.ContinuousEventPriority=4;fd.DefaultEventPriority=16;fd.DiscreteEventPriority=1;fd.IdleEventPriority=536870912;fd.LegacyRoot=0;h9.exports=fd;var Wf=h9.exports;function mle(n){let e;const t=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=u?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!f(p,v)){const w=p;c(p=v,w)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const gle=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),v3=gle?H.useEffect:H.useLayoutEffect;function vle(n){const e=typeof n=="function"?mle(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=H.useReducer(_=>_+1,0),o=e.getState(),a=H.useRef(o),l=H.useRef(r),c=H.useRef(i),u=H.useRef(!1),f=H.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(f.current,p)),v3(()=>{m&&(f.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=H.useRef(o);v3(()=>{const _=()=>{try{const E=e.getState(),S=l.current(E);c.current(f.current,S)||(a.current=E,f.current=S,s())}catch{u.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const w=m?p:f.current;return H.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var d9={exports:{}},Ib={exports:{}},Pb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y3;function yle(){return y3||(y3=1,function(n){function e(z,j){var X=z.length;z.push(j);e:for(;0<X;){var ee=X-1>>>1,te=z[ee];if(0<i(te,j))z[ee]=j,z[X]=te,X=ee;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var j=z[0],X=z.pop();if(X!==j){z[0]=X;e:for(var ee=0,te=z.length,J=te>>>1;ee<J;){var oe=2*(ee+1)-1,we=z[oe],Pe=oe+1,Te=z[Pe];if(0>i(we,X))Pe<te&&0>i(Te,we)?(z[ee]=Te,z[Pe]=X,ee=Pe):(z[ee]=we,z[oe]=X,ee=oe);else if(Pe<te&&0>i(Te,X))z[ee]=Te,z[Pe]=X,ee=Pe;else break e}}return j}function i(z,j){var X=z.sortIndex-j.sortIndex;return X!==0?X:z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var j=t(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=z)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(c)}}function b(z){if(w=!1,S(z),!v)if(t(l)!==null)v=!0,ne(k);else{var j=t(c);j!==null&&ae(b,j.startTime-z)}}function k(z,j){v=!1,w&&(w=!1,g(P),P=-1),m=!0;var X=p;try{for(S(j),f=t(l);f!==null&&(!(f.expirationTime>j)||z&&!O());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var te=ee(f.expirationTime<=j);j=n.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&r(l),S(j)}else r(l);f=t(l)}if(f!==null)var J=!0;else{var oe=t(c);oe!==null&&ae(b,oe.startTime-j),J=!1}return J}finally{f=null,p=X,m=!1}}var N=!1,M=null,P=-1,A=5,R=-1;function O(){return!(n.unstable_now()-R<A)}function U(){if(M!==null){var z=n.unstable_now();R=z;var j=!0;try{j=M(!0,z)}finally{j?V():(N=!1,M=null)}}else N=!1}var V;if(typeof E=="function")V=function(){E(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Z=$.port2;$.port1.onmessage=U,V=function(){Z.postMessage(null)}}else V=function(){_(U,0)};function ne(z){M=z,N||(N=!0,V())}function ae(z,j){P=_(function(){z(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ne(k))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var X=p;p=j;try{return z()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=p;p=z;try{return j()}finally{p=X}},n.unstable_scheduleCallback=function(z,j,X){var ee=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,z={id:u++,callback:j,priorityLevel:z,startTime:X,expirationTime:te,sortIndex:-1},X>ee?(z.sortIndex=X,e(c,z),t(l)===null&&z===t(c)&&(w?(g(P),P=-1):w=!0,ae(b,X-ee))):(z.sortIndex=te,e(l,z),v||m||(v=!0,ne(k))),z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(z){var j=p;return function(){var X=p;p=j;try{return z.apply(this,arguments)}finally{p=X}}}}(Pb)),Pb}var _3;function _le(){return _3||(_3=1,Ib.exports=yle()),Ib.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xle=function(e){var t={},r=H,i=_le(),s=Object.assign;function o(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),k=Symbol.iterator;function N(h){return h===null||typeof h!="object"?null:(h=k&&h[k]||h["@@iterator"],typeof h=="function"?h:null)}function M(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case v:return(h.displayName||"Context")+".Consumer";case m:return(h._context.displayName||"Context")+".Provider";case w:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case E:return d=h.displayName||null,d!==null?d:M(h.type)||"Memo";case S:d=h._payload,h=h._init;try{return M(h(d))}catch{}}return null}function P(h){var d=h.type;switch(h.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=d.render,h=h.displayName||h.name||"",d.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function A(h){var d=h,x=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,d.flags&4098&&(x=d.return),h=d.return;while(h)}return d.tag===3?x:null}function R(h){if(A(h)!==h)throw Error(o(188))}function O(h){var d=h.alternate;if(!d){if(d=A(h),d===null)throw Error(o(188));return d!==h?null:h}for(var x=h,T=d;;){var C=x.return;if(C===null)break;var D=C.alternate;if(D===null){if(T=C.return,T!==null){x=T;continue}break}if(C.child===D.child){for(D=C.child;D;){if(D===x)return R(C),h;if(D===T)return R(C),d;D=D.sibling}throw Error(o(188))}if(x.return!==T.return)x=C,T=D;else{for(var K=!1,ie=C.child;ie;){if(ie===x){K=!0,x=C,T=D;break}if(ie===T){K=!0,T=C,x=D;break}ie=ie.sibling}if(!K){for(ie=D.child;ie;){if(ie===x){K=!0,x=D,T=C;break}if(ie===T){K=!0,T=D,x=C;break}ie=ie.sibling}if(!K)throw Error(o(189))}}if(x.alternate!==T)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?h:d}function U(h){return h=O(h),h!==null?V(h):null}function V(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var d=V(h);if(d!==null)return d;h=h.sibling}return null}function $(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var d=$(h);if(d!==null)return d}h=h.sibling}return null}var Z=Array.isArray,ne=e.getPublicInstance,ae=e.getRootHostContext,z=e.getChildHostContext,j=e.prepareForCommit,X=e.resetAfterCommit,ee=e.createInstance,te=e.appendInitialChild,J=e.finalizeInitialChildren,oe=e.prepareUpdate,we=e.shouldSetTextContent,Pe=e.createTextInstance,Te=e.scheduleTimeout,mt=e.cancelTimeout,vt=e.noTimeout,Ge=e.isPrimaryRenderer,rt=e.supportsMutation,Q=e.supportsPersistence,be=e.supportsHydration,xe=e.getInstanceFromNode,Le=e.preparePortalMount,_e=e.getCurrentEventPriority,it=e.detachDeletedInstance,We=e.supportsMicrotasks,G=e.scheduleMicrotask,B=e.supportsTestSelectors,le=e.findFiberRoot,Ne=e.getBoundingRect,Me=e.getTextContent,Ce=e.isHiddenSubtree,st=e.matchAccessibilityRole,Fe=e.setFocusIfFocusable,qe=e.setupIntersectionObserver,Et=e.appendChild,Ft=e.appendChildToContainer,Ie=e.commitTextUpdate,cn=e.commitMount,Gt=e.commitUpdate,Mt=e.insertBefore,dt=e.insertInContainerBefore,tt=e.removeChild,St=e.removeChildFromContainer,hn=e.resetTextContent,In=e.hideInstance,jt=e.hideTextInstance,Ue=e.unhideInstance,re=e.unhideTextInstance,De=e.clearContainer,je=e.cloneInstance,Tt=e.createContainerChildSet,ke=e.appendChildToContainerChildSet,_t=e.finalizeContainerChildren,At=e.replaceContainerChildren,nn=e.cloneHiddenInstance,Sn=e.cloneHiddenTextInstance,an=e.canHydrateInstance,Nn=e.canHydrateTextInstance,Bn=e.canHydrateSuspenseInstance,fi=e.isSuspenseInstancePending,Za=e.isSuspenseInstanceFallback,lo=e.registerSuspenseInstanceRetry,ma=e.getNextHydratableSibling,Ki=e.getFirstHydratableChild,Du=e.getFirstHydratableChildWithinContainer,Ou=e.getFirstHydratableChildWithinSuspenseInstance,Fu=e.hydrateInstance,Uu=e.hydrateTextInstance,xd=e.hydrateSuspenseInstance,q=e.getNextHydratableInstanceAfterSuspenseInstance,ce=e.commitHydratedContainer,pe=e.commitHydratedSuspenseInstance,me=e.clearSuspenseBoundary,de=e.clearSuspenseBoundaryFromContainer,Qe=e.shouldDeleteUnhydratedTailInstances,ft=e.didNotMatchHydratedContainerTextInstance,xt=e.didNotMatchHydratedTextInstance,Rt;function Ut(h){if(Rt===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);Rt=d&&d[1]||""}return`
`+Rt+h}var Nt=!1;function Dt(h,d){if(!h||Nt)return"";Nt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Be){var T=Be}Reflect.construct(h,[],d)}else{try{d.call()}catch(Be){T=Be}h.call(d.prototype)}else{try{throw Error()}catch(Be){T=Be}h()}}catch(Be){if(Be&&T&&typeof Be.stack=="string"){for(var C=Be.stack.split(`
`),D=T.stack.split(`
`),K=C.length-1,ie=D.length-1;1<=K&&0<=ie&&C[K]!==D[ie];)ie--;for(;1<=K&&0<=ie;K--,ie--)if(C[K]!==D[ie]){if(K!==1||ie!==1)do if(K--,ie--,0>ie||C[K]!==D[ie]){var ye=`
`+C[K].replace(" at new "," at ");return h.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",h.displayName)),ye}while(1<=K&&0<=ie);break}}}finally{Nt=!1,Error.prepareStackTrace=x}return(h=h?h.displayName||h.name:"")?Ut(h):""}var Gn=Object.prototype.hasOwnProperty,Tr=[],Ln=-1;function br(h){return{current:h}}function It(h){0>Ln||(h.current=Tr[Ln],Tr[Ln]=null,Ln--)}function ot(h,d){Ln++,Tr[Ln]=h.current,h.current=d}var gs={},Ot=br(gs),_n=br(!1),Ti=gs;function ni(h,d){var x=h.type.contextTypes;if(!x)return gs;var T=h.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===d)return T.__reactInternalMemoizedMaskedChildContext;var C={},D;for(D in x)C[D]=d[D];return T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=C),C}function vr(h){return h=h.childContextTypes,h!=null}function Vt(){It(_n),It(Ot)}function Qi(h,d,x){if(Ot.current!==gs)throw Error(o(168));ot(Ot,d),ot(_n,x)}function co(h,d,x){var T=h.stateNode;if(d=d.childContextTypes,typeof T.getChildContext!="function")return x;T=T.getChildContext();for(var C in T)if(!(C in d))throw Error(o(108,P(h)||"Unknown",C));return s({},x,T)}function lr(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||gs,Ti=Ot.current,ot(Ot,h),ot(_n,_n.current),!0}function Ql(h,d,x){var T=h.stateNode;if(!T)throw Error(o(169));x?(h=co(h,d,Ti),T.__reactInternalMemoizedMergedChildContext=h,It(_n),It(Ot),ot(Ot,h)):It(_n),ot(_n,x)}var bi=Math.clz32?Math.clz32:rS,wd=Math.log,nS=Math.LN2;function rS(h){return h>>>=0,h===0?32:31-(wd(h)/nS|0)|0}var Ed=64,ga=4194304;function Vs(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Vu(h,d){var x=h.pendingLanes;if(x===0)return 0;var T=0,C=h.suspendedLanes,D=h.pingedLanes,K=x&268435455;if(K!==0){var ie=K&~C;ie!==0?T=Vs(ie):(D&=K,D!==0&&(T=Vs(D)))}else K=x&~C,K!==0?T=Vs(K):D!==0&&(T=Vs(D));if(T===0)return 0;if(d!==0&&d!==T&&!(d&C)&&(C=T&-T,D=d&-d,C>=D||C===16&&(D&4194240)!==0))return d;if(T&4&&(T|=x&16),d=h.entangledLanes,d!==0)for(h=h.entanglements,d&=T;0<d;)x=31-bi(d),C=1<<x,T|=h[x],d&=~C;return T}function o_(h,d){switch(h){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a_(h,d){for(var x=h.suspendedLanes,T=h.pingedLanes,C=h.expirationTimes,D=h.pendingLanes;0<D;){var K=31-bi(D),ie=1<<K,ye=C[K];ye===-1?(!(ie&x)||ie&T)&&(C[K]=o_(ie,d)):ye<=d&&(h.expiredLanes|=ie),D&=~ie}}function Sd(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Td(h){for(var d=[],x=0;31>x;x++)d.push(h);return d}function uo(h,d,x){h.pendingLanes|=d,d!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,d=31-bi(d),h[d]=x}function iS(h,d){var x=h.pendingLanes&~d;h.pendingLanes=d,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=d,h.mutableReadLanes&=d,h.entangledLanes&=d,d=h.entanglements;var T=h.eventTimes;for(h=h.expirationTimes;0<x;){var C=31-bi(x),D=1<<C;d[C]=0,T[C]=-1,h[C]=-1,x&=~D}}function gm(h,d){var x=h.entangledLanes|=d;for(h=h.entanglements;x;){var T=31-bi(x),C=1<<T;C&d|h[T]&d&&(h[T]|=d),x&=~C}}var vn=0;function Lo(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var vm=i.unstable_scheduleCallback,bd=i.unstable_cancelCallback,Ad=i.unstable_shouldYield,l_=i.unstable_requestPaint,tr=i.unstable_now,Ja=i.unstable_ImmediatePriority,c_=i.unstable_UserBlockingPriority,zu=i.unstable_NormalPriority,nr=i.unstable_IdlePriority,Md=null,ho=null;function u_(h){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(Md,h,void 0,(h.current.flags&128)===128)}catch{}}function h_(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var zs=typeof Object.is=="function"?Object.is:h_,vs=null,Bs=!1,Cd=!1;function d_(h){vs===null?vs=[h]:vs.push(h)}function Bu(h){Bs=!0,d_(h)}function Hs(){if(!Cd&&vs!==null){Cd=!0;var h=0,d=vn;try{var x=vs;for(vn=1;h<x.length;h++){var T=x[h];do T=T(!0);while(T!==null)}vs=null,Bs=!1}catch(C){throw vs!==null&&(vs=vs.slice(h+1)),vm(Ja,Hs),C}finally{vn=d,Cd=!1}}return null}var ym=a.ReactCurrentBatchConfig;function el(h,d){if(zs(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var x=Object.keys(h),T=Object.keys(d);if(x.length!==T.length)return!1;for(T=0;T<x.length;T++){var C=x[T];if(!Gn.call(d,C)||!zs(h[C],d[C]))return!1}return!0}function f_(h){switch(h.tag){case 5:return Ut(h.type);case 16:return Ut("Lazy");case 13:return Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 2:case 15:return h=Dt(h.type,!1),h;case 11:return h=Dt(h.type.render,!1),h;case 1:return h=Dt(h.type,!0),h;default:return""}}function Ai(h,d){if(h&&h.defaultProps){d=s({},d),h=h.defaultProps;for(var x in h)d[x]===void 0&&(d[x]=h[x]);return d}return d}var Rd=br(null),Hu=null,fo=null,Id=null;function Pd(){Id=fo=Hu=null}function Nd(h,d,x){Ge?(ot(Rd,d._currentValue),d._currentValue=x):(ot(Rd,d._currentValue2),d._currentValue2=x)}function ju(h){var d=Rd.current;It(Rd),Ge?h._currentValue=d:h._currentValue2=d}function kd(h,d,x){for(;h!==null;){var T=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,T!==null&&(T.childLanes|=d)):T!==null&&(T.childLanes&d)!==d&&(T.childLanes|=d),h===x)break;h=h.return}}function Do(h,d){Hu=h,Id=fo=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&d&&($s=!0),h.firstContext=null)}function Zi(h){var d=Ge?h._currentValue:h._currentValue2;if(Id!==h)if(h={context:h,memoizedValue:d,next:null},fo===null){if(Hu===null)throw Error(o(308));fo=h,Hu.dependencies={lanes:0,firstContext:h}}else fo=fo.next=h;return d}var js=null,Mi=!1;function Ld(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _m(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function po(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function Oo(h,d){var x=h.updateQueue;x!==null&&(x=x.shared,Lr!==null&&h.mode&1&&!(ln&2)?(h=x.interleaved,h===null?(d.next=d,js===null?js=[x]:js.push(x)):(d.next=h.next,h.next=d),x.interleaved=d):(h=x.pending,h===null?d.next=d:(d.next=h.next,h.next=d),x.pending=d))}function tl(h,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var T=d.lanes;T&=h.pendingLanes,x|=T,d.lanes=x,gm(h,x)}}function Ci(h,d){var x=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,x===T)){var C=null,D=null;if(x=x.firstBaseUpdate,x!==null){do{var K={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};D===null?C=D=K:D=D.next=K,x=x.next}while(x!==null);D===null?C=D=d:D=D.next=d}else C=D=d;x={baseState:T.baseState,firstBaseUpdate:C,lastBaseUpdate:D,shared:T.shared,effects:T.effects},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=d:h.next=d,x.lastBaseUpdate=d}function Gu(h,d,x,T){var C=h.updateQueue;Mi=!1;var D=C.firstBaseUpdate,K=C.lastBaseUpdate,ie=C.shared.pending;if(ie!==null){C.shared.pending=null;var ye=ie,Be=ye.next;ye.next=null,K===null?D=Be:K.next=Be,K=ye;var ht=h.alternate;ht!==null&&(ht=ht.updateQueue,ie=ht.lastBaseUpdate,ie!==K&&(ie===null?ht.firstBaseUpdate=Be:ie.next=Be,ht.lastBaseUpdate=ye))}if(D!==null){var Yt=C.baseState;K=0,ht=Be=ye=null,ie=D;do{var Pt=ie.lane,Hn=ie.eventTime;if((T&Pt)===Pt){ht!==null&&(ht=ht.next={eventTime:Hn,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var bt=h,Ni=ie;switch(Pt=d,Hn=x,Ni.tag){case 1:if(bt=Ni.payload,typeof bt=="function"){Yt=bt.call(Hn,Yt,Pt);break e}Yt=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Ni.payload,Pt=typeof bt=="function"?bt.call(Hn,Yt,Pt):bt,Pt==null)break e;Yt=s({},Yt,Pt);break e;case 2:Mi=!0}}ie.callback!==null&&ie.lane!==0&&(h.flags|=64,Pt=C.effects,Pt===null?C.effects=[ie]:Pt.push(ie))}else Hn={eventTime:Hn,lane:Pt,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},ht===null?(Be=ht=Hn,ye=Yt):ht=ht.next=Hn,K|=Pt;if(ie=ie.next,ie===null){if(ie=C.shared.pending,ie===null)break;Pt=ie,ie=Pt.next,Pt.next=null,C.lastBaseUpdate=Pt,C.shared.pending=null}}while(!0);if(ht===null&&(ye=Yt),C.baseState=ye,C.firstBaseUpdate=Be,C.lastBaseUpdate=ht,d=C.shared.interleaved,d!==null){C=d;do K|=C.lane,C=C.next;while(C!==d)}else D===null&&(C.shared.lanes=0);Hd|=K,h.lanes=K,h.memoizedState=Yt}}function xm(h,d,x){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var T=h[d],C=T.callback;if(C!==null){if(T.callback=null,T=x,typeof C!="function")throw Error(o(191,C));C.call(T)}}}var nl=new r.Component().refs;function y(h,d,x,T){d=h.memoizedState,x=x(T,d),x=x==null?d:s({},d,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}var I={isMounted:function(h){return(h=h._reactInternals)?A(h)===h:!1},enqueueSetState:function(h,d,x){h=h._reactInternals;var T=ts(),C=ec(h),D=po(T,C);D.payload=d,x!=null&&(D.callback=x),Oo(h,D),d=yo(h,C,T),d!==null&&tl(d,h,C)},enqueueReplaceState:function(h,d,x){h=h._reactInternals;var T=ts(),C=ec(h),D=po(T,C);D.tag=1,D.payload=d,x!=null&&(D.callback=x),Oo(h,D),d=yo(h,C,T),d!==null&&tl(d,h,C)},enqueueForceUpdate:function(h,d){h=h._reactInternals;var x=ts(),T=ec(h),C=po(x,T);C.tag=2,d!=null&&(C.callback=d),Oo(h,C),d=yo(h,T,x),d!==null&&tl(d,h,T)}};function F(h,d,x,T,C,D,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,D,K):d.prototype&&d.prototype.isPureReactComponent?!el(x,T)||!el(C,D):!0}function W(h,d,x){var T=!1,C=gs,D=d.contextType;return typeof D=="object"&&D!==null?D=Zi(D):(C=vr(d)?Ti:Ot.current,T=d.contextTypes,D=(T=T!=null)?ni(h,C):gs),d=new d(x,D),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=I,h.stateNode=d,d._reactInternals=h,T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=C,h.__reactInternalMemoizedMaskedChildContext=D),d}function ue(h,d,x,T){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,T),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,T),d.state!==h&&I.enqueueReplaceState(d,d.state,null)}function fe(h,d,x,T){var C=h.stateNode;C.props=x,C.state=h.memoizedState,C.refs=nl,Ld(h);var D=d.contextType;typeof D=="object"&&D!==null?C.context=Zi(D):(D=vr(d)?Ti:Ot.current,C.context=ni(h,D)),C.state=h.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(y(h,d,D,x),C.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(d=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),d!==C.state&&I.enqueueReplaceState(C,C.state,null),Gu(h,x,C,T),C.state=h.memoizedState),typeof C.componentDidMount=="function"&&(h.flags|=4194308)}var ze=[],zt=0,rr=null,Tn=0,Pn=[],cr=0,Ji=null,ri=1,ii="";function mo(h,d){ze[zt++]=Tn,ze[zt++]=rr,rr=h,Tn=d}function Dd(h,d,x){Pn[cr++]=ri,Pn[cr++]=ii,Pn[cr++]=Ji,Ji=h;var T=ri;h=ii;var C=32-bi(T)-1;T&=~(1<<C),x+=1;var D=32-bi(d)+C;if(30<D){var K=C-C%5;D=(T&(1<<K)-1).toString(32),T>>=K,C-=K,ri=1<<32-bi(d)+C|x<<C|T,ii=D+h}else ri=1<<D|x<<C|T,ii=h}function sS(h){h.return!==null&&(mo(h,1),Dd(h,1,0))}function oS(h){for(;h===rr;)rr=ze[--zt],ze[zt]=null,Tn=ze[--zt],ze[zt]=null;for(;h===Ji;)Ji=Pn[--cr],Pn[cr]=null,ii=Pn[--cr],Pn[cr]=null,ri=Pn[--cr],Pn[cr]=null}var Gs=null,Ws=null,ir=!1,wm=!1,Fo=null;function A2(h,d){var x=_o(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=h,d=h.deletions,d===null?(h.deletions=[x],h.flags|=16):d.push(x)}function M2(h,d){switch(h.tag){case 5:return d=an(d,h.type,h.pendingProps),d!==null?(h.stateNode=d,Gs=h,Ws=Ki(d),!0):!1;case 6:return d=Nn(d,h.pendingProps),d!==null?(h.stateNode=d,Gs=h,Ws=null,!0):!1;case 13:if(d=Bn(d),d!==null){var x=Ji!==null?{id:ri,overflow:ii}:null;return h.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=_o(18,null,null,0),x.stateNode=d,x.return=h,h.child=x,Gs=h,Ws=null,!0}return!1;default:return!1}}function aS(h){return(h.mode&1)!==0&&(h.flags&128)===0}function lS(h){if(ir){var d=Ws;if(d){var x=d;if(!M2(h,d)){if(aS(h))throw Error(o(418));d=ma(x);var T=Gs;d&&M2(h,d)?A2(T,x):(h.flags=h.flags&-4097|2,ir=!1,Gs=h)}}else{if(aS(h))throw Error(o(418));h.flags=h.flags&-4097|2,ir=!1,Gs=h}}}function C2(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Gs=h}function Em(h){if(!be||h!==Gs)return!1;if(!ir)return C2(h),ir=!0,!1;if(h.tag!==3&&(h.tag!==5||Qe(h.type)&&!we(h.type,h.memoizedProps))){var d=Ws;if(d){if(aS(h)){for(h=Ws;h;)h=ma(h);throw Error(o(418))}for(;d;)A2(h,d),d=ma(d)}}if(C2(h),h.tag===13){if(!be)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Ws=q(h)}else Ws=Gs?ma(h.stateNode):null;return!0}function Od(){be&&(Ws=Gs=null,wm=ir=!1)}function cS(h){Fo===null?Fo=[h]:Fo.push(h)}function Sm(h,d,x){if(h=x.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var T=x.stateNode}if(!T)throw Error(o(147,h));var C=T,D=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===D?d.ref:(d=function(K){var ie=C.refs;ie===nl&&(ie=C.refs={}),K===null?delete ie[D]:ie[D]=K},d._stringRef=D,d)}if(typeof h!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,h))}return h}function p_(h,d){throw h=Object.prototype.toString.call(d),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h))}function R2(h){var d=h._init;return d(h._payload)}function I2(h){function d(he,se){if(h){var ge=he.deletions;ge===null?(he.deletions=[se],he.flags|=16):ge.push(se)}}function x(he,se){if(!h)return null;for(;se!==null;)d(he,se),se=se.sibling;return null}function T(he,se){for(he=new Map;se!==null;)se.key!==null?he.set(se.key,se):he.set(se.index,se),se=se.sibling;return he}function C(he,se){return he=nc(he,se),he.index=0,he.sibling=null,he}function D(he,se,ge){return he.index=ge,h?(ge=he.alternate,ge!==null?(ge=ge.index,ge<se?(he.flags|=2,se):ge):(he.flags|=2,se)):(he.flags|=1048576,se)}function K(he){return h&&he.alternate===null&&(he.flags|=2),he}function ie(he,se,ge,Je){return se===null||se.tag!==6?(se=$S(ge,he.mode,Je),se.return=he,se):(se=C(se,ge),se.return=he,se)}function ye(he,se,ge,Je){var wt=ge.type;return wt===u?ht(he,se,ge.props.children,Je,ge.key):se!==null&&(se.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===S&&R2(wt)===se.type)?(Je=C(se,ge.props),Je.ref=Sm(he,se,ge),Je.return=he,Je):(Je=W_(ge.type,ge.key,ge.props,null,he.mode,Je),Je.ref=Sm(he,se,ge),Je.return=he,Je)}function Be(he,se,ge,Je){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=qS(ge,he.mode,Je),se.return=he,se):(se=C(se,ge.children||[]),se.return=he,se)}function ht(he,se,ge,Je,wt){return se===null||se.tag!==7?(se=Qu(ge,he.mode,Je,wt),se.return=he,se):(se=C(se,ge),se.return=he,se)}function Yt(he,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number")return se=$S(""+se,he.mode,ge),se.return=he,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case l:return ge=W_(se.type,se.key,se.props,null,he.mode,ge),ge.ref=Sm(he,null,se),ge.return=he,ge;case c:return se=qS(se,he.mode,ge),se.return=he,se;case S:var Je=se._init;return Yt(he,Je(se._payload),ge)}if(Z(se)||N(se))return se=Qu(se,he.mode,ge,null),se.return=he,se;p_(he,se)}return null}function Pt(he,se,ge,Je){var wt=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return wt!==null?null:ie(he,se,""+ge,Je);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return ge.key===wt?ye(he,se,ge,Je):null;case c:return ge.key===wt?Be(he,se,ge,Je):null;case S:return wt=ge._init,Pt(he,se,wt(ge._payload),Je)}if(Z(ge)||N(ge))return wt!==null?null:ht(he,se,ge,Je,null);p_(he,ge)}return null}function Hn(he,se,ge,Je,wt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return he=he.get(ge)||null,ie(se,he,""+Je,wt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case l:return he=he.get(Je.key===null?ge:Je.key)||null,ye(se,he,Je,wt);case c:return he=he.get(Je.key===null?ge:Je.key)||null,Be(se,he,Je,wt);case S:var rn=Je._init;return Hn(he,se,ge,rn(Je._payload),wt)}if(Z(Je)||N(Je))return he=he.get(ge)||null,ht(se,he,Je,wt,null);p_(se,Je)}return null}function bt(he,se,ge,Je){for(var wt=null,rn=null,Kt=se,bn=se=0,oi=null;Kt!==null&&bn<ge.length;bn++){Kt.index>bn?(oi=Kt,Kt=null):oi=Kt.sibling;var An=Pt(he,Kt,ge[bn],Je);if(An===null){Kt===null&&(Kt=oi);break}h&&Kt&&An.alternate===null&&d(he,Kt),se=D(An,se,bn),rn===null?wt=An:rn.sibling=An,rn=An,Kt=oi}if(bn===ge.length)return x(he,Kt),ir&&mo(he,bn),wt;if(Kt===null){for(;bn<ge.length;bn++)Kt=Yt(he,ge[bn],Je),Kt!==null&&(se=D(Kt,se,bn),rn===null?wt=Kt:rn.sibling=Kt,rn=Kt);return ir&&mo(he,bn),wt}for(Kt=T(he,Kt);bn<ge.length;bn++)oi=Hn(Kt,he,bn,ge[bn],Je),oi!==null&&(h&&oi.alternate!==null&&Kt.delete(oi.key===null?bn:oi.key),se=D(oi,se,bn),rn===null?wt=oi:rn.sibling=oi,rn=oi);return h&&Kt.forEach(function(rc){return d(he,rc)}),ir&&mo(he,bn),wt}function Ni(he,se,ge,Je){var wt=N(ge);if(typeof wt!="function")throw Error(o(150));if(ge=wt.call(ge),ge==null)throw Error(o(151));for(var rn=wt=null,Kt=se,bn=se=0,oi=null,An=ge.next();Kt!==null&&!An.done;bn++,An=ge.next()){Kt.index>bn?(oi=Kt,Kt=null):oi=Kt.sibling;var rc=Pt(he,Kt,An.value,Je);if(rc===null){Kt===null&&(Kt=oi);break}h&&Kt&&rc.alternate===null&&d(he,Kt),se=D(rc,se,bn),rn===null?wt=rc:rn.sibling=rc,rn=rc,Kt=oi}if(An.done)return x(he,Kt),ir&&mo(he,bn),wt;if(Kt===null){for(;!An.done;bn++,An=ge.next())An=Yt(he,An.value,Je),An!==null&&(se=D(An,se,bn),rn===null?wt=An:rn.sibling=An,rn=An);return ir&&mo(he,bn),wt}for(Kt=T(he,Kt);!An.done;bn++,An=ge.next())An=Hn(Kt,he,bn,An.value,Je),An!==null&&(h&&An.alternate!==null&&Kt.delete(An.key===null?bn:An.key),se=D(An,se,bn),rn===null?wt=An:rn.sibling=An,rn=An);return h&&Kt.forEach(function(ZG){return d(he,ZG)}),ir&&mo(he,bn),wt}function xo(he,se,ge,Je){if(typeof ge=="object"&&ge!==null&&ge.type===u&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:e:{for(var wt=ge.key,rn=se;rn!==null;){if(rn.key===wt){if(wt=ge.type,wt===u){if(rn.tag===7){x(he,rn.sibling),se=C(rn,ge.props.children),se.return=he,he=se;break e}}else if(rn.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===S&&R2(wt)===rn.type){x(he,rn.sibling),se=C(rn,ge.props),se.ref=Sm(he,rn,ge),se.return=he,he=se;break e}x(he,rn);break}else d(he,rn);rn=rn.sibling}ge.type===u?(se=Qu(ge.props.children,he.mode,Je,ge.key),se.return=he,he=se):(Je=W_(ge.type,ge.key,ge.props,null,he.mode,Je),Je.ref=Sm(he,se,ge),Je.return=he,he=Je)}return K(he);case c:e:{for(rn=ge.key;se!==null;){if(se.key===rn)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){x(he,se.sibling),se=C(se,ge.children||[]),se.return=he,he=se;break e}else{x(he,se);break}else d(he,se);se=se.sibling}se=qS(ge,he.mode,Je),se.return=he,he=se}return K(he);case S:return rn=ge._init,xo(he,se,rn(ge._payload),Je)}if(Z(ge))return bt(he,se,ge,Je);if(N(ge))return Ni(he,se,ge,Je);p_(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,se!==null&&se.tag===6?(x(he,se.sibling),se=C(se,ge),se.return=he,he=se):(x(he,se),se=$S(ge,he.mode,Je),se.return=he,he=se),K(he)):x(he,se)}return xo}var Fd=I2(!0),P2=I2(!1),Tm={},go=br(Tm),bm=br(Tm),Ud=br(Tm);function va(h){if(h===Tm)throw Error(o(174));return h}function uS(h,d){ot(Ud,d),ot(bm,h),ot(go,Tm),h=ae(d),It(go),ot(go,h)}function Vd(){It(go),It(bm),It(Ud)}function N2(h){var d=va(Ud.current),x=va(go.current);d=z(x,h.type,d),x!==d&&(ot(bm,h),ot(go,d))}function hS(h){bm.current===h&&(It(go),It(bm))}var ur=br(0);function m_(h){for(var d=h;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||fi(x)||Za(x)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var dS=[];function fS(){for(var h=0;h<dS.length;h++){var d=dS[h];Ge?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}dS.length=0}var g_=a.ReactCurrentDispatcher,vo=a.ReactCurrentBatchConfig,zd=0,yr=null,Ri=null,si=null,v_=!1,Am=!1,Mm=0,SG=0;function Ii(){throw Error(o(321))}function pS(h,d){if(d===null)return!1;for(var x=0;x<d.length&&x<h.length;x++)if(!zs(h[x],d[x]))return!1;return!0}function mS(h,d,x,T,C,D){if(zd=D,yr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,g_.current=h===null||h.memoizedState===null?MG:CG,h=x(T,C),Am){D=0;do{if(Am=!1,Mm=0,25<=D)throw Error(o(301));D+=1,si=Ri=null,d.updateQueue=null,g_.current=RG,h=x(T,C)}while(Am)}if(g_.current=E_,d=Ri!==null&&Ri.next!==null,zd=0,si=Ri=yr=null,v_=!1,d)throw Error(o(300));return h}function gS(){var h=Mm!==0;return Mm=0,h}function rl(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?yr.memoizedState=si=h:si=si.next=h,si}function ya(){if(Ri===null){var h=yr.alternate;h=h!==null?h.memoizedState:null}else h=Ri.next;var d=si===null?yr.memoizedState:si.next;if(d!==null)si=d,Ri=h;else{if(h===null)throw Error(o(310));Ri=h,h={memoizedState:Ri.memoizedState,baseState:Ri.baseState,baseQueue:Ri.baseQueue,queue:Ri.queue,next:null},si===null?yr.memoizedState=si=h:si=si.next=h}return si}function Wu(h,d){return typeof d=="function"?d(h):d}function y_(h){var d=ya(),x=d.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=h;var T=Ri,C=T.baseQueue,D=x.pending;if(D!==null){if(C!==null){var K=C.next;C.next=D.next,D.next=K}T.baseQueue=C=D,x.pending=null}if(C!==null){D=C.next,T=T.baseState;var ie=K=null,ye=null,Be=D;do{var ht=Be.lane;if((zd&ht)===ht)ye!==null&&(ye=ye.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),T=Be.hasEagerState?Be.eagerState:h(T,Be.action);else{var Yt={lane:ht,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};ye===null?(ie=ye=Yt,K=T):ye=ye.next=Yt,yr.lanes|=ht,Hd|=ht}Be=Be.next}while(Be!==null&&Be!==D);ye===null?K=T:ye.next=ie,zs(T,d.memoizedState)||($s=!0),d.memoizedState=T,d.baseState=K,d.baseQueue=ye,x.lastRenderedState=T}if(h=x.interleaved,h!==null){C=h;do D=C.lane,yr.lanes|=D,Hd|=D,C=C.next;while(C!==h)}else C===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function __(h){var d=ya(),x=d.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=h;var T=x.dispatch,C=x.pending,D=d.memoizedState;if(C!==null){x.pending=null;var K=C=C.next;do D=h(D,K.action),K=K.next;while(K!==C);zs(D,d.memoizedState)||($s=!0),d.memoizedState=D,d.baseQueue===null&&(d.baseState=D),x.lastRenderedState=D}return[D,T]}function k2(){}function L2(h,d){var x=yr,T=ya(),C=d(),D=!zs(T.memoizedState,C);if(D&&(T.memoizedState=C,$s=!0),T=T.queue,Rm(F2.bind(null,x,T,h),[h]),T.getSnapshot!==d||D||si!==null&&si.memoizedState.tag&1){if(x.flags|=2048,Cm(9,O2.bind(null,x,T,C,d),void 0,null),Lr===null)throw Error(o(349));zd&30||D2(x,d,C)}return C}function D2(h,d,x){h.flags|=16384,h={getSnapshot:d,value:x},d=yr.updateQueue,d===null?(d={lastEffect:null,stores:null},yr.updateQueue=d,d.stores=[h]):(x=d.stores,x===null?d.stores=[h]:x.push(h))}function O2(h,d,x,T){d.value=x,d.getSnapshot=T,U2(d)&&yo(h,1,-1)}function F2(h,d,x){return x(function(){U2(d)&&yo(h,1,-1)})}function U2(h){var d=h.getSnapshot;h=h.value;try{var x=d();return!zs(h,x)}catch{return!0}}function vS(h){var d=rl();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:h},d.queue=h,h=h.dispatch=AG.bind(null,yr,h),[d.memoizedState,h]}function Cm(h,d,x,T){return h={tag:h,create:d,destroy:x,deps:T,next:null},d=yr.updateQueue,d===null?(d={lastEffect:null,stores:null},yr.updateQueue=d,d.lastEffect=h.next=h):(x=d.lastEffect,x===null?d.lastEffect=h.next=h:(T=x.next,x.next=h,h.next=T,d.lastEffect=h)),h}function V2(){return ya().memoizedState}function x_(h,d,x,T){var C=rl();yr.flags|=h,C.memoizedState=Cm(1|d,x,void 0,T===void 0?null:T)}function w_(h,d,x,T){var C=ya();T=T===void 0?null:T;var D=void 0;if(Ri!==null){var K=Ri.memoizedState;if(D=K.destroy,T!==null&&pS(T,K.deps)){C.memoizedState=Cm(d,x,D,T);return}}yr.flags|=h,C.memoizedState=Cm(1|d,x,D,T)}function yS(h,d){return x_(8390656,8,h,d)}function Rm(h,d){return w_(2048,8,h,d)}function z2(h,d){return w_(4,2,h,d)}function B2(h,d){return w_(4,4,h,d)}function H2(h,d){if(typeof d=="function")return h=h(),d(h),function(){d(null)};if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function j2(h,d,x){return x=x!=null?x.concat([h]):null,w_(4,4,H2.bind(null,d,h),x)}function _S(){}function G2(h,d){var x=ya();d=d===void 0?null:d;var T=x.memoizedState;return T!==null&&d!==null&&pS(d,T[1])?T[0]:(x.memoizedState=[h,d],h)}function W2(h,d){var x=ya();d=d===void 0?null:d;var T=x.memoizedState;return T!==null&&d!==null&&pS(d,T[1])?T[0]:(h=h(),x.memoizedState=[h,d],h)}function TG(h,d){var x=vn;vn=x!==0&&4>x?x:4,h(!0);var T=vo.transition;vo.transition={};try{h(!1),d()}finally{vn=x,vo.transition=T}}function $2(){return ya().memoizedState}function bG(h,d,x){var T=ec(h);x={lane:T,action:x,hasEagerState:!1,eagerState:null,next:null},q2(h)?X2(d,x):(Y2(h,d,x),x=ts(),h=yo(h,T,x),h!==null&&K2(h,d,T))}function AG(h,d,x){var T=ec(h),C={lane:T,action:x,hasEagerState:!1,eagerState:null,next:null};if(q2(h))X2(d,C);else{Y2(h,d,C);var D=h.alternate;if(h.lanes===0&&(D===null||D.lanes===0)&&(D=d.lastRenderedReducer,D!==null))try{var K=d.lastRenderedState,ie=D(K,x);if(C.hasEagerState=!0,C.eagerState=ie,zs(ie,K))return}catch{}finally{}x=ts(),h=yo(h,T,x),h!==null&&K2(h,d,T)}}function q2(h){var d=h.alternate;return h===yr||d!==null&&d===yr}function X2(h,d){Am=v_=!0;var x=h.pending;x===null?d.next=d:(d.next=x.next,x.next=d),h.pending=d}function Y2(h,d,x){Lr!==null&&h.mode&1&&!(ln&2)?(h=d.interleaved,h===null?(x.next=x,js===null?js=[d]:js.push(d)):(x.next=h.next,h.next=x),d.interleaved=x):(h=d.pending,h===null?x.next=x:(x.next=h.next,h.next=x),d.pending=x)}function K2(h,d,x){if(x&4194240){var T=d.lanes;T&=h.pendingLanes,x|=T,d.lanes=x,gm(h,x)}}var E_={readContext:Zi,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useInsertionEffect:Ii,useLayoutEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useMutableSource:Ii,useSyncExternalStore:Ii,useId:Ii,unstable_isNewReconciler:!1},MG={readContext:Zi,useCallback:function(h,d){return rl().memoizedState=[h,d===void 0?null:d],h},useContext:Zi,useEffect:yS,useImperativeHandle:function(h,d,x){return x=x!=null?x.concat([h]):null,x_(4194308,4,H2.bind(null,d,h),x)},useLayoutEffect:function(h,d){return x_(4194308,4,h,d)},useInsertionEffect:function(h,d){return x_(4,2,h,d)},useMemo:function(h,d){var x=rl();return d=d===void 0?null:d,h=h(),x.memoizedState=[h,d],h},useReducer:function(h,d,x){var T=rl();return d=x!==void 0?x(d):d,T.memoizedState=T.baseState=d,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:d},T.queue=h,h=h.dispatch=bG.bind(null,yr,h),[T.memoizedState,h]},useRef:function(h){var d=rl();return h={current:h},d.memoizedState=h},useState:vS,useDebugValue:_S,useDeferredValue:function(h){var d=vS(h),x=d[0],T=d[1];return yS(function(){var C=vo.transition;vo.transition={};try{T(h)}finally{vo.transition=C}},[h]),x},useTransition:function(){var h=vS(!1),d=h[0];return h=TG.bind(null,h[1]),rl().memoizedState=h,[d,h]},useMutableSource:function(){},useSyncExternalStore:function(h,d,x){var T=yr,C=rl();if(ir){if(x===void 0)throw Error(o(407));x=x()}else{if(x=d(),Lr===null)throw Error(o(349));zd&30||D2(T,d,x)}C.memoizedState=x;var D={value:x,getSnapshot:d};return C.queue=D,yS(F2.bind(null,T,D,h),[h]),T.flags|=2048,Cm(9,O2.bind(null,T,D,x,d),void 0,null),x},useId:function(){var h=rl(),d=Lr.identifierPrefix;if(ir){var x=ii,T=ri;x=(T&~(1<<32-bi(T)-1)).toString(32)+x,d=":"+d+"R"+x,x=Mm++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=SG++,d=":"+d+"r"+x.toString(32)+":";return h.memoizedState=d},unstable_isNewReconciler:!1},CG={readContext:Zi,useCallback:G2,useContext:Zi,useEffect:Rm,useImperativeHandle:j2,useInsertionEffect:z2,useLayoutEffect:B2,useMemo:W2,useReducer:y_,useRef:V2,useState:function(){return y_(Wu)},useDebugValue:_S,useDeferredValue:function(h){var d=y_(Wu),x=d[0],T=d[1];return Rm(function(){var C=vo.transition;vo.transition={};try{T(h)}finally{vo.transition=C}},[h]),x},useTransition:function(){var h=y_(Wu)[0],d=ya().memoizedState;return[h,d]},useMutableSource:k2,useSyncExternalStore:L2,useId:$2,unstable_isNewReconciler:!1},RG={readContext:Zi,useCallback:G2,useContext:Zi,useEffect:Rm,useImperativeHandle:j2,useInsertionEffect:z2,useLayoutEffect:B2,useMemo:W2,useReducer:__,useRef:V2,useState:function(){return __(Wu)},useDebugValue:_S,useDeferredValue:function(h){var d=__(Wu),x=d[0],T=d[1];return Rm(function(){var C=vo.transition;vo.transition={};try{T(h)}finally{vo.transition=C}},[h]),x},useTransition:function(){var h=__(Wu)[0],d=ya().memoizedState;return[h,d]},useMutableSource:k2,useSyncExternalStore:L2,useId:$2,unstable_isNewReconciler:!1};function xS(h,d){try{var x="",T=d;do x+=f_(T),T=T.return;while(T);var C=x}catch(D){C=`
Error generating stack: `+D.message+`
`+D.stack}return{value:h,source:d,stack:C}}function wS(h,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var IG=typeof WeakMap=="function"?WeakMap:Map;function Q2(h,d,x){x=po(-1,x),x.tag=3,x.payload={element:null};var T=d.value;return x.callback=function(){U_||(U_=!0,VS=T),wS(h,d)},x}function Z2(h,d,x){x=po(-1,x),x.tag=3;var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var C=d.value;x.payload=function(){return T(C)},x.callback=function(){wS(h,d)}}var D=h.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(x.callback=function(){wS(h,d),typeof T!="function"&&(Zl===null?Zl=new Set([this]):Zl.add(this));var K=d.stack;this.componentDidCatch(d.value,{componentStack:K!==null?K:""})}),x}function J2(h,d,x){var T=h.pingCache;if(T===null){T=h.pingCache=new IG;var C=new Set;T.set(d,C)}else C=T.get(d),C===void 0&&(C=new Set,T.set(d,C));C.has(x)||(C.add(x),h=GG.bind(null,h,d,x),d.then(h,h))}function eN(h){do{var d;if((d=h.tag===13)&&(d=h.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return h;h=h.return}while(h!==null);return null}function tN(h,d,x,T,C){return h.mode&1?(h.flags|=65536,h.lanes=C,h):(h===d?h.flags|=65536:(h.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=po(-1,1),d.tag=2,Oo(x,d))),x.lanes|=1),h)}function _a(h){h.flags|=4}function nN(h,d){if(h!==null&&h.child===d.child)return!0;if(d.flags&16)return!1;for(h=d.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Im,Pm,S_,T_;if(rt)Im=function(h,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)te(h,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Pm=function(){},S_=function(h,d,x,T,C){if(h=h.memoizedProps,h!==T){var D=d.stateNode,K=va(go.current);x=oe(D,x,h,T,C,K),(d.updateQueue=x)&&_a(d)}},T_=function(h,d,x,T){x!==T&&_a(d)};else if(Q){Im=function(h,d,x,T){for(var C=d.child;C!==null;){if(C.tag===5){var D=C.stateNode;x&&T&&(D=nn(D,C.type,C.memoizedProps,C)),te(h,D)}else if(C.tag===6)D=C.stateNode,x&&T&&(D=Sn(D,C.memoizedProps,C)),te(h,D);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)D=C.child,D!==null&&(D.return=C),Im(h,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var rN=function(h,d,x,T){for(var C=d.child;C!==null;){if(C.tag===5){var D=C.stateNode;x&&T&&(D=nn(D,C.type,C.memoizedProps,C)),ke(h,D)}else if(C.tag===6)D=C.stateNode,x&&T&&(D=Sn(D,C.memoizedProps,C)),ke(h,D);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)D=C.child,D!==null&&(D.return=C),rN(h,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};Pm=function(h,d){var x=d.stateNode;if(!nN(h,d)){h=x.containerInfo;var T=Tt(h);rN(T,d,!1,!1),x.pendingChildren=T,_a(d),_t(h,T)}},S_=function(h,d,x,T,C){var D=h.stateNode,K=h.memoizedProps;if((h=nN(h,d))&&K===T)d.stateNode=D;else{var ie=d.stateNode,ye=va(go.current),Be=null;K!==T&&(Be=oe(ie,x,K,T,C,ye)),h&&Be===null?d.stateNode=D:(D=je(D,Be,x,K,T,d,h,ie),J(D,x,T,C,ye)&&_a(d),d.stateNode=D,h?_a(d):Im(D,d,!1,!1))}},T_=function(h,d,x,T){x!==T?(h=va(Ud.current),x=va(go.current),d.stateNode=Pe(T,h,x,d),_a(d)):d.stateNode=h.stateNode}}else Pm=function(){},S_=function(){},T_=function(){};function Nm(h,d){if(!ir)switch(h.tailMode){case"hidden":d=h.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var T=null;x!==null;)x.alternate!==null&&(T=x),x=x.sibling;T===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function Pi(h){var d=h.alternate!==null&&h.alternate.child===h.child,x=0,T=0;if(d)for(var C=h.child;C!==null;)x|=C.lanes|C.childLanes,T|=C.subtreeFlags&14680064,T|=C.flags&14680064,C.return=h,C=C.sibling;else for(C=h.child;C!==null;)x|=C.lanes|C.childLanes,T|=C.subtreeFlags,T|=C.flags,C.return=h,C=C.sibling;return h.subtreeFlags|=T,h.childLanes=x,d}function PG(h,d,x){var T=d.pendingProps;switch(oS(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(d),null;case 1:return vr(d.type)&&Vt(),Pi(d),null;case 3:return T=d.stateNode,Vd(),It(_n),It(Ot),fS(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(h===null||h.child===null)&&(Em(d)?_a(d):h===null||h.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Fo!==null&&(HS(Fo),Fo=null))),Pm(h,d),Pi(d),null;case 5:hS(d),x=va(Ud.current);var C=d.type;if(h!==null&&d.stateNode!=null)S_(h,d,C,T,x),h.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!T){if(d.stateNode===null)throw Error(o(166));return Pi(d),null}if(h=va(go.current),Em(d)){if(!be)throw Error(o(175));h=Fu(d.stateNode,d.type,d.memoizedProps,x,h,d,!wm),d.updateQueue=h,h!==null&&_a(d)}else{var D=ee(C,T,x,h,d);Im(D,d,!1,!1),d.stateNode=D,J(D,C,T,x,h)&&_a(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Pi(d),null;case 6:if(h&&d.stateNode!=null)T_(h,d,h.memoizedProps,T);else{if(typeof T!="string"&&d.stateNode===null)throw Error(o(166));if(h=va(Ud.current),x=va(go.current),Em(d)){if(!be)throw Error(o(176));if(h=d.stateNode,T=d.memoizedProps,(x=Uu(h,T,d,!wm))&&(C=Gs,C!==null))switch(D=(C.mode&1)!==0,C.tag){case 3:ft(C.stateNode.containerInfo,h,T,D);break;case 5:xt(C.type,C.memoizedProps,C.stateNode,h,T,D)}x&&_a(d)}else d.stateNode=Pe(T,h,x,d)}return Pi(d),null;case 13:if(It(ur),T=d.memoizedState,ir&&Ws!==null&&d.mode&1&&!(d.flags&128)){for(h=Ws;h;)h=ma(h);return Od(),d.flags|=98560,d}if(T!==null&&T.dehydrated!==null){if(T=Em(d),h===null){if(!T)throw Error(o(318));if(!be)throw Error(o(344));if(h=d.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));xd(h,d)}else Od(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Pi(d),null}return Fo!==null&&(HS(Fo),Fo=null),d.flags&128?(d.lanes=x,d):(T=T!==null,x=!1,h===null?Em(d):x=h.memoizedState!==null,T&&!x&&(d.child.flags|=8192,d.mode&1&&(h===null||ur.current&1?jr===0&&(jr=3):GS())),d.updateQueue!==null&&(d.flags|=4),Pi(d),null);case 4:return Vd(),Pm(h,d),h===null&&Le(d.stateNode.containerInfo),Pi(d),null;case 10:return ju(d.type._context),Pi(d),null;case 17:return vr(d.type)&&Vt(),Pi(d),null;case 19:if(It(ur),C=d.memoizedState,C===null)return Pi(d),null;if(T=(d.flags&128)!==0,D=C.rendering,D===null)if(T)Nm(C,!1);else{if(jr!==0||h!==null&&h.flags&128)for(h=d.child;h!==null;){if(D=m_(h),D!==null){for(d.flags|=128,Nm(C,!1),h=D.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),d.subtreeFlags=0,h=x,T=d.child;T!==null;)x=T,C=h,x.flags&=14680066,D=x.alternate,D===null?(x.childLanes=0,x.lanes=C,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=D.childLanes,x.lanes=D.lanes,x.child=D.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=D.memoizedProps,x.memoizedState=D.memoizedState,x.updateQueue=D.updateQueue,x.type=D.type,C=D.dependencies,x.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),T=T.sibling;return ot(ur,ur.current&1|2),d.child}h=h.sibling}C.tail!==null&&tr()>US&&(d.flags|=128,T=!0,Nm(C,!1),d.lanes=4194304)}else{if(!T)if(h=m_(D),h!==null){if(d.flags|=128,T=!0,h=h.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),Nm(C,!0),C.tail===null&&C.tailMode==="hidden"&&!D.alternate&&!ir)return Pi(d),null}else 2*tr()-C.renderingStartTime>US&&x!==1073741824&&(d.flags|=128,T=!0,Nm(C,!1),d.lanes=4194304);C.isBackwards?(D.sibling=d.child,d.child=D):(h=C.last,h!==null?h.sibling=D:d.child=D,C.last=D)}return C.tail!==null?(d=C.tail,C.rendering=d,C.tail=d.sibling,C.renderingStartTime=tr(),d.sibling=null,h=ur.current,ot(ur,T?h&1|2:h&1),d):(Pi(d),null);case 22:case 23:return jS(),T=d.memoizedState!==null,h!==null&&h.memoizedState!==null!==T&&(d.flags|=8192),T&&d.mode&1?qs&1073741824&&(Pi(d),rt&&d.subtreeFlags&6&&(d.flags|=8192)):Pi(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var NG=a.ReactCurrentOwner,$s=!1;function es(h,d,x,T){d.child=h===null?P2(d,null,x,T):Fd(d,h.child,x,T)}function iN(h,d,x,T,C){x=x.render;var D=d.ref;return Do(d,C),T=mS(h,d,x,T,D,C),x=gS(),h!==null&&!$s?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~C,il(h,d,C)):(ir&&x&&sS(d),d.flags|=1,es(h,d,T,C),d.child)}function sN(h,d,x,T,C){if(h===null){var D=x.type;return typeof D=="function"&&!WS(D)&&D.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=D,oN(h,d,D,T,C)):(h=W_(x.type,null,T,d,d.mode,C),h.ref=d.ref,h.return=d,d.child=h)}if(D=h.child,!(h.lanes&C)){var K=D.memoizedProps;if(x=x.compare,x=x!==null?x:el,x(K,T)&&h.ref===d.ref)return il(h,d,C)}return d.flags|=1,h=nc(D,T),h.ref=d.ref,h.return=d,d.child=h}function oN(h,d,x,T,C){if(h!==null&&el(h.memoizedProps,T)&&h.ref===d.ref)if($s=!1,(h.lanes&C)!==0)h.flags&131072&&($s=!0);else return d.lanes=h.lanes,il(h,d,C);return ES(h,d,x,T,C)}function aN(h,d,x){var T=d.pendingProps,C=T.children,D=h!==null?h.memoizedState:null;if(T.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},ot(Bd,qs),qs|=x;else if(x&1073741824)d.memoizedState={baseLanes:0,cachePool:null},T=D!==null?D.baseLanes:x,ot(Bd,qs),qs|=T;else return h=D!==null?D.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h,cachePool:null},d.updateQueue=null,ot(Bd,qs),qs|=h,null;else D!==null?(T=D.baseLanes|x,d.memoizedState=null):T=x,ot(Bd,qs),qs|=T;return es(h,d,C,x),d.child}function lN(h,d){var x=d.ref;(h===null&&x!==null||h!==null&&h.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function ES(h,d,x,T,C){var D=vr(x)?Ti:Ot.current;return D=ni(d,D),Do(d,C),x=mS(h,d,x,T,D,C),T=gS(),h!==null&&!$s?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~C,il(h,d,C)):(ir&&T&&sS(d),d.flags|=1,es(h,d,x,C),d.child)}function cN(h,d,x,T,C){if(vr(x)){var D=!0;lr(d)}else D=!1;if(Do(d,C),d.stateNode===null)h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),W(d,x,T),fe(d,x,T,C),T=!0;else if(h===null){var K=d.stateNode,ie=d.memoizedProps;K.props=ie;var ye=K.context,Be=x.contextType;typeof Be=="object"&&Be!==null?Be=Zi(Be):(Be=vr(x)?Ti:Ot.current,Be=ni(d,Be));var ht=x.getDerivedStateFromProps,Yt=typeof ht=="function"||typeof K.getSnapshotBeforeUpdate=="function";Yt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ie!==T||ye!==Be)&&ue(d,K,T,Be),Mi=!1;var Pt=d.memoizedState;K.state=Pt,Gu(d,T,K,C),ye=d.memoizedState,ie!==T||Pt!==ye||_n.current||Mi?(typeof ht=="function"&&(y(d,x,ht,T),ye=d.memoizedState),(ie=Mi||F(d,x,ie,T,Pt,ye,Be))?(Yt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(d.flags|=4194308)):(typeof K.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=T,d.memoizedState=ye),K.props=T,K.state=ye,K.context=Be,T=ie):(typeof K.componentDidMount=="function"&&(d.flags|=4194308),T=!1)}else{K=d.stateNode,_m(h,d),ie=d.memoizedProps,Be=d.type===d.elementType?ie:Ai(d.type,ie),K.props=Be,Yt=d.pendingProps,Pt=K.context,ye=x.contextType,typeof ye=="object"&&ye!==null?ye=Zi(ye):(ye=vr(x)?Ti:Ot.current,ye=ni(d,ye));var Hn=x.getDerivedStateFromProps;(ht=typeof Hn=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ie!==Yt||Pt!==ye)&&ue(d,K,T,ye),Mi=!1,Pt=d.memoizedState,K.state=Pt,Gu(d,T,K,C);var bt=d.memoizedState;ie!==Yt||Pt!==bt||_n.current||Mi?(typeof Hn=="function"&&(y(d,x,Hn,T),bt=d.memoizedState),(Be=Mi||F(d,x,Be,T,Pt,bt,ye)||!1)?(ht||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(T,bt,ye),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(T,bt,ye)),typeof K.componentDidUpdate=="function"&&(d.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof K.componentDidUpdate!="function"||ie===h.memoizedProps&&Pt===h.memoizedState||(d.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ie===h.memoizedProps&&Pt===h.memoizedState||(d.flags|=1024),d.memoizedProps=T,d.memoizedState=bt),K.props=T,K.state=bt,K.context=ye,T=Be):(typeof K.componentDidUpdate!="function"||ie===h.memoizedProps&&Pt===h.memoizedState||(d.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ie===h.memoizedProps&&Pt===h.memoizedState||(d.flags|=1024),T=!1)}return SS(h,d,x,T,D,C)}function SS(h,d,x,T,C,D){lN(h,d);var K=(d.flags&128)!==0;if(!T&&!K)return C&&Ql(d,x,!1),il(h,d,D);T=d.stateNode,NG.current=d;var ie=K&&typeof x.getDerivedStateFromError!="function"?null:T.render();return d.flags|=1,h!==null&&K?(d.child=Fd(d,h.child,null,D),d.child=Fd(d,null,ie,D)):es(h,d,ie,D),d.memoizedState=T.state,C&&Ql(d,x,!0),d.child}function uN(h){var d=h.stateNode;d.pendingContext?Qi(h,d.pendingContext,d.pendingContext!==d.context):d.context&&Qi(h,d.context,!1),uS(h,d.containerInfo)}function hN(h,d,x,T,C){return Od(),cS(C),d.flags|=256,es(h,d,x,T),d.child}var b_={dehydrated:null,treeContext:null,retryLane:0};function A_(h){return{baseLanes:h,cachePool:null}}function dN(h,d,x){var T=d.pendingProps,C=ur.current,D=!1,K=(d.flags&128)!==0,ie;if((ie=K)||(ie=h!==null&&h.memoizedState===null?!1:(C&2)!==0),ie?(D=!0,d.flags&=-129):(h===null||h.memoizedState!==null)&&(C|=1),ot(ur,C&1),h===null)return lS(d),h=d.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(d.mode&1?Za(h)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(C=T.children,h=T.fallback,D?(T=d.mode,D=d.child,C={mode:"hidden",children:C},!(T&1)&&D!==null?(D.childLanes=0,D.pendingProps=C):D=$_(C,T,0,null),h=Qu(h,T,x,null),D.return=d,h.return=d,D.sibling=h,d.child=D,d.child.memoizedState=A_(x),d.memoizedState=b_,h):TS(d,C));if(C=h.memoizedState,C!==null){if(ie=C.dehydrated,ie!==null){if(K)return d.flags&256?(d.flags&=-257,M_(h,d,x,Error(o(422)))):d.memoizedState!==null?(d.child=h.child,d.flags|=128,null):(D=T.fallback,C=d.mode,T=$_({mode:"visible",children:T.children},C,0,null),D=Qu(D,C,x,null),D.flags|=2,T.return=d,D.return=d,T.sibling=D,d.child=T,d.mode&1&&Fd(d,h.child,null,x),d.child.memoizedState=A_(x),d.memoizedState=b_,D);if(!(d.mode&1))d=M_(h,d,x,null);else if(Za(ie))d=M_(h,d,x,Error(o(419)));else if(T=(x&h.childLanes)!==0,$s||T){if(T=Lr,T!==null){switch(x&-x){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}T=D&(T.suspendedLanes|x)?0:D,T!==0&&T!==C.retryLane&&(C.retryLane=T,yo(h,T,-1))}GS(),d=M_(h,d,x,Error(o(421)))}else fi(ie)?(d.flags|=128,d.child=h.child,d=WG.bind(null,h),lo(ie,d),d=null):(x=C.treeContext,be&&(Ws=Ou(ie),Gs=d,ir=!0,Fo=null,wm=!1,x!==null&&(Pn[cr++]=ri,Pn[cr++]=ii,Pn[cr++]=Ji,ri=x.id,ii=x.overflow,Ji=d)),d=TS(d,d.pendingProps.children),d.flags|=4096);return d}return D?(T=pN(h,d,T.children,T.fallback,x),D=d.child,C=h.child.memoizedState,D.memoizedState=C===null?A_(x):{baseLanes:C.baseLanes|x,cachePool:null},D.childLanes=h.childLanes&~x,d.memoizedState=b_,T):(x=fN(h,d,T.children,x),d.memoizedState=null,x)}return D?(T=pN(h,d,T.children,T.fallback,x),D=d.child,C=h.child.memoizedState,D.memoizedState=C===null?A_(x):{baseLanes:C.baseLanes|x,cachePool:null},D.childLanes=h.childLanes&~x,d.memoizedState=b_,T):(x=fN(h,d,T.children,x),d.memoizedState=null,x)}function TS(h,d){return d=$_({mode:"visible",children:d},h.mode,0,null),d.return=h,h.child=d}function fN(h,d,x,T){var C=h.child;return h=C.sibling,x=nc(C,{mode:"visible",children:x}),!(d.mode&1)&&(x.lanes=T),x.return=d,x.sibling=null,h!==null&&(T=d.deletions,T===null?(d.deletions=[h],d.flags|=16):T.push(h)),d.child=x}function pN(h,d,x,T,C){var D=d.mode;h=h.child;var K=h.sibling,ie={mode:"hidden",children:x};return!(D&1)&&d.child!==h?(x=d.child,x.childLanes=0,x.pendingProps=ie,d.deletions=null):(x=nc(h,ie),x.subtreeFlags=h.subtreeFlags&14680064),K!==null?T=nc(K,T):(T=Qu(T,D,C,null),T.flags|=2),T.return=d,x.return=d,x.sibling=T,d.child=x,T}function M_(h,d,x,T){return T!==null&&cS(T),Fd(d,h.child,null,x),h=TS(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function mN(h,d,x){h.lanes|=d;var T=h.alternate;T!==null&&(T.lanes|=d),kd(h.return,d,x)}function bS(h,d,x,T,C){var D=h.memoizedState;D===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:T,tail:x,tailMode:C}:(D.isBackwards=d,D.rendering=null,D.renderingStartTime=0,D.last=T,D.tail=x,D.tailMode=C)}function gN(h,d,x){var T=d.pendingProps,C=T.revealOrder,D=T.tail;if(es(h,d,T.children,x),T=ur.current,T&2)T=T&1|2,d.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&mN(h,x,d);else if(h.tag===19)mN(h,x,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}if(ot(ur,T),!(d.mode&1))d.memoizedState=null;else switch(C){case"forwards":for(x=d.child,C=null;x!==null;)h=x.alternate,h!==null&&m_(h)===null&&(C=x),x=x.sibling;x=C,x===null?(C=d.child,d.child=null):(C=x.sibling,x.sibling=null),bS(d,!1,C,x,D);break;case"backwards":for(x=null,C=d.child,d.child=null;C!==null;){if(h=C.alternate,h!==null&&m_(h)===null){d.child=C;break}h=C.sibling,C.sibling=x,x=C,C=h}bS(d,!0,x,null,D);break;case"together":bS(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function il(h,d,x){if(h!==null&&(d.dependencies=h.dependencies),Hd|=d.lanes,!(x&d.childLanes))return null;if(h!==null&&d.child!==h.child)throw Error(o(153));if(d.child!==null){for(h=d.child,x=nc(h,h.pendingProps),d.child=x,x.return=d;h.sibling!==null;)h=h.sibling,x=x.sibling=nc(h,h.pendingProps),x.return=d;x.sibling=null}return d.child}function kG(h,d,x){switch(d.tag){case 3:uN(d),Od();break;case 5:N2(d);break;case 1:vr(d.type)&&lr(d);break;case 4:uS(d,d.stateNode.containerInfo);break;case 10:Nd(d,d.type._context,d.memoizedProps.value);break;case 13:var T=d.memoizedState;if(T!==null)return T.dehydrated!==null?(ot(ur,ur.current&1),d.flags|=128,null):x&d.child.childLanes?dN(h,d,x):(ot(ur,ur.current&1),h=il(h,d,x),h!==null?h.sibling:null);ot(ur,ur.current&1);break;case 19:if(T=(x&d.childLanes)!==0,h.flags&128){if(T)return gN(h,d,x);d.flags|=128}var C=d.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),ot(ur,ur.current),T)break;return null;case 22:case 23:return d.lanes=0,aN(h,d,x)}return il(h,d,x)}function LG(h,d){switch(oS(d),d.tag){case 1:return vr(d.type)&&Vt(),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Vd(),It(_n),It(Ot),fS(),h=d.flags,h&65536&&!(h&128)?(d.flags=h&-65537|128,d):null;case 5:return hS(d),null;case 13:if(It(ur),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(o(340));Od()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return It(ur),null;case 4:return Vd(),null;case 10:return ju(d.type._context),null;case 22:case 23:return jS(),null;case 24:return null;default:return null}}var C_=!1,$u=!1,DG=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function R_(h,d){var x=h.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(T){xs(h,d,T)}else x.current=null}function AS(h,d,x){try{x()}catch(T){xs(h,d,T)}}var vN=!1;function OG(h,d){for(j(h.containerInfo),Ye=d;Ye!==null;)if(h=Ye,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,Ye=d;else for(;Ye!==null;){h=Ye;try{var x=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var T=x.memoizedProps,C=x.memoizedState,D=h.stateNode,K=D.getSnapshotBeforeUpdate(h.elementType===h.type?T:Ai(h.type,T),C);D.__reactInternalSnapshotBeforeUpdate=K}break;case 3:rt&&De(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ie){xs(h,h.return,ie)}if(d=h.sibling,d!==null){d.return=h.return,Ye=d;break}Ye=h.return}return x=vN,vN=!1,x}function qu(h,d,x){var T=d.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var C=T=T.next;do{if((C.tag&h)===h){var D=C.destroy;C.destroy=void 0,D!==void 0&&AS(d,x,D)}C=C.next}while(C!==T)}}function km(h,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&h)===h){var T=x.create;x.destroy=T()}x=x.next}while(x!==d)}}function MS(h){var d=h.ref;if(d!==null){var x=h.stateNode;switch(h.tag){case 5:h=ne(x);break;default:h=x}typeof d=="function"?d(h):d.current=h}}function yN(h,d,x){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(Md,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(h=d.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var T=h=h.next;do{var C=T,D=C.destroy;C=C.tag,D!==void 0&&(C&2||C&4)&&AS(d,x,D),T=T.next}while(T!==h)}break;case 1:if(R_(d,x),h=d.stateNode,typeof h.componentWillUnmount=="function")try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(K){xs(d,x,K)}break;case 5:R_(d,x);break;case 4:rt?TN(h,d,x):Q&&Q&&(d=d.stateNode.containerInfo,x=Tt(d),At(d,x))}}function _N(h,d,x){for(var T=d;;)if(yN(h,T,x),T.child===null||rt&&T.tag===4){if(T===d)break;for(;T.sibling===null;){if(T.return===null||T.return===d)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else T.child.return=T,T=T.child}function xN(h){var d=h.alternate;d!==null&&(h.alternate=null,xN(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&it(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function wN(h){return h.tag===5||h.tag===3||h.tag===4}function EN(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||wN(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function SN(h){if(rt){e:{for(var d=h.return;d!==null;){if(wN(d))break e;d=d.return}throw Error(o(160))}var x=d;switch(x.tag){case 5:d=x.stateNode,x.flags&32&&(hn(d),x.flags&=-33),x=EN(h),RS(h,x,d);break;case 3:case 4:d=x.stateNode.containerInfo,x=EN(h),CS(h,x,d);break;default:throw Error(o(161))}}}function CS(h,d,x){var T=h.tag;if(T===5||T===6)h=h.stateNode,d?dt(x,h,d):Ft(x,h);else if(T!==4&&(h=h.child,h!==null))for(CS(h,d,x),h=h.sibling;h!==null;)CS(h,d,x),h=h.sibling}function RS(h,d,x){var T=h.tag;if(T===5||T===6)h=h.stateNode,d?Mt(x,h,d):Et(x,h);else if(T!==4&&(h=h.child,h!==null))for(RS(h,d,x),h=h.sibling;h!==null;)RS(h,d,x),h=h.sibling}function TN(h,d,x){for(var T=d,C=!1,D,K;;){if(!C){C=T.return;e:for(;;){if(C===null)throw Error(o(160));switch(D=C.stateNode,C.tag){case 5:K=!1;break e;case 3:D=D.containerInfo,K=!0;break e;case 4:D=D.containerInfo,K=!0;break e}C=C.return}C=!0}if(T.tag===5||T.tag===6)_N(h,T,x),K?St(D,T.stateNode):tt(D,T.stateNode);else if(T.tag===18)K?de(D,T.stateNode):me(D,T.stateNode);else if(T.tag===4){if(T.child!==null){D=T.stateNode.containerInfo,K=!0,T.child.return=T,T=T.child;continue}}else if(yN(h,T,x),T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break;for(;T.sibling===null;){if(T.return===null||T.return===d)return;T=T.return,T.tag===4&&(C=!1)}T.sibling.return=T.return,T=T.sibling}}function IS(h,d){if(rt){switch(d.tag){case 0:case 11:case 14:case 15:qu(3,d,d.return),km(3,d),qu(5,d,d.return);return;case 1:return;case 5:var x=d.stateNode;if(x!=null){var T=d.memoizedProps;h=h!==null?h.memoizedProps:T;var C=d.type,D=d.updateQueue;d.updateQueue=null,D!==null&&Gt(x,D,C,h,T,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));x=d.memoizedProps,Ie(d.stateNode,h!==null?h.memoizedProps:x,x);return;case 3:be&&h!==null&&h.memoizedState.isDehydrated&&ce(d.stateNode.containerInfo);return;case 12:return;case 13:I_(d);return;case 19:I_(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:qu(3,d,d.return),km(3,d),qu(5,d,d.return);return;case 12:return;case 13:I_(d);return;case 19:I_(d);return;case 3:be&&h!==null&&h.memoizedState.isDehydrated&&ce(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(Q){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,At(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function I_(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var x=h.stateNode;x===null&&(x=h.stateNode=new DG),d.forEach(function(T){var C=$G.bind(null,h,T);x.has(T)||(x.add(T),T.then(C,C))})}}function FG(h,d){for(Ye=d;Ye!==null;){d=Ye;var x=d.deletions;if(x!==null)for(var T=0;T<x.length;T++){var C=x[T];try{var D=h;rt?TN(D,C,d):_N(D,C,d);var K=C.alternate;K!==null&&(K.return=null),C.return=null}catch(wt){xs(C,d,wt)}}if(x=d.child,d.subtreeFlags&12854&&x!==null)x.return=d,Ye=x;else for(;Ye!==null;){d=Ye;try{var ie=d.flags;if(ie&32&&rt&&hn(d.stateNode),ie&512){var ye=d.alternate;if(ye!==null){var Be=ye.ref;Be!==null&&(typeof Be=="function"?Be(null):Be.current=null)}}if(ie&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var ht=d.alternate;(ht===null||ht.memoizedState===null)&&(FS=tr())}break;case 22:var Yt=d.memoizedState!==null,Pt=d.alternate,Hn=Pt!==null&&Pt.memoizedState!==null;if(x=d,rt){e:if(T=x,C=Yt,D=null,rt)for(var bt=T;;){if(bt.tag===5){if(D===null){D=bt;var Ni=bt.stateNode;C?In(Ni):Ue(bt.stateNode,bt.memoizedProps)}}else if(bt.tag===6){if(D===null){var xo=bt.stateNode;C?jt(xo):re(xo,bt.memoizedProps)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===T)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===T)break;for(;bt.sibling===null;){if(bt.return===null||bt.return===T)break e;D===bt&&(D=null),bt=bt.return}D===bt&&(D=null),bt.sibling.return=bt.return,bt=bt.sibling}}if(Yt&&!Hn&&x.mode&1){Ye=x;for(var he=x.child;he!==null;){for(x=Ye=he;Ye!==null;){T=Ye;var se=T.child;switch(T.tag){case 0:case 11:case 14:case 15:qu(4,T,T.return);break;case 1:R_(T,T.return);var ge=T.stateNode;if(typeof ge.componentWillUnmount=="function"){var Je=T.return;try{ge.props=T.memoizedProps,ge.state=T.memoizedState,ge.componentWillUnmount()}catch(wt){xs(T,Je,wt)}}break;case 5:R_(T,T.return);break;case 22:if(T.memoizedState!==null){MN(x);continue}}se!==null?(se.return=T,Ye=se):MN(x)}he=he.sibling}}}switch(ie&4102){case 2:SN(d),d.flags&=-3;break;case 6:SN(d),d.flags&=-3,IS(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,IS(d.alternate,d);break;case 4:IS(d.alternate,d)}}catch(wt){xs(d,d.return,wt)}if(x=d.sibling,x!==null){x.return=d.return,Ye=x;break}Ye=d.return}}}function UG(h,d,x){Ye=h,bN(h)}function bN(h,d,x){for(var T=(h.mode&1)!==0;Ye!==null;){var C=Ye,D=C.child;if(C.tag===22&&T){var K=C.memoizedState!==null||C_;if(!K){var ie=C.alternate,ye=ie!==null&&ie.memoizedState!==null||$u;ie=C_;var Be=$u;if(C_=K,($u=ye)&&!Be)for(Ye=C;Ye!==null;)K=Ye,ye=K.child,K.tag===22&&K.memoizedState!==null?CN(C):ye!==null?(ye.return=K,Ye=ye):CN(C);for(;D!==null;)Ye=D,bN(D),D=D.sibling;Ye=C,C_=ie,$u=Be}AN(h)}else C.subtreeFlags&8772&&D!==null?(D.return=C,Ye=D):AN(h)}}function AN(h){for(;Ye!==null;){var d=Ye;if(d.flags&8772){var x=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:$u||km(5,d);break;case 1:var T=d.stateNode;if(d.flags&4&&!$u)if(x===null)T.componentDidMount();else{var C=d.elementType===d.type?x.memoizedProps:Ai(d.type,x.memoizedProps);T.componentDidUpdate(C,x.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var D=d.updateQueue;D!==null&&xm(d,D,T);break;case 3:var K=d.updateQueue;if(K!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=ne(d.child.stateNode);break;case 1:x=d.child.stateNode}xm(d,K,x)}break;case 5:var ie=d.stateNode;x===null&&d.flags&4&&cn(ie,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(be&&d.memoizedState===null){var ye=d.alternate;if(ye!==null){var Be=ye.memoizedState;if(Be!==null){var ht=Be.dehydrated;ht!==null&&pe(ht)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}$u||d.flags&512&&MS(d)}catch(Yt){xs(d,d.return,Yt)}}if(d===h){Ye=null;break}if(x=d.sibling,x!==null){x.return=d.return,Ye=x;break}Ye=d.return}}function MN(h){for(;Ye!==null;){var d=Ye;if(d===h){Ye=null;break}var x=d.sibling;if(x!==null){x.return=d.return,Ye=x;break}Ye=d.return}}function CN(h){for(;Ye!==null;){var d=Ye;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{km(4,d)}catch(ye){xs(d,x,ye)}break;case 1:var T=d.stateNode;if(typeof T.componentDidMount=="function"){var C=d.return;try{T.componentDidMount()}catch(ye){xs(d,C,ye)}}var D=d.return;try{MS(d)}catch(ye){xs(d,D,ye)}break;case 5:var K=d.return;try{MS(d)}catch(ye){xs(d,K,ye)}}}catch(ye){xs(d,d.return,ye)}if(d===h){Ye=null;break}var ie=d.sibling;if(ie!==null){ie.return=d.return,Ye=ie;break}Ye=d.return}}var P_=0,N_=1,k_=2,L_=3,D_=4;if(typeof Symbol=="function"&&Symbol.for){var Lm=Symbol.for;P_=Lm("selector.component"),N_=Lm("selector.has_pseudo_class"),k_=Lm("selector.role"),L_=Lm("selector.test_id"),D_=Lm("selector.text")}function PS(h){var d=xe(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(h=le(h),h===null)throw Error(o(362));return h.stateNode.current}function NS(h,d){switch(d.$$typeof){case P_:if(h.type===d.value)return!0;break;case N_:e:{d=d.value,h=[h,0];for(var x=0;x<h.length;){var T=h[x++],C=h[x++],D=d[C];if(T.tag!==5||!Ce(T)){for(;D!=null&&NS(T,D);)C++,D=d[C];if(C===d.length){d=!0;break e}else for(T=T.child;T!==null;)h.push(T,C),T=T.sibling}}d=!1}return d;case k_:if(h.tag===5&&st(h.stateNode,d.value))return!0;break;case D_:if((h.tag===5||h.tag===6)&&(h=Me(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case L_:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function kS(h){switch(h.$$typeof){case P_:return"<"+(M(h.value)||"Unknown")+">";case N_:return":has("+(kS(h)||"")+")";case k_:return'[role="'+h.value+'"]';case D_:return'"'+h.value+'"';case L_:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function RN(h,d){var x=[];h=[h,0];for(var T=0;T<h.length;){var C=h[T++],D=h[T++],K=d[D];if(C.tag!==5||!Ce(C)){for(;K!=null&&NS(C,K);)D++,K=d[D];if(D===d.length)x.push(C);else for(C=C.child;C!==null;)h.push(C,D),C=C.sibling}}return x}function LS(h,d){if(!B)throw Error(o(363));h=PS(h),h=RN(h,d),d=[],h=Array.from(h);for(var x=0;x<h.length;){var T=h[x++];if(T.tag===5)Ce(T)||d.push(T.stateNode);else for(T=T.child;T!==null;)h.push(T),T=T.sibling}return d}var VG=Math.ceil,O_=a.ReactCurrentDispatcher,DS=a.ReactCurrentOwner,Ar=a.ReactCurrentBatchConfig,ln=0,Lr=null,Dr=null,pi=0,qs=0,Bd=br(0),jr=0,Dm=null,Hd=0,F_=0,OS=0,Om=null,ys=null,FS=0,US=1/0;function jd(){US=tr()+500}var U_=!1,VS=null,Zl=null,V_=!1,Jl=null,z_=0,Fm=0,zS=null,B_=-1,H_=0;function ts(){return ln&6?tr():B_!==-1?B_:B_=tr()}function ec(h){return h.mode&1?ln&2&&pi!==0?pi&-pi:ym.transition!==null?(H_===0&&(h=Ed,Ed<<=1,!(Ed&4194240)&&(Ed=64),H_=h),H_):(h=vn,h!==0?h:_e()):1}function yo(h,d,x){if(50<Fm)throw Fm=0,zS=null,Error(o(185));var T=j_(h,d);return T===null?null:(uo(T,d,x),(!(ln&2)||T!==Lr)&&(T===Lr&&(!(ln&2)&&(F_|=d),jr===4&&tc(T,pi)),_s(T,x),d===1&&ln===0&&!(h.mode&1)&&(jd(),Bs&&Hs())),T)}function j_(h,d){h.lanes|=d;var x=h.alternate;for(x!==null&&(x.lanes|=d),x=h,h=h.return;h!==null;)h.childLanes|=d,x=h.alternate,x!==null&&(x.childLanes|=d),x=h,h=h.return;return x.tag===3?x.stateNode:null}function _s(h,d){var x=h.callbackNode;a_(h,d);var T=Vu(h,h===Lr?pi:0);if(T===0)x!==null&&bd(x),h.callbackNode=null,h.callbackPriority=0;else if(d=T&-T,h.callbackPriority!==d){if(x!=null&&bd(x),d===1)h.tag===0?Bu(PN.bind(null,h)):d_(PN.bind(null,h)),We?G(function(){ln===0&&Hs()}):vm(Ja,Hs),x=null;else{switch(Lo(T)){case 1:x=Ja;break;case 4:x=c_;break;case 16:x=zu;break;case 536870912:x=nr;break;default:x=zu}x=zN(x,IN.bind(null,h))}h.callbackPriority=d,h.callbackNode=x}}function IN(h,d){if(B_=-1,H_=0,ln&6)throw Error(o(327));var x=h.callbackNode;if(Ku()&&h.callbackNode!==x)return null;var T=Vu(h,h===Lr?pi:0);if(T===0)return null;if(T&30||T&h.expiredLanes||d)d=G_(h,T);else{d=T;var C=ln;ln|=2;var D=LN();(Lr!==h||pi!==d)&&(jd(),Xu(h,d));do try{HG();break}catch(ie){kN(h,ie)}while(!0);Pd(),O_.current=D,ln=C,Dr!==null?d=0:(Lr=null,pi=0,d=jr)}if(d!==0){if(d===2&&(C=Sd(h),C!==0&&(T=C,d=BS(h,C))),d===1)throw x=Dm,Xu(h,0),tc(h,T),_s(h,tr()),x;if(d===6)tc(h,T);else{if(C=h.current.alternate,!(T&30)&&!zG(C)&&(d=G_(h,T),d===2&&(D=Sd(h),D!==0&&(T=D,d=BS(h,D))),d===1))throw x=Dm,Xu(h,0),tc(h,T),_s(h,tr()),x;switch(h.finishedWork=C,h.finishedLanes=T,d){case 0:case 1:throw Error(o(345));case 2:Yu(h,ys);break;case 3:if(tc(h,T),(T&130023424)===T&&(d=FS+500-tr(),10<d)){if(Vu(h,0)!==0)break;if(C=h.suspendedLanes,(C&T)!==T){ts(),h.pingedLanes|=h.suspendedLanes&C;break}h.timeoutHandle=Te(Yu.bind(null,h,ys),d);break}Yu(h,ys);break;case 4:if(tc(h,T),(T&4194240)===T)break;for(d=h.eventTimes,C=-1;0<T;){var K=31-bi(T);D=1<<K,K=d[K],K>C&&(C=K),T&=~D}if(T=C,T=tr()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*VG(T/1960))-T,10<T){h.timeoutHandle=Te(Yu.bind(null,h,ys),T);break}Yu(h,ys);break;case 5:Yu(h,ys);break;default:throw Error(o(329))}}}return _s(h,tr()),h.callbackNode===x?IN.bind(null,h):null}function BS(h,d){var x=Om;return h.current.memoizedState.isDehydrated&&(Xu(h,d).flags|=256),h=G_(h,d),h!==2&&(d=ys,ys=x,d!==null&&HS(d)),h}function HS(h){ys===null?ys=h:ys.push.apply(ys,h)}function zG(h){for(var d=h;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var T=0;T<x.length;T++){var C=x[T],D=C.getSnapshot;C=C.value;try{if(!zs(D(),C))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function tc(h,d){for(d&=~OS,d&=~F_,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var x=31-bi(d),T=1<<x;h[x]=-1,d&=~T}}function PN(h){if(ln&6)throw Error(o(327));Ku();var d=Vu(h,0);if(!(d&1))return _s(h,tr()),null;var x=G_(h,d);if(h.tag!==0&&x===2){var T=Sd(h);T!==0&&(d=T,x=BS(h,T))}if(x===1)throw x=Dm,Xu(h,0),tc(h,d),_s(h,tr()),x;if(x===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=d,Yu(h,ys),_s(h,tr()),null}function NN(h){Jl!==null&&Jl.tag===0&&!(ln&6)&&Ku();var d=ln;ln|=1;var x=Ar.transition,T=vn;try{if(Ar.transition=null,vn=1,h)return h()}finally{vn=T,Ar.transition=x,ln=d,!(ln&6)&&Hs()}}function jS(){qs=Bd.current,It(Bd)}function Xu(h,d){h.finishedWork=null,h.finishedLanes=0;var x=h.timeoutHandle;if(x!==vt&&(h.timeoutHandle=vt,mt(x)),Dr!==null)for(x=Dr.return;x!==null;){var T=x;switch(oS(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&Vt();break;case 3:Vd(),It(_n),It(Ot),fS();break;case 5:hS(T);break;case 4:Vd();break;case 13:It(ur);break;case 19:It(ur);break;case 10:ju(T.type._context);break;case 22:case 23:jS()}x=x.return}if(Lr=h,Dr=h=nc(h.current,null),pi=qs=d,jr=0,Dm=null,OS=F_=Hd=0,ys=Om=null,js!==null){for(d=0;d<js.length;d++)if(x=js[d],T=x.interleaved,T!==null){x.interleaved=null;var C=T.next,D=x.pending;if(D!==null){var K=D.next;D.next=C,T.next=K}x.pending=T}js=null}return h}function kN(h,d){do{var x=Dr;try{if(Pd(),g_.current=E_,v_){for(var T=yr.memoizedState;T!==null;){var C=T.queue;C!==null&&(C.pending=null),T=T.next}v_=!1}if(zd=0,si=Ri=yr=null,Am=!1,Mm=0,DS.current=null,x===null||x.return===null){jr=1,Dm=d,Dr=null;break}e:{var D=h,K=x.return,ie=x,ye=d;if(d=pi,ie.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Be=ye,ht=ie,Yt=ht.tag;if(!(ht.mode&1)&&(Yt===0||Yt===11||Yt===15)){var Pt=ht.alternate;Pt?(ht.updateQueue=Pt.updateQueue,ht.memoizedState=Pt.memoizedState,ht.lanes=Pt.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Hn=eN(K);if(Hn!==null){Hn.flags&=-257,tN(Hn,K,ie,D,d),Hn.mode&1&&J2(D,Be,d),d=Hn,ye=Be;var bt=d.updateQueue;if(bt===null){var Ni=new Set;Ni.add(ye),d.updateQueue=Ni}else bt.add(ye);break e}else{if(!(d&1)){J2(D,Be,d),GS();break e}ye=Error(o(426))}}else if(ir&&ie.mode&1){var xo=eN(K);if(xo!==null){!(xo.flags&65536)&&(xo.flags|=256),tN(xo,K,ie,D,d),cS(ye);break e}}D=ye,jr!==4&&(jr=2),Om===null?Om=[D]:Om.push(D),ye=xS(ye,ie),ie=K;do{switch(ie.tag){case 3:ie.flags|=65536,d&=-d,ie.lanes|=d;var he=Q2(ie,ye,d);Ci(ie,he);break e;case 1:D=ye;var se=ie.type,ge=ie.stateNode;if(!(ie.flags&128)&&(typeof se.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Zl===null||!Zl.has(ge)))){ie.flags|=65536,d&=-d,ie.lanes|=d;var Je=Z2(ie,D,d);Ci(ie,Je);break e}}ie=ie.return}while(ie!==null)}ON(x)}catch(wt){d=wt,Dr===x&&x!==null&&(Dr=x=x.return);continue}break}while(!0)}function LN(){var h=O_.current;return O_.current=E_,h===null?E_:h}function GS(){(jr===0||jr===3||jr===2)&&(jr=4),Lr===null||!(Hd&268435455)&&!(F_&268435455)||tc(Lr,pi)}function G_(h,d){var x=ln;ln|=2;var T=LN();Lr===h&&pi===d||Xu(h,d);do try{BG();break}catch(C){kN(h,C)}while(!0);if(Pd(),ln=x,O_.current=T,Dr!==null)throw Error(o(261));return Lr=null,pi=0,jr}function BG(){for(;Dr!==null;)DN(Dr)}function HG(){for(;Dr!==null&&!Ad();)DN(Dr)}function DN(h){var d=VN(h.alternate,h,qs);h.memoizedProps=h.pendingProps,d===null?ON(h):Dr=d,DS.current=null}function ON(h){var d=h;do{var x=d.alternate;if(h=d.return,d.flags&32768){if(x=LG(x,d),x!==null){x.flags&=32767,Dr=x;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{jr=6,Dr=null;return}}else if(x=PG(x,d,qs),x!==null){Dr=x;return}if(d=d.sibling,d!==null){Dr=d;return}Dr=d=h}while(d!==null);jr===0&&(jr=5)}function Yu(h,d){var x=vn,T=Ar.transition;try{Ar.transition=null,vn=1,jG(h,d,x)}finally{Ar.transition=T,vn=x}return null}function jG(h,d,x){do Ku();while(Jl!==null);if(ln&6)throw Error(o(327));var T=h.finishedWork,C=h.finishedLanes;if(T===null)return null;if(h.finishedWork=null,h.finishedLanes=0,T===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var D=T.lanes|T.childLanes;if(iS(h,D),h===Lr&&(Dr=Lr=null,pi=0),!(T.subtreeFlags&2064)&&!(T.flags&2064)||V_||(V_=!0,zN(zu,function(){return Ku(),null})),D=(T.flags&15990)!==0,T.subtreeFlags&15990||D){D=Ar.transition,Ar.transition=null;var K=vn;vn=1;var ie=ln;ln|=4,DS.current=null,OG(h,T),FG(h,T),X(h.containerInfo),h.current=T,UG(T),l_(),ln=ie,vn=K,Ar.transition=D}else h.current=T;if(V_&&(V_=!1,Jl=h,z_=C),D=h.pendingLanes,D===0&&(Zl=null),u_(T.stateNode),_s(h,tr()),d!==null)for(x=h.onRecoverableError,T=0;T<d.length;T++)x(d[T]);if(U_)throw U_=!1,h=VS,VS=null,h;return z_&1&&h.tag!==0&&Ku(),D=h.pendingLanes,D&1?h===zS?Fm++:(Fm=0,zS=h):Fm=0,Hs(),null}function Ku(){if(Jl!==null){var h=Lo(z_),d=Ar.transition,x=vn;try{if(Ar.transition=null,vn=16>h?16:h,Jl===null)var T=!1;else{if(h=Jl,Jl=null,z_=0,ln&6)throw Error(o(331));var C=ln;for(ln|=4,Ye=h.current;Ye!==null;){var D=Ye,K=D.child;if(Ye.flags&16){var ie=D.deletions;if(ie!==null){for(var ye=0;ye<ie.length;ye++){var Be=ie[ye];for(Ye=Be;Ye!==null;){var ht=Ye;switch(ht.tag){case 0:case 11:case 15:qu(8,ht,D)}var Yt=ht.child;if(Yt!==null)Yt.return=ht,Ye=Yt;else for(;Ye!==null;){ht=Ye;var Pt=ht.sibling,Hn=ht.return;if(xN(ht),ht===Be){Ye=null;break}if(Pt!==null){Pt.return=Hn,Ye=Pt;break}Ye=Hn}}}var bt=D.alternate;if(bt!==null){var Ni=bt.child;if(Ni!==null){bt.child=null;do{var xo=Ni.sibling;Ni.sibling=null,Ni=xo}while(Ni!==null)}}Ye=D}}if(D.subtreeFlags&2064&&K!==null)K.return=D,Ye=K;else e:for(;Ye!==null;){if(D=Ye,D.flags&2048)switch(D.tag){case 0:case 11:case 15:qu(9,D,D.return)}var he=D.sibling;if(he!==null){he.return=D.return,Ye=he;break e}Ye=D.return}}var se=h.current;for(Ye=se;Ye!==null;){K=Ye;var ge=K.child;if(K.subtreeFlags&2064&&ge!==null)ge.return=K,Ye=ge;else e:for(K=se;Ye!==null;){if(ie=Ye,ie.flags&2048)try{switch(ie.tag){case 0:case 11:case 15:km(9,ie)}}catch(wt){xs(ie,ie.return,wt)}if(ie===K){Ye=null;break e}var Je=ie.sibling;if(Je!==null){Je.return=ie.return,Ye=Je;break e}Ye=ie.return}}if(ln=C,Hs(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(Md,h)}catch{}T=!0}return T}finally{vn=x,Ar.transition=d}}return!1}function FN(h,d,x){d=xS(x,d),d=Q2(h,d,1),Oo(h,d),d=ts(),h=j_(h,1),h!==null&&(uo(h,1,d),_s(h,d))}function xs(h,d,x){if(h.tag===3)FN(h,h,x);else for(;d!==null;){if(d.tag===3){FN(d,h,x);break}else if(d.tag===1){var T=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Zl===null||!Zl.has(T))){h=xS(x,h),h=Z2(d,h,1),Oo(d,h),h=ts(),d=j_(d,1),d!==null&&(uo(d,1,h),_s(d,h));break}}d=d.return}}function GG(h,d,x){var T=h.pingCache;T!==null&&T.delete(d),d=ts(),h.pingedLanes|=h.suspendedLanes&x,Lr===h&&(pi&x)===x&&(jr===4||jr===3&&(pi&130023424)===pi&&500>tr()-FS?Xu(h,0):OS|=x),_s(h,d)}function UN(h,d){d===0&&(h.mode&1?(d=ga,ga<<=1,!(ga&130023424)&&(ga=4194304)):d=1);var x=ts();h=j_(h,d),h!==null&&(uo(h,d,x),_s(h,x))}function WG(h){var d=h.memoizedState,x=0;d!==null&&(x=d.retryLane),UN(h,x)}function $G(h,d){var x=0;switch(h.tag){case 13:var T=h.stateNode,C=h.memoizedState;C!==null&&(x=C.retryLane);break;case 19:T=h.stateNode;break;default:throw Error(o(314))}T!==null&&T.delete(d),UN(h,x)}var VN;VN=function(h,d,x){if(h!==null)if(h.memoizedProps!==d.pendingProps||_n.current)$s=!0;else{if(!(h.lanes&x)&&!(d.flags&128))return $s=!1,kG(h,d,x);$s=!!(h.flags&131072)}else $s=!1,ir&&d.flags&1048576&&Dd(d,Tn,d.index);switch(d.lanes=0,d.tag){case 2:var T=d.type;h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps;var C=ni(d,Ot.current);Do(d,x),C=mS(null,d,T,h,C,x);var D=gS();return d.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,vr(T)?(D=!0,lr(d)):D=!1,d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,Ld(d),C.updater=I,d.stateNode=C,C._reactInternals=d,fe(d,T,h,x),d=SS(null,d,T,!0,D,x)):(d.tag=0,ir&&D&&sS(d),es(null,d,C,x),d=d.child),d;case 16:T=d.elementType;e:{switch(h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,C=T._init,T=C(T._payload),d.type=T,C=d.tag=XG(T),h=Ai(T,h),C){case 0:d=ES(null,d,T,h,x);break e;case 1:d=cN(null,d,T,h,x);break e;case 11:d=iN(null,d,T,h,x);break e;case 14:d=sN(null,d,T,Ai(T.type,h),x);break e}throw Error(o(306,T,""))}return d;case 0:return T=d.type,C=d.pendingProps,C=d.elementType===T?C:Ai(T,C),ES(h,d,T,C,x);case 1:return T=d.type,C=d.pendingProps,C=d.elementType===T?C:Ai(T,C),cN(h,d,T,C,x);case 3:e:{if(uN(d),h===null)throw Error(o(387));T=d.pendingProps,D=d.memoizedState,C=D.element,_m(h,d),Gu(d,T,null,x);var K=d.memoizedState;if(T=K.element,be&&D.isDehydrated)if(D={element:T,isDehydrated:!1,cache:K.cache,transitions:K.transitions},d.updateQueue.baseState=D,d.memoizedState=D,d.flags&256){C=Error(o(423)),d=hN(h,d,T,x,C);break e}else if(T!==C){C=Error(o(424)),d=hN(h,d,T,x,C);break e}else for(be&&(Ws=Du(d.stateNode.containerInfo),Gs=d,ir=!0,Fo=null,wm=!1),x=P2(d,null,T,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Od(),T===C){d=il(h,d,x);break e}es(h,d,T,x)}d=d.child}return d;case 5:return N2(d),h===null&&lS(d),T=d.type,C=d.pendingProps,D=h!==null?h.memoizedProps:null,K=C.children,we(T,C)?K=null:D!==null&&we(T,D)&&(d.flags|=32),lN(h,d),es(h,d,K,x),d.child;case 6:return h===null&&lS(d),null;case 13:return dN(h,d,x);case 4:return uS(d,d.stateNode.containerInfo),T=d.pendingProps,h===null?d.child=Fd(d,null,T,x):es(h,d,T,x),d.child;case 11:return T=d.type,C=d.pendingProps,C=d.elementType===T?C:Ai(T,C),iN(h,d,T,C,x);case 7:return es(h,d,d.pendingProps,x),d.child;case 8:return es(h,d,d.pendingProps.children,x),d.child;case 12:return es(h,d,d.pendingProps.children,x),d.child;case 10:e:{if(T=d.type._context,C=d.pendingProps,D=d.memoizedProps,K=C.value,Nd(d,T,K),D!==null)if(zs(D.value,K)){if(D.children===C.children&&!_n.current){d=il(h,d,x);break e}}else for(D=d.child,D!==null&&(D.return=d);D!==null;){var ie=D.dependencies;if(ie!==null){K=D.child;for(var ye=ie.firstContext;ye!==null;){if(ye.context===T){if(D.tag===1){ye=po(-1,x&-x),ye.tag=2;var Be=D.updateQueue;if(Be!==null){Be=Be.shared;var ht=Be.pending;ht===null?ye.next=ye:(ye.next=ht.next,ht.next=ye),Be.pending=ye}}D.lanes|=x,ye=D.alternate,ye!==null&&(ye.lanes|=x),kd(D.return,x,d),ie.lanes|=x;break}ye=ye.next}}else if(D.tag===10)K=D.type===d.type?null:D.child;else if(D.tag===18){if(K=D.return,K===null)throw Error(o(341));K.lanes|=x,ie=K.alternate,ie!==null&&(ie.lanes|=x),kd(K,x,d),K=D.sibling}else K=D.child;if(K!==null)K.return=D;else for(K=D;K!==null;){if(K===d){K=null;break}if(D=K.sibling,D!==null){D.return=K.return,K=D;break}K=K.return}D=K}es(h,d,C.children,x),d=d.child}return d;case 9:return C=d.type,T=d.pendingProps.children,Do(d,x),C=Zi(C),T=T(C),d.flags|=1,es(h,d,T,x),d.child;case 14:return T=d.type,C=Ai(T,d.pendingProps),C=Ai(T.type,C),sN(h,d,T,C,x);case 15:return oN(h,d,d.type,d.pendingProps,x);case 17:return T=d.type,C=d.pendingProps,C=d.elementType===T?C:Ai(T,C),h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,vr(T)?(h=!0,lr(d)):h=!1,Do(d,x),W(d,T,C),fe(d,T,C,x),SS(null,d,T,!0,h,x);case 19:return gN(h,d,x);case 22:return aN(h,d,x)}throw Error(o(156,d.tag))};function zN(h,d){return vm(h,d)}function qG(h,d,x,T){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _o(h,d,x,T){return new qG(h,d,x,T)}function WS(h){return h=h.prototype,!(!h||!h.isReactComponent)}function XG(h){if(typeof h=="function")return WS(h)?1:0;if(h!=null){if(h=h.$$typeof,h===w)return 11;if(h===E)return 14}return 2}function nc(h,d){var x=h.alternate;return x===null?(x=_o(h.tag,d,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=d,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&14680064,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,d=h.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x}function W_(h,d,x,T,C,D){var K=2;if(T=h,typeof h=="function")WS(h)&&(K=1);else if(typeof h=="string")K=5;else e:switch(h){case u:return Qu(x.children,C,D,d);case f:K=8,C|=8;break;case p:return h=_o(12,x,d,C|2),h.elementType=p,h.lanes=D,h;case _:return h=_o(13,x,d,C),h.elementType=_,h.lanes=D,h;case g:return h=_o(19,x,d,C),h.elementType=g,h.lanes=D,h;case b:return $_(x,C,D,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case m:K=10;break e;case v:K=9;break e;case w:K=11;break e;case E:K=14;break e;case S:K=16,T=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return d=_o(K,x,d,C),d.elementType=h,d.type=T,d.lanes=D,d}function Qu(h,d,x,T){return h=_o(7,h,T,d),h.lanes=x,h}function $_(h,d,x,T){return h=_o(22,h,T,d),h.elementType=b,h.lanes=x,h.stateNode={},h}function $S(h,d,x){return h=_o(6,h,null,d),h.lanes=x,h}function qS(h,d,x){return d=_o(4,h.children!==null?h.children:[],h.key,d),d.lanes=x,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function YG(h,d,x,T,C){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=vt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Td(0),this.expirationTimes=Td(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Td(0),this.identifierPrefix=T,this.onRecoverableError=C,be&&(this.mutableSourceEagerHydrationData=null)}function BN(h,d,x,T,C,D,K,ie,ye){return h=new YG(h,d,x,ie,ye),d===1?(d=1,D===!0&&(d|=8)):d=0,D=_o(3,null,null,d),h.current=D,D.stateNode=h,D.memoizedState={element:T,isDehydrated:x,cache:null,transitions:null},Ld(D),h}function HN(h){if(!h)return gs;h=h._reactInternals;e:{if(A(h)!==h||h.tag!==1)throw Error(o(170));var d=h;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(vr(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(h.tag===1){var x=h.type;if(vr(x))return co(h,x,d)}return d}function jN(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=U(d),h===null?null:h.stateNode}function GN(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<d?x:d}}function XS(h,d){GN(h,d),(h=h.alternate)&&GN(h,d)}function KG(h){return h=U(h),h===null?null:h.stateNode}function QG(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var d=ts();yo(h,134217728,d),XS(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=ts(),x=ec(h);yo(h,x,d),XS(h,x)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.current.memoizedState.isDehydrated){var x=Vs(d.pendingLanes);x!==0&&(gm(d,x|1),_s(d,tr()),!(ln&6)&&(jd(),Hs()))}break;case 13:var T=ts();NN(function(){return yo(h,1,T)}),XS(h,1)}},t.batchedUpdates=function(h,d){var x=ln;ln|=1;try{return h(d)}finally{ln=x,ln===0&&(jd(),Bs&&Hs())}},t.createComponentSelector=function(h){return{$$typeof:P_,value:h}},t.createContainer=function(h,d,x,T,C,D,K){return BN(h,d,!1,null,x,T,C,D,K)},t.createHasPseudoClassSelector=function(h){return{$$typeof:N_,value:h}},t.createHydrationContainer=function(h,d,x,T,C,D,K,ie,ye){return h=BN(x,T,!0,h,C,D,K,ie,ye),h.context=HN(null),x=h.current,T=ts(),C=ec(x),D=po(T,C),D.callback=d??null,Oo(x,D),h.current.lanes=C,uo(h,C,T),_s(h,T),h},t.createPortal=function(h,d,x){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:T==null?null:""+T,children:h,containerInfo:d,implementation:x}},t.createRoleSelector=function(h){return{$$typeof:k_,value:h}},t.createTestNameSelector=function(h){return{$$typeof:L_,value:h}},t.createTextSelector=function(h){return{$$typeof:D_,value:h}},t.deferredUpdates=function(h){var d=vn,x=Ar.transition;try{return Ar.transition=null,vn=16,h()}finally{vn=d,Ar.transition=x}},t.discreteUpdates=function(h,d,x,T,C){var D=vn,K=Ar.transition;try{return Ar.transition=null,vn=1,h(d,x,T,C)}finally{vn=D,Ar.transition=K,ln===0&&jd()}},t.findAllNodes=LS,t.findBoundingRects=function(h,d){if(!B)throw Error(o(363));d=LS(h,d),h=[];for(var x=0;x<d.length;x++)h.push(Ne(d[x]));for(d=h.length-1;0<d;d--){x=h[d];for(var T=x.x,C=T+x.width,D=x.y,K=D+x.height,ie=d-1;0<=ie;ie--)if(d!==ie){var ye=h[ie],Be=ye.x,ht=Be+ye.width,Yt=ye.y,Pt=Yt+ye.height;if(T>=Be&&D>=Yt&&C<=ht&&K<=Pt){h.splice(d,1);break}else if(T!==Be||x.width!==ye.width||Pt<D||Yt>K){if(!(D!==Yt||x.height!==ye.height||ht<T||Be>C)){Be>T&&(ye.width+=Be-T,ye.x=T),ht<C&&(ye.width=C-Be),h.splice(d,1);break}}else{Yt>D&&(ye.height+=Yt-D,ye.y=D),Pt<K&&(ye.height=K-Yt),h.splice(d,1);break}}}return h},t.findHostInstance=jN,t.findHostInstanceWithNoPortals=function(h){return h=O(h),h=h!==null?$(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return jN(h)},t.flushControlled=function(h){var d=ln;ln|=1;var x=Ar.transition,T=vn;try{Ar.transition=null,vn=1,h()}finally{vn=T,Ar.transition=x,ln=d,ln===0&&(jd(),Hs())}},t.flushPassiveEffects=Ku,t.flushSync=NN,t.focusWithin=function(h,d){if(!B)throw Error(o(363));for(h=PS(h),d=RN(h,d),d=Array.from(d),h=0;h<d.length;){var x=d[h++];if(!Ce(x)){if(x.tag===5&&Fe(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return vn},t.getFindAllNodesFailureDescription=function(h,d){if(!B)throw Error(o(363));var x=0,T=[];h=[PS(h),0];for(var C=0;C<h.length;){var D=h[C++],K=h[C++],ie=d[K];if((D.tag!==5||!Ce(D))&&(NS(D,ie)&&(T.push(kS(ie)),K++,K>x&&(x=K)),K<d.length))for(D=D.child;D!==null;)h.push(D,K),D=D.sibling}if(x<d.length){for(h=[];x<d.length;x++)h.push(kS(d[x]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return ne(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:KG,findFiberByHostInstance:h.findFiberByHostInstance||QG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Md=d.inject(h),ho=d}catch{}h=!!d.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,d,x,T){if(!B)throw Error(o(363));h=LS(h,d);var C=qe(h,x,T).disconnect;return{disconnect:function(){C()}}},t.registerMutableSourceForHydration=function(h,d){var x=d._getVersion;x=x(d._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[d,x]:h.mutableSourceEagerHydrationData.push(d,x)},t.runWithPriority=function(h,d){var x=vn;try{return vn=h,d()}finally{vn=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,d,x,T){var C=d.current,D=ts(),K=ec(C);return x=HN(x),d.context===null?d.context=x:d.pendingContext=x,d=po(D,K),d.payload={element:h},T=T===void 0?null:T,T!==null&&(d.callback=T),Oo(C,d),h=yo(C,K,D),h!==null&&tl(h,C,K),K},t};d9.exports=xle;var wle=d9.exports;const Ele=od(wle);var f9={exports:{}},p9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,j){var X=z.length;z.push(j);e:for(;0<X;){var ee=X-1>>>1,te=z[ee];if(0<i(te,j))z[ee]=j,z[X]=te,X=ee;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var j=z[0],X=z.pop();if(X!==j){z[0]=X;e:for(var ee=0,te=z.length,J=te>>>1;ee<J;){var oe=2*(ee+1)-1,we=z[oe],Pe=oe+1,Te=z[Pe];if(0>i(we,X))Pe<te&&0>i(Te,we)?(z[ee]=Te,z[Pe]=X,ee=Pe):(z[ee]=we,z[oe]=X,ee=oe);else if(Pe<te&&0>i(Te,X))z[ee]=Te,z[Pe]=X,ee=Pe;else break e}}return j}function i(z,j){var X=z.sortIndex-j.sortIndex;return X!==0?X:z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var j=t(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=z)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(c)}}function b(z){if(w=!1,S(z),!v)if(t(l)!==null)v=!0,ne(k);else{var j=t(c);j!==null&&ae(b,j.startTime-z)}}function k(z,j){v=!1,w&&(w=!1,g(P),P=-1),m=!0;var X=p;try{for(S(j),f=t(l);f!==null&&(!(f.expirationTime>j)||z&&!O());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var te=ee(f.expirationTime<=j);j=n.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&r(l),S(j)}else r(l);f=t(l)}if(f!==null)var J=!0;else{var oe=t(c);oe!==null&&ae(b,oe.startTime-j),J=!1}return J}finally{f=null,p=X,m=!1}}var N=!1,M=null,P=-1,A=5,R=-1;function O(){return!(n.unstable_now()-R<A)}function U(){if(M!==null){var z=n.unstable_now();R=z;var j=!0;try{j=M(!0,z)}finally{j?V():(N=!1,M=null)}}else N=!1}var V;if(typeof E=="function")V=function(){E(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Z=$.port2;$.port1.onmessage=U,V=function(){Z.postMessage(null)}}else V=function(){_(U,0)};function ne(z){M=z,N||(N=!0,V())}function ae(z,j){P=_(function(){z(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ne(k))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var X=p;p=j;try{return z()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=p;p=z;try{return j()}finally{p=X}},n.unstable_scheduleCallback=function(z,j,X){var ee=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,z={id:u++,callback:j,priorityLevel:z,startTime:X,expirationTime:te,sortIndex:-1},X>ee?(z.sortIndex=X,e(c,z),t(l)===null&&z===t(c)&&(w?(g(P),P=-1):w=!0,ae(b,X-ee))):(z.sortIndex=te,e(l,z),v||m||(v=!0,ne(k))),z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(z){var j=p;return function(){var X=p;p=j;try{return z.apply(this,arguments)}finally{p=X}}}})(p9);f9.exports=p9;var x3=f9.exports;const bP={},Sle=n=>void Object.assign(bP,n);function Tle(n,e){function t(u,{args:f=[],attach:p,...m},v){let w=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=_f(g,{type:u,root:v,attach:p,primitive:!0})}else{const g=bP[w];if(!g)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=_f(new g(...f),{type:u,root:v,attach:p,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),w!=="inject"&&Lb(_,m),_}function r(u,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?kb(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),p=!0),p||(v=u.__r3f)==null||v.objects.push(f),f.__r3f||_f(f,{}),f.__r3f.parent=u,MC(f),xf(f)}}function i(u,f,p){let m=!1;if(f){var v,w;if((v=f.__r3f)!=null&&v.attach)kb(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const _=u.children.filter(E=>E!==f),g=_.indexOf(p);u.children=[..._.slice(0,g),f,..._.slice(g)],m=!0}m||(w=u.__r3f)==null||w.objects.push(f),f.__r3f||_f(f,{}),f.__r3f.parent=u,MC(f),xf(f)}}function s(u,f,p=!1){u&&[...u].forEach(m=>o(f,m,p))}function o(u,f,p){if(f){var m,v,w;if(f.__r3f&&(f.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(b=>b!==f)),(v=f.__r3f)!=null&&v.attach)b3(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var _;u.remove(f),(_=f.__r3f)!=null&&_.root&&Nle(Kx(f),f)}const E=(w=f.__r3f)==null?void 0:w.primitive,S=!E&&(p===void 0?f.dispose!==null:p);if(!E){var g;s((g=f.__r3f)==null?void 0:g.objects,f,S),s(f.children,f,S)}if(delete f.__r3f,S&&f.dispose&&f.type!=="Scene"){const b=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?x3.unstable_scheduleCallback(x3.unstable_IdlePriority,b):b()}xf(u)}}function a(u,f,p,m){var v;const w=(v=u.__r3f)==null?void 0:v.parent;if(!w)return;const _=t(f,p,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&r(_,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>r(_,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(w,u),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(w,_),_.raycast&&_.__r3f.eventCount&&Kx(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>{};return{reconciler:Ele({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,p)=>{if(!f||!p)return;const m=u.getState().scene;m.__r3f&&i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,p,m){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:_=[],children:g,...E}=m,{args:S=[],children:b,...k}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((M,P)=>M!==S[P]))return[!0];const N=w9(u,E,k,!0);return N.changes.length?[!1,N]:null}},commitUpdate(u,[f,p],m,v,w,_){f?a(u,m,w,_):Lb(u,p)},commitMount(u,f,p,m){var v;const w=(v=u.__r3f)!=null?v:{};u.raycast&&w.handlers&&w.eventCount&&Kx(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>_f(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:p,parent:m}=(f=u.__r3f)!=null?f:{};p&&m&&b3(m,u,p),u.isObject3D&&(u.visible=!1),xf(u)},unhideInstance(u,f){var p;const{attach:m,parent:v}=(p=u.__r3f)!=null?p:{};m&&v&&kb(v,u,m),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),xf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Wf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Qn.fun(performance.now)?performance.now:Qn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Qn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Qn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Lb}}var w3,E3;const Nb=n=>"colorSpace"in n||"outputColorSpace"in n,m9=()=>{var n;return(n=bP.ColorManagement)!=null?n:null},g9=n=>n&&n.isOrthographicCamera,ble=n=>n&&n.hasOwnProperty("current"),$y=typeof window<"u"&&((w3=window.document)!=null&&w3.createElement||((E3=window.navigator)==null?void 0:E3.product)==="ReactNative")?H.useLayoutEffect:H.useEffect;function v9(n){const e=H.useRef(n);return $y(()=>void(e.current=n),[n]),e}function Ale({set:n}){return $y(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class y9 extends H.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}y9.getDerivedStateFromError=()=>({error:!0});const _9="__default",S3=new Map,Mle=n=>n&&!!n.memoized&&!!n.changes;function x9(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const pg=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Kx(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Qn={obj:n=>n===Object(n)&&!Qn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Qn.str(n)||Qn.num(n)||Qn.boo(n))return n===e;const s=Qn.obj(n);if(s&&r==="reference")return n===e;const o=Qn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Qn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Qn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Cle(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function _f(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function AC(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const T3=/-\d+$/;function kb(n,e,t){if(Qn.str(t)){if(T3.test(t)){const s=t.replace(T3,""),{target:o,key:a}=AC(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=AC(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function b3(n,e,t){var r,i;if(Qn.str(t)){const{target:s,key:o}=AC(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function w9(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,f=Object.entries(i),p=[];if(c){const v=Object.keys(l);for(let w=0;w<v.length;w++)i.hasOwnProperty(v[w])||f.unshift([v[w],_9+"remove"])}f.forEach(([v,w])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&v==="object"||Qn.equ(w,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,w,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,w,!1,g]);for(const E in i){const S=i[E];E.startsWith(`${v}-`)&&p.push([E,S,!1,E.split("-")])}});const m={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:p}}const Rle=typeof process<"u"&&!1;function Lb(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=Mle(e)?e:w9(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,v,w,_]=a[p];if(Nb(n)){const b="srgb",k="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?b:k):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?b:k)}let g=n,E=g[m];if(_.length&&(E=_.reduce((S,b)=>S[b],n),!(E&&E.set))){const[S,...b]=_.reverse();g=b.reverse().reduce((k,N)=>k[N],n),m=S}if(v===_9+"remove")if(g.constructor){let S=S3.get(g.constructor);S||(S=new g.constructor,S3.set(g.constructor,S)),v=S[m]}else v=0;if(w&&r)v?r.handlers[m]=v:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(E&&E.set&&(E.copy||E instanceof Uh)){if(Array.isArray(v))E.fromArray?E.fromArray(v):E.set(...v);else if(E.copy&&v&&v.constructor&&(Rle?E.constructor.name===v.constructor.name:E.constructor===v.constructor))E.copy(v);else if(v!==void 0){var c;const S=(c=E)==null?void 0:c.isColor;!S&&E.setScalar?E.setScalar(v):E instanceof Uh&&v instanceof Uh?E.mask=v.mask:E.set(v),!m9()&&s&&!s.linear&&S&&E.convertSRGBToLinear()}}else{var u;if(g[m]=v,(u=g[m])!=null&&u.isTexture&&g[m].format===ls&&g[m].type===Oa&&s){const S=g[m];Nb(S)&&Nb(s.gl)?S.colorSpace=s.gl.outputColorSpace:S.encoding=s.gl.outputEncoding}}xf(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const p=Kx(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),r.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&MC(n),n}function xf(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function MC(n){n.onUpdate==null||n.onUpdate(n)}function Ile(n,e){n.manual||(g9(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function mx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Ple(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Wf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Wf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Wf.ContinuousEventPriority;default:return Wf.DefaultEventPriority}}function E9(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Nle(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{E9(t.capturedMap,e,r,i)})}function kle(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),f=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<m.length;g++){const E=pg(m[g]);E&&(E.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(g){const E=pg(g);if(!E||!E.events.enabled||E.raycaster.camera===null)return[];if(E.raycaster.camera===void 0){var S;E.events.compute==null||E.events.compute(l,E,(S=E.previousRoot)==null?void 0:S.getState()),E.raycaster.camera===void 0&&(E.raycaster.camera=null)}return E.raycaster.camera?E.raycaster.intersectObject(g,!0):[]}let w=m.flatMap(v).sort((g,E)=>{const S=pg(g.object),b=pg(E.object);return!S||!b?g.distance-E.distance:b.events.priority-S.events.priority||g.distance-E.distance}).filter(g=>{const E=mx(g);return f.has(E)?!1:(f.add(E),!0)});u.events.filter&&(w=u.events.filter(w,u));for(const g of w){let E=g.object;for(;E;){var _;(_=E.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:E}),E=E.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())f.has(mx(g.intersection))||p.push(g.intersection);return p}function i(l,c,u,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const w=pg(v.object)||p,{raycaster:_,pointer:g,camera:E,internal:S}=w,b=new Y(g.x,g.y,0).unproject(E),k=R=>{var O,U;return(O=(U=S.capturedMap.get(R))==null?void 0:U.has(v.eventObject))!=null?O:!1},N=R=>{const O={intersection:v,target:c.target};S.capturedMap.has(R)?S.capturedMap.get(R).set(v.eventObject,O):S.capturedMap.set(R,new Map([[v.eventObject,O]])),c.target.setPointerCapture(R)},M=R=>{const O=S.capturedMap.get(R);O&&E9(S.capturedMap,v.eventObject,O,R)};let P={};for(let R in c){let O=c[R];typeof O!="function"&&(P[R]=O)}let A={...v,...P,pointer:g,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:b,ray:_.ray,camera:E,stopPropagation(){const R="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!R||R.has(v.eventObject))&&(A.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));s([...O,v])}},target:{hasPointerCapture:k,setPointerCapture:N,releasePointerCapture:M},currentTarget:{hasPointerCapture:k,setPointerCapture:N,releasePointerCapture:M},nativeEvent:c};if(f(A),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(mx(u)),p!=null&&p.eventCount){const v={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(u,m?t:void 0),g=v?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=_.map(S=>S.eventObject)),v&&!_.length&&g<=2&&(o(u,p.interaction),f&&f(u)),m&&s(_);function E(S){const b=S.eventObject,k=b.__r3f,N=k==null?void 0:k.handlers;if(k!=null&&k.eventCount)if(m){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const M=mx(S),P=p.hovered.get(M);P?P.stopped&&S.stopPropagation():(p.hovered.set(M,S),N.onPointerOver==null||N.onPointerOver(S),N.onPointerEnter==null||N.onPointerEnter(S))}N.onPointerMove==null||N.onPointerMove(S)}else{const M=N[l];M?(!v||p.initialHits.includes(b))&&(o(u,p.interaction.filter(P=>!p.initialHits.includes(P))),M(S)):v&&p.initialHits.includes(b)&&o(u,p.interaction.filter(P=>!p.initialHits.includes(P)))}}i(_,u,g,E)}}return{handlePointer:a}}const S9=n=>!!(n!=null&&n.render),T9=H.createContext(null),Lle=(n,e)=>{const t=vle((a,l)=>{const c=new Y,u=new Y,f=new Y;function p(g=l().camera,E=u,S=l().size){const{width:b,height:k,top:N,left:M}=S,P=b/k;E.isVector3?f.copy(E):f.set(...E);const A=g.getWorldPosition(c).distanceTo(f);if(g9(g))return{width:b/g.zoom,height:k/g.zoom,top:N,left:M,factor:1,distance:A,aspect:P};{const R=g.fov*Math.PI/180,O=2*Math.tan(R/2)*A,U=O*(b/k);return{width:U,height:O,top:N,left:M,factor:b/U,distance:A,aspect:P}}}let m;const v=g=>a(E=>({performance:{...E.performance,current:g}})),w=new Re;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,E)=>e(g,E,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new wP,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(E=>({...E,events:{...E.events,...g}})),setSize:(g,E,S,b,k)=>{const N=l().camera,M={width:g,height:E,top:b||0,left:k||0,updateStyle:S};a(P=>({size:M,viewport:{...P.viewport,...p(N,u,M)}}))},setDpr:g=>a(E=>{const S=x9(g);return{viewport:{...E.viewport,dpr:S,initialDpr:E.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const E=l().clock;E.stop(),E.elapsedTime=0,g!=="never"&&(E.start(),E.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:H.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,E,S)=>{const b=l().internal;return b.priority=b.priority+(E>0?1:0),b.subscribers.push({ref:g,priority:E,store:S}),b.subscribers=b.subscribers.sort((k,N)=>k.priority-N.priority),()=>{const k=l().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(E>0?1:0),k.subscribers=k.subscribers.filter(N=>N.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,Ile(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let gx,Dle=new Set,Ole=new Set,Fle=new Set;function Db(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function mg(n,e){switch(n){case"before":return Db(Dle,e);case"after":return Db(Ole,e);case"tail":return Db(Fle,e)}}let Ob,Fb;function Ub(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Ob=e.internal.subscribers,gx=0;gx<Ob.length;gx++)Fb=Ob[gx],Fb.ref.current(Fb.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Ule(n){let e=!1,t=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,mg("before",c),t=!0;for(const f of n.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=Ub(c,s))}if(t=!1,mg("after",c),r===0)return mg("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,p){if(u&&mg("before",c),f)Ub(c,f,p);else for(const m of n.values())Ub(c,m.store.getState());u&&mg("after",c)}return{loop:o,invalidate:a,advance:l}}function Vle(){const n=H.useContext(T9);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function AP(n,e=0){const t=Vle(),r=t.getState().internal.subscribe,i=v9(n);return $y(()=>r(i,e,t),[e,r,t]),null}const Dp=new Map,{invalidate:A3,advance:M3}=Ule(Dp),{reconciler:a1,applyProps:mf}=Tle(Dp,Ple),gf={objects:"shallow",strict:!1},zle=(n,e)=>{const t=typeof n=="function"?n(e):n;return S9(t)?t:new nP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Ble(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Hle(n){const e=Dp.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Lle(A3,M3),o=t||a1.createContainer(s,Wf.ConcurrentRoot,null,!1,null,"",i,null);e||Dp.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:p,scene:m,events:v,onCreated:w,shadows:_=!1,linear:g=!1,flat:E=!1,legacy:S=!1,orthographic:b=!1,frameloop:k="always",dpr:N=[1,2],performance:M,raycaster:P,camera:A,onPointerMissed:R}=u,O=s.getState(),U=O.gl;O.gl||O.set({gl:U=zle(f,n)});let V=O.raycaster;V||O.set({raycaster:V=new c9});const{params:$,...Z}=P||{};if(Qn.equ(Z,V,gf)||mf(V,{...Z}),Qn.equ($,V.params,gf)||mf(V,{params:{...V.params,...$}}),!O.camera||O.camera===c&&!Qn.equ(c,A,gf)){c=A;const X=A instanceof Fy,ee=X?A:b?new By(0,0,0,0,.1,1e3):new hi(75,0,.1,1e3);X||(ee.position.z=5,A&&(mf(ee,A),("aspect"in A||"left"in A||"right"in A||"bottom"in A||"top"in A)&&(ee.manual=!0,ee.updateProjectionMatrix())),!O.camera&&!(A!=null&&A.rotation)&&ee.lookAt(0,0,0)),O.set({camera:ee}),V.camera=ee}if(!O.scene){let X;m!=null&&m.isScene?X=m:(X=new rP,m&&mf(X,m)),O.set({scene:_f(X)})}if(!O.xr){var ne;const X=(J,oe)=>{const we=s.getState();we.frameloop!=="never"&&M3(J,!0,we,oe)},ee=()=>{const J=s.getState();J.gl.xr.enabled=J.gl.xr.isPresenting,J.gl.xr.setAnimationLoop(J.gl.xr.isPresenting?X:null),J.gl.xr.isPresenting||A3(J)},te={connect(){const J=s.getState().gl;J.xr.addEventListener("sessionstart",ee),J.xr.addEventListener("sessionend",ee)},disconnect(){const J=s.getState().gl;J.xr.removeEventListener("sessionstart",ee),J.xr.removeEventListener("sessionend",ee)}};typeof((ne=U.xr)==null?void 0:ne.addEventListener)=="function"&&te.connect(),O.set({xr:te})}if(U.shadowMap){const X=U.shadowMap.enabled,ee=U.shadowMap.type;if(U.shadowMap.enabled=!!_,Qn.boo(_))U.shadowMap.type=Kg;else if(Qn.str(_)){var ae;const te={basic:t6,percentage:hE,soft:Kg,variance:$o};U.shadowMap.type=(ae=te[_])!=null?ae:Kg}else Qn.obj(_)&&Object.assign(U.shadowMap,_);(X!==U.shadowMap.enabled||ee!==U.shadowMap.type)&&(U.shadowMap.needsUpdate=!0)}const z=m9();z&&("enabled"in z?z.enabled=!S:"legacyMode"in z&&(z.legacyMode=S)),l||mf(U,{outputEncoding:g?3e3:3001,toneMapping:E?Da:DI}),O.legacy!==S&&O.set(()=>({legacy:S})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==E&&O.set(()=>({flat:E})),f&&!Qn.fun(f)&&!S9(f)&&!Qn.equ(f,U,gf)&&mf(U,f),v&&!O.events.handlers&&O.set({events:v(s)});const j=Ble(n,p);return Qn.equ(j,O.size,gf)||O.setSize(j.width,j.height,j.updateStyle,j.top,j.left),N&&O.viewport.dpr!==x9(N)&&O.setDpr(N),O.frameloop!==k&&O.setFrameloop(k),O.onPointerMissed||O.set({onPointerMissed:R}),M&&!Qn.equ(M,O.performance,gf)&&O.set(X=>({performance:{...X.performance,...M}})),a=w,l=!0,this},render(u){return l||this.configure(),a1.updateContainer(L.jsx(jle,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){b9(n)}}}function jle({store:n,children:e,onCreated:t,rootElement:r}){return $y(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),L.jsx(T9.Provider,{value:n,children:e})}function b9(n,e){const t=Dp.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),a1.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),Cle(i),Dp.delete(n)}catch{}},500)})}}a1.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:H.version});const Vb={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Gle(n){const{handlePointer:e}=kle(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Vb).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=Vb[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Vb[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function C3(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function Wle({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=H.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=H.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=H.useRef(!1);H.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,p,m]=H.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:E,top:S,width:b,height:k,bottom:N,right:M,x:P,y:A}=a.current.element.getBoundingClientRect(),R={left:E,top:S,width:b,height:k,bottom:N,right:M,x:P,y:A};a.current.element instanceof HTMLElement&&r&&(R.height=a.current.element.offsetHeight,R.width=a.current.element.offsetWidth),Object.freeze(R),u.current&&!Yle(a.current.lastBounds,R)&&o(a.current.lastBounds=R)};return[g,c?C3(g,c):g,l?C3(g,l):g]},[o,r,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function w(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=A9(g),w())};return qle(m,!!e),$le(p),H.useEffect(()=>{v(),w()},[e,m,p]),H.useEffect(()=>v,[]),[_,s,f]}function $le(n){H.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function qle(n,e){H.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function A9(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...A9(n.parentElement)]}const Xle=["x","y","top","bottom","left","right","width","height"],Yle=(n,e)=>Xle.every(t=>n[t]===e[t]);var Kle=Object.defineProperty,Qle=Object.defineProperties,Zle=Object.getOwnPropertyDescriptors,R3=Object.getOwnPropertySymbols,Jle=Object.prototype.hasOwnProperty,ece=Object.prototype.propertyIsEnumerable,I3=(n,e,t)=>e in n?Kle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P3=(n,e)=>{for(var t in e||(e={}))Jle.call(e,t)&&I3(n,t,e[t]);if(R3)for(var t of R3(e))ece.call(e,t)&&I3(n,t,e[t]);return n},tce=(n,e)=>Qle(n,Zle(e)),N3,k3;typeof window<"u"&&((N3=window.document)!=null&&N3.createElement||((k3=window.navigator)==null?void 0:k3.product)==="ReactNative")?H.useLayoutEffect:H.useEffect;function M9(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=M9(r,e,t);if(i)return i;r=r.sibling}}function C9(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const L3=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=L3;return}return L3.apply(this,arguments)};const MP=C9(H.createContext(null));class R9 extends H.Component{render(){return H.createElement(MP.Provider,{value:this._reactInternals},this.props.children)}}function nce(){const n=H.useContext(MP);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=H.useId();return H.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=M9(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function rce(){const n=nce(),[e]=H.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==MP&&!e.has(i)&&e.set(i,H.useContext(C9(i)))}t=t.return}return e}function ice(){const n=rce();return H.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>H.createElement(e,null,H.createElement(t.Provider,tce(P3({},r),{value:n.get(t)}))),e=>H.createElement(R9,P3({},e))),[n])}const sce=H.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=Gle,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:w,performance:_,raycaster:g,camera:E,scene:S,onPointerMissed:b,onCreated:k,...N},M){H.useMemo(()=>Sle(ple),[]);const P=ice(),[A,R]=Wle({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=H.useRef(null),U=H.useRef(null);H.useImperativeHandle(M,()=>O.current);const V=v9(b),[$,Z]=H.useState(!1),[ne,ae]=H.useState(!1);if($)throw $;if(ne)throw ne;const z=H.useRef(null);$y(()=>{const X=O.current;R.width>0&&R.height>0&&X&&(z.current||(z.current=Hle(X)),z.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:w,performance:_,raycaster:g,camera:E,scene:S,size:R,onPointerMissed:(...ee)=>V.current==null?void 0:V.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(a?ble(a)?a.current:a:U.current),l&&ee.setEvents({compute:(te,J)=>{const oe=te[l+"X"],we=te[l+"Y"];J.pointer.set(oe/J.size.width*2-1,-(we/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),k==null||k(ee)}}),z.current.render(L.jsx(P,{children:L.jsx(y9,{set:ae,children:L.jsx(H.Suspense,{fallback:L.jsx(Ale,{set:Z}),children:e??null})})})))}),H.useEffect(()=>{const X=O.current;if(X)return()=>b9(X)},[]);const j=a?"none":"auto";return L.jsx("div",{ref:U,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:j,...i},...N,children:L.jsx("div",{ref:A,style:{width:"100%",height:"100%"},children:L.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}),oce=H.forwardRef(function(e,t){return L.jsx(R9,{children:L.jsx(sce,{...e,ref:t})})});function CC(){return CC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CC.apply(null,arguments)}var I9={exports:{}},ace="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lce=ace,cce=lce;function P9(){}function N9(){}N9.resetWarningCache=P9;var uce=function(){function n(r,i,s,o,a,l){if(l!==cce){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:N9,resetWarningCache:P9};return t.PropTypes=t,t};I9.exports=uce();var hce=I9.exports;const sr=od(hce);var dce=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class fce extends pP{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${dce}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const pce=H.forwardRef(({speed:n=1,...e},t)=>{const[r]=H.useState(()=>new fce);return AP(i=>r&&(r.time=i.clock.elapsedTime*n)),H.createElement("primitive",CC({object:r,ref:t,attach:"material"},e))}),vx=H.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const c=H.useRef(null);H.useImperativeHandle(l,()=>c.current,[]);const u=H.useRef(Math.random()*1e4);return AP(f=>{var p,m;if(!e||t===0)return;o&&f.invalidate();const v=u.current+f.clock.elapsedTime;c.current.rotation.x=Math.cos(v/4*t)/8*r,c.current.rotation.y=Math.sin(v/4*t)/8*r,c.current.rotation.z=Math.sin(v/4*t)/20*r;let w=Math.sin(v/4*t)/10;w=eH.mapLinear(w,-.1,.1,(p=s==null?void 0:s[0])!==null&&p!==void 0?p:-.1,(m=s==null?void 0:s[1])!==null&&m!==void 0?m:.1),c.current.position.y=w*i,c.current.updateMatrix()}),H.createElement("group",a,H.createElement("group",{ref:c,matrixAutoUpdate:!1},n))}),mce=()=>{const n=H.useRef(null),e=H.useRef(null),t=H.useRef(null);return AP(r=>{const i=r.clock.getElapsedTime();n.current&&(n.current.rotation.x=i*.15,n.current.rotation.y=i*.2),e.current&&(e.current.rotation.x=-i*.1,e.current.rotation.z=i*.15),t.current&&(t.current.rotation.y=i*.25,t.current.rotation.z=-i*.1)}),L.jsxs(L.Fragment,{children:[L.jsx(vx,{speed:2,rotationIntensity:.5,floatIntensity:1,children:L.jsxs("mesh",{ref:n,position:[0,0,0],scale:1.8,children:[L.jsx("icosahedronGeometry",{args:[1,1]}),L.jsx(pce,{color:"#7fff00",emissive:"#7fff00",emissiveIntensity:.3,roughness:.2,metalness:.8,distort:.3,speed:2,wireframe:!0})]})}),L.jsx(vx,{speed:1.5,rotationIntensity:1,floatIntensity:.5,children:L.jsxs("mesh",{ref:e,position:[0,0,0],scale:2.5,children:[L.jsx("torusGeometry",{args:[1,.02,16,100]}),L.jsx("meshStandardMaterial",{color:"#00ffff",emissive:"#00ffff",emissiveIntensity:.5})]})}),L.jsx(vx,{speed:1,rotationIntensity:.8,floatIntensity:.3,children:L.jsxs("mesh",{ref:t,position:[0,0,0],rotation:[Math.PI/3,0,0],scale:3,children:[L.jsx("torusGeometry",{args:[1,.015,16,100]}),L.jsx("meshStandardMaterial",{color:"#9966ff",emissive:"#9966ff",emissiveIntensity:.4})]})}),[...Array(20)].map((r,i)=>L.jsx(vx,{speed:1+Math.random()*2,rotationIntensity:.5,floatIntensity:1,children:L.jsxs("mesh",{position:[(Math.random()-.5)*8,(Math.random()-.5)*8,(Math.random()-.5)*4],scale:.05+Math.random()*.1,children:[L.jsx("boxGeometry",{args:[1,1,1]}),L.jsx("meshStandardMaterial",{color:i%3===0?"#7fff00":i%3===1?"#00ffff":"#9966ff",emissive:i%3===0?"#7fff00":i%3===1?"#00ffff":"#9966ff",emissiveIntensity:.8})]})},i))]})},gce=()=>L.jsx("div",{className:"absolute inset-0 z-0",children:L.jsx(oce,{camera:{position:[0,0,6],fov:60},gl:{antialias:!0,alpha:!0},style:{background:"transparent"},children:L.jsxs(H.Suspense,{fallback:null,children:[L.jsx("ambientLight",{intensity:.2}),L.jsx("pointLight",{position:[10,10,10],intensity:1,color:"#7fff00"}),L.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#00ffff"}),L.jsx("pointLight",{position:[0,10,-10],intensity:.3,color:"#9966ff"}),L.jsx(mce,{})]})})}),vce=()=>{const n=()=>{vh("cv_download",{source:"hero"}),window.open("/apoorv-mishra-design-explosion/Apoorv_Mishra_CV.pdf","_blank")};return L.jsxs("section",{id:"home",className:"min-h-screen relative overflow-hidden flex items-center",children:[L.jsx(gce,{}),L.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-background via-background/80 to-transparent z-[1]"}),L.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-transparent to-background/50 z-[1]"}),L.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full opacity-10 z-[2]",children:L.jsx("div",{className:"absolute top-0 right-0 w-full h-full",children:[...Array(8)].map((e,t)=>L.jsx("div",{className:"absolute bg-primary/40",style:{width:"1px",height:"200%",transform:"rotate(45deg)",left:`${t*12}%`,top:"-50%"}},t))})}),L.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[L.jsxs("div",{className:"grid lg:grid-cols-12 gap-12 items-center",children:[L.jsxs("div",{className:"lg:col-span-7 space-y-8",children:[L.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 border border-primary/50 bg-primary/5 backdrop-blur-sm animate-slide-in",children:[L.jsx("span",{className:"w-2 h-2 bg-primary animate-pulse"}),L.jsx("span",{className:"text-sm font-mono text-primary uppercase tracking-widest",children:"Available for Work"})]}),L.jsx("div",{className:"space-y-4 animate-slide-in",style:{animationDelay:"0.1s"},children:L.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-bold leading-none tracking-tighter",children:[L.jsx("span",{className:"block text-foreground",children:"APOORV"}),L.jsx("span",{className:"block text-gradient",children:"MISHRA"})]})}),L.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.2s"},children:[L.jsxs("p",{className:"text-xl md:text-2xl font-mono text-muted-foreground",children:[L.jsx("span",{className:"text-secondary",children:">"})," Associate Software Developer"]}),L.jsxs("p",{className:"text-xl md:text-2xl font-mono text-muted-foreground",children:[L.jsx("span",{className:"text-secondary",children:">"})," Full Stack Engineer"]})]}),L.jsxs("p",{className:"text-lg text-muted-foreground max-w-xl leading-relaxed animate-slide-in",style:{animationDelay:"0.3s"},children:["High-performance full-stack engineer specialized in"," ",L.jsx("span",{className:"text-primary font-semibold",children:"microservices"}),","," ",L.jsx("span",{className:"text-secondary font-semibold",children:"optimized databases"}),", and"," ",L.jsx("span",{className:"text-accent font-semibold",children:"cross-platform development"}),". Proven ability to deliver scalable solutions with measurable impact."]}),L.jsxs("div",{className:"flex flex-wrap gap-4 animate-slide-in",style:{animationDelay:"0.4s"},children:[L.jsx(Wi,{variant:"hero",asChild:!0,children:L.jsx("a",{href:"#projects",children:"View Projects"})}),L.jsxs(Wi,{variant:"outline",size:"lg",onClick:n,children:[L.jsx(eM,{size:18}),"Download CV"]}),L.jsx(Wi,{variant:"secondary",size:"lg",asChild:!0,children:L.jsx("a",{href:"#contact",children:"Get in Touch"})})]}),L.jsxs("div",{className:"flex items-center gap-6 pt-4 animate-slide-in",style:{animationDelay:"0.5s"},children:[L.jsxs("a",{href:"https://github.com/apoorvmishra14",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",onClick:()=>vh("social_click",{platform:"github"}),children:[L.jsx(kz,{size:20,className:"group-hover:animate-pulse"}),L.jsx("span",{className:"text-sm font-mono hidden sm:inline",children:"GitHub"})]}),L.jsxs("a",{href:"https://linkedin.com/in/ApoorvMishra1402",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 text-muted-foreground hover:text-secondary transition-colors",onClick:()=>vh("social_click",{platform:"linkedin"}),children:[L.jsx(Lz,{size:20,className:"group-hover:animate-pulse"}),L.jsx("span",{className:"text-sm font-mono hidden sm:inline",children:"LinkedIn"})]}),L.jsxs("a",{href:"mailto:mishraapoorv14@gmail.com",className:"group flex items-center gap-2 text-muted-foreground hover:text-accent transition-colors",onClick:()=>vh("social_click",{platform:"email"}),children:[L.jsx(Dz,{size:20,className:"group-hover:animate-pulse"}),L.jsx("span",{className:"text-sm font-mono hidden sm:inline",children:"Email"})]}),L.jsxs("a",{href:"tel:+919508103499",className:"group flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",onClick:()=>vh("social_click",{platform:"phone"}),children:[L.jsx(Fz,{size:20,className:"group-hover:animate-pulse"}),L.jsx("span",{className:"text-sm font-mono hidden sm:inline",children:"Call"})]})]})]}),L.jsx("div",{className:"lg:col-span-5 hidden lg:flex items-center justify-center relative",children:L.jsxs("div",{className:"relative w-80 h-80",children:[L.jsxs("div",{className:"absolute -top-8 right-0 bg-card/90 backdrop-blur-sm border-2 border-primary p-4 shadow-brutal animate-float z-10",children:[L.jsx("p",{className:"text-3xl font-bold text-primary",children:"50%"}),L.jsx("p",{className:"text-xs font-mono text-muted-foreground",children:"DB Response "})]}),L.jsxs("div",{className:"absolute bottom-0 -left-8 bg-card/90 backdrop-blur-sm border-2 border-secondary p-4 shadow-brutal-cyan animate-float z-10",style:{animationDelay:"-2s"},children:[L.jsx("p",{className:"text-3xl font-bold text-secondary",children:"10K+"}),L.jsx("p",{className:"text-xs font-mono text-muted-foreground",children:"TXN/min"})]}),L.jsxs("div",{className:"absolute top-1/2 -right-4 bg-card/90 backdrop-blur-sm border-2 border-accent p-4 animate-float z-10",style:{animationDelay:"-4s"},children:[L.jsx("p",{className:"text-3xl font-bold text-accent",children:"1.5+"}),L.jsx("p",{className:"text-xs font-mono text-muted-foreground",children:"Years Exp"})]})]})})]}),L.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 animate-bounce",children:[L.jsx("span",{className:"text-xs font-mono text-muted-foreground uppercase tracking-widest",children:"Scroll"}),L.jsx(Aq,{size:16,className:"text-primary"})]})]})]})},yce={BASE_URL:"/apoorv-mishra-design-explosion/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_EMAILJS_PUBLIC_KEY:"uZ3xrdSJ5Tos3tuS5",VITE_EMAILJS_SERVICE_ID:"service_eiifdkx",VITE_EMAILJS_TEMPLATE_ID:"template_3st905y",VITE_FIREBASE_API_KEY:"AIzaSyC4UvWIhIp8D-vzQq6wZIjs8V2-LiiBbNo",VITE_FIREBASE_APP_ID:"1:423077552890:web:669fb180c8576709c11f43",VITE_FIREBASE_AUTH_DOMAIN:"portfolio-8a178.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"423077552890",VITE_FIREBASE_PROJECT_ID:"portfolio-8a178",VITE_FIREBASE_STORAGE_BUCKET:"portfolio-8a178.firebasestorage.app",VITE_UNSPLASH_ACCESS_KEY:"GrhhxoGXkzoAAXhl0NkQvvEOUFjyN879X3GdvpbeBMc"};let zb;async function qy(){if(zb)return zb;const n=yce,e={firebase:{apiKey:n.VITE_FIREBASE_API_KEY,authDomain:n.VITE_FIREBASE_AUTH_DOMAIN,projectId:n.VITE_FIREBASE_PROJECT_ID,storageBucket:n.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:n.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:n.VITE_FIREBASE_APP_ID},emailjs:{serviceId:n.VITE_EMAILJS_SERVICE_ID,templateId:n.VITE_EMAILJS_TEMPLATE_ID,publicKey:n.VITE_EMAILJS_PUBLIC_KEY},unsplash:{accessKey:n.VITE_UNSPLASH_ACCESS_KEY}};return e.firebase.apiKey||console.error("VITE_FIREBASE_API_KEY is missing. Check your .env file and restart the development server."),zb=e,e}const D3=[{title:"Associate Software Developer",company:"TrioTree Technologies",tags:"healthcare technology hospital software",location:"Noida, Uttar Pradesh",period:"April 2025  November 2025",highlights:["Developed and maintained 3+ healthcare applications, leading to a 20% faster turnaround time for new feature requests","Engineered complex SQL Server stored procedures, reducing database response time by 50%","Built cross-platform mobile application using React Native, cutting chart retrieval time by 60%","Designed RESTful backend APIs in .NET Core 8, reducing average API response time by over 250ms"],metrics:["50% DB","60% Faster","3+ Apps"],color:"primary"},{title:"Full Stack Developer Intern",company:"Wealthcore",tags:"Fintech trading platform microservices",location:"Remote",period:"December 2023  February 2025",highlights:["Built high-performance multi-asset trading application processing over 10,000 transactions per minute","Architected microservice-based backend using Node.js, improving scalability by 30%","Built dynamic React frontend with real-time data updates, improving user engagement by 35%","Optimized MySQL database schema, resulting in 60% decrease in latency for financial data reporting"],metrics:["10K TXN/min","35% Engage","60% Latency"],color:"secondary"},{title:"UI/UX Designer and Developer",company:"IQuestStar",tags:"UI/UX Design",location:"Gurugram, Delhi",period:"April 2022  July 2022",highlights:["Enhanced web design through comprehensive UX testing, contributing to 15% increase in user session duration","Designed and created responsive websites, achieving 40% improvement in mobile usability scores"],metrics:["15% Session","40% Mobile"],color:"accent"}],_ce=()=>{const[n,e]=H.useState([]);return H.useEffect(()=>{(async()=>{var t;try{const r=await qy(),i=!!((t=r.unsplash)!=null&&t.accessKey),s="apoorv-mishra-portfolio",o=await Promise.all(D3.map(async a=>{var u,f,p,m,v,w;const l=Math.random().toString(36).slice(2),c=encodeURIComponent(`${a.tags}`);if(i)try{const _=`https://api.unsplash.com/search/photos?query=${c}&orientation=landscape&per_page=30&client_id=${r.unsplash.accessKey}`,E=await(await fetch(_)).json(),S=Array.isArray(E.results)?E.results:[];if(S.length){const b=S[Math.floor(Math.random()*S.length)];if((u=b==null?void 0:b.urls)!=null&&u.regular){const k=((f=b.user)==null?void 0:f.name)||void 0,N=(m=(p=b.user)==null?void 0:p.links)!=null&&m.html?`${b.user.links.html}?utm_source=${s}&utm_medium=referral`:void 0,M=(v=b.links)!=null&&v.html?`${b.links.html}?utm_source=${s}&utm_medium=referral`:void 0,P=(w=b.links)==null?void 0:w.download_location;return P&&fetch(`${P}&client_id=${r.unsplash.accessKey}`).catch(()=>{}),{url:`${b.urls.regular}?sig=${l}`,author:k,authorUrl:N,photoUrl:M}}}}catch{}return{url:`https://picsum.photos/800/600?random=${l}`}}));e(o)}catch{e([])}})()},[]),L.jsxs("section",{id:"experience",className:"py-32 relative overflow-hidden",children:[L.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full bg-gradient-to-l from-primary/5 to-transparent"}),L.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[L.jsxs("div",{className:"flex items-center gap-4 mb-16",children:[L.jsx("span",{className:"text-primary font-mono text-sm",children:"02"}),L.jsx("h2",{className:"text-4xl md:text-5xl font-bold",children:"Experience"}),L.jsx("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-primary/50 to-transparent"})]}),L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute left-0 md:left-1/2 top-0 bottom-0 w-[2px] bg-gradient-to-b from-primary via-secondary to-accent"}),D3.map((t,r)=>L.jsxs("div",{className:`relative mb-16 md:mb-24 ${r%2===0?"md:pr-[55%]":"md:pl-[55%] md:text-left"}`,children:[(()=>{const i=n[r],s=(i==null?void 0:i.url)||`https://picsum.photos/800/600?random=${r}`;return L.jsx("div",{className:`absolute top-0 hidden md:block ${r%2===0?"right-0":"left-0"} w-[45%] h-full`,children:L.jsxs("div",{className:"h-full border-2 border-border bg-card overflow-hidden",children:[L.jsx("img",{src:s,alt:`${t.company} ${t.title}`,className:"w-full h-full object-cover",loading:"lazy"}),(i==null?void 0:i.author)&&(i==null?void 0:i.authorUrl)&&L.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs px-2 py-1 flex gap-1",children:[L.jsx("span",{children:"Photo by"}),L.jsx("a",{href:i.authorUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:i.author}),L.jsx("span",{children:"on"}),L.jsx("a",{href:"https://unsplash.com/?utm_source=apoorv-mishra-portfolio&utm_medium=referral",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Unsplash"})]})]})})})(),L.jsx("div",{className:`absolute left-0 md:left-1/2 w-4 h-4 -translate-x-[7px] md:-translate-x-1/2 bg-${t.color} border-2 border-background z-10`,style:{boxShadow:`0 0 20px hsl(var(--${t.color}) / 0.5)`}}),L.jsxs("div",{className:`ml-8 md:ml-0 bg-card border-2 border-${t.color}/30 p-6 md:p-8 hover-lift group`,style:{clipPath:"polygon(0 0, calc(100% - 16px) 0, 100% 16px, 100% 100%, 16px 100%, 0 calc(100% - 16px))"},children:[L.jsx("div",{className:"md:hidden mb-4",children:(()=>{const i=n[r],s=(i==null?void 0:i.url)||`https://picsum.photos/800/600?random=${r}`;return L.jsxs("div",{className:"w-full h-40 border-2 border-border bg-card overflow-hidden relative",children:[L.jsx("img",{src:s,alt:`${t.company} ${t.title}`,className:"w-full h-full object-cover",loading:"lazy"}),(i==null?void 0:i.author)&&(i==null?void 0:i.authorUrl)&&L.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-[10px] px-2 py-1 flex gap-1",children:[L.jsx("span",{children:"Photo by"}),L.jsx("a",{href:i.authorUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:i.author}),L.jsx("span",{children:"on"}),L.jsx("a",{href:"https://unsplash.com/?utm_source=apoorv-mishra-portfolio&utm_medium=referral",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Unsplash"})]})]})})()}),L.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-4",children:[L.jsxs("div",{children:[L.jsx("h3",{className:`text-xl md:text-2xl font-bold text-${t.color} mb-1`,children:t.title}),L.jsx("p",{className:"text-lg text-foreground font-semibold",children:t.company})]}),L.jsx("div",{className:"flex flex-wrap gap-2",children:t.metrics.map((i,s)=>L.jsx("span",{className:`px-3 py-1 text-xs font-mono bg-${t.color}/10 text-${t.color} border border-${t.color}/30`,children:i},s))})]}),L.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 text-sm text-muted-foreground",children:[L.jsxs("span",{className:"flex items-center gap-2",children:[L.jsx(Nz,{size:14,className:`text-${t.color}`}),t.period]}),L.jsxs("span",{className:"flex items-center gap-2",children:[L.jsx(Oz,{size:14,className:`text-${t.color}`}),t.location]})]}),L.jsx("ul",{className:"space-y-3",children:t.highlights.map((i,s)=>L.jsxs("li",{className:"flex gap-3 text-muted-foreground group-hover:text-foreground/80 transition-colors",children:[L.jsx("span",{className:`text-${t.color} mt-1`,children:""}),L.jsx("span",{children:i})]},s))})]})]},r))]})]})]})},xce=[{title:"E-Commerce Platform",subtitle:"Secure Full-Stack Solution",status:"Ongoing",description:"A full-stack platform managing 1,000+ SKUs with optimized image handling, secure checkout with Razorpay integration, and GST/HSN tax compliance.",tech:["React","Node.js","Express","MongoDB","Razorpay","Tailwind CSS"],metrics:[{label:"Page Load",value:"30%"},{label:"Success Rate",value:"99.9%"},{label:"Mobile Conv.",value:"25%"}],highlights:["Optimized static asset delivery reducing page load by 30%","Integrated secure payment gateway processing with 99.9% success rate","Mobile-first UI components increasing conversion by 25%"],color:"primary"},{title:"Multi-Asset Trading App",subtitle:"High-Frequency Systems",status:"2024",description:"A scalable MERN stack application capable of processing over 5,000 requests per second with sub-100ms latency using microservice architecture.",tech:["React.js","Node.js","MySQL","Express","Swagger"],metrics:[{label:"Requests/sec",value:"5K+"},{label:"Latency",value:"<100ms"},{label:"Dev Time",value:"40%"}],highlights:["Built scalable architecture handling 5,000+ requests per second","Achieved sub-100ms latency for real-time trading operations","Microservice design reducing development time by 40%"],color:"secondary"},{title:"Movie Recommendation System",subtitle:"Spark/Kafka Pipeline",status:"2023",description:"An intelligent recommendation system processing 1M+ entry datasets with real-time data ingestion pipeline capable of handling 10,000+ events per minute.",tech:["Apache Spark","Kafka","AWS S3","Flask","Python"],metrics:[{label:"Dataset",value:"1M+"},{label:"Response",value:"<500ms"},{label:"Events/min",value:"10K+"}],highlights:["Processed 1M+ entry dataset for personalized recommendations","Generated user recommendations in under 500ms","Real-time Kafka pipeline handling 10,000+ events per minute"],color:"accent"}],wce=()=>L.jsxs("section",{id:"projects",className:"py-32 relative overflow-hidden bg-muted/30",children:[L.jsx("div",{className:"absolute inset-0 bg-grid opacity-20"}),L.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-primary/10 blur-3xl"}),L.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-secondary/10 blur-3xl"}),L.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[L.jsxs("div",{className:"flex items-center gap-4 mb-16",children:[L.jsx("span",{className:"text-secondary font-mono text-sm",children:"03"}),L.jsx("h2",{className:"text-4xl md:text-5xl font-bold",children:"Projects"}),L.jsx("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-secondary/50 to-transparent"})]}),L.jsx("div",{className:"grid gap-8",children:xce.map((n,e)=>L.jsxs("div",{className:"group relative bg-card border-2 border-border hover:border-primary/50 transition-all duration-500",children:[L.jsx("div",{className:`absolute top-0 right-0 w-16 h-16 border-l-2 border-b-2 border-${n.color}/50 bg-${n.color}/5`}),L.jsx("div",{className:`absolute bottom-0 left-0 w-16 h-16 border-r-2 border-t-2 border-${n.color}/50 bg-${n.color}/5`}),L.jsx("div",{className:"p-6 md:p-10",children:L.jsxs("div",{className:"grid lg:grid-cols-12 gap-8",children:[L.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[L.jsx("div",{className:"flex flex-wrap items-start justify-between gap-4",children:L.jsxs("div",{children:[L.jsx("div",{className:"flex items-center gap-3 mb-2",children:L.jsx("span",{className:`px-2 py-1 text-xs font-mono bg-${n.color}/20 text-${n.color} border border-${n.color}/30`,children:n.status})}),L.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-foreground group-hover:text-gradient transition-all",children:n.title}),L.jsx("p",{className:`text-${n.color} font-mono text-sm mt-1`,children:n.subtitle})]})}),L.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description}),L.jsx("ul",{className:"space-y-2",children:n.highlights.map((t,r)=>L.jsxs("li",{className:"flex items-start gap-3 text-sm text-muted-foreground",children:[L.jsx(Lq,{size:14,className:`text-${n.color} mt-1 flex-shrink-0`}),L.jsx("span",{children:t})]},r))}),L.jsx("div",{className:"flex flex-wrap gap-2",children:n.tech.map((t,r)=>L.jsx("span",{className:"px-3 py-1.5 text-xs font-mono bg-muted text-muted-foreground border border-border hover:border-primary/50 hover:text-primary transition-colors",children:t},r))})]}),L.jsx("div",{className:"lg:col-span-5",children:L.jsx("div",{className:"h-full flex flex-col justify-center",children:L.jsx("div",{className:"grid grid-cols-3 gap-4",children:n.metrics.map((t,r)=>L.jsxs("div",{className:`text-center p-4 border-2 border-${n.color}/20 bg-${n.color}/5 hover:border-${n.color}/50 transition-colors`,children:[L.jsx("p",{className:`text-2xl md:text-3xl font-bold text-${n.color}`,children:t.value}),L.jsx("p",{className:"text-xs font-mono text-muted-foreground mt-1 uppercase",children:t.label})]},r))})})})]})})]},e))})]})]}),Bb=[{title:"Frontend Stacks",icon:"",skills:["React","React Native","Next.js","TypeScript","HTML/CSS","Tailwind CSS"],color:"primary"},{title:"Backend Systems",icon:"",skills:[".NET Core 8",".NET MVC","Node.js","Express.js","RESTful APIs","Microservices"],color:"secondary"},{title:"Data & Storage",icon:"",skills:["SQL Server","MySQL","PostgreSQL","MongoDB","T-SQL","Database Optimization"],color:"accent"},{title:"DevOps & Tools",icon:"",skills:["Docker","Git/GitHub","PM2","IIS","AWS S3","Swagger"],color:"primary"},{title:"Languages",icon:"",skills:["C#","JavaScript","TypeScript","Python","SQL","Java"],color:"secondary"},{title:"Specialized",icon:"",skills:["Apache Spark","Kafka","HIPAA Compliance","Agile/SDLC","System Integration","UI/UX Design"],color:"accent"}],Ece=()=>L.jsxs("section",{id:"skills",className:"py-32 relative overflow-hidden",children:[L.jsxs("div",{className:"absolute inset-0",children:[L.jsx("div",{className:"absolute top-1/2 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-primary/30 to-transparent"}),L.jsx("div",{className:"absolute top-0 left-1/2 w-[1px] h-full bg-gradient-to-b from-transparent via-secondary/30 to-transparent"})]}),L.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[L.jsxs("div",{className:"flex items-center gap-4 mb-16",children:[L.jsx("span",{className:"text-accent font-mono text-sm",children:"04"}),L.jsx("h2",{className:"text-4xl md:text-5xl font-bold",children:"Skills"}),L.jsx("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-accent/50 to-transparent"})]}),L.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Bb.map((n,e)=>L.jsxs("div",{className:"group relative bg-card border-2 border-border hover:border-primary/50 p-6 transition-all duration-300 hover-lift",style:{clipPath:e%2===0?"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)":"polygon(0 0, calc(100% - 20px) 0, 100% 20px, 100% 100%, 0 100%, 0 0)"},children:[L.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[L.jsx("span",{className:`text-2xl text-${n.color}`,children:n.icon}),L.jsx("h3",{className:"text-lg font-bold uppercase tracking-wider",children:n.title})]}),L.jsx("div",{className:"flex flex-wrap gap-2",children:n.skills.map((t,r)=>L.jsx("span",{className:`px-3 py-1.5 text-sm font-mono bg-muted/50 text-muted-foreground border border-transparent hover:border-${n.color}/50 hover:text-${n.color} transition-all duration-200`,children:t},r))}),L.jsx("div",{className:`absolute bottom-0 right-0 w-8 h-8 bg-${n.color}/10 opacity-0 group-hover:opacity-100 transition-opacity`})]},e))}),L.jsx("div",{className:"mt-16 overflow-hidden border-y-2 border-border py-4",children:L.jsx("div",{className:"animate-marquee whitespace-nowrap flex gap-8",children:[...Bb,...Bb].flatMap(n=>n.skills.map((e,t)=>L.jsx("span",{className:"text-xl font-bold text-muted-foreground/30 hover:text-primary transition-colors cursor-default",children:e},`${n.title}-${e}-${t}`)))})})]})]}),Sce=()=>{};var O3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Tce=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},L9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(t[u],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(k9(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Tce(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new bce;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const v=c<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ace=function(n){const e=k9(n);return L9.encodeByteArray(e,!0)},D9=function(n){return Ace(n).replace(/\./g,"")},O9=function(n){try{return L9.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cce=()=>Mce().__FIREBASE_DEFAULTS__,Rce=()=>{if(typeof process>"u"||typeof O3>"u")return;const n=O3.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ice=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&O9(n[1]);return e&&JSON.parse(e)},UE=()=>{try{return Sce()||Cce()||Rce()||Ice()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Pce=n=>{var e,t;return(t=(e=UE())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},F9=()=>{var n;return(n=UE())==null?void 0:n.config},U9=n=>{var e;return(e=UE())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V9(n){return(await fetch(n,{credentials:"include"})).ok}const nv={};function kce(){const n={prod:[],emulator:[]};for(const e of Object.keys(nv))nv[e]?n.emulator.push(e):n.prod.push(e);return n}function Lce(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let F3=!1;function Dce(n,e){if(typeof window>"u"||typeof document>"u"||!am(window.location.host)||nv[n]===e||nv[n]||F3)return;nv[n]=e;function t(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=kce().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{F3=!0,o()},p}function u(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=Lce(r),m=t("text"),v=document.getElementById(m)||document.createElement("span"),w=t("learnmore"),_=document.getElementById(w)||document.createElement("a"),g=t("preprendIcon"),E=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;a(S),u(_,w);const b=c();l(E,g),S.append(E,v,_,b),document.body.appendChild(S)}s?(v.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Oce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xi())}function Fce(){var e;const n=(e=UE())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Uce(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vce(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zce(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bce(){const n=Xi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Hce(){return!Fce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jce(){try{return typeof indexedDB=="object"}catch{return!1}}function Gce(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wce="FirebaseError";class Kl extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Wce,Object.setPrototypeOf(this,Kl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xy.prototype.create)}}class Xy{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$ce(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kl(i,a,r)}}function $ce(n,e){return n.replace(qce,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const qce=/\{\$([^}]+)}/g;function Xce(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ed(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(U3(s)&&U3(o)){if(!ed(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function U3(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pg(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ng(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Yce(n,e){const t=new Kce(n,e);return t.subscribe.bind(t)}class Kce{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Qce(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Hb),i.error===void 0&&(i.error=Hb),i.complete===void 0&&(i.complete=Hb);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qce(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Hb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n){return n&&n._delegate?n._delegate:n}class td{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zce{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Nce;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eue(e))try{this.getOrInitializeService({instanceIdentifier:gh})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gh){return this.instances.has(e)}getOptions(e=gh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Jce(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gh){return this.component?this.component.multipleInstances?e:gh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Jce(n){return n===gh?void 0:n}function eue(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Zce(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(pn||(pn={}));const nue={debug:pn.DEBUG,verbose:pn.VERBOSE,info:pn.INFO,warn:pn.WARN,error:pn.ERROR,silent:pn.SILENT},rue=pn.INFO,iue={[pn.DEBUG]:"log",[pn.VERBOSE]:"log",[pn.INFO]:"info",[pn.WARN]:"warn",[pn.ERROR]:"error"},sue=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=iue[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class CP{constructor(e){this.name=e,this._logLevel=rue,this._logHandler=sue,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nue[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pn.DEBUG,...e),this._logHandler(this,pn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pn.VERBOSE,...e),this._logHandler(this,pn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pn.INFO,...e),this._logHandler(this,pn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pn.WARN,...e),this._logHandler(this,pn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pn.ERROR,...e),this._logHandler(this,pn.ERROR,...e)}}const oue=(n,e)=>e.some(t=>n instanceof t);let V3,z3;function aue(){return V3||(V3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lue(){return z3||(z3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z9=new WeakMap,RC=new WeakMap,B9=new WeakMap,jb=new WeakMap,RP=new WeakMap;function cue(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(nu(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&z9.set(t,n)}).catch(()=>{}),RP.set(e,n),e}function uue(n){if(RC.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});RC.set(n,e)}let IC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return RC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||B9.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nu(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hue(n){IC=n(IC)}function due(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Gb(this),e,...t);return B9.set(r,e.sort?e.sort():[e]),nu(r)}:lue().includes(n)?function(...e){return n.apply(Gb(this),e),nu(z9.get(this))}:function(...e){return nu(n.apply(Gb(this),e))}}function fue(n){return typeof n=="function"?due(n):(n instanceof IDBTransaction&&uue(n),oue(n,aue())?new Proxy(n,IC):n)}function nu(n){if(n instanceof IDBRequest)return cue(n);if(jb.has(n))return jb.get(n);const e=fue(n);return e!==n&&(jb.set(n,e),RP.set(e,n)),e}const Gb=n=>RP.get(n);function pue(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=nu(o);return r&&o.addEventListener("upgradeneeded",l=>{r(nu(o.result),l.oldVersion,l.newVersion,nu(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const mue=["get","getKey","getAll","getAllKeys","count"],gue=["put","add","delete","clear"],Wb=new Map;function B3(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Wb.get(e))return Wb.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=gue.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mue.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return Wb.set(e,s),s}hue(n=>({...n,get:(e,t,r)=>B3(e,t)||n.get(e,t,r),has:(e,t)=>!!B3(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yue(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function yue(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const PC="@firebase/app",H3="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new CP("@firebase/app"),_ue="@firebase/app-compat",xue="@firebase/analytics-compat",wue="@firebase/analytics",Eue="@firebase/app-check-compat",Sue="@firebase/app-check",Tue="@firebase/auth",bue="@firebase/auth-compat",Aue="@firebase/database",Mue="@firebase/data-connect",Cue="@firebase/database-compat",Rue="@firebase/functions",Iue="@firebase/functions-compat",Pue="@firebase/installations",Nue="@firebase/installations-compat",kue="@firebase/messaging",Lue="@firebase/messaging-compat",Due="@firebase/performance",Oue="@firebase/performance-compat",Fue="@firebase/remote-config",Uue="@firebase/remote-config-compat",Vue="@firebase/storage",zue="@firebase/storage-compat",Bue="@firebase/firestore",Hue="@firebase/ai",jue="@firebase/firestore-compat",Gue="firebase",Wue="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="[DEFAULT]",$ue={[PC]:"fire-core",[_ue]:"fire-core-compat",[wue]:"fire-analytics",[xue]:"fire-analytics-compat",[Sue]:"fire-app-check",[Eue]:"fire-app-check-compat",[Tue]:"fire-auth",[bue]:"fire-auth-compat",[Aue]:"fire-rtdb",[Mue]:"fire-data-connect",[Cue]:"fire-rtdb-compat",[Rue]:"fire-fn",[Iue]:"fire-fn-compat",[Pue]:"fire-iid",[Nue]:"fire-iid-compat",[kue]:"fire-fcm",[Lue]:"fire-fcm-compat",[Due]:"fire-perf",[Oue]:"fire-perf-compat",[Fue]:"fire-rc",[Uue]:"fire-rc-compat",[Vue]:"fire-gcs",[zue]:"fire-gcs-compat",[Bue]:"fire-fst",[jue]:"fire-fst-compat",[Hue]:"fire-vertex","fire-js":"fire-js",[Gue]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map,que=new Map,kC=new Map;function j3(n,e){try{n.container.addComponent(e)}catch(t){Hl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Op(n){const e=n.name;if(kC.has(e))return Hl.debug(`There were multiple attempts to register component ${e}.`),!1;kC.set(e,n);for(const t of ry.values())j3(t,n);for(const t of que.values())j3(t,n);return!0}function IP(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zo(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xue={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ru=new Xy("app","Firebase",Xue);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yue{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new td("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ru.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=Wue;function PP(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:NC,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ru.create("bad-app-name",{appName:String(i)});if(t||(t=F9()),!t)throw ru.create("no-options");const s=ry.get(i);if(s){if(ed(t,s.options)&&ed(r,s.config))return s;throw ru.create("duplicate-app",{appName:i})}const o=new tue(i);for(const l of kC.values())o.addComponent(l);const a=new Yue(t,r,o);return ry.set(i,a),a}function Kue(n=NC){const e=ry.get(n);if(!e&&n===NC&&F9())return PP();if(!e)throw ru.create("no-app",{appName:n});return e}function l1(){return Array.from(ry.values())}function iu(n,e,t){let r=$ue[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hl.warn(o.join(" "));return}Op(new td(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Que="firebase-heartbeat-database",Zue=1,iy="firebase-heartbeat-store";let $b=null;function H9(){return $b||($b=pue(Que,Zue,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(iy)}catch(t){console.warn(t)}}}}).catch(n=>{throw ru.create("idb-open",{originalErrorMessage:n.message})})),$b}async function Jue(n){try{const t=(await H9()).transaction(iy),r=await t.objectStore(iy).get(j9(n));return await t.done,r}catch(e){if(e instanceof Kl)Hl.warn(e.message);else{const t=ru.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hl.warn(t.message)}}}async function G3(n,e){try{const r=(await H9()).transaction(iy,"readwrite");await r.objectStore(iy).put(e,j9(n)),await r.done}catch(t){if(t instanceof Kl)Hl.warn(t.message);else{const r=ru.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hl.warn(r.message)}}}function j9(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ehe=1024,the=30;class nhe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ihe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=W3();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>the){const o=she(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=W3(),{heartbeatsToSend:r,unsentEntries:i}=rhe(this._heartbeatsCache.heartbeats),s=D9(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Hl.warn(t),""}}}function W3(){return new Date().toISOString().substring(0,10)}function rhe(n,e=ehe){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$3(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),$3(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ihe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jce()?Gce().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Jue(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return G3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return G3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $3(n){return D9(JSON.stringify({version:2,heartbeats:n})).length}function she(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ohe(n){Op(new td("platform-logger",e=>new vue(e),"PRIVATE")),Op(new td("heartbeat",e=>new nhe(e),"PRIVATE")),iu(PC,H3,n),iu(PC,H3,"esm2020"),iu("fire-js","")}ohe("");var ahe="firebase",lhe="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */iu(ahe,lhe,"app");var q3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var su,G9;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function A(){}A.prototype=P.prototype,M.F=P.prototype,M.prototype=new A,M.prototype.constructor=M,M.D=function(R,O,U){for(var V=Array(arguments.length-2),$=2;$<arguments.length;$++)V[$-2]=arguments[$];return P.prototype[O].apply(R,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,P,A){A||(A=0);const R=Array(16);if(typeof P=="string")for(var O=0;O<16;++O)R[O]=P.charCodeAt(A++)|P.charCodeAt(A++)<<8|P.charCodeAt(A++)<<16|P.charCodeAt(A++)<<24;else for(O=0;O<16;++O)R[O]=P[A++]|P[A++]<<8|P[A++]<<16|P[A++]<<24;P=M.g[0],A=M.g[1],O=M.g[2];let U=M.g[3],V;V=P+(U^A&(O^U))+R[0]+3614090360&4294967295,P=A+(V<<7&4294967295|V>>>25),V=U+(O^P&(A^O))+R[1]+3905402710&4294967295,U=P+(V<<12&4294967295|V>>>20),V=O+(A^U&(P^A))+R[2]+606105819&4294967295,O=U+(V<<17&4294967295|V>>>15),V=A+(P^O&(U^P))+R[3]+3250441966&4294967295,A=O+(V<<22&4294967295|V>>>10),V=P+(U^A&(O^U))+R[4]+4118548399&4294967295,P=A+(V<<7&4294967295|V>>>25),V=U+(O^P&(A^O))+R[5]+1200080426&4294967295,U=P+(V<<12&4294967295|V>>>20),V=O+(A^U&(P^A))+R[6]+2821735955&4294967295,O=U+(V<<17&4294967295|V>>>15),V=A+(P^O&(U^P))+R[7]+4249261313&4294967295,A=O+(V<<22&4294967295|V>>>10),V=P+(U^A&(O^U))+R[8]+1770035416&4294967295,P=A+(V<<7&4294967295|V>>>25),V=U+(O^P&(A^O))+R[9]+2336552879&4294967295,U=P+(V<<12&4294967295|V>>>20),V=O+(A^U&(P^A))+R[10]+4294925233&4294967295,O=U+(V<<17&4294967295|V>>>15),V=A+(P^O&(U^P))+R[11]+2304563134&4294967295,A=O+(V<<22&4294967295|V>>>10),V=P+(U^A&(O^U))+R[12]+1804603682&4294967295,P=A+(V<<7&4294967295|V>>>25),V=U+(O^P&(A^O))+R[13]+4254626195&4294967295,U=P+(V<<12&4294967295|V>>>20),V=O+(A^U&(P^A))+R[14]+2792965006&4294967295,O=U+(V<<17&4294967295|V>>>15),V=A+(P^O&(U^P))+R[15]+1236535329&4294967295,A=O+(V<<22&4294967295|V>>>10),V=P+(O^U&(A^O))+R[1]+4129170786&4294967295,P=A+(V<<5&4294967295|V>>>27),V=U+(A^O&(P^A))+R[6]+3225465664&4294967295,U=P+(V<<9&4294967295|V>>>23),V=O+(P^A&(U^P))+R[11]+643717713&4294967295,O=U+(V<<14&4294967295|V>>>18),V=A+(U^P&(O^U))+R[0]+3921069994&4294967295,A=O+(V<<20&4294967295|V>>>12),V=P+(O^U&(A^O))+R[5]+3593408605&4294967295,P=A+(V<<5&4294967295|V>>>27),V=U+(A^O&(P^A))+R[10]+38016083&4294967295,U=P+(V<<9&4294967295|V>>>23),V=O+(P^A&(U^P))+R[15]+3634488961&4294967295,O=U+(V<<14&4294967295|V>>>18),V=A+(U^P&(O^U))+R[4]+3889429448&4294967295,A=O+(V<<20&4294967295|V>>>12),V=P+(O^U&(A^O))+R[9]+568446438&4294967295,P=A+(V<<5&4294967295|V>>>27),V=U+(A^O&(P^A))+R[14]+3275163606&4294967295,U=P+(V<<9&4294967295|V>>>23),V=O+(P^A&(U^P))+R[3]+4107603335&4294967295,O=U+(V<<14&4294967295|V>>>18),V=A+(U^P&(O^U))+R[8]+1163531501&4294967295,A=O+(V<<20&4294967295|V>>>12),V=P+(O^U&(A^O))+R[13]+2850285829&4294967295,P=A+(V<<5&4294967295|V>>>27),V=U+(A^O&(P^A))+R[2]+4243563512&4294967295,U=P+(V<<9&4294967295|V>>>23),V=O+(P^A&(U^P))+R[7]+1735328473&4294967295,O=U+(V<<14&4294967295|V>>>18),V=A+(U^P&(O^U))+R[12]+2368359562&4294967295,A=O+(V<<20&4294967295|V>>>12),V=P+(A^O^U)+R[5]+4294588738&4294967295,P=A+(V<<4&4294967295|V>>>28),V=U+(P^A^O)+R[8]+2272392833&4294967295,U=P+(V<<11&4294967295|V>>>21),V=O+(U^P^A)+R[11]+1839030562&4294967295,O=U+(V<<16&4294967295|V>>>16),V=A+(O^U^P)+R[14]+4259657740&4294967295,A=O+(V<<23&4294967295|V>>>9),V=P+(A^O^U)+R[1]+2763975236&4294967295,P=A+(V<<4&4294967295|V>>>28),V=U+(P^A^O)+R[4]+1272893353&4294967295,U=P+(V<<11&4294967295|V>>>21),V=O+(U^P^A)+R[7]+4139469664&4294967295,O=U+(V<<16&4294967295|V>>>16),V=A+(O^U^P)+R[10]+3200236656&4294967295,A=O+(V<<23&4294967295|V>>>9),V=P+(A^O^U)+R[13]+681279174&4294967295,P=A+(V<<4&4294967295|V>>>28),V=U+(P^A^O)+R[0]+3936430074&4294967295,U=P+(V<<11&4294967295|V>>>21),V=O+(U^P^A)+R[3]+3572445317&4294967295,O=U+(V<<16&4294967295|V>>>16),V=A+(O^U^P)+R[6]+76029189&4294967295,A=O+(V<<23&4294967295|V>>>9),V=P+(A^O^U)+R[9]+3654602809&4294967295,P=A+(V<<4&4294967295|V>>>28),V=U+(P^A^O)+R[12]+3873151461&4294967295,U=P+(V<<11&4294967295|V>>>21),V=O+(U^P^A)+R[15]+530742520&4294967295,O=U+(V<<16&4294967295|V>>>16),V=A+(O^U^P)+R[2]+3299628645&4294967295,A=O+(V<<23&4294967295|V>>>9),V=P+(O^(A|~U))+R[0]+4096336452&4294967295,P=A+(V<<6&4294967295|V>>>26),V=U+(A^(P|~O))+R[7]+1126891415&4294967295,U=P+(V<<10&4294967295|V>>>22),V=O+(P^(U|~A))+R[14]+2878612391&4294967295,O=U+(V<<15&4294967295|V>>>17),V=A+(U^(O|~P))+R[5]+4237533241&4294967295,A=O+(V<<21&4294967295|V>>>11),V=P+(O^(A|~U))+R[12]+1700485571&4294967295,P=A+(V<<6&4294967295|V>>>26),V=U+(A^(P|~O))+R[3]+2399980690&4294967295,U=P+(V<<10&4294967295|V>>>22),V=O+(P^(U|~A))+R[10]+4293915773&4294967295,O=U+(V<<15&4294967295|V>>>17),V=A+(U^(O|~P))+R[1]+2240044497&4294967295,A=O+(V<<21&4294967295|V>>>11),V=P+(O^(A|~U))+R[8]+1873313359&4294967295,P=A+(V<<6&4294967295|V>>>26),V=U+(A^(P|~O))+R[15]+4264355552&4294967295,U=P+(V<<10&4294967295|V>>>22),V=O+(P^(U|~A))+R[6]+2734768916&4294967295,O=U+(V<<15&4294967295|V>>>17),V=A+(U^(O|~P))+R[13]+1309151649&4294967295,A=O+(V<<21&4294967295|V>>>11),V=P+(O^(A|~U))+R[4]+4149444226&4294967295,P=A+(V<<6&4294967295|V>>>26),V=U+(A^(P|~O))+R[11]+3174756917&4294967295,U=P+(V<<10&4294967295|V>>>22),V=O+(P^(U|~A))+R[2]+718787259&4294967295,O=U+(V<<15&4294967295|V>>>17),V=A+(U^(O|~P))+R[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+U&4294967295}r.prototype.v=function(M,P){P===void 0&&(P=M.length);const A=P-this.blockSize,R=this.C;let O=this.h,U=0;for(;U<P;){if(O==0)for(;U<=A;)i(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<P;)if(R[O++]=M.charCodeAt(U++),O==this.blockSize){i(this,R),O=0;break}}else for(;U<P;)if(R[O++]=M[U++],O==this.blockSize){i(this,R),O=0;break}}this.h=O,this.o+=P},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;P=this.o*8;for(var A=M.length-8;A<M.length;++A)M[A]=P&255,P/=256;for(this.v(M),M=Array(16),P=0,A=0;A<4;++A)for(let R=0;R<32;R+=8)M[P++]=this.g[A]>>>R&255;return M};function s(M,P){var A=a;return Object.prototype.hasOwnProperty.call(A,M)?A[M]:A[M]=P(M)}function o(M,P){this.h=P;const A=[];let R=!0;for(let O=M.length-1;O>=0;O--){const U=M[O]|0;R&&U==P||(A[O]=U,R=!1)}this.g=A}var a={};function l(M){return-128<=M&&M<128?s(M,function(P){return new o([P|0],P<0?-1:0)}):new o([M|0],M<0?-1:0)}function c(M){if(isNaN(M)||!isFinite(M))return f;if(M<0)return _(c(-M));const P=[];let A=1;for(let R=0;M>=A;R++)P[R]=M/A|0,A*=4294967296;return new o(P,0)}function u(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return _(u(M.substring(1),P));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(P,8));let R=f;for(let U=0;U<M.length;U+=8){var O=Math.min(8,M.length-U);const V=parseInt(M.substring(U,U+O),P);O<8?(O=c(Math.pow(P,O)),R=R.j(O).add(c(V))):(R=R.j(A),R=R.add(c(V)))}return R}var f=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(w(this))return-_(this).m();let M=0,P=1;for(let A=0;A<this.g.length;A++){const R=this.i(A);M+=(R>=0?R:4294967296+R)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(v(this))return"0";if(w(this))return"-"+_(this).toString(M);const P=c(Math.pow(M,6));var A=this;let R="";for(;;){const O=b(A,P).g;A=g(A,O.j(P));let U=((A.g.length>0?A.g[0]:A.h)>>>0).toString(M);if(A=O,v(A))return U+R;for(;U.length<6;)U="0"+U;R=U+R}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function v(M){if(M.h!=0)return!1;for(let P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function w(M){return M.h==-1}n.l=function(M){return M=g(this,M),w(M)?-1:v(M)?0:1};function _(M){const P=M.g.length,A=[];for(let R=0;R<P;R++)A[R]=~M.g[R];return new o(A,~M.h).add(p)}n.abs=function(){return w(this)?_(this):this},n.add=function(M){const P=Math.max(this.g.length,M.g.length),A=[];let R=0;for(let O=0;O<=P;O++){let U=R+(this.i(O)&65535)+(M.i(O)&65535),V=(U>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);R=V>>>16,U&=65535,V&=65535,A[O]=V<<16|U}return new o(A,A[A.length-1]&-2147483648?-1:0)};function g(M,P){return M.add(_(P))}n.j=function(M){if(v(this)||v(M))return f;if(w(this))return w(M)?_(this).j(_(M)):_(_(this).j(M));if(w(M))return _(this.j(_(M)));if(this.l(m)<0&&M.l(m)<0)return c(this.m()*M.m());const P=this.g.length+M.g.length,A=[];for(var R=0;R<2*P;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(let O=0;O<M.g.length;O++){const U=this.i(R)>>>16,V=this.i(R)&65535,$=M.i(O)>>>16,Z=M.i(O)&65535;A[2*R+2*O]+=V*Z,E(A,2*R+2*O),A[2*R+2*O+1]+=U*Z,E(A,2*R+2*O+1),A[2*R+2*O+1]+=V*$,E(A,2*R+2*O+1),A[2*R+2*O+2]+=U*$,E(A,2*R+2*O+2)}for(M=0;M<P;M++)A[M]=A[2*M+1]<<16|A[2*M];for(M=P;M<2*P;M++)A[M]=0;return new o(A,0)};function E(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function S(M,P){this.g=M,this.h=P}function b(M,P){if(v(P))throw Error("division by zero");if(v(M))return new S(f,f);if(w(M))return P=b(_(M),P),new S(_(P.g),_(P.h));if(w(P))return P=b(M,_(P)),new S(_(P.g),P.h);if(M.g.length>30){if(w(M)||w(P))throw Error("slowDivide_ only works with positive integers.");for(var A=p,R=P;R.l(M)<=0;)A=k(A),R=k(R);var O=N(A,1),U=N(R,1);for(R=N(R,2),A=N(A,2);!v(R);){var V=U.add(R);V.l(M)<=0&&(O=O.add(A),U=V),R=N(R,1),A=N(A,1)}return P=g(M,O.j(P)),new S(O,P)}for(O=f;M.l(P)>=0;){for(A=Math.max(1,Math.floor(M.m()/P.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),U=c(A),V=U.j(P);w(V)||V.l(M)>0;)A-=R,U=c(A),V=U.j(P);v(U)&&(U=p),O=O.add(U),M=g(M,V)}return new S(O,M)}n.B=function(M){return b(this,M).h},n.and=function(M){const P=Math.max(this.g.length,M.g.length),A=[];for(let R=0;R<P;R++)A[R]=this.i(R)&M.i(R);return new o(A,this.h&M.h)},n.or=function(M){const P=Math.max(this.g.length,M.g.length),A=[];for(let R=0;R<P;R++)A[R]=this.i(R)|M.i(R);return new o(A,this.h|M.h)},n.xor=function(M){const P=Math.max(this.g.length,M.g.length),A=[];for(let R=0;R<P;R++)A[R]=this.i(R)^M.i(R);return new o(A,this.h^M.h)};function k(M){const P=M.g.length+1,A=[];for(let R=0;R<P;R++)A[R]=M.i(R)<<1|M.i(R-1)>>>31;return new o(A,M.h)}function N(M,P){const A=P>>5;P%=32;const R=M.g.length-A,O=[];for(let U=0;U<R;U++)O[U]=P>0?M.i(U+A)>>>P|M.i(U+A+1)<<32-P:M.i(U+A);return new o(O,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,G9=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,su=o}).apply(typeof q3<"u"?q3:typeof self<"u"?self:typeof window<"u"?window:{});var yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W9,kg,$9,Qx,LC,q9,X9,Y9;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof yx=="object"&&yx];for(var I=0;I<y.length;++I){var F=y[I];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=t(this);function i(y,I){if(I)e:{var F=r;y=y.split(".");for(var W=0;W<y.length-1;W++){var ue=y[W];if(!(ue in F))break e;F=F[ue]}y=y[y.length-1],W=F[y],I=I(W),I!=W&&I!=null&&e(F,y,{configurable:!0,writable:!0,value:I})}}i("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(y){return y||function(I){var F=[],W;for(W in I)Object.prototype.hasOwnProperty.call(I,W)&&F.push([W,I[W]]);return F}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(y){var I=typeof y;return I=="object"&&y!=null||I=="function"}function l(y,I,F){return y.call.apply(y.bind,arguments)}function c(y,I,F){return c=l,c.apply(null,arguments)}function u(y,I){var F=Array.prototype.slice.call(arguments,1);return function(){var W=F.slice();return W.push.apply(W,arguments),y.apply(this,W)}}function f(y,I){function F(){}F.prototype=I.prototype,y.Z=I.prototype,y.prototype=new F,y.prototype.constructor=y,y.Ob=function(W,ue,fe){for(var ze=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)ze[zt-2]=arguments[zt];return I.prototype[ue].apply(W,ze)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function m(y){const I=y.length;if(I>0){const F=Array(I);for(let W=0;W<I;W++)F[W]=y[W];return F}return[]}function v(y,I){for(let W=1;W<arguments.length;W++){const ue=arguments[W];var F=typeof ue;if(F=F!="object"?F:ue?Array.isArray(ue)?"array":F:"null",F=="array"||F=="object"&&typeof ue.length=="number"){F=y.length||0;const fe=ue.length||0;y.length=F+fe;for(let ze=0;ze<fe;ze++)y[F+ze]=ue[ze]}else y.push(ue)}}class w{constructor(I,F){this.i=I,this.j=F,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function _(y){o.setTimeout(()=>{throw y},0)}function g(){var y=M;let I=null;return y.g&&(I=y.g,y.g=y.g.next,y.g||(y.h=null),I.next=null),I}class E{constructor(){this.h=this.g=null}add(I,F){const W=S.get();W.set(I,F),this.h?this.h.next=W:this.g=W,this.h=W}}var S=new w(()=>new b,y=>y.reset());class b{constructor(){this.next=this.g=this.h=null}set(I,F){this.h=I,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let k,N=!1,M=new E,P=()=>{const y=Promise.resolve(void 0);k=()=>{y.then(A)}};function A(){for(var y;y=g();){try{y.h.call(y.g)}catch(F){_(F)}var I=S;I.j(y),I.h<100&&(I.h++,y.next=I.g,I.g=y)}N=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(y,I){this.type=y,this.g=this.target=I,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,I=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const F=()=>{};o.addEventListener("test",F,I),o.removeEventListener("test",F,I)}catch{}return y}();function V(y){return/^[\s\xa0]*$/.test(y)}function $(y,I){O.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,I)}f($,O),$.prototype.init=function(y,I){const F=this.type=y.type,W=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=I,I=y.relatedTarget,I||(F=="mouseover"?I=y.fromElement:F=="mouseout"&&(I=y.toElement)),this.relatedTarget=I,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ne=0;function ae(y,I,F,W,ue){this.listener=y,this.proxy=null,this.src=I,this.type=F,this.capture=!!W,this.ha=ue,this.key=++ne,this.da=this.fa=!1}function z(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function j(y,I,F){for(const W in y)I.call(F,y[W],W,y)}function X(y,I){for(const F in y)I.call(void 0,y[F],F,y)}function ee(y){const I={};for(const F in y)I[F]=y[F];return I}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(y,I){let F,W;for(let ue=1;ue<arguments.length;ue++){W=arguments[ue];for(F in W)y[F]=W[F];for(let fe=0;fe<te.length;fe++)F=te[fe],Object.prototype.hasOwnProperty.call(W,F)&&(y[F]=W[F])}}function oe(y){this.src=y,this.g={},this.h=0}oe.prototype.add=function(y,I,F,W,ue){const fe=y.toString();y=this.g[fe],y||(y=this.g[fe]=[],this.h++);const ze=Pe(y,I,W,ue);return ze>-1?(I=y[ze],F||(I.fa=!1)):(I=new ae(I,this.src,fe,!!W,ue),I.fa=F,y.push(I)),I};function we(y,I){const F=I.type;if(F in y.g){var W=y.g[F],ue=Array.prototype.indexOf.call(W,I,void 0),fe;(fe=ue>=0)&&Array.prototype.splice.call(W,ue,1),fe&&(z(I),y.g[F].length==0&&(delete y.g[F],y.h--))}}function Pe(y,I,F,W){for(let ue=0;ue<y.length;++ue){const fe=y[ue];if(!fe.da&&fe.listener==I&&fe.capture==!!F&&fe.ha==W)return ue}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),mt={};function vt(y,I,F,W,ue){if(Array.isArray(I)){for(let fe=0;fe<I.length;fe++)vt(y,I[fe],F,W,ue);return null}return F=We(F),y&&y[Z]?y.J(I,F,a(W)?!!W.capture:!!W,ue):Ge(y,I,F,!1,W,ue)}function Ge(y,I,F,W,ue,fe){if(!I)throw Error("Invalid event type");const ze=a(ue)?!!ue.capture:!!ue;let zt=_e(y);if(zt||(y[Te]=zt=new oe(y)),F=zt.add(I,F,W,ze,fe),F.proxy)return F;if(W=rt(),F.proxy=W,W.src=y,W.listener=F,y.addEventListener)U||(ue=ze),ue===void 0&&(ue=!1),y.addEventListener(I.toString(),W,ue);else if(y.attachEvent)y.attachEvent(xe(I.toString()),W);else if(y.addListener&&y.removeListener)y.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return F}function rt(){function y(F){return I.call(y.src,y.listener,F)}const I=Le;return y}function Q(y,I,F,W,ue){if(Array.isArray(I))for(var fe=0;fe<I.length;fe++)Q(y,I[fe],F,W,ue);else W=a(W)?!!W.capture:!!W,F=We(F),y&&y[Z]?(y=y.i,fe=String(I).toString(),fe in y.g&&(I=y.g[fe],F=Pe(I,F,W,ue),F>-1&&(z(I[F]),Array.prototype.splice.call(I,F,1),I.length==0&&(delete y.g[fe],y.h--)))):y&&(y=_e(y))&&(I=y.g[I.toString()],y=-1,I&&(y=Pe(I,F,W,ue)),(F=y>-1?I[y]:null)&&be(F))}function be(y){if(typeof y!="number"&&y&&!y.da){var I=y.src;if(I&&I[Z])we(I.i,y);else{var F=y.type,W=y.proxy;I.removeEventListener?I.removeEventListener(F,W,y.capture):I.detachEvent?I.detachEvent(xe(F),W):I.addListener&&I.removeListener&&I.removeListener(W),(F=_e(I))?(we(F,y),F.h==0&&(F.src=null,I[Te]=null)):z(y)}}}function xe(y){return y in mt?mt[y]:mt[y]="on"+y}function Le(y,I){if(y.da)y=!0;else{I=new $(I,this);const F=y.listener,W=y.ha||y.src;y.fa&&be(y),y=F.call(W,I)}return y}function _e(y){return y=y[Te],y instanceof oe?y:null}var it="__closure_events_fn_"+(Math.random()*1e9>>>0);function We(y){return typeof y=="function"?y:(y[it]||(y[it]=function(I){return y.handleEvent(I)}),y[it])}function G(){R.call(this),this.i=new oe(this),this.M=this,this.G=null}f(G,R),G.prototype[Z]=!0,G.prototype.removeEventListener=function(y,I,F,W){Q(this,y,I,F,W)};function B(y,I){var F,W=y.G;if(W)for(F=[];W;W=W.G)F.push(W);if(y=y.M,W=I.type||I,typeof I=="string")I=new O(I,y);else if(I instanceof O)I.target=I.target||y;else{var ue=I;I=new O(W,y),J(I,ue)}ue=!0;let fe,ze;if(F)for(ze=F.length-1;ze>=0;ze--)fe=I.g=F[ze],ue=le(fe,W,!0,I)&&ue;if(fe=I.g=y,ue=le(fe,W,!0,I)&&ue,ue=le(fe,W,!1,I)&&ue,F)for(ze=0;ze<F.length;ze++)fe=I.g=F[ze],ue=le(fe,W,!1,I)&&ue}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var y=this.i;for(const I in y.g){const F=y.g[I];for(let W=0;W<F.length;W++)z(F[W]);delete y.g[I],y.h--}}this.G=null},G.prototype.J=function(y,I,F,W){return this.i.add(String(y),I,!1,F,W)},G.prototype.K=function(y,I,F,W){return this.i.add(String(y),I,!0,F,W)};function le(y,I,F,W){if(I=y.i.g[String(I)],!I)return!0;I=I.concat();let ue=!0;for(let fe=0;fe<I.length;++fe){const ze=I[fe];if(ze&&!ze.da&&ze.capture==F){const zt=ze.listener,rr=ze.ha||ze.src;ze.fa&&we(y.i,ze),ue=zt.call(rr,W)!==!1&&ue}}return ue&&!W.defaultPrevented}function Ne(y,I){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=c(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:o.setTimeout(y,I||0)}function Me(y){y.g=Ne(()=>{y.g=null,y.i&&(y.i=!1,Me(y))},y.l);const I=y.h;y.h=null,y.m.apply(null,I)}class Ce extends R{constructor(I,F){super(),this.m=I,this.l=F,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(y){R.call(this),this.h=y,this.g={}}f(st,R);var Fe=[];function qe(y){j(y.g,function(I,F){this.g.hasOwnProperty(F)&&be(I)},y),y.g={}}st.prototype.N=function(){st.Z.N.call(this),qe(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=o.JSON.stringify,Ft=o.JSON.parse,Ie=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function cn(){}function Gt(){}var Mt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dt(){O.call(this,"d")}f(dt,O);function tt(){O.call(this,"c")}f(tt,O);var St={},hn=null;function In(){return hn=hn||new G}St.Ia="serverreachability";function jt(y){O.call(this,St.Ia,y)}f(jt,O);function Ue(y){const I=In();B(I,new jt(I))}St.STAT_EVENT="statevent";function re(y,I){O.call(this,St.STAT_EVENT,y),this.stat=I}f(re,O);function De(y){const I=In();B(I,new re(I,y))}St.Ja="timingevent";function je(y,I){O.call(this,St.Ja,y),this.size=I}f(je,O);function Tt(y,I){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},I)}function ke(){this.g=!0}ke.prototype.ua=function(){this.g=!1};function _t(y,I,F,W,ue,fe){y.info(function(){if(y.g)if(fe){var ze="",zt=fe.split("&");for(let Tn=0;Tn<zt.length;Tn++){var rr=zt[Tn].split("=");if(rr.length>1){const Pn=rr[0];rr=rr[1];const cr=Pn.split("_");ze=cr.length>=2&&cr[1]=="type"?ze+(Pn+"="+rr+"&"):ze+(Pn+"=redacted&")}}}else ze=null;else ze=fe;return"XMLHTTP REQ ("+W+") [attempt "+ue+"]: "+I+`
`+F+`
`+ze})}function At(y,I,F,W,ue,fe,ze){y.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ue+"]: "+I+`
`+F+`
`+fe+" "+ze})}function nn(y,I,F,W){y.info(function(){return"XMLHTTP TEXT ("+I+"): "+an(y,F)+(W?" "+W:"")})}function Sn(y,I){y.info(function(){return"TIMEOUT: "+I})}ke.prototype.info=function(){};function an(y,I){if(!y.g)return I;if(!I)return null;try{const fe=JSON.parse(I);if(fe){for(y=0;y<fe.length;y++)if(Array.isArray(fe[y])){var F=fe[y];if(!(F.length<2)){var W=F[1];if(Array.isArray(W)&&!(W.length<1)){var ue=W[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(let ze=1;ze<W.length;ze++)W[ze]=""}}}}return Et(fe)}catch{return I}}var Nn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fi;function Za(){}f(Za,cn),Za.prototype.g=function(){return new XMLHttpRequest},fi=new Za;function lo(y){return encodeURIComponent(String(y))}function ma(y){var I=1;y=y.split(":");const F=[];for(;I>0&&y.length;)F.push(y.shift()),I--;return y.length&&F.push(y.join(":")),F}function Ki(y,I,F,W){this.j=y,this.i=I,this.l=F,this.S=W||1,this.V=new st(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Du}function Du(){this.i=null,this.g="",this.h=!1}var Ou={},Fu={};function Uu(y,I,F){y.M=1,y.A=Qi(_n(I)),y.u=F,y.R=!0,xd(y,null)}function xd(y,I){y.F=Date.now(),me(y),y.B=_n(y.A);var F=y.B,W=y.S;Array.isArray(W)||(W=[String(W)]),Sd(F.i,"t",W),y.C=0,F=y.j.L,y.h=new Du,y.g=po(y.j,F?I:null,!y.u),y.P>0&&(y.O=new Ce(c(y.Y,y,y.g),y.P)),I=y.V,F=y.g,W=y.ba;var ue="readystatechange";Array.isArray(ue)||(ue&&(Fe[0]=ue.toString()),ue=Fe);for(let fe=0;fe<ue.length;fe++){const ze=vt(F,ue[fe],W||I.handleEvent,!1,I.h||I);if(!ze)break;I.g[ze.key]=ze}I=y.J?ee(y.J):{},y.u?(y.v||(y.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,I)):(y.v="GET",y.g.ea(y.B,y.v,null,I)),Ue(),_t(y.i,y.v,y.B,y.l,y.S,y.u)}Ki.prototype.ba=function(y){y=y.target;const I=this.O;I&&Bs(y)==3?I.j():this.Y(y)},Ki.prototype.Y=function(y){try{if(y==this.g)e:{const zt=Bs(this.g),rr=this.g.ya(),Tn=this.g.ca();if(!(zt<3)&&(zt!=3||this.g&&(this.h.h||this.g.la()||Cd(this.g)))){this.K||zt!=4||rr==7||(rr==8||Tn<=0?Ue(3):Ue(2)),Qe(this);var I=this.g.ca();this.X=I;var F=q(this);if(this.o=I==200,At(this.i,this.v,this.B,this.l,this.S,zt,I),this.o){if(this.U&&!this.L){t:{if(this.g){var W,ue=this.g;if((W=ue.g?ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(W)){var fe=W;break t}}fe=null}if(y=fe)nn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rt(this,y);else{this.o=!1,this.m=3,De(12),xt(this),ft(this);break e}}if(this.R){y=!0;let Pn;for(;!this.K&&this.C<F.length;)if(Pn=pe(this,F),Pn==Fu){zt==4&&(this.m=4,De(14),y=!1),nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==Ou){this.m=4,De(15),nn(this.i,this.l,F,"[Invalid Chunk]"),y=!1;break}else nn(this.i,this.l,Pn,null),Rt(this,Pn);if(ce(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||F.length!=0||this.h.h||(this.m=1,De(16),y=!1),this.o=this.o&&y,!y)nn(this.i,this.l,F,"[Invalid Chunked Response]"),xt(this),ft(this);else if(F.length>0&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.aa&&!ze.P&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),ju(ze),ze.P=!0,De(11))}}else nn(this.i,this.l,F,null),Rt(this,F);zt==4&&xt(this),this.o&&!this.K&&(zt==4?Zi(this.j,this):(this.o=!1,me(this)))}else d_(this.g),I==400&&F.indexOf("Unknown SID")>0?(this.m=3,De(12)):(this.m=0,De(13)),xt(this),ft(this)}}}catch{}finally{}};function q(y){if(!ce(y))return y.g.la();const I=Cd(y.g);if(I==="")return"";let F="";const W=I.length,ue=Bs(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return xt(y),ft(y),"";y.h.i=new o.TextDecoder}for(let fe=0;fe<W;fe++)y.h.h=!0,F+=y.h.i.decode(I[fe],{stream:!(ue&&fe==W-1)});return I.length=0,y.h.g+=F,y.C=0,y.h.g}function ce(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function pe(y,I){var F=y.C,W=I.indexOf(`
`,F);return W==-1?Fu:(F=Number(I.substring(F,W)),isNaN(F)?Ou:(W+=1,W+F>I.length?Fu:(I=I.slice(W,W+F),y.C=W+F,I)))}Ki.prototype.cancel=function(){this.K=!0,xt(this)};function me(y){y.T=Date.now()+y.H,de(y,y.H)}function de(y,I){if(y.D!=null)throw Error("WatchDog timer not null");y.D=Tt(c(y.aa,y),I)}function Qe(y){y.D&&(o.clearTimeout(y.D),y.D=null)}Ki.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Sn(this.i,this.B),this.M!=2&&(Ue(),De(17)),xt(this),this.m=2,ft(this)):de(this,this.T-y)};function ft(y){y.j.I==0||y.K||Zi(y.j,y)}function xt(y){Qe(y);var I=y.O;I&&typeof I.dispose=="function"&&I.dispose(),y.O=null,qe(y.V),y.g&&(I=y.g,y.g=null,I.abort(),I.dispose())}function Rt(y,I){try{var F=y.j;if(F.I!=0&&(F.g==y||Tr(F.h,y))){if(!y.L&&Tr(F.h,y)&&F.I==3){try{var W=F.Ba.g.parse(I)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ue=W;if(ue[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<y.F)Do(F),el(F);else break e;Nd(F),De(18)}}else F.xa=ue[1],0<F.xa-F.K&&ue[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=Tt(c(F.Va,F),6e3));Gn(F.h)<=1&&F.ta&&(F.ta=void 0)}else Mi(F,11)}else if((y.L||F.g==y)&&Do(F),!V(I))for(ue=F.Ba.g.parse(I),I=0;I<ue.length;I++){let Tn=ue[I];const Pn=Tn[0];if(!(Pn<=F.K))if(F.K=Pn,Tn=Tn[1],F.I==2)if(Tn[0]=="c"){F.M=Tn[1],F.ba=Tn[2];const cr=Tn[3];cr!=null&&(F.ka=cr,F.j.info("VER="+F.ka));const Ji=Tn[4];Ji!=null&&(F.za=Ji,F.j.info("SVER="+F.za));const ri=Tn[5];ri!=null&&typeof ri=="number"&&ri>0&&(W=1.5*ri,F.O=W,F.j.info("backChannelRequestTimeoutMs_="+W)),W=F;const ii=y.g;if(ii){const mo=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mo){var fe=W.h;fe.g||mo.indexOf("spdy")==-1&&mo.indexOf("quic")==-1&&mo.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(Ln(fe,fe.h),fe.h=null))}if(W.G){const Dd=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Dd&&(W.wa=Dd,Vt(W.J,W.G,Dd))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-y.F,F.j.info("Handshake RTT: "+F.T+"ms")),W=F;var ze=y;if(W.na=_m(W,W.L?W.ba:null,W.W),ze.L){br(W.h,ze);var zt=ze,rr=W.O;rr&&(zt.H=rr),zt.D&&(Qe(zt),me(zt)),W.g=ze}else Pd(W);F.i.length>0&&Ai(F)}else Tn[0]!="stop"&&Tn[0]!="close"||Mi(F,7);else F.I==3&&(Tn[0]=="stop"||Tn[0]=="close"?Tn[0]=="stop"?Mi(F,7):ym(F):Tn[0]!="noop"&&F.l&&F.l.qa(Tn),F.A=0)}}Ue(4)}catch{}}var Ut=class{constructor(y,I){this.g=y,this.map=I}};function Nt(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dt(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Gn(y){return y.h?1:y.g?y.g.size:0}function Tr(y,I){return y.h?y.h==I:y.g?y.g.has(I):!1}function Ln(y,I){y.g?y.g.add(I):y.h=I}function br(y,I){y.h&&y.h==I?y.h=null:y.g&&y.g.has(I)&&y.g.delete(I)}Nt.prototype.cancel=function(){if(this.i=It(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function It(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let I=y.i;for(const F of y.g.values())I=I.concat(F.G);return I}return m(y.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gs(y,I){if(y){y=y.split("&");for(let F=0;F<y.length;F++){const W=y[F].indexOf("=");let ue,fe=null;W>=0?(ue=y[F].substring(0,W),fe=y[F].substring(W+1)):ue=y[F],I(ue,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function Ot(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;y instanceof Ot?(this.l=y.l,Ti(this,y.j),this.o=y.o,this.g=y.g,ni(this,y.u),this.h=y.h,vr(this,Td(y.i)),this.m=y.m):y&&(I=String(y).match(ot))?(this.l=!1,Ti(this,I[1]||"",!0),this.o=co(I[2]||""),this.g=co(I[3]||"",!0),ni(this,I[4]),this.h=co(I[5]||"",!0),vr(this,I[6]||"",!0),this.m=co(I[7]||"")):(this.l=!1,this.i=new ga(null,this.l))}Ot.prototype.toString=function(){const y=[];var I=this.j;I&&y.push(lr(I,bi,!0),":");var F=this.g;return(F||I=="file")&&(y.push("//"),(I=this.o)&&y.push(lr(I,bi,!0),"@"),y.push(lo(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&y.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&y.push("/"),y.push(lr(F,F.charAt(0)=="/"?nS:wd,!0))),(F=this.i.toString())&&y.push("?",F),(F=this.m)&&y.push("#",lr(F,Ed)),y.join("")},Ot.prototype.resolve=function(y){const I=_n(this);let F=!!y.j;F?Ti(I,y.j):F=!!y.o,F?I.o=y.o:F=!!y.g,F?I.g=y.g:F=y.u!=null;var W=y.h;if(F)ni(I,y.u);else if(F=!!y.h){if(W.charAt(0)!="/")if(this.g&&!this.h)W="/"+W;else{var ue=I.h.lastIndexOf("/");ue!=-1&&(W=I.h.slice(0,ue+1)+W)}if(ue=W,ue==".."||ue==".")W="";else if(ue.indexOf("./")!=-1||ue.indexOf("/.")!=-1){W=ue.lastIndexOf("/",0)==0,ue=ue.split("/");const fe=[];for(let ze=0;ze<ue.length;){const zt=ue[ze++];zt=="."?W&&ze==ue.length&&fe.push(""):zt==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),W&&ze==ue.length&&fe.push("")):(fe.push(zt),W=!0)}W=fe.join("/")}else W=ue}return F?I.h=W:F=y.i.toString()!=="",F?vr(I,Td(y.i)):F=!!y.m,F&&(I.m=y.m),I};function _n(y){return new Ot(y)}function Ti(y,I,F){y.j=F?co(I,!0):I,y.j&&(y.j=y.j.replace(/:$/,""))}function ni(y,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);y.u=I}else y.u=null}function vr(y,I,F){I instanceof ga?(y.i=I,iS(y.i,y.l)):(F||(I=lr(I,rS)),y.i=new ga(I,y.l))}function Vt(y,I,F){y.i.set(I,F)}function Qi(y){return Vt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function co(y,I){return y?I?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function lr(y,I,F){return typeof y=="string"?(y=encodeURI(y).replace(I,Ql),F&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Ql(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var bi=/[#\/\?@]/g,wd=/[#\?:]/g,nS=/[#\?]/g,rS=/[#\?@]/g,Ed=/#/g;function ga(y,I){this.h=this.g=null,this.i=y||null,this.j=!!I}function Vs(y){y.g||(y.g=new Map,y.h=0,y.i&&gs(y.i,function(I,F){y.add(decodeURIComponent(I.replace(/\+/g," ")),F)}))}n=ga.prototype,n.add=function(y,I){Vs(this),this.i=null,y=uo(this,y);let F=this.g.get(y);return F||this.g.set(y,F=[]),F.push(I),this.h+=1,this};function Vu(y,I){Vs(y),I=uo(y,I),y.g.has(I)&&(y.i=null,y.h-=y.g.get(I).length,y.g.delete(I))}function o_(y,I){return Vs(y),I=uo(y,I),y.g.has(I)}n.forEach=function(y,I){Vs(this),this.g.forEach(function(F,W){F.forEach(function(ue){y.call(I,ue,W,this)},this)},this)};function a_(y,I){Vs(y);let F=[];if(typeof I=="string")o_(y,I)&&(F=F.concat(y.g.get(uo(y,I))));else for(y=Array.from(y.g.values()),I=0;I<y.length;I++)F=F.concat(y[I]);return F}n.set=function(y,I){return Vs(this),this.i=null,y=uo(this,y),o_(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[I]),this.h+=1,this},n.get=function(y,I){return y?(y=a_(this,y),y.length>0?String(y[0]):I):I};function Sd(y,I,F){Vu(y,I),F.length>0&&(y.i=null,y.g.set(uo(y,I),m(F)),y.h+=F.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],I=Array.from(this.g.keys());for(let W=0;W<I.length;W++){var F=I[W];const ue=lo(F);F=a_(this,F);for(let fe=0;fe<F.length;fe++){let ze=ue;F[fe]!==""&&(ze+="="+lo(F[fe])),y.push(ze)}}return this.i=y.join("&")};function Td(y){const I=new ga;return I.i=y.i,y.g&&(I.g=new Map(y.g),I.h=y.h),I}function uo(y,I){return I=String(I),y.j&&(I=I.toLowerCase()),I}function iS(y,I){I&&!y.j&&(Vs(y),y.i=null,y.g.forEach(function(F,W){const ue=W.toLowerCase();W!=ue&&(Vu(this,W),Sd(this,ue,F))},y)),y.j=I}function gm(y,I){const F=new ke;if(o.Image){const W=new Image;W.onload=u(Lo,F,"TestLoadImage: loaded",!0,I,W),W.onerror=u(Lo,F,"TestLoadImage: error",!1,I,W),W.onabort=u(Lo,F,"TestLoadImage: abort",!1,I,W),W.ontimeout=u(Lo,F,"TestLoadImage: timeout",!1,I,W),o.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=y}else I(!1)}function vn(y,I){const F=new ke,W=new AbortController,ue=setTimeout(()=>{W.abort(),Lo(F,"TestPingServer: timeout",!1,I)},1e4);fetch(y,{signal:W.signal}).then(fe=>{clearTimeout(ue),fe.ok?Lo(F,"TestPingServer: ok",!0,I):Lo(F,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ue),Lo(F,"TestPingServer: error",!1,I)})}function Lo(y,I,F,W,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),W(F)}catch{}}function vm(){this.g=new Ie}function bd(y){this.i=y.Sb||null,this.h=y.ab||!1}f(bd,cn),bd.prototype.g=function(){return new Ad(this.i,this.h)};function Ad(y,I){G.call(this),this.H=y,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ad,G),n=Ad.prototype,n.open=function(y,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=I,this.readyState=1,Ja(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(I.body=y),(this.H||o).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,tr(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;l_(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function l_(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var I=y.value?y.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!y.done}))&&(this.response=this.responseText+=I)}y.done?tr(this):Ja(this),this.readyState==3&&l_(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,tr(this))},n.Na=function(y){this.g&&(this.response=y,tr(this))},n.ga=function(){this.g&&tr(this)};function tr(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Ja(y)}n.setRequestHeader=function(y,I){this.A.append(y,I)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],I=this.h.entries();for(var F=I.next();!F.done;)F=F.value,y.push(F[0]+": "+F[1]),F=I.next();return y.join(`\r
`)};function Ja(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function c_(y){let I="";return j(y,function(F,W){I+=W,I+=":",I+=F,I+=`\r
`}),I}function zu(y,I,F){e:{for(W in F){var W=!1;break e}W=!0}W||(F=c_(F),typeof y=="string"?F!=null&&lo(F):Vt(y,I,F))}function nr(y){G.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(nr,G);var Md=/^https?$/i,ho=["POST","PUT"];n=nr.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,I,F,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);I=I?I.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fi.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(I,String(y),!0),this.B=!1}catch(fe){u_(this,fe);return}if(y=F||"",F=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ue in W)F.set(ue,W[ue]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const fe of W.keys())F.set(fe,W.get(fe));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(F.keys()).find(fe=>fe.toLowerCase()=="content-type"),ue=o.FormData&&y instanceof o.FormData,!(Array.prototype.indexOf.call(ho,I,void 0)>=0)||W||ue||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,ze]of F)this.g.setRequestHeader(fe,ze);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(fe){u_(this,fe)}};function u_(y,I){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=I,y.o=5,h_(y),vs(y)}function h_(y){y.A||(y.A=!0,B(y,"complete"),B(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,B(this,"complete"),B(this,"abort"),vs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vs(this,!0)),nr.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?zs(this):this.Xa())},n.Xa=function(){zs(this)};function zs(y){if(y.h&&typeof s<"u"){if(y.v&&Bs(y)==4)setTimeout(y.Ca.bind(y),0);else if(B(y,"readystatechange"),Bs(y)==4){y.h=!1;try{const fe=y.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var F;if(!(F=I)){var W;if(W=fe===0){let ze=String(y.D).match(ot)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),W=!Md.test(ze?ze.toLowerCase():"")}F=W}if(F)B(y,"complete"),B(y,"success");else{y.o=6;try{var ue=Bs(y)>2?y.g.statusText:""}catch{ue=""}y.l=ue+" ["+y.ca()+"]",h_(y)}}finally{vs(y)}}}}function vs(y,I){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const F=y.g;y.g=null,I||B(y,"ready");try{F.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Bs(y){return y.g?y.g.readyState:0}n.ca=function(){try{return Bs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var I=this.g.responseText;return y&&I.indexOf(y)==0&&(I=I.substring(y.length)),Ft(I)}};function Cd(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function d_(y){const I={};y=(y.g&&Bs(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<y.length;W++){if(V(y[W]))continue;var F=ma(y[W]);const ue=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const fe=I[ue]||[];I[ue]=fe,fe.push(F)}X(I,function(W){return W.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bu(y,I,F){return F&&F.internalChannelParams&&F.internalChannelParams[y]||I}function Hs(y){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bu("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bu("baseRetryDelayMs",5e3,y),this.Za=Bu("retryDelaySeedMs",1e4,y),this.Ta=Bu("forwardChannelMaxRetries",2,y),this.va=Bu("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Nt(y&&y.concurrentRequestLimit),this.Ba=new vm,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Hs.prototype,n.ka=8,n.I=1,n.connect=function(y,I,F,W){De(0),this.W=y,this.H=I||{},F&&W!==void 0&&(this.H.OSID=F,this.H.OAID=W),this.F=this.X,this.J=_m(this,null,this.W),Ai(this)};function ym(y){if(f_(y),y.I==3){var I=y.V++,F=_n(y.J);if(Vt(F,"SID",y.M),Vt(F,"RID",I),Vt(F,"TYPE","terminate"),fo(y,F),I=new Ki(y,y.j,I),I.M=2,I.A=Qi(_n(F)),F=!1,o.navigator&&o.navigator.sendBeacon)try{F=o.navigator.sendBeacon(I.A.toString(),"")}catch{}!F&&o.Image&&(new Image().src=I.A,F=!0),F||(I.g=po(I.j,null),I.g.ea(I.A)),I.F=Date.now(),me(I)}Ld(y)}function el(y){y.g&&(ju(y),y.g.cancel(),y.g=null)}function f_(y){el(y),y.v&&(o.clearTimeout(y.v),y.v=null),Do(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&o.clearTimeout(y.m),y.m=null)}function Ai(y){if(!Dt(y.h)&&!y.m){y.m=!0;var I=y.Ea;k||P(),N||(k(),N=!0),M.add(I,y),y.D=0}}function Rd(y,I){return Gn(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=I.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=Tt(c(y.Ea,y,I),js(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const ue=new Ki(this,this.j,y);let fe=this.o;if(this.U&&(fe?(fe=ee(fe),J(fe,this.U)):fe=this.U),this.u!==null||this.R||(ue.J=fe,fe=null),this.S)e:{for(var I=0,F=0;F<this.i.length;F++){t:{var W=this.i[F];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(I+=W,I>4096){I=F;break e}if(I===4096||F===this.i.length-1){I=F+1;break e}}I=1e3}else I=1e3;I=Id(this,ue,I),F=_n(this.J),Vt(F,"RID",y),Vt(F,"CVER",22),this.G&&Vt(F,"X-HTTP-Session-Id",this.G),fo(this,F),fe&&(this.R?I="headers="+lo(c_(fe))+"&"+I:this.u&&zu(F,this.u,fe)),Ln(this.h,ue),this.Ra&&Vt(F,"TYPE","init"),this.S?(Vt(F,"$req",I),Vt(F,"SID","null"),ue.U=!0,Uu(ue,F,null)):Uu(ue,F,I),this.I=2}}else this.I==3&&(y?Hu(this,y):this.i.length==0||Dt(this.h)||Hu(this))};function Hu(y,I){var F;I?F=I.l:F=y.V++;const W=_n(y.J);Vt(W,"SID",y.M),Vt(W,"RID",F),Vt(W,"AID",y.K),fo(y,W),y.u&&y.o&&zu(W,y.u,y.o),F=new Ki(y,y.j,F,y.D+1),y.u===null&&(F.J=y.o),I&&(y.i=I.G.concat(y.i)),I=Id(y,F,1e3),F.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),Ln(y.h,F),Uu(F,W,I)}function fo(y,I){y.H&&j(y.H,function(F,W){Vt(I,W,F)}),y.l&&j({},function(F,W){Vt(I,W,F)})}function Id(y,I,F){F=Math.min(y.i.length,F);const W=y.l?c(y.l.Ka,y.l,y):null;e:{var ue=y.i;let zt=-1;for(;;){const rr=["count="+F];zt==-1?F>0?(zt=ue[0].g,rr.push("ofs="+zt)):zt=0:rr.push("ofs="+zt);let Tn=!0;for(let Pn=0;Pn<F;Pn++){var fe=ue[Pn].g;const cr=ue[Pn].map;if(fe-=zt,fe<0)zt=Math.max(0,ue[Pn].g-100),Tn=!1;else try{fe="req"+fe+"_"||"";try{var ze=cr instanceof Map?cr:Object.entries(cr);for(const[Ji,ri]of ze){let ii=ri;a(ri)&&(ii=Et(ri)),rr.push(fe+Ji+"="+encodeURIComponent(ii))}}catch(Ji){throw rr.push(fe+"type="+encodeURIComponent("_badmap")),Ji}}catch{W&&W(cr)}}if(Tn){ze=rr.join("&");break e}}ze=void 0}return y=y.i.splice(0,F),I.G=y,ze}function Pd(y){if(!y.g&&!y.v){y.Y=1;var I=y.Da;k||P(),N||(k(),N=!0),M.add(I,y),y.A=0}}function Nd(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=Tt(c(y.Da,y),js(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,kd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=Tt(c(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,De(10),el(this),kd(this))};function ju(y){y.B!=null&&(o.clearTimeout(y.B),y.B=null)}function kd(y){y.g=new Ki(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var I=_n(y.na);Vt(I,"RID","rpc"),Vt(I,"SID",y.M),Vt(I,"AID",y.K),Vt(I,"CI",y.F?"0":"1"),!y.F&&y.ia&&Vt(I,"TO",y.ia),Vt(I,"TYPE","xmlhttp"),fo(y,I),y.u&&y.o&&zu(I,y.u,y.o),y.O&&(y.g.H=y.O);var F=y.g;y=y.ba,F.M=1,F.A=Qi(_n(I)),F.u=null,F.R=!0,xd(F,y)}n.Va=function(){this.C!=null&&(this.C=null,el(this),Nd(this),De(19))};function Do(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function Zi(y,I){var F=null;if(y.g==I){Do(y),ju(y),y.g=null;var W=2}else if(Tr(y.h,I))F=I.G,br(y.h,I),W=1;else return;if(y.I!=0){if(I.o)if(W==1){F=I.u?I.u.length:0,I=Date.now()-I.F;var ue=y.D;W=In(),B(W,new je(W,F)),Ai(y)}else Pd(y);else if(ue=I.m,ue==3||ue==0&&I.X>0||!(W==1&&Rd(y,I)||W==2&&Nd(y)))switch(F&&F.length>0&&(I=y.h,I.i=I.i.concat(F)),ue){case 1:Mi(y,5);break;case 4:Mi(y,10);break;case 3:Mi(y,6);break;default:Mi(y,2)}}}function js(y,I){let F=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(F*=2),F*I}function Mi(y,I){if(y.j.info("Error code "+I),I==2){var F=c(y.bb,y),W=y.Ua;const ue=!W;W=new Ot(W||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ti(W,"https"),Qi(W),ue?gm(W.toString(),F):vn(W.toString(),F)}else De(2);y.I=0,y.l&&y.l.pa(I),Ld(y),f_(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function Ld(y){if(y.I=0,y.ja=[],y.l){const I=It(y.h);(I.length!=0||y.i.length!=0)&&(v(y.ja,I),v(y.ja,y.i),y.h.i.length=0,m(y.i),y.i.length=0),y.l.oa()}}function _m(y,I,F){var W=F instanceof Ot?_n(F):new Ot(F);if(W.g!="")I&&(W.g=I+"."+W.g),ni(W,W.u);else{var ue=o.location;W=ue.protocol,I=I?I+"."+ue.hostname:ue.hostname,ue=+ue.port;const fe=new Ot(null);W&&Ti(fe,W),I&&(fe.g=I),ue&&ni(fe,ue),F&&(fe.h=F),W=fe}return F=y.G,I=y.wa,F&&I&&Vt(W,F,I),Vt(W,"VER",y.ka),fo(y,W),W}function po(y,I,F){if(I&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=y.Aa&&!y.ma?new nr(new bd({ab:F})):new nr(y.ma),I.Fa(y.L),I}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oo(){}n=Oo.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function tl(){}tl.prototype.g=function(y,I){return new Ci(y,I)};function Ci(y,I){G.call(this),this.g=new Hs(I),this.l=y,this.h=I&&I.messageUrlParams||null,y=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(y?y["X-WebChannel-Content-Type"]=I.messageContentType:y={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(y?y["X-WebChannel-Client-Profile"]=I.sa:y={"X-WebChannel-Client-Profile":I.sa}),this.g.U=y,(y=I&&I.Qb)&&!V(y)&&(this.g.u=y),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!V(I)&&(this.g.G=I,y=this.h,y!==null&&I in y&&(y=this.h,I in y&&delete y[I])),this.j=new nl(this)}f(Ci,G),Ci.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ci.prototype.close=function(){ym(this.g)},Ci.prototype.o=function(y){var I=this.g;if(typeof y=="string"){var F={};F.__data__=y,y=F}else this.v&&(F={},F.__data__=Et(y),y=F);I.i.push(new Ut(I.Ya++,y)),I.I==3&&Ai(I)},Ci.prototype.N=function(){this.g.l=null,delete this.j,ym(this.g),delete this.g,Ci.Z.N.call(this)};function Gu(y){dt.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var I=y.__sm__;if(I){e:{for(const F in I){y=F;break e}y=void 0}(this.i=y)&&(y=this.i,I=I!==null&&y in I?I[y]:void 0),this.data=I}else this.data=y}f(Gu,dt);function xm(){tt.call(this),this.status=1}f(xm,tt);function nl(y){this.g=y}f(nl,Oo),nl.prototype.ra=function(){B(this.g,"a")},nl.prototype.qa=function(y){B(this.g,new Gu(y))},nl.prototype.pa=function(y){B(this.g,new xm)},nl.prototype.oa=function(){B(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,Ci.prototype.send=Ci.prototype.o,Ci.prototype.open=Ci.prototype.m,Ci.prototype.close=Ci.prototype.close,Y9=function(){return new tl},X9=function(){return In()},q9=St,LC={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nn.NO_ERROR=0,Nn.TIMEOUT=8,Nn.HTTP_ERROR=6,Qx=Nn,Bn.COMPLETE="complete",$9=Bn,Gt.EventType=Mt,Mt.OPEN="a",Mt.CLOSE="b",Mt.ERROR="c",Mt.MESSAGE="d",G.prototype.listen=G.prototype.J,kg=Gt,nr.prototype.listenOnce=nr.prototype.K,nr.prototype.getLastError=nr.prototype.Ha,nr.prototype.getLastErrorCode=nr.prototype.ya,nr.prototype.getStatus=nr.prototype.ca,nr.prototype.getResponseJson=nr.prototype.La,nr.prototype.getResponseText=nr.prototype.la,nr.prototype.send=nr.prototype.ea,nr.prototype.setWithCredentials=nr.prototype.Fa,W9=nr}).apply(typeof yx<"u"?yx:typeof self<"u"?self:typeof window<"u"?window:{});const X3="@firebase/firestore",Y3="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bs.UNAUTHENTICATED=new bs(null),bs.GOOGLE_CREDENTIALS=new bs("google-credentials-uid"),bs.FIRST_PARTY=new bs("first-party-uid"),bs.MOCK_USER=new bs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new CP("@firebase/firestore");function wf(){return nd.logLevel}function at(n,...e){if(nd.logLevel<=pn.DEBUG){const t=e.map(NP);nd.debug(`Firestore (${cm}): ${n}`,...t)}}function jl(n,...e){if(nd.logLevel<=pn.ERROR){const t=e.map(NP);nd.error(`Firestore (${cm}): ${n}`,...t)}}function sy(n,...e){if(nd.logLevel<=pn.WARN){const t=e.map(NP);nd.warn(`Firestore (${cm}): ${n}`,...t)}}function NP(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,K9(n,r,t)}function K9(n,e,t){let r=`FIRESTORE (${cm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw jl(r),new Error(r)}function kn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||K9(e,i,r)}function Xt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends Kl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class che{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uhe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bs.UNAUTHENTICATED))}shutdown(){}}class hhe{constructor(e){this.t=e,this.currentUser=bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kn(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Pl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pl,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kn(typeof r.accessToken=="string",31837,{l:r}),new che(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kn(e===null||typeof e=="string",2055,{h:e}),new bs(e)}}class dhe{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fhe{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new dhe(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class phe{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){kn(this.o===void 0,3512);const r=s=>{s.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,at("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new K3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new K3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mhe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=mhe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function mn(n,e){return n<e?-1:n>e?1:0}function DC(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return qb(i)===qb(s)?mn(i,s):qb(i)?1:-1}return mn(n.length,e.length)}const ghe=55296,vhe=57343;function qb(n){const e=n.charCodeAt(0);return e>=ghe&&e<=vhe}function Fp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3="__name__";class Ea{constructor(e,t,r){t===void 0?t=0:t>e.length&&Lt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Lt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ea.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ea?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Ea.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return mn(e.length,t.length)}static compareSegments(e,t){const r=Ea.isNumericId(e),i=Ea.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ea.extractNumericId(e).compare(Ea.extractNumericId(t)):DC(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return su.fromString(e.substring(4,e.length-2))}}class qn extends Ea{construct(e,t,r){return new qn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new qn(t)}static emptyPath(){return new qn([])}}const yhe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends Ea{construct(e,t,r){return new _i(e,t,r)}static isValidIdentifier(e){return yhe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Q3}static keyField(){return new _i([Q3])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ke(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ke(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ke(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(t)}static emptyPath(){return new _i([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.path=e}static fromPath(e){return new Ct(qn.fromString(e))}static fromName(e){return new Ct(qn.fromString(e).popFirst(5))}static empty(){return new Ct(qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ct(new qn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q9(n,e,t){if(!t)throw new Ke(Ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _he(n,e,t,r){if(e===!0&&r===!0)throw new Ke(Ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Z3(n){if(!Ct.isDocumentKey(n))throw new Ke(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function J3(n){if(Ct.isDocumentKey(n))throw new Ke(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Z9(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function VE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Lt(12329,{type:typeof n})}function oy(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ke(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=VE(n);throw new Ke(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ky(n,e){if(!Z9(n))throw new Ke(Ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Ke(Ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=-62135596800,tF=1e6;class Zn{static now(){return Zn.fromMillis(Date.now())}static fromDate(e){return Zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*tF);return new Zn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eF)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tF}_compareTo(e){return this.seconds===e.seconds?mn(this.nanoseconds,e.nanoseconds):mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ky(e,Zn._jsonSchema))return new Zn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zn._jsonSchemaVersion="firestore/timestamp/1.0",Zn._jsonSchema={type:Br("string",Zn._jsonSchemaVersion),seconds:Br("number"),nanoseconds:Br("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new Zn(0,0))}static max(){return new Wt(new Zn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=-1;function xhe(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Wt.fromTimestamp(r===1e9?new Zn(t+1,0):new Zn(t,r));return new yu(i,Ct.empty(),e)}function whe(n){return new yu(n.readTime,n.key,ay)}class yu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new yu(Wt.min(),Ct.empty(),ay)}static max(){return new yu(Wt.max(),Ct.empty(),ay)}}function Ehe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ct.comparator(n.documentKey,e.documentKey),t!==0?t:mn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const She="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class The{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function um(n){if(n.code!==Ee.FAILED_PRECONDITION||n.message!==She)throw n;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ae((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ae?t:Ae.resolve(t)}catch(t){return Ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.reject(t)}static resolve(e){return new Ae((t,r)=>{t(e)})}static reject(e){return new Ae((t,r)=>{r(e)})}static waitFor(e){return new Ae((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=Ae.resolve(!1);for(const r of e)t=t.next(i=>i?Ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Ae((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new Ae((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function bhe(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hm(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zE.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=-1;function BE(n){return n==null}function c1(n){return n===0&&1/n==-1/0}function Ahe(n){return typeof n=="number"&&Number.isInteger(n)&&!c1(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="";function Mhe(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nF(e)),e=Che(n.get(t),e);return nF(e)}function Che(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case J9:t+="";break;default:t+=s}}return t}function nF(n){return n+J9+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function e8(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){this.comparator=e,this.root=t||vi.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _x(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _x(this.root,e,this.comparator,!1)}getReverseIterator(){return new _x(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _x(this.root,e,this.comparator,!0)}}class _x{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??vi.RED,this.left=i??vi.EMPTY,this.right=s??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new vi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return vi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Lt(27949);return e+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1;vi.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt(57766)}get value(){throw Lt(16141)}get color(){throw Lt(16727)}get left(){throw Lt(29726)}get right(){throw Lt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new vi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iF(this.data.getIterator())}getIteratorFrom(e){return new iF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zr(this.comparator);return t.data=e,t}}class iF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.fields=e,e.sort(_i.comparator)}static empty(){return new ta([])}unionWith(e){let t=new Zr(_i.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ta(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new t8("Invalid base64 string: "+s):s}}(e);return new Si(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const Rhe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _u(n){if(kn(!!n,39018),typeof n=="string"){let e=0;const t=Rhe.exec(n);if(kn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cr(n.seconds),nanos:Cr(n.nanos)}}function Cr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xu(n){return typeof n=="string"?Si.fromBase64String(n):Si.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8="server_timestamp",r8="__type__",i8="__previous_value__",s8="__local_write_time__";function DP(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[r8])==null?void 0:r.stringValue)===n8}function HE(n){const e=n.mapValue.fields[i8];return DP(e)?HE(e):e}function ly(n){const e=_u(n.mapValue.fields[s8].timestampValue);return new Zn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ihe{constructor(e,t,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const u1="(default)";class cy{constructor(e,t){this.projectId=e,this.database=t||u1}static empty(){return new cy("","")}get isDefaultDatabase(){return this.database===u1}isEqual(e){return e instanceof cy&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="__type__",a8="__max__",xx={mapValue:{fields:{__type__:{stringValue:a8}}}},l8="__vector__",h1="value";function wu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DP(n)?4:Nhe(n)?9007199254740991:Phe(n)?10:11:Lt(28295,{value:n})}function Ya(n,e){if(n===e)return!0;const t=wu(n);if(t!==wu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ly(n).isEqual(ly(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_u(i.timestampValue),a=_u(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return xu(i.bytesValue).isEqual(xu(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Cr(i.geoPointValue.latitude)===Cr(s.geoPointValue.latitude)&&Cr(i.geoPointValue.longitude)===Cr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Cr(i.integerValue)===Cr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Cr(i.doubleValue),a=Cr(s.doubleValue);return o===a?c1(o)===c1(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Fp(n.arrayValue.values||[],e.arrayValue.values||[],Ya);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(rF(o)!==rF(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ya(o[l],a[l])))return!1;return!0}(n,e);default:return Lt(52216,{left:n})}}function uy(n,e){return(n.values||[]).find(t=>Ya(t,e))!==void 0}function Up(n,e){if(n===e)return 0;const t=wu(n),r=wu(e);if(t!==r)return mn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return mn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Cr(s.integerValue||s.doubleValue),l=Cr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return sF(n.timestampValue,e.timestampValue);case 4:return sF(ly(n),ly(e));case 5:return DC(n.stringValue,e.stringValue);case 6:return function(s,o){const a=xu(s),l=xu(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=mn(a[c],l[c]);if(u!==0)return u}return mn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=mn(Cr(s.latitude),Cr(o.latitude));return a!==0?a:mn(Cr(s.longitude),Cr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return oF(n.arrayValue,e.arrayValue);case 10:return function(s,o){var p,m,v,w;const a=s.fields||{},l=o.fields||{},c=(p=a[h1])==null?void 0:p.arrayValue,u=(m=l[h1])==null?void 0:m.arrayValue,f=mn(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((w=u==null?void 0:u.values)==null?void 0:w.length)||0);return f!==0?f:oF(c,u)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===xx.mapValue&&o===xx.mapValue)return 0;if(s===xx.mapValue)return 1;if(o===xx.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=DC(l[f],u[f]);if(p!==0)return p;const m=Up(a[l[f]],c[u[f]]);if(m!==0)return m}return mn(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Lt(23264,{he:t})}}function sF(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mn(n,e);const t=_u(n),r=_u(e),i=mn(t.seconds,r.seconds);return i!==0?i:mn(t.nanos,r.nanos)}function oF(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Up(t[i],r[i]);if(s)return s}return mn(t.length,r.length)}function Vp(n){return OC(n)}function OC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=_u(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xu(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ct.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=OC(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${OC(t.fields[o])}`;return i+"}"}(n.mapValue):Lt(61005,{value:n})}function Zx(n){switch(wu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=HE(n);return e?16+Zx(e):16;case 5:return 2*n.stringValue.length;case 6:return xu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Zx(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return pd(r.fields,(s,o)=>{i+=s.length+Zx(o)}),i}(n.mapValue);default:throw Lt(13486,{value:n})}}function aF(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function FC(n){return!!n&&"integerValue"in n}function OP(n){return!!n&&"arrayValue"in n}function lF(n){return!!n&&"nullValue"in n}function cF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jx(n){return!!n&&"mapValue"in n}function Phe(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[o8])==null?void 0:r.stringValue)===l8}function rv(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return pd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rv(n.arrayValue.values[t]);return e}return{...n}}function Nhe(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===a8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.value=e}static empty(){return new bo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rv(t)}setAll(e){let t=_i.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=rv(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Jx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bo(rv(this.value))}}function c8(n){const e=[];return pd(n.fields,(t,r)=>{const i=new _i([t]);if(Jx(r)){const s=c8(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ta(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ji(e,0,Wt.min(),Wt.min(),Wt.min(),bo.empty(),0)}static newFoundDocument(e,t,r,i){return new ji(e,1,t,Wt.min(),r,i,0)}static newNoDocument(e,t){return new ji(e,2,t,Wt.min(),Wt.min(),bo.empty(),0)}static newUnknownDocument(e,t){return new ji(e,3,t,Wt.min(),Wt.min(),bo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t){this.position=e,this.inclusive=t}}function uF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Ct.comparator(Ct.fromName(o.referenceValue),t.key):r=Up(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ya(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t="asc"){this.field=e,this.dir=t}}function khe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{}class zr extends u8{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Dhe(e,t,r):t==="array-contains"?new Uhe(e,r):t==="in"?new Vhe(e,r):t==="not-in"?new zhe(e,r):t==="array-contains-any"?new Bhe(e,r):new zr(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ohe(e,r):new Fhe(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Up(t,this.value)):t!==null&&wu(this.value)===wu(t)&&this.matchesComparison(Up(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ha extends u8{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ha(e,t)}matches(e){return h8(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function h8(n){return n.op==="and"}function d8(n){return Lhe(n)&&h8(n)}function Lhe(n){for(const e of n.filters)if(e instanceof ha)return!1;return!0}function UC(n){if(n instanceof zr)return n.field.canonicalString()+n.op.toString()+Vp(n.value);if(d8(n))return n.filters.map(e=>UC(e)).join(",");{const e=n.filters.map(t=>UC(t)).join(",");return`${n.op}(${e})`}}function f8(n,e){return n instanceof zr?function(r,i){return i instanceof zr&&r.op===i.op&&r.field.isEqual(i.field)&&Ya(r.value,i.value)}(n,e):n instanceof ha?function(r,i){return i instanceof ha&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&f8(o,i.filters[a]),!0):!1}(n,e):void Lt(19439)}function p8(n){return n instanceof zr?function(t){return`${t.field.canonicalString()} ${t.op} ${Vp(t.value)}`}(n):n instanceof ha?function(t){return t.op.toString()+" {"+t.getFilters().map(p8).join(" ,")+"}"}(n):"Filter"}class Dhe extends zr{constructor(e,t,r){super(e,t,r),this.key=Ct.fromName(r.referenceValue)}matches(e){const t=Ct.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ohe extends zr{constructor(e,t){super(e,"in",t),this.keys=m8("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fhe extends zr{constructor(e,t){super(e,"not-in",t),this.keys=m8("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function m8(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>Ct.fromName(r.referenceValue))}class Uhe extends zr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return OP(t)&&uy(t.arrayValue,this.value)}}class Vhe extends zr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uy(this.value.arrayValue,t)}}class zhe extends zr{constructor(e,t){super(e,"not-in",t)}matches(e){if(uy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uy(this.value.arrayValue,t)}}class Bhe extends zr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!OP(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uy(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hhe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function dF(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Hhe(n,e,t,r,i,s,o)}function FP(n){const e=Xt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>UC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),BE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vp(r)).join(",")),e.Te=t}return e.Te}function UP(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!khe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!f8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hF(n.startAt,e.startAt)&&hF(n.endAt,e.endAt)}function VC(n){return Ct.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jhe(n,e,t,r,i,s,o,a){return new dm(n,e,t,r,i,s,o,a)}function VP(n){return new dm(n)}function fF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function g8(n){return n.collectionGroup!==null}function iv(n){const e=Xt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zr(_i.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new hy(s,r))}),t.has(_i.keyField().canonicalString())||e.Ie.push(new hy(_i.keyField(),r))}return e.Ie}function Ua(n){const e=Xt(n);return e.Ee||(e.Ee=Ghe(e,iv(n))),e.Ee}function Ghe(n,e){if(n.limitType==="F")return dF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new hy(i.field,s)});const t=n.endAt?new d1(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new d1(n.startAt.position,n.startAt.inclusive):null;return dF(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zC(n,e){const t=n.filters.concat([e]);return new dm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function BC(n,e,t){return new dm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jE(n,e){return UP(Ua(n),Ua(e))&&n.limitType===e.limitType}function v8(n){return`${FP(Ua(n))}|lt:${n.limitType}`}function Ef(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>p8(i)).join(", ")}]`),BE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vp(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vp(i)).join(",")),`Target(${r})`}(Ua(n))}; limitType=${n.limitType})`}function GE(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ct.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of iv(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=uF(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,iv(r),i)||r.endAt&&!function(o,a,l){const c=uF(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,iv(r),i))}(n,e)}function Whe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y8(n){return(e,t)=>{let r=!1;for(const i of iv(n)){const s=$he(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $he(n,e,t){const r=n.field.isKeyField()?Ct.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Up(l,c):Lt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Lt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return e8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qhe=new gr(Ct.comparator);function Gl(){return qhe}const _8=new gr(Ct.comparator);function Lg(...n){let e=_8;for(const t of n)e=e.insert(t.key,t);return e}function x8(n){let e=_8;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ah(){return sv()}function w8(){return sv()}function sv(){return new md(n=>n.toString(),(n,e)=>n.isEqual(e))}const Xhe=new gr(Ct.comparator),Yhe=new Zr(Ct.comparator);function gn(...n){let e=Yhe;for(const t of n)e=e.add(t);return e}const Khe=new Zr(mn);function Qhe(){return Khe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:c1(e)?"-0":e}}function E8(n){return{integerValue:""+n}}function Zhe(n,e){return Ahe(e)?E8(e):zP(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this._=void 0}}function Jhe(n,e,t){return n instanceof dy?function(i,s){const o={fields:{[r8]:{stringValue:n8},[s8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&DP(s)&&(s=HE(s)),s&&(o.fields[i8]=s),{mapValue:o}}(t,e):n instanceof fy?T8(n,e):n instanceof py?b8(n,e):function(i,s){const o=S8(i,s),a=pF(o)+pF(i.Ae);return FC(o)&&FC(i.Ae)?E8(a):zP(i.serializer,a)}(n,e)}function ede(n,e,t){return n instanceof fy?T8(n,e):n instanceof py?b8(n,e):t}function S8(n,e){return n instanceof f1?function(r){return FC(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class dy extends WE{}class fy extends WE{constructor(e){super(),this.elements=e}}function T8(n,e){const t=A8(e);for(const r of n.elements)t.some(i=>Ya(i,r))||t.push(r);return{arrayValue:{values:t}}}class py extends WE{constructor(e){super(),this.elements=e}}function b8(n,e){let t=A8(e);for(const r of n.elements)t=t.filter(i=>!Ya(i,r));return{arrayValue:{values:t}}}class f1 extends WE{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function pF(n){return Cr(n.integerValue||n.doubleValue)}function A8(n){return OP(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tde{constructor(e,t){this.field=e,this.transform=t}}function nde(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof fy&&i instanceof fy||r instanceof py&&i instanceof py?Fp(r.elements,i.elements,Ya):r instanceof f1&&i instanceof f1?Ya(r.Ae,i.Ae):r instanceof dy&&i instanceof dy}(n.transform,e.transform)}class rde{constructor(e,t){this.version=e,this.transformResults=t}}class Nl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nl}static exists(e){return new Nl(void 0,e)}static updateTime(e){return new Nl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ew(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $E{}function M8(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new R8(n.key,Nl.none()):new Qy(n.key,n.data,Nl.none());{const t=n.data,r=bo.empty();let i=new Zr(_i.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new gd(n.key,r,new ta(i.toArray()),Nl.none())}}function ide(n,e,t){n instanceof Qy?function(i,s,o){const a=i.value.clone(),l=gF(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gd?function(i,s,o){if(!ew(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=gF(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(C8(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ov(n,e,t,r){return n instanceof Qy?function(s,o,a,l){if(!ew(s.precondition,o))return a;const c=s.value.clone(),u=vF(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof gd?function(s,o,a,l){if(!ew(s.precondition,o))return a;const c=vF(s.fieldTransforms,l,o),u=o.data;return u.setAll(C8(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return ew(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function sde(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=S8(r.transform,i||null);s!=null&&(t===null&&(t=bo.empty()),t.set(r.field,s))}return t||null}function mF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fp(r,i,(s,o)=>nde(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Qy extends $E{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gd extends $E{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function C8(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gF(n,e,t){const r=new Map;kn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ede(o,a,t[i]))}return r}function vF(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Jhe(s,o,e))}return r}class R8 extends $E{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ode extends $E{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ade{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ide(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ov(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ov(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=w8();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=M8(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Wt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gn())}isEqual(e){return this.batchId===e.batchId&&Fp(this.mutations,e.mutations,(t,r)=>mF(t,r))&&Fp(this.baseMutations,e.baseMutations,(t,r)=>mF(t,r))}}class BP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){kn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Xhe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new BP(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lde{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cde{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr,yn;function ude(n){switch(n){case Ee.OK:return Lt(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Lt(15467,{code:n})}}function I8(n){if(n===void 0)return jl("GRPC error has no .code"),Ee.UNKNOWN;switch(n){case Fr.OK:return Ee.OK;case Fr.CANCELLED:return Ee.CANCELLED;case Fr.UNKNOWN:return Ee.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return Ee.INTERNAL;case Fr.UNAVAILABLE:return Ee.UNAVAILABLE;case Fr.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Fr.NOT_FOUND:return Ee.NOT_FOUND;case Fr.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Fr.ABORTED:return Ee.ABORTED;case Fr.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Fr.DATA_LOSS:return Ee.DATA_LOSS;default:return Lt(39323,{code:n})}}(yn=Fr||(Fr={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hde(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dde=new su([4294967295,4294967295],0);function yF(n){const e=hde().encode(n),t=new G9;return t.update(e),new Uint8Array(t.digest())}function _F(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new su([t,r],0),new su([i,s],0)]}class HP{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Dg(`Invalid padding: ${t}`);if(r<0)throw new Dg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Dg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=su.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(su.fromNumber(r)));return i.compare(dde)===1&&(i=new su([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=yF(e),[r,i]=_F(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new HP(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const t=yF(e),[r,i]=_F(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Dg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Zy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qE(Wt.min(),i,new gr(mn),Gl(),gn())}}class Zy{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Zy(r,t,gn(),gn(),gn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class P8{constructor(e,t){this.targetId=e,this.Ce=t}}class N8{constructor(e,t,r=Si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class xF{constructor(){this.ve=0,this.Fe=wF(),this.Me=Si.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gn(),t=gn(),r=gn();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Lt(38017,{changeType:s})}}),new Zy(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=wF()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fde{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gl(),this.Je=wx(),this.He=wx(),this.Ye=new gr(mn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Lt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(VC(s))if(r===0){const o=new Ct(s.path);this.et(t,o,ji.newNoDocument(o,Wt.min()))}else kn(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=xu(r).toUint8Array()}catch(l){if(l instanceof t8)return sy("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new HP(o,i,s)}catch(l){return sy(l instanceof Dg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&VC(a.target)){const l=new Ct(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ji.newNoDocument(l,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=gn();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new qE(e,t,this.Ye,this.je,r);return this.je=Gl(),this.Je=wx(),this.He=wx(),this.Ye=new gr(mn),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new xF,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Zr(mn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Zr(mn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||at("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xF),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wx(){return new gr(Ct.comparator)}function wF(){return new gr(Ct.comparator)}const pde={asc:"ASCENDING",desc:"DESCENDING"},mde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gde={and:"AND",or:"OR"};class vde{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function HC(n,e){return n.useProto3Json||BE(e)?e:{value:e}}function p1(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yde(n,e){return p1(n,e.toTimestamp())}function Va(n){return kn(!!n,49232),Wt.fromTimestamp(function(t){const r=_u(t);return new Zn(r.seconds,r.nanos)}(n))}function jP(n,e){return jC(n,e).canonicalString()}function jC(n,e){const t=function(i){return new qn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function L8(n){const e=qn.fromString(n);return kn(V8(e),10190,{key:e.toString()}),e}function GC(n,e){return jP(n.databaseId,e.path)}function Xb(n,e){const t=L8(e);if(t.get(1)!==n.databaseId.projectId)throw new Ke(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ke(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ct(O8(t))}function D8(n,e){return jP(n.databaseId,e)}function _de(n){const e=L8(n);return e.length===4?qn.emptyPath():O8(e)}function WC(n){return new qn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function O8(n){return kn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function EF(n,e,t){return{name:GC(n,e),fields:t.value.mapValue.fields}}function xde(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Lt(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(kn(u===void 0||typeof u=="string",58123),Si.fromBase64String(u||"")):(kn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Si.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Ee.UNKNOWN:I8(c.code);return new Ke(u,c.message||"")}(o);t=new N8(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xb(n,r.document.name),s=Va(r.document.updateTime),o=r.document.createTime?Va(r.document.createTime):Wt.min(),a=new bo({mapValue:{fields:r.document.fields}}),l=ji.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new tw(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xb(n,r.document),s=r.readTime?Va(r.readTime):Wt.min(),o=ji.newNoDocument(i,s),a=r.removedTargetIds||[];t=new tw([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xb(n,r.document),s=r.removedTargetIds||[];t=new tw([],s,i,null)}else{if(!("filter"in e))return Lt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new cde(i,s),a=r.targetId;t=new P8(a,o)}}return t}function wde(n,e){let t;if(e instanceof Qy)t={update:EF(n,e.key,e.value)};else if(e instanceof R8)t={delete:GC(n,e.key)};else if(e instanceof gd)t={update:EF(n,e.key,e.data),updateMask:Ide(e.fieldMask)};else{if(!(e instanceof ode))return Lt(16599,{Vt:e.type});t={verify:GC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof dy)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fy)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof py)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof f1)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Lt(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:yde(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Lt(27497)}(n,e.precondition)),t}function Ede(n,e){return n&&n.length>0?(kn(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Va(i.updateTime):Va(s);return o.isEqual(Wt.min())&&(o=Va(s)),new rde(o,i.transformResults||[])}(t,e))):[]}function Sde(n,e){return{documents:[D8(n,e.path)]}}function Tde(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=D8(n,i);const s=function(c){if(c.length!==0)return U8(ha.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Sf(p.field),direction:Mde(p.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=HC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:t,parent:i}}function bde(n){let e=_de(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){kn(r===1,65062);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(f){const p=F8(f);return p instanceof ha&&d8(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(p=>function(v){return new hy(Tf(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,BE(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new d1(m,p)}(t.startAt));let c=null;return t.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new d1(m,p)}(t.endAt)),jhe(e,i,o,s,a,"F",l,c)}function Ade(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function F8(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Tf(t.unaryFilter.field);return zr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Tf(t.unaryFilter.field);return zr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Tf(t.unaryFilter.field);return zr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Tf(t.unaryFilter.field);return zr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Lt(61313);default:return Lt(60726)}}(n):n.fieldFilter!==void 0?function(t){return zr.create(Tf(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Lt(58110);default:return Lt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ha.create(t.compositeFilter.filters.map(r=>F8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Lt(1026)}}(t.compositeFilter.op))}(n):Lt(30097,{filter:n})}function Mde(n){return pde[n]}function Cde(n){return mde[n]}function Rde(n){return gde[n]}function Sf(n){return{fieldPath:n.canonicalString()}}function Tf(n){return _i.fromServerFormat(n.fieldPath)}function U8(n){return n instanceof zr?function(t){if(t.op==="=="){if(cF(t.value))return{unaryFilter:{field:Sf(t.field),op:"IS_NAN"}};if(lF(t.value))return{unaryFilter:{field:Sf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cF(t.value))return{unaryFilter:{field:Sf(t.field),op:"IS_NOT_NAN"}};if(lF(t.value))return{unaryFilter:{field:Sf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sf(t.field),op:Cde(t.op),value:t.value}}}(n):n instanceof ha?function(t){const r=t.getFilters().map(i=>U8(i));return r.length===1?r[0]:{compositeFilter:{op:Rde(t.op),filters:r}}}(n):Lt(54877,{filter:n})}function Ide(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function V8(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t,r,i,s=Wt.min(),o=Wt.min(),a=Si.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pde{constructor(e){this.yt=e}}function Nde(n){const e=bde({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?BC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kde{constructor(){this.Cn=new Lde}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ae.resolve()}getCollectionParents(e,t){return Ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ae.resolve()}deleteFieldIndex(e,t){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,t){return Ae.resolve()}getDocumentsMatchingTarget(e,t){return Ae.resolve(null)}getIndexType(e,t){return Ae.resolve(0)}getFieldIndexes(e,t){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,t){return Ae.resolve(yu.min())}getMinOffsetFromCollectionGroup(e,t){return Ae.resolve(yu.min())}updateCollectionGroup(e,t,r){return Ae.resolve()}updateIndexEntries(e,t){return Ae.resolve()}}class Lde{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Zr(qn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zr(qn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},z8=41943040;class As{static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(z8,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zp(0)}static cr(){return new zp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="LruGarbageCollector",B8=1048576;function bF([n,e],[t,r]){const i=mn(n,t);return i===0?mn(e,r):i}class Dde{constructor(e){this.Ir=e,this.buffer=new Zr(bF),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ode{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){at(TF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hm(t)?at(TF,"Ignoring IndexedDB error during garbage collection: ",t):await um(t)}await this.Vr(3e5)})}}class Fde{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Ae.resolve(zE.ce);const r=new Dde(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(SF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SF):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),wf()<=pn.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function Ude(n,e){return new Fde(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vde{constructor(){this.changes=new md(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zde{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bde{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ov(r.mutation,i,ta.empty(),Zn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,gn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=gn()){const i=Ah();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Lg();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ah();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,gn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Gl();const o=sv(),a=function(){return sv()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof gd)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ov(u.mutation,c,u.mutation.getFieldMask(),Zn.now())):o.set(c.key,ta.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>a.set(c,new zde(u,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,t){const r=sv();let i=new gr((o,a)=>o-a),s=gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||ta.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||gn()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=w8();u.forEach(p=>{if(!s.has(p)){const m=M8(t.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ae.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Ct.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):g8(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ae.resolve(Ah());let a=ay,l=s;return o.next(c=>Ae.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?Ae.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,gn())).next(u=>({batchId:a,changes:x8(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ct(t)).next(r=>{let i=Lg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Lg();return this.indexManager.getCollectionParents(e,s).next(a=>Ae.forEach(a,l=>{const c=function(f,p){return new dm(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ji.newInvalidDocument(u)))});let a=Lg();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&ov(u.mutation,c,ta.empty(),Zn.now()),GE(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hde{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Va(i.createTime)}}(t)),Ae.resolve()}getNamedQuery(e,t){return Ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:Nde(i.bundledQuery),readTime:Va(i.readTime)}}(t)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde{constructor(){this.overlays=new gr(Ct.comparator),this.qr=new Map}getOverlay(e,t){return Ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ah();return Ae.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),Ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Ae.resolve()}getOverlaysForCollection(e,t,r){const i=Ah(),s=t.length+1,o=new Ct(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new gr((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Ah(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ah(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return Ae.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lde(t,r));let s=this.qr.get(t);s===void 0&&(s=gn(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gde{constructor(){this.sessionToken=Si.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.Qr=new Zr(li.$r),this.Ur=new Zr(li.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new li(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new li(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Ct(new qn([])),r=new li(t,e),i=new li(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ct(new qn([])),r=new li(t,e),i=new li(t,e+1);let s=gn();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new li(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class li{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ct.comparator(e.key,t.key)||mn(e.Yr,t.Yr)}static Kr(e,t){return mn(e.Yr,t.Yr)||Ct.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wde{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Zr(li.$r)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ade(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new li(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ae.resolve(o)}lookupMutationBatch(e,t){return Ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return Ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?LP:this.tr-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new li(t,0),i=new li(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),Ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zr(mn);return t.forEach(i=>{const s=new li(i,0),o=new li(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),Ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ct.isDocumentKey(s)||(s=s.child(""));const o=new li(new Ct(s),0);let a=new Zr(mn);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)},o),Ae.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){kn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Ae.forEach(t.mutations,i=>{const s=new li(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new li(t,0),i=this.Zr.firstAfterOrEqual(r);return Ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $de{constructor(e){this.ri=e,this.docs=function(){return new gr(Ct.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ae.resolve(r?r.document.mutableCopy():ji.newInvalidDocument(t))}getEntries(e,t){let r=Gl();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ji.newInvalidDocument(i))}),Ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Gl();const o=t.path,a=new Ct(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Ehe(whe(u),r)<=0||(i.has(u.key)||GE(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ae.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Lt(9500)}ii(e,t){return Ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qde(this)}getSize(e){return Ae.resolve(this.size)}}class qde extends Vde{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xde{constructor(e){this.persistence=e,this.si=new md(t=>FP(t),UP),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.oi=0,this._i=new GP,this.targetCount=0,this.ai=zp.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new zp(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ae.resolve()}updateTargetData(e,t){return this.Pr(t),Ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ae.waitFor(s).next(()=>i)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Ae.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Ae.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Ae.resolve(r)}containsKey(e,t){return Ae.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,t){this.ui={},this.overlays={},this.ci=new zE(0),this.li=!1,this.li=!0,this.hi=new Gde,this.referenceDelegate=e(this),this.Pi=new Xde(this),this.indexManager=new kde,this.remoteDocumentCache=function(i){return new $de(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Pde(t),this.Ii=new Hde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jde,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Wde(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){at("MemoryPersistence","Starting transaction:",e);const i=new Yde(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return Ae.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class Yde extends The{constructor(e){super(),this.currentSequenceNumber=e}}class WP{constructor(e){this.persistence=e,this.Ri=new GP,this.Vi=null}static mi(e){return new WP(e)}get fi(){if(this.Vi)return this.Vi;throw Lt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Ae.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.fi,r=>{const i=Ct.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Wt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ae.or([()=>Ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class m1{constructor(e,t){this.persistence=e,this.pi=new md(r=>Mhe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Ude(this,t)}static mi(e,t){return new m1(e,t)}Ei(){}di(e){return Ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return Ae.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?Ae.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Wt.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ae.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Ae.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zx(e.data.value)),t}br(e,t,r){return Ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Ae.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=gn(),i=gn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new $P(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kde{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qde{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Hce()?8:bhe(Xi())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Kde;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(wf()<=pn.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Ef(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ae.resolve()):(wf()<=pn.DEBUG&&at("QueryEngine","Query:",Ef(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(wf()<=pn.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Ef(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ua(t))):Ae.resolve())}ys(e,t){if(fF(t))return Ae.resolve(null);let r=Ua(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=BC(t,null,"F"),r=Ua(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=gn(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,BC(t,null,"F")):this.vs(e,c,t,l)}))})))}ws(e,t,r,i){return fF(t)||i.isEqual(Wt.min())?Ae.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(t,s);return this.Cs(t,o,r,i)?Ae.resolve(null):(wf()<=pn.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ef(t)),this.vs(e,o,t,xhe(i,ay)).next(a=>a))})}Ds(e,t){let r=new Zr(y8(e));return t.forEach((i,s)=>{GE(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return wf()<=pn.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Ef(t)),this.ps.getDocumentsMatchingQuery(e,t,yu.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="LocalStore",Zde=3e8;class Jde{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new gr(mn),this.xs=new md(s=>FP(s),UP),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bde(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function efe(n,e,t,r){return new Jde(n,e,t,r)}async function j8(n,e){const t=Xt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=gn();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function tfe(n,e){const t=Xt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=Ae.resolve();return p.forEach(v=>{m=m.next(()=>u.getEntry(l,v)).next(w=>{const _=c.docVersions.get(v);kn(_!==null,48541),w.version.compareTo(_)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=gn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function G8(n){const e=Xt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function nfe(n,e){const t=Xt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const a=[];e.targetChanges.forEach((u,f)=>{const p=i.get(f);if(!p)return;a.push(t.Pi.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.Pi.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Si.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),function(w,_,g){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=Zde?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(p,m,u)&&a.push(t.Pi.updateTargetData(s,m))});let l=Gl(),c=gn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(rfe(s,o,e.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!r.isEqual(Wt.min())){const u=t.Pi.getLastRemoteSnapshotVersion(s).next(f=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return Ae.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ms=i,s))}function rfe(n,e,t){let r=gn(),i=gn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Gl();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Wt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):at(qP,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:i}})}function ife(n,e){const t=Xt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=LP),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sfe(n,e){const t=Xt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,Ae.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Vc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function $C(n,e,t){const r=Xt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!hm(o))throw o;at(qP,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function AF(n,e,t){const r=Xt(n);let i=Wt.min(),s=gn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Xt(l),p=f.xs.get(u);return p!==void 0?Ae.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,u)}(r,o,Ua(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Wt.min(),t?s:gn())).next(a=>(ofe(r,Whe(e),a),{documents:a,Qs:s})))}function ofe(n,e,t){let r=n.Os.get(e)||Wt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}class MF{constructor(){this.activeTargetIds=Qhe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class afe{constructor(){this.Mo=new MF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new MF,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lfe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="ConnectivityMonitor";class RF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){at(CF,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){at(CF,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ex=null;function qC(){return Ex===null?Ex=function(){return 268435456+Math.round(2147483648*Math.random())}():Ex++,"0x"+Ex.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="RestConnection",cfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ufe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===u1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const o=qC(),a=this.zo(e,t.toUriEncodedString());at(Yb,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),u=am(c);return this.Jo(e,a,l,r,u).then(f=>(at(Yb,`Received RPC '${e}' ${o}: `,f),f),f=>{throw sy(Yb,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){const r=cfe[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hfe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="WebChannelConnection";class dfe extends ufe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const o=qC();return new Promise((a,l)=>{const c=new W9;c.setWithCredentials(!0),c.listenOnce($9.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Qx.NO_ERROR:const f=c.getResponseJson();at(Vi,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Qx.TIMEOUT:at(Vi,`RPC '${e}' ${o} timed out`),l(new Ke(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Qx.HTTP_ERROR:const p=c.getStatus();if(at(Vi,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const w=function(g){const E=g.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(E)>=0?E:Ee.UNKNOWN}(v.status);l(new Ke(w,v.message))}else l(new Ke(Ee.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Ke(Ee.UNAVAILABLE,"Connection failed."));break;default:Lt(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{at(Vi,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);at(Vi,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}T_(e,t,r){const i=qC(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Y9(),a=X9(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");at(Vi,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);this.I_(f);let p=!1,m=!1;const v=new hfe({Yo:_=>{m?at(Vi,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(p||(at(Vi,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),at(Vi,`RPC '${e}' stream ${i} sending:`,_),f.send(_))},Zo:()=>f.close()}),w=(_,g,E)=>{_.listen(g,S=>{try{E(S)}catch(b){setTimeout(()=>{throw b},0)}})};return w(f,kg.EventType.OPEN,()=>{m||(at(Vi,`RPC '${e}' stream ${i} transport opened.`),v.o_())}),w(f,kg.EventType.CLOSE,()=>{m||(m=!0,at(Vi,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(f))}),w(f,kg.EventType.ERROR,_=>{m||(m=!0,sy(Vi,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),v.a_(new Ke(Ee.UNAVAILABLE,"The operation could not be completed")))}),w(f,kg.EventType.MESSAGE,_=>{var g;if(!m){const E=_.data[0];kn(!!E,16349);const S=E,b=(S==null?void 0:S.error)||((g=S[0])==null?void 0:g.error);if(b){at(Vi,`RPC '${e}' stream ${i} received error:`,b);const k=b.status;let N=function(A){const R=Fr[A];if(R!==void 0)return I8(R)}(k),M=b.message;N===void 0&&(N=Ee.INTERNAL,M="Unknown error status: "+k+" with message "+b.message),m=!0,v.a_(new Ke(N,M)),f.close()}else at(Vi,`RPC '${e}' stream ${i} received:`,E),v.u_(E)}}),w(a,q9.STAT_EVENT,_=>{_.stat===LC.PROXY?at(Vi,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===LC.NOPROXY&&at(Vi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Kb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n){return new vde(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&at("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="PersistentStream";class $8{constructor(e,t,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W8(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(jl(t.toString()),jl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new Ke(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return at(IF,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(at(IF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ffe extends $8{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xde(this.serializer,e),r=function(s){if(!("targetChange"in s))return Wt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Wt.min():o.readTime?Va(o.readTime):Wt.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=WC(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=VC(l)?{documents:Sde(s,l)}:{query:Tde(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=k8(s,o.resumeToken);const c=HC(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Wt.min())>0){a.readTime=p1(s,o.snapshotVersion.toTimestamp());const c=HC(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Ade(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=WC(this.serializer),t.removeTarget=e,this.q_(t)}}class pfe extends $8{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return kn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Ede(e.writeResults,e.commitTime),r=Va(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=WC(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wde(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mfe{}class gfe extends mfe{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ke(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,jC(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ke(Ee.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,jC(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ke(Ee.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class vfe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(jl(t),this.aa=!1):at("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd="RemoteStore";class yfe{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{vd(this)&&(at(rd,"Restarting streams for network reachability change."),await async function(l){const c=Xt(l);c.Ea.add(4),await Jy(c),c.Ra.set("Unknown"),c.Ea.delete(4),await YE(c)}(this))})}),this.Ra=new vfe(r,i)}}async function YE(n){if(vd(n))for(const e of n.da)await e(!0)}async function Jy(n){for(const e of n.da)await e(!1)}function q8(n,e){const t=Xt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),QP(t)?KP(t):fm(t).O_()&&YP(t,e))}function XP(n,e){const t=Xt(n),r=fm(t);t.Ia.delete(e),r.O_()&&X8(t,e),t.Ia.size===0&&(r.O_()?r.L_():vd(t)&&t.Ra.set("Unknown"))}function YP(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Wt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fm(n).Y_(e)}function X8(n,e){n.Va.Ue(e),fm(n).Z_(e)}function KP(n){n.Va=new fde({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),fm(n).start(),n.Ra.ua()}function QP(n){return vd(n)&&!fm(n).x_()&&n.Ia.size>0}function vd(n){return Xt(n).Ea.size===0}function Y8(n){n.Va=void 0}async function _fe(n){n.Ra.set("Online")}async function xfe(n){n.Ia.forEach((e,t)=>{YP(n,e)})}async function wfe(n,e){Y8(n),QP(n)?(n.Ra.ha(e),KP(n)):n.Ra.set("Unknown")}async function Efe(n,e,t){if(n.Ra.set("Online"),e instanceof N8&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(n,e)}catch(r){at(rd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await g1(n,r)}else if(e instanceof tw?n.Va.Ze(e):e instanceof P8?n.Va.st(e):n.Va.tt(e),!t.isEqual(Wt.min()))try{const r=await G8(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(Si.EMPTY_BYTE_STRING,u.snapshotVersion)),X8(s,l);const f=new Vc(u.target,l,c,u.sequenceNumber);YP(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){at(rd,"Failed to raise snapshot:",r),await g1(n,r)}}async function g1(n,e,t){if(!hm(e))throw e;n.Ea.add(1),await Jy(n),n.Ra.set("Offline"),t||(t=()=>G8(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{at(rd,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await YE(n)})}function K8(n,e){return e().catch(t=>g1(n,t,e))}async function KE(n){const e=Xt(n),t=Eu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:LP;for(;Sfe(e);)try{const i=await ife(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Tfe(e,i)}catch(i){await g1(e,i)}Q8(e)&&Z8(e)}function Sfe(n){return vd(n)&&n.Ta.length<10}function Tfe(n,e){n.Ta.push(e);const t=Eu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Q8(n){return vd(n)&&!Eu(n).x_()&&n.Ta.length>0}function Z8(n){Eu(n).start()}async function bfe(n){Eu(n).ra()}async function Afe(n){const e=Eu(n);for(const t of n.Ta)e.ea(t.mutations)}async function Mfe(n,e,t){const r=n.Ta.shift(),i=BP.from(r,e,t);await K8(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await KE(n)}async function Cfe(n,e){e&&Eu(n).X_&&await async function(r,i){if(function(o){return ude(o)&&o!==Ee.ABORTED}(i.code)){const s=r.Ta.shift();Eu(r).B_(),await K8(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await KE(r)}}(n,e),Q8(n)&&Z8(n)}async function PF(n,e){const t=Xt(n);t.asyncQueue.verifyOperationInProgress(),at(rd,"RemoteStore received new credentials");const r=vd(t);t.Ea.add(3),await Jy(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await YE(t)}async function Rfe(n,e){const t=Xt(n);e?(t.Ea.delete(2),await YE(t)):e||(t.Ea.add(2),await Jy(t),t.Ra.set("Unknown"))}function fm(n){return n.ma||(n.ma=function(t,r,i){const s=Xt(t);return s.sa(),new ffe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:_fe.bind(null,n),t_:xfe.bind(null,n),r_:wfe.bind(null,n),H_:Efe.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),QP(n)?KP(n):n.Ra.set("Unknown")):(await n.ma.stop(),Y8(n))})),n.ma}function Eu(n){return n.fa||(n.fa=function(t,r,i){const s=Xt(t);return s.sa(),new pfe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:bfe.bind(null,n),r_:Cfe.bind(null,n),ta:Afe.bind(null,n),na:Mfe.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await KE(n)):(await n.fa.stop(),n.Ta.length>0&&(at(rd,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new ZP(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JP(n,e){if(jl("AsyncQueue",`${e}: ${n}`),hm(n))return new Ke(Ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{static emptySet(e){return new ip(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ct.comparator(t.key,r.key):(t,r)=>Ct.comparator(t.key,r.key),this.keyedMap=Lg(),this.sortedSet=new gr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ip)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ip;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this.ga=new gr(Ct.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Lt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bp{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Bp(e,t,ip.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ife{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Pfe{constructor(){this.queries=kF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Xt(t),s=i.queries;i.queries=kF(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Ke(Ee.ABORTED,"Firestore shutting down"))}}function kF(){return new md(n=>v8(n),jE)}async function J8(n,e){const t=Xt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Ife,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=JP(o,`Initialization of query '${Ef(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&e2(t)}async function ej(n,e){const t=Xt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Nfe(n,e){const t=Xt(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&e2(t)}function kfe(n,e,t){const r=Xt(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function e2(n){n.Ca.forEach(e=>{e.next()})}var XC,LF;(LF=XC||(XC={})).Ma="default",LF.Cache="cache";class tj{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Bp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Bp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==XC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.key=e}}class rj{constructor(e){this.key=e}}class Lfe{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gn(),this.mutatedKeys=gn(),this.eu=y8(e),this.tu=new ip(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new NF,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const p=i.get(u),m=GE(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?v!==w&&(r.track({type:3,doc:m}),_=!0):this.su(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),s=w?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,f)=>function(m,v){const w=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt(20277,{Rt:_})}};return w(m)-w(v)}(u.type,f.type)||this.eu(u.doc,f.doc)),this.ou(r),i=i??!1;const a=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Bp(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gn(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new rj(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new nj(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=gn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const t2="SyncEngine";class Dfe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ofe{constructor(e){this.key=e,this.hu=!1}}class Ffe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new md(a=>v8(a),jE),this.Iu=new Map,this.Eu=new Set,this.du=new gr(Ct.comparator),this.Au=new Map,this.Ru=new GP,this.Vu={},this.mu=new Map,this.fu=zp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ufe(n,e,t=!0){const r=cj(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await ij(r,e,t,!0),i}async function Vfe(n,e){const t=cj(n);await ij(t,e,!0,!1)}async function ij(n,e,t,r){const i=await sfe(n.localStore,Ua(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await zfe(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&q8(n.remoteStore,i),a}async function zfe(n,e,t,r,i){n.pu=(f,p,m)=>async function(w,_,g,E){let S=_.view.ru(g);S.Cs&&(S=await AF(w.localStore,_.query,!1).then(({documents:M})=>_.view.ru(M,S)));const b=E&&E.targetChanges.get(_.targetId),k=E&&E.targetMismatches.get(_.targetId)!=null,N=_.view.applyChanges(S,w.isPrimaryClient,b,k);return OF(w,_.targetId,N.au),N.snapshot}(n,f,p,m);const s=await AF(n.localStore,e,!0),o=new Lfe(e,s.Qs),a=o.ru(s.documents),l=Zy.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);OF(n,t,c.au);const u=new Dfe(e,t,o);return n.Tu.set(e,u),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function Bfe(n,e,t){const r=Xt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!jE(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $C(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&XP(r.remoteStore,i.targetId),YC(r,i.targetId)}).catch(um)):(YC(r,i.targetId),await $C(r.localStore,i.targetId,!0))}async function Hfe(n,e){const t=Xt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),XP(t.remoteStore,r.targetId))}async function jfe(n,e,t){const r=Kfe(n);try{const i=await function(o,a){const l=Xt(o),c=Zn.now(),u=a.reduce((m,v)=>m.add(v.key),gn());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Gl(),w=gn();return l.Ns.getEntries(m,u).next(_=>{v=_,v.forEach((g,E)=>{E.isValidDocument()||(w=w.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(_=>{f=_;const g=[];for(const E of a){const S=sde(E,f.get(E.key).overlayedDocument);S!=null&&g.push(new gd(E.key,S,c8(S.value.mapValue),Nl.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,g,a)}).next(_=>{p=_;const g=_.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(m,_.batchId,g)})}).then(()=>({batchId:p.batchId,changes:x8(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new gr(mn)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,t),await e_(r,i.changes),await KE(r.remoteStore)}catch(i){const s=JP(i,"Failed to persist write");t.reject(s)}}async function sj(n,e){const t=Xt(n);try{const r=await nfe(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Au.get(s);o&&(kn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?kn(o.hu,14607):i.removedDocuments.size>0&&(kn(o.hu,42227),o.hu=!1))}),await e_(t,r,e)}catch(r){await um(r)}}function DF(n,e,t){const r=Xt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Xt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)}),c&&e2(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Gfe(n,e,t){const r=Xt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new gr(Ct.comparator);o=o.insert(s,ji.newNoDocument(s,Wt.min()));const a=gn().add(s),l=new qE(Wt.min(),new Map,new gr(mn),o,a);await sj(r,l),r.du=r.du.remove(s),r.Au.delete(e),n2(r)}else await $C(r.localStore,e,!1).then(()=>YC(r,e,t)).catch(um)}async function Wfe(n,e){const t=Xt(n),r=e.batch.batchId;try{const i=await tfe(t.localStore,e);aj(t,r,null),oj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await e_(t,i)}catch(i){await um(i)}}async function $fe(n,e,t){const r=Xt(n);try{const i=await function(o,a){const l=Xt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(kn(f!==null,37113),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);aj(r,e,t),oj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await e_(r,i)}catch(i){await um(i)}}function oj(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function aj(n,e,t){const r=Xt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function YC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||lj(n,r)})}function lj(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(XP(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),n2(n))}function OF(n,e,t){for(const r of t)r instanceof nj?(n.Ru.addReference(r.key,e),qfe(n,r)):r instanceof rj?(at(t2,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||lj(n,r.key)):Lt(19791,{wu:r})}function qfe(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(at(t2,"New document in limbo: "+t),n.Eu.add(r),n2(n))}function n2(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ct(qn.fromString(e)),r=n.fu.next();n.Au.set(r,new Ofe(t)),n.du=n.du.insert(t,r),q8(n.remoteStore,new Vc(Ua(VP(t.path)),r,"TargetPurposeLimboResolution",zE.ce))}}async function e_(n,e,t){const r=Xt(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=$P.As(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,c){const u=Xt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ae.forEach(c,p=>Ae.forEach(p.Es,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>Ae.forEach(p.ds,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!hm(f))throw f;at(qP,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.Ms.get(p),v=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(v);u.Ms=u.Ms.insert(p,w)}}}(r.localStore,s))}async function Xfe(n,e){const t=Xt(n);if(!t.currentUser.isEqual(e)){at(t2,"User change. New user:",e.toKey());const r=await j8(t.localStore,e);t.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new Ke(Ee.CANCELLED,o))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await e_(t,r.Ls)}}function Yfe(n,e){const t=Xt(n),r=t.Au.get(e);if(r&&r.hu)return gn().add(r.key);{let i=gn();const s=t.Iu.get(e);if(!s)return i;for(const o of s){const a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function cj(n){const e=Xt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gfe.bind(null,e),e.Pu.H_=Nfe.bind(null,e.eventManager),e.Pu.yu=kfe.bind(null,e.eventManager),e}function Kfe(n){const e=Xt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$fe.bind(null,e),e}class v1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=XE(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return efe(this.persistence,new Qde,e.initialUser,this.serializer)}Cu(e){return new H8(WP.mi,this.serializer)}Du(e){return new afe}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}v1.provider={build:()=>new v1};class Qfe extends v1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){kn(this.persistence.referenceDelegate instanceof m1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ode(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new H8(r=>m1.mi(r,t),this.serializer)}}class KC{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xfe.bind(null,this.syncEngine),await Rfe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Pfe}()}createDatastore(e){const t=XE(e.databaseInfo.databaseId),r=function(s){return new dfe(s)}(e.databaseInfo);return function(s,o,a,l){return new gfe(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new yfe(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>DF(this.syncEngine,t,0),function(){return RF.v()?new RF:new lfe}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,u){const f=new Ffe(i,s,o,a,l,c);return u&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Xt(i);at(rd,"RemoteStore shutting down."),s.Ea.add(5),await Jy(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}KC.provider={build:()=>new KC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):jl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="FirestoreClient";class Zfe{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bs.UNAUTHENTICATED,this.clientId=kP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{at(Su,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(at(Su,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=JP(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qb(n,e){n.asyncQueue.verifyOperationInProgress(),at(Su,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await j8(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function FF(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Jfe(n);at(Su,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>PF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>PF(e.remoteStore,i)),n._onlineComponents=e}async function Jfe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){at(Su,"Using user provided OfflineComponentProvider");try{await Qb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;sy("Error using user provided cache. Falling back to memory cache: "+t),await Qb(n,new v1)}}else at(Su,"Using default OfflineComponentProvider"),await Qb(n,new Qfe(void 0));return n._offlineComponents}async function hj(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(at(Su,"Using user provided OnlineComponentProvider"),await FF(n,n._uninitializedComponentsProvider._online)):(at(Su,"Using default OnlineComponentProvider"),await FF(n,new KC))),n._onlineComponents}function epe(n){return hj(n).then(e=>e.syncEngine)}async function dj(n){const e=await hj(n),t=e.eventManager;return t.onListen=Ufe.bind(null,e.syncEngine),t.onUnlisten=Bfe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Vfe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Hfe.bind(null,e.syncEngine),t}function tpe(n,e,t={}){const r=new Pl;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new uj({next:p=>{u.Nu(),o.enqueueAndForget(()=>ej(s,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Ke(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Ke(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new tj(VP(a.path),u,{includeMetadataChanges:!0,qa:!0});return J8(s,f)}(await dj(n),n.asyncQueue,e,t,r)),r.promise}function npe(n,e,t={}){const r=new Pl;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new uj({next:p=>{u.Nu(),o.enqueueAndForget(()=>ej(s,f)),p.fromCache&&l.source==="server"?c.reject(new Ke(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new tj(a,u,{includeMetadataChanges:!0,qa:!0});return J8(s,f)}(await dj(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe="firestore.googleapis.com",VF=!0;class zF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ke(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rpe,this.ssl=VF}else this.host=e.host,this.ssl=e.ssl??VF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=z8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B8)throw new Ke(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_he("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fj(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class r2{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ke(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uhe;switch(r.type){case"firstParty":return new fhe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ke(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=UF.get(t);r&&(at("ComponentProvider","Removing Datastore"),UF.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yd(this.firestore,e,this._query)}}class Kr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kr(this.firestore,e,this._key)}toJSON(){return{type:Kr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ky(t,Kr._jsonSchema))return new Kr(e,r||null,new Ct(qn.fromString(t.referencePath)))}}Kr._jsonSchemaVersion="firestore/documentReference/1.0",Kr._jsonSchema={type:Br("string",Kr._jsonSchemaVersion),referencePath:Br("string")};class ou extends yd{constructor(e,t,r){super(e,t,VP(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kr(this.firestore,null,new Ct(e))}withConverter(e){return new ou(this.firestore,e,this._path)}}function i2(n,e,...t){if(n=ds(n),Q9("collection","path",e),n instanceof r2){const r=qn.fromString(e,...t);return J3(r),new ou(n,null,r)}{if(!(n instanceof Kr||n instanceof ou))throw new Ke(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qn.fromString(e,...t));return J3(r),new ou(n.firestore,null,r)}}function pj(n,e,...t){if(n=ds(n),arguments.length===1&&(e=kP.newId()),Q9("doc","path",e),n instanceof r2){const r=qn.fromString(e,...t);return Z3(r),new Kr(n,null,new Ct(r))}{if(!(n instanceof Kr||n instanceof ou))throw new Ke(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qn.fromString(e,...t));return Z3(r),new Kr(n.firestore,n instanceof ou?n.converter:null,new Ct(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="AsyncQueue";class HF{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W8(this,"async_queue_retry"),this._c=()=>{const r=Kb();r&&at(BF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Kb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Kb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Pl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hm(e))throw e;at(BF,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,jl("INTERNAL UNHANDLED ERROR: ",jF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=ZP.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Lt(47125,{Pc:jF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jF(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class QE extends r2{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new HF,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new HF(e),this._firestoreClient=void 0,await e}}}function ipe(n,e,t){t||(t=u1);const r=IP(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),s=r.getOptions(t);if(ed(s,e))return i;throw new Ke(Ee.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ke(Ee.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B8)throw new Ke(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&am(e.host)&&V9(e.host),r.initialize({options:e,instanceIdentifier:t})}function s2(n){if(n._terminated)throw new Ke(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||spe(n),n._firestoreClient}function spe(n){var r,i,s;const e=n._freezeSettings(),t=function(a,l,c,u){return new Ihe(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,fj(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Zfe(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ao(Si.fromBase64String(e))}catch(t){throw new Ke(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ao(Si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ao._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ky(e,Ao._jsonSchema))return Ao.fromBase64String(e.bytes)}}Ao._jsonSchemaVersion="firestore/bytes/1.0",Ao._jsonSchema={type:Br("string",Ao._jsonSchemaVersion),bytes:Br("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ke(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ke(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ke(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mn(this._lat,e._lat)||mn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:za._jsonSchemaVersion}}static fromJSON(e){if(Ky(e,za._jsonSchema))return new za(e.latitude,e.longitude)}}za._jsonSchemaVersion="firestore/geoPoint/1.0",za._jsonSchema={type:Br("string",za._jsonSchemaVersion),latitude:Br("number"),longitude:Br("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ba._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ky(e,Ba._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ba(e.vectorValues);throw new Ke(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ba._jsonSchemaVersion="firestore/vectorValue/1.0",Ba._jsonSchema={type:Br("string",Ba._jsonSchemaVersion),vectorValues:Br("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ope=/^__.*__$/;class ape{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qy(e,this.data,t,this.fieldTransforms)}}function mj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt(40011,{Ac:n})}}class l2{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new l2({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return y1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mj(this.Ac)&&ope.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lpe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||XE(e)}Cc(e,t,r,i=!1){return new l2({Ac:e,methodName:t,Dc:r,path:_i.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gj(n){const e=n._freezeSettings(),t=XE(n._databaseId);return new lpe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cpe(n,e,t,r,i,s={}){const o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);_j("Data must be an object, but it was:",o,r);const a=vj(r,o);let l,c;if(s.merge)l=new ta(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const p=hpe(e,f,t);if(!o.contains(p))throw new Ke(Ee.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);fpe(u,p)||u.push(p)}l=new ta(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new ape(new bo(a),l,c)}class c2 extends a2{_toFieldTransform(e){return new tde(e.path,new dy)}isEqual(e){return e instanceof c2}}function upe(n,e,t,r=!1){return u2(t,n.Cc(r?4:3,e))}function u2(n,e){if(yj(n=ds(n)))return _j("Unsupported field value:",e,n),vj(n,e);if(n instanceof a2)return function(r,i){if(!mj(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=u2(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ds(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zhe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Zn.fromDate(r);return{timestampValue:p1(i.serializer,s)}}if(r instanceof Zn){const s=new Zn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:p1(i.serializer,s)}}if(r instanceof za)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ao)return{bytesValue:k8(i.serializer,r._byteString)};if(r instanceof Kr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jP(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ba)return function(o,a){return{mapValue:{fields:{[o8]:{stringValue:l8},[h1]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return zP(a.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${VE(r)}`)}(n,e)}function vj(n,e){const t={};return e8(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pd(n,(r,i)=>{const s=u2(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function yj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Zn||n instanceof za||n instanceof Ao||n instanceof Kr||n instanceof a2||n instanceof Ba)}function _j(n,e,t){if(!yj(t)||!Z9(t)){const r=VE(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function hpe(n,e,t){if((e=ds(e))instanceof o2)return e._internalPath;if(typeof e=="string")return xj(n,e);throw y1("Field path arguments must be of type string or ",n,!1,void 0,t)}const dpe=new RegExp("[~\\*/\\[\\]]");function xj(n,e,t){if(e.search(dpe)>=0)throw y1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new o2(...e.split("."))._internalPath}catch{throw y1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function y1(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ke(Ee.INVALID_ARGUMENT,a+n+l)}function fpe(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ppe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(h2("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ppe extends wj{data(){return super.data()}}function h2(n,e){return typeof e=="string"?xj(n,e):e instanceof o2?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mpe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ke(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class d2{}class Ej extends d2{}function gpe(n,e,...t){let r=[];e instanceof d2&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof p2).length,a=s.filter(l=>l instanceof f2).length;if(o>1||o>0&&a>0)throw new Ke(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class f2 extends Ej{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new f2(e,t,r)}_apply(e){const t=this._parse(e);return Sj(e._query,t),new yd(e.firestore,e.converter,zC(e._query,t))}_parse(e){const t=gj(e.firestore);return function(s,o,a,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ke(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){WF(f,u);const v=[];for(const w of f)v.push(GF(l,s,w));p={arrayValue:{values:v}}}else p=GF(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||WF(f,u),p=upe(a,o,f,u==="in"||u==="not-in");return zr.create(c,u,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class p2 extends d2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new p2(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ha.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Sj(o,l),o=zC(o,l)}(e._query,t),new yd(e.firestore,e.converter,zC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class m2 extends Ej{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new m2(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new Ke(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ke(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hy(s,o)}(e._query,this._field,this._direction);return new yd(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new dm(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function vpe(n,e="asc"){const t=e,r=h2("orderBy",n);return m2._create(r,t)}function GF(n,e,t){if(typeof(t=ds(t))=="string"){if(t==="")throw new Ke(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g8(e)&&t.indexOf("/")!==-1)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qn.fromString(t));if(!Ct.isDocumentKey(r))throw new Ke(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return aF(n,new Ct(r))}if(t instanceof Kr)return aF(n,t._key);throw new Ke(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VE(t)}.`)}function WF(n,e){if(!Array.isArray(n)||n.length===0)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sj(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ke(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ke(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ype{convertValue(e,t="none"){switch(wu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Lt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var r,i,s;const t=(s=(i=(r=e.fields)==null?void 0:r[h1].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Cr(o.doubleValue));return new Ba(t)}convertGeoPoint(e){return new za(Cr(e.latitude),Cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=HE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ly(e));default:return null}}convertTimestamp(e){const t=_u(e);return new Zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qn.fromString(e);kn(V8(r),9688,{name:e});const i=new cy(r.get(1),r.get(3)),s=new Ct(r.popFirst(5));return i.isEqual(t)||jl(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _pe(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Og{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bh extends wj{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(h2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bh._jsonSchema={type:Br("string",Bh._jsonSchemaVersion),bundleSource:Br("string","DocumentSnapshot"),bundleName:Br("string"),bundle:Br("string")};class nw extends Bh{data(e={}){return super.data(e)}}class sp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Og(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new nw(this._firestore,this._userDataWriter,r.key,r,new Og(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ke(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new nw(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Og(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new nw(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Og(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:xpe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kP.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xpe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wpe(n){n=oy(n,Kr);const e=oy(n.firestore,QE);return tpe(s2(e),n._key).then(t=>Tpe(e,n,t))}sp._jsonSchemaVersion="firestore/querySnapshot/1.0",sp._jsonSchema={type:Br("string",sp._jsonSchemaVersion),bundleSource:Br("string","QuerySnapshot"),bundleName:Br("string"),bundle:Br("string")};class Tj extends ype{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kr(this.firestore,null,t)}}function Epe(n){n=oy(n,yd);const e=oy(n.firestore,QE),t=s2(e),r=new Tj(e);return mpe(n._query),npe(t,n._query).then(i=>new sp(e,r,n,i))}function bj(n,e){const t=oy(n.firestore,QE),r=pj(n),i=_pe(n.converter,e);return Spe(t,[cpe(gj(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Nl.exists(!1))]).then(()=>r)}function Spe(n,e){return function(r,i){const s=new Pl;return r.asyncQueue.enqueueAndForget(async()=>jfe(await epe(r),i,s)),s.promise}(s2(n),e)}function Tpe(n,e,t){const r=t.docs.get(e._key),i=new Tj(n);return new Bh(n,i,e._key,r,new Og(t.hasPendingWrites,t.fromCache),e.converter)}function bpe(){return new c2("serverTimestamp")}(function(e,t=!0){(function(i){cm=i})(lm),Op(new td("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new QE(new hhe(r.getProvider("auth-internal")),new phe(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ke(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cy(c.options.projectId,u)}(o,i),o);return s={useFetchStreams:t,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),iu(X3,Y3,e),iu(X3,Y3,"esm2020")})();let Sx;async function t_(){if(Sx)return Sx;const n=await qy(),e=l1().length?l1()[0]:PP(n.firebase);return Sx=ipe(e,{experimentalForceLongPolling:!0}),Sx}const Ape=n=>new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Mpe=()=>{const[n,e]=H.useState([]),t=FQ();H.useEffect(()=>{(async()=>{try{const i=await t_(),s=gpe(i2(i,"blogs"),vpe("date","desc")),a=(await Epe(s)).docs.map(l=>{const c=l.data();return{id:l.id,title:c.title,excerpt:c.excerpt,date:c.date,readTime:c.readTime||"",tags:c.tags||[],color:c.color||"primary"}});e(a)}catch{e([])}})()},[]);const r=i=>{t(`/blog/${i}`)};return L.jsxs("section",{id:"blog",className:"py-32 relative overflow-hidden",children:[L.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-muted/20 via-background to-muted/20"}),L.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[L.jsxs("div",{className:"flex items-center gap-4 mb-16",children:[L.jsx("span",{className:"text-primary font-mono text-sm",children:"06"}),L.jsx("h2",{className:"text-4xl md:text-5xl font-bold",children:"Thoughts"}),L.jsx("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-primary/50 to-transparent"})]}),L.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:n.map((i,s)=>L.jsxs("article",{className:"group relative bg-card border-2 border-border hover:border-primary/50 p-6 md:p-8 transition-all duration-300 hover-lift",style:{clipPath:s%2===0?"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)":"polygon(0 0, calc(100% - 24px) 0, 100% 24px, 100% 100%, 0 100%)"},children:[L.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:i.tags.map(o=>L.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-mono bg-${i.color}/10 text-${i.color} border border-${i.color}/30`,children:[L.jsx(kq,{size:10}),o]},o))}),L.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground group-hover:text-gradient transition-all mb-3",children:i.title}),L.jsx("p",{className:"text-muted-foreground leading-relaxed mb-6 line-clamp-3",children:i.excerpt}),L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[L.jsxs("span",{className:"flex items-center gap-1",children:[L.jsx(Nz,{size:14,className:`text-${i.color}`}),Ape(i.date)]}),L.jsxs("span",{className:"flex items-center gap-1",children:[L.jsx(Cq,{size:14,className:`text-${i.color}`}),i.readTime]})]}),L.jsxs(Wi,{variant:"ghost",size:"sm",onClick:()=>r(i.id),className:"group/btn",children:["Read More",L.jsx(lL,{size:14,className:"transition-transform group-hover/btn:translate-x-1"})]})]}),L.jsx("div",{className:`absolute bottom-0 right-0 w-6 h-6 bg-${i.color}/20 opacity-0 group-hover:opacity-100 transition-opacity`})]},i.id))}),L.jsx("div",{className:"mt-12 text-center",children:L.jsxs(Wi,{variant:"outline",size:"lg",onClick:()=>alert("Full blog archive coming soon!"),children:["View All Articles",L.jsx(lL,{size:16})]})})]})]})};var Cn;(function(n){n.assertEqual=i=>{};function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Cn||(Cn={}));var $F;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})($F||($F={}));const pt=Cn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ec=n=>{switch(typeof n){case"undefined":return pt.undefined;case"string":return pt.string;case"number":return Number.isNaN(n)?pt.nan:pt.number;case"boolean":return pt.boolean;case"function":return pt.function;case"bigint":return pt.bigint;case"symbol":return pt.symbol;case"object":return Array.isArray(n)?pt.array:n===null?pt.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?pt.promise:typeof Map<"u"&&n instanceof Map?pt.map:typeof Set<"u"&&n instanceof Set?pt.set:typeof Date<"u"&&n instanceof Date?pt.date:pt.object;default:return pt.unknown}},He=Cn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Wl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof Wl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Cn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];t[s]=t[s]||[],t[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Wl.create=n=>new Wl(n);const QC=(n,e)=>{let t;switch(n.code){case He.invalid_type:n.received===pt.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case He.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Cn.jsonStringifyReplacer)}`;break;case He.unrecognized_keys:t=`Unrecognized key(s) in object: ${Cn.joinValues(n.keys,", ")}`;break;case He.invalid_union:t="Invalid input";break;case He.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Cn.joinValues(n.options)}`;break;case He.invalid_enum_value:t=`Invalid enum value. Expected ${Cn.joinValues(n.options)}, received '${n.received}'`;break;case He.invalid_arguments:t="Invalid function arguments";break;case He.invalid_return_type:t="Invalid function return type";break;case He.invalid_date:t="Invalid date";break;case He.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Cn.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case He.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case He.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case He.custom:t="Invalid input";break;case He.invalid_intersection_types:t="Intersection results could not be merged";break;case He.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case He.not_finite:t="Number must be finite";break;default:t=e.defaultError,Cn.assertNever(n)}return{message:t}};let Cpe=QC;function Rpe(){return Cpe}const Ipe=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function nt(n,e){const t=Rpe(),r=Ipe({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===QC?void 0:QC].filter(i=>!!i)});n.common.issues.push(r)}class so{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return $t;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return so.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return $t;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const $t=Object.freeze({status:"aborted"}),Fg=n=>({status:"dirty",value:n}),ko=n=>({status:"valid",value:n}),qF=n=>n.status==="aborted",XF=n=>n.status==="dirty",Hp=n=>n.status==="valid",_1=n=>typeof Promise<"u"&&n instanceof Promise;var yt;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(yt||(yt={}));class Tu{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const YF=(n,e)=>{if(Hp(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Wl(n.common.issues);return this._error=t,this._error}}};function un(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:l}=n;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:i}}class En{get description(){return this._def.description}_getType(e){return Ec(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ec(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new so,ctx:{common:e.parent.common,data:e.data,parsedType:Ec(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(_1(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ec(e)},i=this._parseSync({data:e,path:r.path,parent:r});return YF(r,i)}"~validate"(e){var r,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ec(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:t});return Hp(s)?{value:s.value}:{issues:t.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>Hp(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ec(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(_1(i)?i:Promise.resolve(i));return YF(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:He.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new Gp({schema:this,typeName:qt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return au.create(this,this._def)}nullable(){return Wp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ha.create(this)}promise(){return S1.create(this,this._def)}or(e){return w1.create([this,e],this._def)}and(e){return E1.create(this,e,this._def)}transform(e){return new Gp({...un(this._def),schema:this,typeName:qt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new JC({...un(this._def),innerType:this,defaultValue:t,typeName:qt.ZodDefault})}brand(){return new Jpe({typeName:qt.ZodBranded,type:this,...un(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new eR({...un(this._def),innerType:this,catchValue:t,typeName:qt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return g2.create(this,e)}readonly(){return tR.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ppe=/^c[^\s-]{8,}$/i,Npe=/^[0-9a-z]+$/,kpe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Lpe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Dpe=/^[a-z0-9_-]{21}$/i,Ope=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Fpe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Upe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Vpe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Zb;const zpe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Bpe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Hpe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jpe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gpe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Wpe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Aj="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$pe=new RegExp(`^${Aj}$`);function Mj(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function qpe(n){return new RegExp(`^${Mj(n)}$`)}function Xpe(n){let e=`${Aj}T${Mj(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Ype(n,e){return!!((e==="v4"||!e)&&zpe.test(n)||(e==="v6"||!e)&&Hpe.test(n))}function Kpe(n,e){if(!Ope.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function Qpe(n,e){return!!((e==="v4"||!e)&&Bpe.test(n)||(e==="v6"||!e)&&jpe.test(n))}class zc extends En{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pt.string){const s=this._getOrReturnCtx(e);return nt(s,{code:He.invalid_type,expected:pt.string,received:s.parsedType}),$t}const r=new so;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),nt(i,{code:He.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),nt(i,{code:He.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?nt(i,{code:He.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&nt(i,{code:He.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Upe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"email",code:He.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Zb||(Zb=new RegExp(Vpe,"u")),Zb.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"emoji",code:He.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Lpe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"uuid",code:He.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")Dpe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"nanoid",code:He.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Ppe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"cuid",code:He.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Npe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"cuid2",code:He.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")kpe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"ulid",code:He.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),nt(i,{validation:"url",code:He.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"regex",code:He.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),nt(i,{code:He.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),nt(i,{code:He.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),nt(i,{code:He.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?Xpe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{code:He.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?$pe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{code:He.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?qpe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{code:He.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?Fpe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"duration",code:He.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?Ype(e.data,s.version)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"ip",code:He.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?Kpe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"jwt",code:He.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?Qpe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"cidr",code:He.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?Gpe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"base64",code:He.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?Wpe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"base64url",code:He.invalid_string,message:s.message}),r.dirty()):Cn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:He.invalid_string,...yt.errToObj(r)})}_addCheck(e){return new zc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...yt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...yt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...yt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...yt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...yt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...yt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...yt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...yt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...yt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...yt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...yt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...yt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...yt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...yt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...yt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...yt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...yt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...yt.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...yt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...yt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...yt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...yt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...yt.errToObj(t)})}nonempty(e){return this.min(1,yt.errToObj(e))}trim(){return new zc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}zc.create=n=>new zc({checks:[],typeName:qt.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...un(n)});function Zpe(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=Number.parseInt(n.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class my extends En{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pt.number){const s=this._getOrReturnCtx(e);return nt(s,{code:He.invalid_type,expected:pt.number,received:s.parsedType}),$t}let r;const i=new so;for(const s of this._def.checks)s.kind==="int"?Cn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),nt(r,{code:He.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:He.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:He.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Zpe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),nt(r,{code:He.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),nt(r,{code:He.not_finite,message:s.message}),i.dirty()):Cn.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,yt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,yt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,yt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,yt.toString(t))}setLimit(e,t,r,i){return new my({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:yt.toString(i)}]})}_addCheck(e){return new my({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:yt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:yt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:yt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:yt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:yt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:yt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:yt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:yt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:yt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Cn.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}my.create=n=>new my({checks:[],typeName:qt.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...un(n)});class gy extends En{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pt.bigint)return this._getInvalidInput(e);let r;const i=new so;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:He.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:He.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:He.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Cn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return nt(t,{code:He.invalid_type,expected:pt.bigint,received:t.parsedType}),$t}gte(e,t){return this.setLimit("min",e,!0,yt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,yt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,yt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,yt.toString(t))}setLimit(e,t,r,i){return new gy({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:yt.toString(i)}]})}_addCheck(e){return new gy({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:yt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:yt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:yt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:yt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:yt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}gy.create=n=>new gy({checks:[],typeName:qt.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...un(n)});class KF extends En{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pt.boolean){const r=this._getOrReturnCtx(e);return nt(r,{code:He.invalid_type,expected:pt.boolean,received:r.parsedType}),$t}return ko(e.data)}}KF.create=n=>new KF({typeName:qt.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...un(n)});class x1 extends En{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pt.date){const s=this._getOrReturnCtx(e);return nt(s,{code:He.invalid_type,expected:pt.date,received:s.parsedType}),$t}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return nt(s,{code:He.invalid_date}),$t}const r=new so;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),nt(i,{code:He.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),nt(i,{code:He.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Cn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new x1({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:yt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:yt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}x1.create=n=>new x1({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:qt.ZodDate,...un(n)});class QF extends En{_parse(e){if(this._getType(e)!==pt.symbol){const r=this._getOrReturnCtx(e);return nt(r,{code:He.invalid_type,expected:pt.symbol,received:r.parsedType}),$t}return ko(e.data)}}QF.create=n=>new QF({typeName:qt.ZodSymbol,...un(n)});class ZF extends En{_parse(e){if(this._getType(e)!==pt.undefined){const r=this._getOrReturnCtx(e);return nt(r,{code:He.invalid_type,expected:pt.undefined,received:r.parsedType}),$t}return ko(e.data)}}ZF.create=n=>new ZF({typeName:qt.ZodUndefined,...un(n)});class JF extends En{_parse(e){if(this._getType(e)!==pt.null){const r=this._getOrReturnCtx(e);return nt(r,{code:He.invalid_type,expected:pt.null,received:r.parsedType}),$t}return ko(e.data)}}JF.create=n=>new JF({typeName:qt.ZodNull,...un(n)});class eU extends En{constructor(){super(...arguments),this._any=!0}_parse(e){return ko(e.data)}}eU.create=n=>new eU({typeName:qt.ZodAny,...un(n)});class tU extends En{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ko(e.data)}}tU.create=n=>new tU({typeName:qt.ZodUnknown,...un(n)});class bu extends En{_parse(e){const t=this._getOrReturnCtx(e);return nt(t,{code:He.invalid_type,expected:pt.never,received:t.parsedType}),$t}}bu.create=n=>new bu({typeName:qt.ZodNever,...un(n)});class nU extends En{_parse(e){if(this._getType(e)!==pt.undefined){const r=this._getOrReturnCtx(e);return nt(r,{code:He.invalid_type,expected:pt.void,received:r.parsedType}),$t}return ko(e.data)}}nU.create=n=>new nU({typeName:qt.ZodVoid,...un(n)});class Ha extends En{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==pt.array)return nt(t,{code:He.invalid_type,expected:pt.array,received:t.parsedType}),$t;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(nt(t,{code:o?He.too_big:He.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(nt(t,{code:He.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(nt(t,{code:He.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new Tu(t,o,t.path,a)))).then(o=>so.mergeArray(r,o));const s=[...t.data].map((o,a)=>i.type._parseSync(new Tu(t,o,t.path,a)));return so.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new Ha({...this._def,minLength:{value:e,message:yt.toString(t)}})}max(e,t){return new Ha({...this._def,maxLength:{value:e,message:yt.toString(t)}})}length(e,t){return new Ha({...this._def,exactLength:{value:e,message:yt.toString(t)}})}nonempty(e){return this.min(1,e)}}Ha.create=(n,e)=>new Ha({type:n,minLength:null,maxLength:null,exactLength:null,typeName:qt.ZodArray,...un(e)});function bf(n){if(n instanceof wr){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=au.create(bf(r))}return new wr({...n._def,shape:()=>e})}else return n instanceof Ha?new Ha({...n._def,type:bf(n.element)}):n instanceof au?au.create(bf(n.unwrap())):n instanceof Wp?Wp.create(bf(n.unwrap())):n instanceof id?id.create(n.items.map(e=>bf(e))):n}class wr extends En{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Cn.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==pt.object){const c=this._getOrReturnCtx(e);return nt(c,{code:He.invalid_type,expected:pt.object,received:c.parsedType}),$t}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof bu&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Tu(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof bu){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(nt(i,{code:He.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Tu(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,p=await u.value;c.push({key:f,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>so.mergeObjectSync(r,c)):so.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return yt.errToObj,new wr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:yt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new wr({...this._def,unknownKeys:"strip"})}passthrough(){return new wr({...this._def,unknownKeys:"passthrough"})}extend(e){return new wr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new wr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new wr({...this._def,catchall:e})}pick(e){const t={};for(const r of Cn.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new wr({...this._def,shape:()=>t})}omit(e){const t={};for(const r of Cn.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new wr({...this._def,shape:()=>t})}deepPartial(){return bf(this)}partial(e){const t={};for(const r of Cn.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}return new wr({...this._def,shape:()=>t})}required(e){const t={};for(const r of Cn.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof au;)s=s._def.innerType;t[r]=s}return new wr({...this._def,shape:()=>t})}keyof(){return Cj(Cn.objectKeys(this.shape))}}wr.create=(n,e)=>new wr({shape:()=>n,unknownKeys:"strip",catchall:bu.create(),typeName:qt.ZodObject,...un(e)});wr.strictCreate=(n,e)=>new wr({shape:()=>n,unknownKeys:"strict",catchall:bu.create(),typeName:qt.ZodObject,...un(e)});wr.lazycreate=(n,e)=>new wr({shape:n,unknownKeys:"strip",catchall:bu.create(),typeName:qt.ZodObject,...un(e)});class w1 extends En{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Wl(a.ctx.common.issues));return nt(t,{code:He.invalid_union,unionErrors:o}),$t}if(t.common.async)return Promise.all(r.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Wl(l));return nt(t,{code:He.invalid_union,unionErrors:a}),$t}}get options(){return this._def.options}}w1.create=(n,e)=>new w1({options:n,typeName:qt.ZodUnion,...un(e)});function ZC(n,e){const t=Ec(n),r=Ec(e);if(n===e)return{valid:!0,data:n};if(t===pt.object&&r===pt.object){const i=Cn.objectKeys(e),s=Cn.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of s){const l=ZC(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===pt.array&&r===pt.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],l=ZC(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===pt.date&&r===pt.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class E1 extends En{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(qF(s)||qF(o))return $t;const a=ZC(s.value,o.value);return a.valid?((XF(s)||XF(o))&&t.dirty(),{status:t.value,value:a.data}):(nt(r,{code:He.invalid_intersection_types}),$t)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}E1.create=(n,e,t)=>new E1({left:n,right:e,typeName:qt.ZodIntersection,...un(t)});class id extends En{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==pt.array)return nt(r,{code:He.invalid_type,expected:pt.array,received:r.parsedType}),$t;if(r.data.length<this._def.items.length)return nt(r,{code:He.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$t;!this._def.rest&&r.data.length>this._def.items.length&&(nt(r,{code:He.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Tu(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>so.mergeArray(t,o)):so.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new id({...this._def,rest:e})}}id.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new id({items:n,typeName:qt.ZodTuple,rest:null,...un(e)})};class rU extends En{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==pt.map)return nt(r,{code:He.invalid_type,expected:pt.map,received:r.parsedType}),$t;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new Tu(r,a,r.path,[c,"key"])),value:s._parse(new Tu(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return $t;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return $t;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}}}}rU.create=(n,e,t)=>new rU({valueType:e,keyType:n,typeName:qt.ZodMap,...un(t)});class vy extends En{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==pt.set)return nt(r,{code:He.invalid_type,expected:pt.set,received:r.parsedType}),$t;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(nt(r,{code:He.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(nt(r,{code:He.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return $t;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new Tu(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new vy({...this._def,minSize:{value:e,message:yt.toString(t)}})}max(e,t){return new vy({...this._def,maxSize:{value:e,message:yt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}vy.create=(n,e)=>new vy({valueType:n,minSize:null,maxSize:null,typeName:qt.ZodSet,...un(e)});class iU extends En{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}iU.create=(n,e)=>new iU({getter:n,typeName:qt.ZodLazy,...un(e)});class sU extends En{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return nt(t,{received:t.data,code:He.invalid_literal,expected:this._def.value}),$t}return{status:"valid",value:e.data}}get value(){return this._def.value}}sU.create=(n,e)=>new sU({value:n,typeName:qt.ZodLiteral,...un(e)});function Cj(n,e){return new jp({values:n,typeName:qt.ZodEnum,...un(e)})}class jp extends En{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return nt(t,{expected:Cn.joinValues(r),received:t.parsedType,code:He.invalid_type}),$t}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return nt(t,{received:t.data,code:He.invalid_enum_value,options:r}),$t}return ko(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return jp.create(e,{...this._def,...t})}exclude(e,t=this._def){return jp.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}jp.create=Cj;class oU extends En{_parse(e){const t=Cn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==pt.string&&r.parsedType!==pt.number){const i=Cn.objectValues(t);return nt(r,{expected:Cn.joinValues(i),received:r.parsedType,code:He.invalid_type}),$t}if(this._cache||(this._cache=new Set(Cn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Cn.objectValues(t);return nt(r,{received:r.data,code:He.invalid_enum_value,options:i}),$t}return ko(e.data)}get enum(){return this._def.values}}oU.create=(n,e)=>new oU({values:n,typeName:qt.ZodNativeEnum,...un(e)});class S1 extends En{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==pt.promise&&t.common.async===!1)return nt(t,{code:He.invalid_type,expected:pt.promise,received:t.parsedType}),$t;const r=t.parsedType===pt.promise?t.data:Promise.resolve(t.data);return ko(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}S1.create=(n,e)=>new S1({type:n,typeName:qt.ZodPromise,...un(e)});class Gp extends En{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{nt(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return $t;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?$t:l.status==="dirty"||t.value==="dirty"?Fg(l.value):l});{if(t.value==="aborted")return $t;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?$t:a.status==="dirty"||t.value==="dirty"?Fg(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?$t:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?$t:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Hp(o))return $t;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Hp(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):$t);Cn.assertNever(i)}}Gp.create=(n,e,t)=>new Gp({schema:n,typeName:qt.ZodEffects,effect:e,...un(t)});Gp.createWithPreprocess=(n,e,t)=>new Gp({schema:e,effect:{type:"preprocess",transform:n},typeName:qt.ZodEffects,...un(t)});class au extends En{_parse(e){return this._getType(e)===pt.undefined?ko(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}au.create=(n,e)=>new au({innerType:n,typeName:qt.ZodOptional,...un(e)});class Wp extends En{_parse(e){return this._getType(e)===pt.null?ko(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wp.create=(n,e)=>new Wp({innerType:n,typeName:qt.ZodNullable,...un(e)});class JC extends En{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===pt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}JC.create=(n,e)=>new JC({innerType:n,typeName:qt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...un(e)});class eR extends En{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _1(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Wl(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wl(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eR.create=(n,e)=>new eR({innerType:n,typeName:qt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...un(e)});class aU extends En{_parse(e){if(this._getType(e)!==pt.nan){const r=this._getOrReturnCtx(e);return nt(r,{code:He.invalid_type,expected:pt.nan,received:r.parsedType}),$t}return{status:"valid",value:e.data}}}aU.create=n=>new aU({typeName:qt.ZodNaN,...un(n)});class Jpe extends En{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class g2 extends En{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?$t:s.status==="dirty"?(t.dirty(),Fg(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?$t:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new g2({in:e,out:t,typeName:qt.ZodPipeline})}}class tR extends En{_parse(e){const t=this._def.innerType._parse(e),r=i=>(Hp(i)&&(i.value=Object.freeze(i.value)),i);return _1(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}tR.create=(n,e)=>new tR({innerType:n,typeName:qt.ZodReadonly,...un(e)});wr.lazycreate;var qt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(qt||(qt={}));const Jb=zc.create;bu.create;Ha.create;const eme=wr.create;wr.strictCreate;w1.create;E1.create;id.create;jp.create;S1.create;au.create;Wp.create;class n_{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const tme=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},yi={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:tme()},v2=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},nme=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=v2(n);yi.publicKey=t.publicKey,yi.blockHeadless=t.blockHeadless,yi.storageProvider=t.storageProvider,yi.blockList=t.blockList,yi.limitRate=t.limitRate,yi.origin=t.origin||e},Rj=async(n,e,t={})=>{const r=await fetch(yi.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),s=new n_(r.status,i);if(r.ok)return s;throw s},Ij=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},rme=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Pj=n=>n.webdriver||!n.languages||n.languages.length===0,Nj=()=>new n_(451,"Unavailable For Headless Browser"),ime=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},sme=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},ome=(n,e)=>n instanceof FormData?n.get(e):n[e],kj=(n,e)=>{if(sme(n))return!1;ime(n.list,n.watchVariable);const t=ome(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},Lj=()=>new n_(403,"Forbidden"),ame=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},lme=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},Dj=async(n,e,t)=>{if(!e.throttle||!t)return!1;ame(e.throttle,e.id);const r=e.id||n;return await lme(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},Oj=()=>new n_(429,"Too Many Requests"),cme=async(n,e,t,r)=>{const i=v2(r),s=i.publicKey||yi.publicKey,o=i.blockHeadless||yi.blockHeadless,a=i.storageProvider||yi.storageProvider,l={...yi.blockList,...i.blockList},c={...yi.limitRate,...i.limitRate};return o&&Pj(navigator)?Promise.reject(Nj()):(Ij(s,n,e),rme(t),t&&kj(l,t)?Promise.reject(Lj()):await Dj(location.pathname,c,a)?Promise.reject(Oj()):Rj("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},ume=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},hme=n=>typeof n=="string"?document.querySelector(n):n,dme=async(n,e,t,r)=>{const i=v2(r),s=i.publicKey||yi.publicKey,o=i.blockHeadless||yi.blockHeadless,a=yi.storageProvider||i.storageProvider,l={...yi.blockList,...i.blockList},c={...yi.limitRate,...i.limitRate};if(o&&Pj(navigator))return Promise.reject(Nj());const u=hme(t);Ij(s,n,e),ume(u);const f=new FormData(u);return kj(l,f)?Promise.reject(Lj()):await Dj(location.pathname,c,a)?Promise.reject(Oj()):(f.append("lib_version","4.4.1"),f.append("service_id",n),f.append("template_id",e),f.append("user_id",s),Rj("/api/v1.0/email/send-form",f))},Fj={init:nme,send:cme,sendForm:dme,EmailJSResponseStatus:n_},fme=eme({name:Jb().trim().min(1,{message:"Name is required"}).max(100,{message:"Name must be less than 100 characters"}),email:Jb().trim().email({message:"Invalid email address"}).max(255,{message:"Email must be less than 255 characters"}),message:Jb().trim().min(1,{message:"Message is required"}).max(1e3,{message:"Message must be less than 1000 characters"})}),pme=()=>{const[n,e]=H.useState({name:"",email:"",message:""}),[t,r]=H.useState({}),[i,s]=H.useState("idle"),o=l=>{const{name:c,value:u}=l.target;e(f=>({...f,[c]:u})),t[c]&&r(f=>({...f,[c]:void 0}))},a=async l=>{l.preventDefault();const c=fme.safeParse(n);if(!c.success){const u={};c.error.errors.forEach(f=>{f.path[0]&&(u[f.path[0]]=f.message)}),r(u);return}s("loading");try{const u=await t_(),f=bj(i2(u,"messages"),{name:n.name,email:n.email,message:n.message,createdAt:bpe()}),p=await qy(),m=new URL("/Apoorv_Mishra_CV.pdf",window.location.origin).toString();let v="";try{const _=await Promise.race([f,new Promise((g,E)=>setTimeout(()=>E(new Error("timeout")),15e3))]);_&&_.id&&(v=_.id)}catch{}if(p.emailjs)try{await Fj.send(p.emailjs.serviceId,p.emailjs.templateId,{to_email:n.email,to_name:n.name,cv_url:m,message_id:v||"N/A"})}catch(w){console.error("EmailJS send failed",w)}s("success"),e({name:"",email:"",message:""}),YA({title:"Message sent!",description:"Thank you for reaching out. I'll get back to you soon!"}),setTimeout(()=>s("idle"),3e3)}catch{s("error"),YA({title:"Failed to send",description:"Please try again or email me directly.",variant:"destructive"}),setTimeout(()=>s("idle"),3e3)}};return L.jsxs("form",{onSubmit:a,className:"space-y-6",children:[L.jsxs("div",{className:"space-y-2",children:[L.jsx("label",{htmlFor:"name",className:"block text-sm font-mono text-muted-foreground uppercase",children:"Name"}),L.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:o,placeholder:"Your name",className:`w-full px-4 py-3 bg-card border-2 ${t.name?"border-destructive":"border-border"} text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none transition-colors`}),t.name&&L.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[L.jsx(bT,{size:14}),t.name]})]}),L.jsxs("div",{className:"space-y-2",children:[L.jsx("label",{htmlFor:"email",className:"block text-sm font-mono text-muted-foreground uppercase",children:"Email"}),L.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:o,placeholder:"your@email.com",className:`w-full px-4 py-3 bg-card border-2 ${t.email?"border-destructive":"border-border"} text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none transition-colors`}),t.email&&L.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[L.jsx(bT,{size:14}),t.email]})]}),L.jsxs("div",{className:"space-y-2",children:[L.jsx("label",{htmlFor:"message",className:"block text-sm font-mono text-muted-foreground uppercase",children:"Message"}),L.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:o,placeholder:"Tell me about your project...",rows:5,className:`w-full px-4 py-3 bg-card border-2 ${t.message?"border-destructive":"border-border"} text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none transition-colors resize-none`}),t.message&&L.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[L.jsx(bT,{size:14}),t.message]}),L.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[n.message.length,"/1000"]})]}),L.jsx(Wi,{type:"submit",variant:"default",size:"lg",className:"w-full",disabled:i==="loading",children:i==="loading"?L.jsxs(L.Fragment,{children:[L.jsx(Rq,{className:"animate-spin",size:18}),"Sending..."]}):i==="success"?L.jsxs(L.Fragment,{children:[L.jsx(Mq,{size:18}),"Message Sent!"]}):L.jsxs(L.Fragment,{children:[L.jsx(Nq,{size:18}),"Send Message"]})})]})},mme=()=>L.jsxs("section",{id:"contact",className:"py-32 relative overflow-hidden",children:[L.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background via-muted/20 to-background"}),L.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1/2 bg-grid opacity-10"}),L.jsx("div",{className:"absolute bottom-0 left-1/4 w-96 h-96 bg-primary/10 blur-3xl"}),L.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-secondary/10 blur-3xl"}),L.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[L.jsxs("div",{className:"flex items-center gap-4 mb-16",children:[L.jsx("span",{className:"text-primary font-mono text-sm",children:"07"}),L.jsx("h2",{className:"text-4xl md:text-5xl font-bold",children:"Contact"}),L.jsx("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-primary/50 to-transparent"})]}),L.jsxs("div",{className:"grid lg:grid-cols-2 gap-16",children:[L.jsxs("div",{className:"space-y-8",children:[L.jsxs("div",{className:"space-y-4",children:[L.jsxs("h3",{className:"text-3xl md:text-4xl font-bold",children:["Let's Build Something"," ",L.jsx("span",{className:"text-gradient",children:"Extraordinary"})]}),L.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"I'm always open to discussing new projects, creative ideas, or opportunities to be part of your vision. Fill out the form and I'll get back to you within 24 hours."})]}),L.jsxs("div",{className:"space-y-4",children:[L.jsxs("a",{href:"mailto:mishraapoorv14@gmail.com",className:"group flex items-center gap-4 p-4 bg-card border-2 border-border hover:border-primary/50 transition-all hover-lift",children:[L.jsx("div",{className:"w-12 h-12 bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:L.jsx(Dz,{className:"text-primary",size:24})}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm font-mono text-muted-foreground uppercase",children:"Email"}),L.jsx("p",{className:"text-foreground font-medium",children:"mishraapoorv14@gmail.com"})]})]}),L.jsxs("a",{href:"tel:+919508103499",className:"group flex items-center gap-4 p-4 bg-card border-2 border-border hover:border-secondary/50 transition-all hover-lift",children:[L.jsx("div",{className:"w-12 h-12 bg-secondary/10 flex items-center justify-center group-hover:bg-secondary/20 transition-colors",children:L.jsx(Fz,{className:"text-secondary",size:24})}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm font-mono text-muted-foreground uppercase",children:"Phone"}),L.jsx("p",{className:"text-foreground font-medium",children:"+91-9508103499"})]})]}),L.jsxs("div",{className:"flex items-center gap-4 p-4 bg-card border-2 border-border",children:[L.jsx("div",{className:"w-12 h-12 bg-accent/10 flex items-center justify-center",children:L.jsx(Oz,{className:"text-accent",size:24})}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm font-mono text-muted-foreground uppercase",children:"Location"}),L.jsx("p",{className:"text-foreground font-medium",children:"India  Available Remote"})]})]})]}),L.jsxs("div",{className:"flex gap-4",children:[L.jsx("a",{href:"https://github.com/apoorvmishra14",target:"_blank",rel:"noopener noreferrer",className:"w-14 h-14 bg-card border-2 border-border hover:border-primary hover:bg-primary/10 flex items-center justify-center transition-all hover-lift",children:L.jsx(kz,{size:24,className:"text-muted-foreground hover:text-primary"})}),L.jsx("a",{href:"https://linkedin.com/in/ApoorvMishra1402",target:"_blank",rel:"noopener noreferrer",className:"w-14 h-14 bg-card border-2 border-border hover:border-secondary hover:bg-secondary/10 flex items-center justify-center transition-all hover-lift",children:L.jsx(Lz,{size:24,className:"text-muted-foreground hover:text-secondary"})})]})]}),L.jsxs("div",{className:"bg-card border-2 border-border p-6 md:p-8",children:[L.jsx("h4",{className:"text-xl font-bold mb-6",children:"Send a Message"}),L.jsx(pme,{})]})]})]})]}),gme=()=>{const n=new Date().getFullYear();return L.jsxs("footer",{className:"py-8 border-t-2 border-border relative overflow-hidden",children:[L.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary/5 to-transparent"}),L.jsx("div",{className:"container mx-auto px-6 relative z-10",children:L.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("span",{className:"text-2xl font-bold text-gradient",children:"AM"}),L.jsx("div",{className:"h-6 w-[2px] bg-primary"}),L.jsx("span",{className:"font-mono text-sm text-muted-foreground",children:"APOORV MISHRA"})]}),L.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[" ",n,"  Built with passion"]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"w-2 h-2 bg-primary animate-pulse"}),L.jsx("span",{className:"text-sm font-mono text-muted-foreground",children:"Available for new opportunities"})]})]})})]})},vme=()=>{const[n,e]=H.useState({x:0,y:0}),[t,r]=H.useState(!1),[i,s]=H.useState(!1),[o,a]=H.useState(!1);return H.useEffect(()=>{const l=m=>{e({x:m.clientX,y:m.clientY}),a(!0)},c=m=>{const v=m.target;v.tagName==="A"||v.tagName==="BUTTON"||v.closest("a")||v.closest("button")||v.classList.contains("cursor-pointer")?r(!0):r(!1)},u=()=>s(!0),f=()=>s(!1),p=()=>a(!1);return window.addEventListener("mousemove",l),window.addEventListener("mouseover",c),window.addEventListener("mousedown",u),window.addEventListener("mouseup",f),document.addEventListener("mouseleave",p),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseover",c),window.removeEventListener("mousedown",u),window.removeEventListener("mouseup",f),document.removeEventListener("mouseleave",p)}},[]),typeof window<"u"&&"ontouchstart"in window?null:L.jsxs(L.Fragment,{children:[L.jsx("div",{className:`fixed pointer-events-none z-[9999] transition-transform duration-100 ${o?"opacity-100":"opacity-0"}`,style:{left:n.x,top:n.y,transform:`translate(-50%, -50%) scale(${i?.8:1})`},children:L.jsx("div",{className:`w-3 h-3 bg-primary transition-all duration-200 ${t?"scale-0":"scale-100"}`,style:{clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)"}})}),L.jsx("div",{className:`fixed pointer-events-none z-[9998] transition-all duration-300 ease-out ${o?"opacity-100":"opacity-0"}`,style:{left:n.x,top:n.y,transform:`translate(-50%, -50%) scale(${t?1.5:1}) ${i?"scale(0.9)":""}`},children:L.jsx("div",{className:`w-10 h-10 border-2 transition-all duration-200 ${t?"border-secondary bg-secondary/10":"border-primary/50"}`,style:{clipPath:t?"circle(50%)":"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)"}})}),L.jsx("style",{children:`
        @media (hover: hover) {
          * {
            cursor: none !important;
          }
        }
      `})]})};function yme(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var Uj=H,_me=yme(Uj);function lU(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xme(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var wme=!!(typeof window<"u"&&window.document&&window.document.createElement);function Eme(n,e,t){if(typeof n!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=n(o.map(function(u){return u.props})),c.canUseDOM?e(a):t&&(a=t(a))}var c=function(u){xme(f,u);function f(){return u.apply(this,arguments)||this}f.peek=function(){return a},f.rewind=function(){if(f.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var v=a;return a=void 0,o=[],v};var p=f.prototype;return p.UNSAFE_componentWillMount=function(){o.push(this),l()},p.componentDidUpdate=function(){l()},p.componentWillUnmount=function(){var v=o.indexOf(this);o.splice(v,1),l()},p.render=function(){return _me.createElement(s,this.props)},f}(Uj.PureComponent);return lU(c,"displayName","SideEffect("+r(s)+")"),lU(c,"canUseDOM",wme),c}}var Sme=Eme;const Tme=od(Sme);var bme=typeof Element<"u",Ame=typeof Map=="function",Mme=typeof Set=="function",Cme=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function rw(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,r,i;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!rw(n[r],e[r]))return!1;return!0}var s;if(Ame&&n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(s=n.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=n.entries();!(r=s.next()).done;)if(!rw(r.value[1],e.get(r.value[0])))return!1;return!0}if(Mme&&n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(s=n.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Cme&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof e.valueOf=="function")return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof e.toString=="function")return n.toString()===e.toString();if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(bme&&n instanceof Element)return!1;for(r=t;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&n.$$typeof)&&!rw(n[i[r]],e[i[r]]))return!1;return!0}return n!==n&&e!==e}var Rme=function(e,t){try{return rw(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Ime=od(Rme);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var cU=Object.getOwnPropertySymbols,Pme=Object.prototype.hasOwnProperty,Nme=Object.prototype.propertyIsEnumerable;function kme(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function Lme(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Dme=Lme()?Object.assign:function(n,e){for(var t,r=kme(n),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)Pme.call(t,o)&&(r[o]=t[o]);if(cU){i=cU(t);for(var a=0;a<i.length;a++)Nme.call(t,i[a])&&(r[i[a]]=t[i[a]])}}return r};const Ome=od(Dme);var Hh={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Zt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Zt).map(function(n){return Zt[n]});var or={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},T1={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},yy={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Fme=Object.keys(T1).reduce(function(n,e){return n[T1[e]]=e,n},{}),Ume=[Zt.NOSCRIPT,Zt.SCRIPT,Zt.STYLE],na="data-react-helmet",Vme=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zme=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},Bme=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Es=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hme=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},uU=function(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},jme=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},nR=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Gme=function(e){var t=op(e,Zt.TITLE),r=op(e,yy.TITLE_TEMPLATE);if(r&&t)return r.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var i=op(e,yy.DEFAULT_TITLE);return t||i||void 0},Wme=function(e){return op(e,yy.ON_CHANGE_CLIENT_STATE)||function(){}},eA=function(e,t){return t.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,i){return Es({},r,i)},{})},$me=function(e,t){return t.filter(function(r){return typeof r[Zt.BASE]<"u"}).map(function(r){return r[Zt.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(e.indexOf(l)!==-1&&i[l])return r.concat(i)}return r},[])},gg=function(e,t,r){var i={};return r.filter(function(s){return Array.isArray(s[e])?!0:(typeof s[e]<"u"&&Kme("Helmet: "+e+' should be of type "Array". Instead found type "'+Vme(s[e])+'"'),!1)}).map(function(s){return s[e]}).reverse().reduce(function(s,o){var a={};o.filter(function(p){for(var m=void 0,v=Object.keys(p),w=0;w<v.length;w++){var _=v[w],g=_.toLowerCase();t.indexOf(g)!==-1&&!(m===or.REL&&p[m].toLowerCase()==="canonical")&&!(g===or.REL&&p[g].toLowerCase()==="stylesheet")&&(m=g),t.indexOf(_)!==-1&&(_===or.INNER_HTML||_===or.CSS_TEXT||_===or.ITEM_PROP)&&(m=_)}if(!m||!p[m])return!1;var E=p[m].toLowerCase();return i[m]||(i[m]={}),a[m]||(a[m]={}),i[m][E]?!1:(a[m][E]=!0,!0)}).reverse().forEach(function(p){return s.push(p)});for(var l=Object.keys(a),c=0;c<l.length;c++){var u=l[c],f=Ome({},i[u],a[u]);i[u]=f}return s},[]).reverse()},op=function(e,t){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.hasOwnProperty(t))return i[t]}return null},qme=function(e){return{baseTag:$me([or.HREF,or.TARGET],e),bodyAttributes:eA(Hh.BODY,e),defer:op(e,yy.DEFER),encode:op(e,yy.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:eA(Hh.HTML,e),linkTags:gg(Zt.LINK,[or.REL,or.HREF],e),metaTags:gg(Zt.META,[or.NAME,or.CHARSET,or.HTTPEQUIV,or.PROPERTY,or.ITEM_PROP],e),noscriptTags:gg(Zt.NOSCRIPT,[or.INNER_HTML],e),onChangeClientState:Wme(e),scriptTags:gg(Zt.SCRIPT,[or.SRC,or.INNER_HTML],e),styleTags:gg(Zt.STYLE,[or.CSS_TEXT],e),title:Gme(e),titleAttributes:eA(Hh.TITLE,e)}},rR=function(){var n=Date.now();return function(e){var t=Date.now();t-n>16?(n=t,e(t)):setTimeout(function(){rR(e)},0)}}(),hU=function(e){return clearTimeout(e)},Xme=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||rR:global.requestAnimationFrame||rR,Yme=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||hU:global.cancelAnimationFrame||hU,Kme=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},vg=null,Qme=function(e){vg&&Yme(vg),e.defer?vg=Xme(function(){dU(e,function(){vg=null})}):(dU(e),vg=null)},dU=function(e,t){var r=e.baseTag,i=e.bodyAttributes,s=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.onChangeClientState,u=e.scriptTags,f=e.styleTags,p=e.title,m=e.titleAttributes;iR(Zt.BODY,i),iR(Zt.HTML,s),Zme(p,m);var v={baseTag:vf(Zt.BASE,r),linkTags:vf(Zt.LINK,o),metaTags:vf(Zt.META,a),noscriptTags:vf(Zt.NOSCRIPT,l),scriptTags:vf(Zt.SCRIPT,u),styleTags:vf(Zt.STYLE,f)},w={},_={};Object.keys(v).forEach(function(g){var E=v[g],S=E.newTags,b=E.oldTags;S.length&&(w[g]=S),b.length&&(_[g]=v[g].oldTags)}),t&&t(),c(e,w,_)},Vj=function(e){return Array.isArray(e)?e.join(""):e},Zme=function(e,t){typeof e<"u"&&document.title!==e&&(document.title=Vj(e)),iR(Zt.TITLE,t)},iR=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var i=r.getAttribute(na),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(t),l=0;l<a.length;l++){var c=a[l],u=t[c]||"";r.getAttribute(c)!==u&&r.setAttribute(c,u),s.indexOf(c)===-1&&s.push(c);var f=o.indexOf(c);f!==-1&&o.splice(f,1)}for(var p=o.length-1;p>=0;p--)r.removeAttribute(o[p]);s.length===o.length?r.removeAttribute(na):r.getAttribute(na)!==a.join(",")&&r.setAttribute(na,a.join(","))}},vf=function(e,t){var r=document.head||document.querySelector(Zt.HEAD),i=r.querySelectorAll(e+"["+na+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return t&&t.length&&t.forEach(function(l){var c=document.createElement(e);for(var u in l)if(l.hasOwnProperty(u))if(u===or.INNER_HTML)c.innerHTML=l.innerHTML;else if(u===or.CSS_TEXT)c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{var f=typeof l[u]>"u"?"":l[u];c.setAttribute(u,f)}c.setAttribute(na,"true"),s.some(function(p,m){return a=m,c.isEqualNode(p)})?s.splice(a,1):o.push(c)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return r.appendChild(l)}),{oldTags:s,newTags:o}},zj=function(e){return Object.keys(e).reduce(function(t,r){var i=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return t?t+" "+i:i},"")},Jme=function(e,t,r,i){var s=zj(r),o=Vj(t);return s?"<"+e+" "+na+'="true" '+s+">"+nR(o,i)+"</"+e+">":"<"+e+" "+na+'="true">'+nR(o,i)+"</"+e+">"},ege=function(e,t,r){return t.reduce(function(i,s){var o=Object.keys(s).filter(function(c){return!(c===or.INNER_HTML||c===or.CSS_TEXT)}).reduce(function(c,u){var f=typeof s[u]>"u"?u:u+'="'+nR(s[u],r)+'"';return c?c+" "+f:f},""),a=s.innerHTML||s.cssText||"",l=Ume.indexOf(e)===-1;return i+"<"+e+" "+na+'="true" '+o+(l?"/>":">"+a+"</"+e+">")},"")},Bj=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[T1[i]||i]=e[i],r},t)},tge=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[Fme[i]||i]=e[i],r},t)},nge=function(e,t,r){var i,s=(i={key:t},i[na]=!0,i),o=Bj(r,s);return[Ve.createElement(Zt.TITLE,o,t)]},rge=function(e,t){return t.map(function(r,i){var s,o=(s={key:i},s[na]=!0,s);return Object.keys(r).forEach(function(a){var l=T1[a]||a;if(l===or.INNER_HTML||l===or.CSS_TEXT){var c=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:c}}else o[l]=r[a]}),Ve.createElement(e,o)})},fl=function(e,t,r){switch(e){case Zt.TITLE:return{toComponent:function(){return nge(e,t.title,t.titleAttributes)},toString:function(){return Jme(e,t.title,t.titleAttributes,r)}};case Hh.BODY:case Hh.HTML:return{toComponent:function(){return Bj(t)},toString:function(){return zj(t)}};default:return{toComponent:function(){return rge(e,t)},toString:function(){return ege(e,t,r)}}}},Hj=function(e){var t=e.baseTag,r=e.bodyAttributes,i=e.encode,s=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.scriptTags,u=e.styleTags,f=e.title,p=f===void 0?"":f,m=e.titleAttributes;return{base:fl(Zt.BASE,t,i),bodyAttributes:fl(Hh.BODY,r,i),htmlAttributes:fl(Hh.HTML,s,i),link:fl(Zt.LINK,o,i),meta:fl(Zt.META,a,i),noscript:fl(Zt.NOSCRIPT,l,i),script:fl(Zt.SCRIPT,c,i),style:fl(Zt.STYLE,u,i),title:fl(Zt.TITLE,{title:p,titleAttributes:m},i)}},ige=function(e){var t,r;return r=t=function(i){Hme(s,i);function s(){return zme(this,s),jme(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!Ime(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case Zt.SCRIPT:case Zt.NOSCRIPT:return{innerHTML:l};case Zt.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,c=a.child,u=a.arrayTypeChildren,f=a.newChildProps,p=a.nestedChildren;return Es({},u,(l={},l[c.type]=[].concat(u[c.type]||[],[Es({},f,this.mapNestedChildrenToProps(c,p))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,c,u=a.child,f=a.newProps,p=a.newChildProps,m=a.nestedChildren;switch(u.type){case Zt.TITLE:return Es({},f,(l={},l[u.type]=m,l.titleAttributes=Es({},p),l));case Zt.BODY:return Es({},f,{bodyAttributes:Es({},p)});case Zt.HTML:return Es({},f,{htmlAttributes:Es({},p)})}return Es({},f,(c={},c[u.type]=Es({},p),c))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var c=Es({},l);return Object.keys(a).forEach(function(u){var f;c=Es({},c,(f={},f[u]=a[u],f))}),c},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var c=this,u={};return Ve.Children.forEach(a,function(f){if(!(!f||!f.props)){var p=f.props,m=p.children,v=uU(p,["children"]),w=tge(v);switch(c.warnOnInvalidChildren(f,m),f.type){case Zt.LINK:case Zt.META:case Zt.NOSCRIPT:case Zt.SCRIPT:case Zt.STYLE:u=c.flattenArrayTypeChildren({child:f,arrayTypeChildren:u,newChildProps:w,nestedChildren:m});break;default:l=c.mapObjectTypeChildren({child:f,newProps:l,newChildProps:w,nestedChildren:m});break}}}),l=this.mapArrayTypeChildrenToProps(u,l),l},s.prototype.render=function(){var a=this.props,l=a.children,c=uU(a,["children"]),u=Es({},c);return l&&(u=this.mapChildrenToProps(l,u)),Ve.createElement(e,u)},Bme(s,null,[{key:"canUseDOM",set:function(a){e.canUseDOM=a}}]),s}(Ve.Component),t.propTypes={base:sr.object,bodyAttributes:sr.object,children:sr.oneOfType([sr.arrayOf(sr.node),sr.node]),defaultTitle:sr.string,defer:sr.bool,encodeSpecialCharacters:sr.bool,htmlAttributes:sr.object,link:sr.arrayOf(sr.object),meta:sr.arrayOf(sr.object),noscript:sr.arrayOf(sr.object),onChangeClientState:sr.func,script:sr.arrayOf(sr.object),style:sr.arrayOf(sr.object),title:sr.string,titleAttributes:sr.object,titleTemplate:sr.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var i=e.rewind();return i||(i=Hj({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},sge=function(){return null},oge=Tme(qme,Qme,Hj)(sge),sR=ige(oge);sR.renderStatic=sR.rewind;const age=()=>(H.useEffect(()=>{_ee("home")},[]),L.jsxs(L.Fragment,{children:[L.jsxs(sR,{children:[L.jsx("title",{children:"Apoorv Mishra | Full Stack Developer & Software Engineer"}),L.jsx("meta",{name:"description",content:"High-performance full-stack engineer specialized in microservices, optimized databases, and cross-platform development. Building scalable solutions with measurable impact."}),L.jsx("meta",{property:"og:title",content:"Apoorv Mishra | Full Stack Developer"}),L.jsx("meta",{property:"og:description",content:"High-performance full-stack engineer specialized in microservices, optimized databases, and cross-platform development."})]}),L.jsxs("div",{className:"min-h-screen bg-background text-foreground overflow-x-hidden",children:[L.jsx(vme,{}),L.jsx("div",{className:"fixed inset-0 pointer-events-none bg-noise z-50"}),L.jsx(xee,{}),L.jsxs("main",{children:[L.jsx(vce,{}),L.jsx(_ce,{}),L.jsx(wce,{}),L.jsx(Ece,{}),L.jsx(Mpe,{}),L.jsx(mme,{})]}),L.jsx(gme,{})]})]})),lge=()=>{const n=SI();return H.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),L.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:L.jsxs("div",{className:"text-center",children:[L.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),L.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),L.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},cge=()=>{const{id:n}=VQ(),[e,t]=H.useState(null),[r,i]=H.useState(!0);return H.useEffect(()=>{(async()=>{if(!n)return;const s=await t_(),o=await wpe(pj(s,"blogs",n));o.exists()&&t(o.data()),i(!1)})()},[n]),r?L.jsx("div",{className:"container mx-auto px-6 py-16",children:"Loading..."}):e?L.jsxs("div",{className:"container mx-auto px-6 py-16",children:[L.jsx("h1",{className:"text-4xl font-bold mb-4",children:e.title}),L.jsx("p",{className:"text-muted-foreground mb-8",children:e.excerpt}),L.jsx("div",{className:"prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:e.content}})]}):L.jsx("div",{className:"container mx-auto px-6 py-16",children:"Not found"})};function jj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uge=jj,Gj=new Xy("auth","Firebase",jj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new CP("@firebase/auth");function hge(n,...e){b1.logLevel<=pn.WARN&&b1.warn(`Auth (${lm}): ${n}`,...e)}function iw(n,...e){b1.logLevel<=pn.ERROR&&b1.error(`Auth (${lm}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(n,...e){throw y2(n,...e)}function ja(n,...e){return y2(n,...e)}function Wj(n,e,t){const r={...uge(),[e]:t};return new Xy("auth","Firebase",r).create(e,{appName:n.name})}function lu(n){return Wj(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y2(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Gj.create(n,...e)}function kt(n,e,...t){if(!n)throw y2(e,...t)}function Ml(n){const e="INTERNAL ASSERTION FAILED: "+n;throw iw(e),new Error(e)}function $l(n,e){n||Ml(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function dge(){return fU()==="http:"||fU()==="https:"}function fU(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fge(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dge()||Vce()||"connection"in navigator)?navigator.onLine:!0}function pge(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t){this.shortDelay=e,this.longDelay=t,$l(t>e,"Short delay should be less than long delay!"),this.isMobile=Oce()||zce()}get(){return fge()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(n,e){$l(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ml("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ml("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ml("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gge=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vge=new r_(3e4,6e4);function _d(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Lu(n,e,t,r,i={}){return qj(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Yy({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...s};return Uce()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&am(n.emulatorConfig.host)&&(c.credentials="include"),$j.fetch()(await Xj(n,n.config.apiHost,t,a),c)})}async function qj(n,e,t){n._canInitEmulator=!1;const r={...mge,...e};try{const i=new _ge(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Tx(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tx(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Tx(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Tx(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Wj(n,u,c);da(n,u)}}catch(i){if(i instanceof Kl)throw i;da(n,"network-request-failed",{message:String(i)})}}async function ZE(n,e,t,r,i={}){const s=await Lu(n,e,t,r,i);return"mfaPendingCredential"in s&&da(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function Xj(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?_2(n.config,i):`${n.config.apiScheme}://${i}`;return gge.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function yge(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _ge{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ja(this.auth,"network-request-failed")),vge.get())})}}function Tx(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ja(n,e,r);return i.customData._tokenResponse=t,i}function pU(n){return n!==void 0&&n.enterprise!==void 0}class xge{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yge(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wge(n,e){return Lu(n,"GET","/v2/recaptchaConfig",_d(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ege(n,e){return Lu(n,"POST","/v1/accounts:delete",e)}async function A1(n,e){return Lu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Sge(n,e=!1){const t=ds(n),r=await t.getIdToken(e),i=x2(r);kt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:av(tA(i.auth_time)),issuedAtTime:av(tA(i.iat)),expirationTime:av(tA(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tA(n){return Number(n)*1e3}function x2(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return iw("JWT malformed, contained fewer than 3 sections"),null;try{const i=O9(t);return i?JSON.parse(i):(iw("Failed to decode base64 JWT payload"),null)}catch(i){return iw("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function mU(n){const e=x2(n);return kt(e,"internal-error"),kt(typeof e.exp<"u","internal-error"),kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _y(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kl&&Tge(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Tge({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bge{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=av(this.lastLoginAt),this.creationTime=av(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(n){var f;const e=n.auth,t=await n.getIdToken(),r=await _y(n,A1(e,{idToken:t}));kt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?Yj(i.providerUserInfo):[],o=Mge(n.providerData,s),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new aR(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(n,u)}async function Age(n){const e=ds(n);await M1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mge(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Yj(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cge(n,e){const t=await qj(n,{},async()=>{const r=Yy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await Xj(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&am(n.emulatorConfig.host)&&(l.credentials="include"),$j.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Rge(n,e){return Lu(n,"POST","/v2/accounts:revokeToken",_d(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){kt(e.idToken,"internal-error"),kt(typeof e.idToken<"u","internal-error"),kt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){kt(e.length!==0,"internal-error");const t=mU(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Cge(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new ap;return r&&(kt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(kt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(kt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ap,this.toJSON())}_performRefresh(){return Ml("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n,e){kt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ra{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new bge(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new aR(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await _y(this,this.stsTokenManager.getToken(this.auth,e));return kt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Sge(this,e)}reload(){return Age(this)}_assign(e){this!==e&&(kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ra({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await M1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zo(this.auth.app))return Promise.reject(lu(this.auth));const e=await this.getIdToken();return await _y(this,Ege(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:v,stsTokenManager:w}=t;kt(f&&w,e,"internal-error");const _=ap.fromJSON(this.name,w);kt(typeof f=="string",e,"internal-error"),gc(r,e.name),gc(i,e.name),kt(typeof p=="boolean",e,"internal-error"),kt(typeof m=="boolean",e,"internal-error"),gc(s,e.name),gc(o,e.name),gc(a,e.name),gc(l,e.name),gc(c,e.name),gc(u,e.name);const g=new ra({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:_,createdAt:c,lastLoginAt:u});return v&&Array.isArray(v)&&(g.providerData=v.map(E=>({...E}))),l&&(g._redirectEventId=l),g}static async _fromIdTokenResponse(e,t,r=!1){const i=new ap;i.updateFromServerResponse(t);const s=new ra({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await M1(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];kt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Yj(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ap;a.updateFromIdToken(r);const l=new ra({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new aR(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=new Map;function Cl(n){$l(n instanceof Function,"Expected a class definition");let e=gU.get(n);return e?($l(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gU.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kj.type="NONE";const vU=Kj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(n,e,t){return`firebase:${n}:${e}:${t}`}class lp{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=sw(this.userKey,i.apiKey,s),this.fullPersistenceKey=sw("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await A1(this.auth,{idToken:e}).catch(()=>{});return t?ra._fromGetAccountInfoResponse(this.auth,t,e):null}return ra._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new lp(Cl(vU),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Cl(vU);const o=sw(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){let f;if(typeof u=="string"){const p=await A1(e,{idToken:u}).catch(()=>{});if(!p)break;f=await ra._fromGetAccountInfoResponse(e,p,u)}else f=ra._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new lp(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new lp(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nG(e))return"Blackberry";if(rG(e))return"Webos";if(Zj(e))return"Safari";if((e.includes("chrome/")||Jj(e))&&!e.includes("edge/"))return"Chrome";if(tG(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Qj(n=Xi()){return/firefox\//i.test(n)}function Zj(n=Xi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jj(n=Xi()){return/crios\//i.test(n)}function eG(n=Xi()){return/iemobile/i.test(n)}function tG(n=Xi()){return/android/i.test(n)}function nG(n=Xi()){return/blackberry/i.test(n)}function rG(n=Xi()){return/webos/i.test(n)}function w2(n=Xi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ige(n=Xi()){var e;return w2(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Pge(){return Bce()&&document.documentMode===10}function iG(n=Xi()){return w2(n)||tG(n)||rG(n)||nG(n)||/windows phone/i.test(n)||eG(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sG(n,e=[]){let t;switch(n){case"Browser":t=yU(Xi());break;case"Worker":t=`${yU(Xi())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${lm}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kge(n,e={}){return Lu(n,"GET","/v2/passwordPolicy",_d(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lge=6;class Dge{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Lge,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oge{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _U(this),this.idTokenSubscription=new _U(this),this.beforeStateQueue=new Nge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cl(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await lp.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await A1(this,{idToken:e}),r=await ra._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Zo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await M1(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pge()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zo(this.app))return Promise.reject(lu(this));const t=e?ds(e):null;return t&&kt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zo(this.app)?Promise.reject(lu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zo(this.app)?Promise.reject(lu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kge(this),t=new Dge(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xy("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Rge(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cl(e)||this._popupRedirectResolver;kt(t,this,"argument-error"),this.redirectPersistenceManager=await lp.create(this,[Cl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(kt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Zo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&hge(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function pm(n){return ds(n)}class _U{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yce(t=>this.observer=t)}get next(){return kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fge(n){JE=n}function oG(n){return JE.loadJS(n)}function Uge(){return JE.recaptchaEnterpriseScript}function Vge(){return JE.gapiScript}function zge(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Bge{constructor(){this.enterprise=new Hge}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Hge{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const jge="recaptcha-enterprise",aG="NO_RECAPTCHA";class Gge{constructor(e){this.type=jge,this.auth=pm(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{wge(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new xge(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;pU(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(aG)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Bge().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&pU(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Uge();l.length!==0&&(l+=a),oG(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function xU(n,e,t,r=!1,i=!1){const s=new Gge(n);let o;if(i)o=aG;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function wU(n,e,t,r,i){var s;if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await xU(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await xU(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wge(n,e){const t=IP(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ed(s,e??{}))return i;da(i,"already-initialized")}return t.initialize({options:e})}function $ge(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Cl);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qge(n,e,t){const r=pm(n);kt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=lG(e),{host:o,port:a}=Xge(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){kt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),kt(ed(c,r.config.emulator)&&ed(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,am(o)?(V9(`${s}//${o}${l}`),Dce("Auth",!0)):Yge()}function lG(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Xge(n){const e=lG(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:EU(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:EU(o)}}}function EU(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Yge(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ml("not implemented")}_getIdTokenResponse(e){return Ml("not implemented")}_linkToIdToken(e,t){return Ml("not implemented")}_getReauthenticationResolver(e){return Ml("not implemented")}}async function Kge(n,e){return Lu(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qge(n,e){return ZE(n,"POST","/v1/accounts:signInWithPassword",_d(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zge(n,e){return ZE(n,"POST","/v1/accounts:signInWithEmailLink",_d(n,e))}async function Jge(n,e){return ZE(n,"POST","/v1/accounts:signInWithEmailLink",_d(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy extends E2{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new xy(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new xy(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wU(e,t,"signInWithPassword",Qge);case"emailLink":return Zge(e,{email:this._email,oobCode:this._password});default:da(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wU(e,r,"signUpPassword",Kge);case"emailLink":return Jge(e,{idToken:t,email:this._email,oobCode:this._password});default:da(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cp(n,e){return ZE(n,"POST","/v1/accounts:signInWithIdp",_d(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eve="http://localhost";class sd extends E2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):da("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const o=new sd(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return cp(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,cp(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cp(e,t)}buildRequest(){const e={requestUri:eve,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yy(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tve(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nve(n){const e=Pg(Ng(n)).link,t=e?Pg(Ng(e)).deep_link_id:null,r=Pg(Ng(n)).deep_link_id;return(r?Pg(Ng(r)).link:null)||r||t||e||n}class S2{constructor(e){const t=Pg(Ng(e)),r=t.apiKey??null,i=t.oobCode??null,s=tve(t.mode??null);kt(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=nve(e);try{return new S2(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.providerId=mm.PROVIDER_ID}static credential(e,t){return xy._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=S2.parseLink(t);return kt(r,"argument-error"),xy._fromEmailAndCode(e,r.code,r.tenantId)}}mm.PROVIDER_ID="password";mm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_ extends cG{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends i_{constructor(){super("facebook.com")}static credential(e){return sd._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ac.credential(e.oauthAccessToken)}catch{return null}}}Ac.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ac.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends i_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sd._fromParams({providerId:Mc.PROVIDER_ID,signInMethod:Mc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Mc.credentialFromTaggedObject(e)}static credentialFromError(e){return Mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Mc.credential(t,r)}catch{return null}}}Mc.GOOGLE_SIGN_IN_METHOD="google.com";Mc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends i_{constructor(){super("github.com")}static credential(e){return sd._fromParams({providerId:Cc.PROVIDER_ID,signInMethod:Cc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cc.credentialFromTaggedObject(e)}static credentialFromError(e){return Cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cc.credential(e.oauthAccessToken)}catch{return null}}}Cc.GITHUB_SIGN_IN_METHOD="github.com";Cc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends i_{constructor(){super("twitter.com")}static credential(e,t){return sd._fromParams({providerId:Rc.PROVIDER_ID,signInMethod:Rc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rc.credentialFromTaggedObject(e)}static credentialFromError(e){return Rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Rc.credential(t,r)}catch{return null}}}Rc.TWITTER_SIGN_IN_METHOD="twitter.com";Rc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await ra._fromIdTokenResponse(e,r,i),o=SU(r);return new $p({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=SU(r);return new $p({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function SU(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1 extends Kl{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,C1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new C1(e,t,r,i)}}function uG(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?C1._fromErrorAndOperation(n,s,e,r):s})}async function rve(n,e,t=!1){const r=await _y(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return $p._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ive(n,e,t=!1){const{auth:r}=n;if(Zo(r.app))return Promise.reject(lu(r));const i="reauthenticate";try{const s=await _y(n,uG(r,i,e,n),t);kt(s.idToken,r,"internal-error");const o=x2(s.idToken);kt(o,r,"internal-error");const{sub:a}=o;return kt(n.uid===a,r,"user-mismatch"),$p._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&da(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hG(n,e,t=!1){if(Zo(n.app))return Promise.reject(lu(n));const r="signIn",i=await uG(n,r,e),s=await $p._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function sve(n,e){return hG(pm(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ove(n){const e=pm(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ave(n,e,t){return Zo(n.app)?Promise.reject(lu(n)):sve(ds(n),mm.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ove(n),r})}function lve(n,e,t,r){return ds(n).onIdTokenChanged(e,t,r)}function cve(n,e,t){return ds(n).beforeAuthStateChanged(e,t)}function uve(n,e,t,r){return ds(n).onAuthStateChanged(e,t,r)}function hve(n){return ds(n).signOut()}const R1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(R1,"1"),this.storage.removeItem(R1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dve=1e3,fve=10;class fG extends dG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iG(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Pge()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fve):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fG.type="LOCAL";const pve=fG;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG extends dG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pG.type="SESSION";const mG=pG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mve(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new eS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await mve(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gve{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=T2("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(){return window}function vve(n){Ga().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(){return typeof Ga().WorkerGlobalScope<"u"&&typeof Ga().importScripts=="function"}async function yve(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _ve(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function xve(){return gG()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG="firebaseLocalStorageDb",wve=1,I1="firebaseLocalStorage",yG="fbase_key";class s_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tS(n,e){return n.transaction([I1],e?"readwrite":"readonly").objectStore(I1)}function Eve(){const n=indexedDB.deleteDatabase(vG);return new s_(n).toPromise()}function lR(){const n=indexedDB.open(vG,wve);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(I1,{keyPath:yG})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(I1)?e(r):(r.close(),await Eve(),e(await lR()))})})}async function TU(n,e,t){const r=tS(n,!0).put({[yG]:e,value:t});return new s_(r).toPromise()}async function Sve(n,e){const t=tS(n,!1).get(e),r=await new s_(t).toPromise();return r===void 0?null:r.value}function bU(n,e){const t=tS(n,!0).delete(e);return new s_(t).toPromise()}const Tve=800,bve=3;class _G{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lR(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bve)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eS._getInstance(xve()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await yve(),!this.activeServiceWorker)return;this.sender=new gve(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_ve()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lR();return await TU(e,R1,"1"),await bU(e,R1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>TU(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Sve(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bU(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=tS(i,!1).getAll();return new s_(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_G.type="LOCAL";const Ave=_G;new r_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mve(n,e){return e?Cl(e):(kt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2 extends E2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Cve(n){return hG(n.auth,new b2(n),n.bypassAuthState)}function Rve(n){const{auth:e,user:t}=n;return kt(t,e,"internal-error"),ive(t,new b2(n),n.bypassAuthState)}async function Ive(n){const{auth:e,user:t}=n;return kt(t,e,"internal-error"),rve(t,new b2(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cve;case"linkViaPopup":case"linkViaRedirect":return Ive;case"reauthViaPopup":case"reauthViaRedirect":return Rve;default:da(this.auth,"internal-error")}}resolve(e){$l(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$l(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pve=new r_(2e3,1e4);class $f extends xG{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$f.currentPopupAction&&$f.currentPopupAction.cancel(),$f.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return kt(e,this.auth,"internal-error"),e}async onExecution(){$l(this.filter.length===1,"Popup operations only handle one event");const e=T2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ja(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ja(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$f.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ja(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Pve.get())};e()}}$f.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nve="pendingRedirect",ow=new Map;class kve extends xG{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ow.get(this.auth._key());if(!e){try{const r=await Lve(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ow.set(this.auth._key(),e)}return this.bypassAuthState||ow.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lve(n,e){const t=Fve(e),r=Ove(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Dve(n,e){ow.set(n._key(),e)}function Ove(n){return Cl(n._redirectPersistence)}function Fve(n){return sw(Nve,n.config.apiKey,n.name)}async function Uve(n,e,t=!1){if(Zo(n.app))return Promise.reject(lu(n));const r=pm(n),i=Mve(r,e),o=await new kve(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vve=10*60*1e3;class zve{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bve(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!wG(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(ja(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vve&&this.cachedEventUids.clear(),this.cachedEventUids.has(AU(e))}saveEventToCache(e){this.cachedEventUids.add(AU(e)),this.lastProcessedEventTime=Date.now()}}function AU(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wG({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Bve(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wG(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hve(n,e={}){return Lu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jve=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gve=/^https?/;async function Wve(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Hve(n);for(const t of e)try{if($ve(t))return}catch{}da(n,"unauthorized-domain")}function $ve(n){const e=oR(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Gve.test(t))return!1;if(jve.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qve=new r_(3e4,6e4);function MU(){const n=Ga().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Xve(n){return new Promise((e,t)=>{var i,s,o;function r(){MU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MU(),t(ja(n,"network-request-failed"))},timeout:qve.get()})}if((s=(i=Ga().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Ga().gapi)!=null&&o.load)r();else{const a=zge("iframefcb");return Ga()[a]=()=>{gapi.load?r():t(ja(n,"network-request-failed"))},oG(`${Vge()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw aw=null,e})}let aw=null;function Yve(n){return aw=aw||Xve(n),aw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kve=new r_(5e3,15e3),Qve="__/auth/iframe",Zve="emulator/auth/iframe",Jve={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eye=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tye(n){const e=n.config;kt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?_2(e,Zve):`https://${n.config.authDomain}/${Qve}`,r={apiKey:e.apiKey,appName:n.name,v:lm},i=eye.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Yy(r).slice(1)}`}async function nye(n){const e=await Yve(n),t=Ga().gapi;return kt(t,n,"internal-error"),e.open({where:document.body,url:tye(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jve,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ja(n,"network-request-failed"),a=Ga().setTimeout(()=>{s(o)},Kve.get());function l(){Ga().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rye={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iye=500,sye=600,oye="_blank",aye="http://localhost";class CU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lye(n,e,t,r=iye,i=sye){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...rye,width:r.toString(),height:i.toString(),top:s,left:o},c=Xi().toLowerCase();t&&(a=Jj(c)?oye:t),Qj(c)&&(e=e||aye,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,v])=>`${p}${m}=${v},`,"");if(Ige(c)&&a!=="_self")return cye(e||"",a),new CU(null);const f=window.open(e||"",a,u);kt(f,n,"popup-blocked");try{f.focus()}catch{}return new CU(f)}function cye(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uye="__/auth/handler",hye="emulator/auth/handler",dye=encodeURIComponent("fac");async function RU(n,e,t,r,i,s){kt(n.config.authDomain,n,"auth-domain-config-required"),kt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:lm,eventId:i};if(e instanceof cG){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Xce(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof i_){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${dye}=${encodeURIComponent(l)}`:"";return`${fye(n)}?${Yy(a).slice(1)}${c}`}function fye({config:n}){return n.emulator?_2(n,hye):`https://${n.authDomain}/${uye}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="webStorageSupport";class pye{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mG,this._completeRedirectFn=Uve,this._overrideRedirectResult=Dve}async _openPopup(e,t,r,i){var o;$l((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await RU(e,t,r,oR(),i);return lye(e,s,T2())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await RU(e,t,r,oR(),i);return vve(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):($l(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await nye(e),r=new zve(e);return t.register("authEvent",i=>(kt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nA,{type:nA},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[nA];s!==void 0&&t(!!s),da(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wve(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iG()||Zj()||w2()}}const mye=pye;var IU="@firebase/auth",PU="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gye{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vye(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yye(n){Op(new td("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;kt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sG(n)},c=new Oge(r,i,s,l);return $ge(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Op(new td("auth-internal",e=>{const t=pm(e.getProvider("auth").getImmediate());return(r=>new gye(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),iu(IU,PU,vye(n)),iu(IU,PU,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ye=5*60,xye=U9("authIdTokenMaxAge")||_ye;let NU=null;const wye=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>xye)return;const i=t==null?void 0:t.token;NU!==i&&(NU=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Eye(n=Kue()){const e=IP(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Wge(n,{popupRedirectResolver:mye,persistence:[Ave,pve,mG]}),r=U9("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=wye(s.toString());cve(t,o,()=>o(t.currentUser)),lve(t,a=>o(a))}}const i=Pce("auth");return i&&qge(t,`http://${i}`),t}function Sye(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Fge({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ja("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Sye().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yye("Browser");const EG=H.createContext(void 0);function Tye({children:n}){const[e,t]=H.useState(null),[r,i]=H.useState(null);H.useEffect(()=>{(async()=>{await t_();const a=await qy(),l=l1().length?l1()[0]:PP(a.firebase),c=Eye(l);i(c),uve(c,u=>{t(u?{uid:u.uid,email:u.email}:null)})})()},[]);const s=async(a,l)=>{if(!r)throw new Error("Auth not initialized");await ave(r,a,l)},o=async()=>{r&&await hve(r)};return L.jsx(EG.Provider,{value:{user:e,login:s,logout:o},children:n})}function bye(){const n=H.useContext(EG);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}const Aye=()=>{const{user:n,login:e,logout:t}=bye(),[r,i]=H.useState(""),[s,o]=H.useState(""),[a,l]=H.useState(""),[c,u]=H.useState(""),[f,p]=H.useState(""),[m,v]=H.useState(""),[w,_]=H.useState("");H.useEffect(()=>{w||_(new Date().toISOString().slice(0,10))},[w]);const g=async()=>{const E=await t_(),S=await bj(i2(E,"blogs"),{title:a,excerpt:c,content:f,tags:m.split(",").map(b=>b.trim()).filter(Boolean),date:w,readTime:"5 min read",color:"primary"});l(""),u(""),p(""),v(""),alert(`Blog created: ${S.id}`)};return n?L.jsxs("div",{className:"container mx-auto px-6 py-16",children:[L.jsxs("div",{className:"flex items-center justify-between mb-8",children:[L.jsx("h1",{className:"text-3xl font-bold",children:"Admin Panel"}),L.jsx(Wi,{variant:"outline",onClick:t,children:"Logout"})]}),L.jsxs("div",{className:"grid gap-4 max-w-2xl",children:[L.jsx("input",{className:"w-full px-3 py-2 border bg-card",placeholder:"Title",value:a,onChange:E=>l(E.target.value)}),L.jsx("input",{className:"w-full px-3 py-2 border bg-card",placeholder:"Excerpt",value:c,onChange:E=>u(E.target.value)}),L.jsx("textarea",{className:"w-full px-3 py-2 border bg-card h-40",placeholder:"Content (HTML allowed)",value:f,onChange:E=>p(E.target.value)}),L.jsx("input",{className:"w-full px-3 py-2 border bg-card",placeholder:"Tags (comma-separated)",value:m,onChange:E=>v(E.target.value)}),L.jsx("input",{className:"w-full px-3 py-2 border bg-card",placeholder:"Date (YYYY-MM-DD)",value:w,onChange:E=>_(E.target.value)}),L.jsx(Wi,{onClick:g,children:"Create Blog"})]})]}):L.jsxs("div",{className:"container mx-auto px-6 py-16 max-w-xl",children:[L.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Admin Login"}),L.jsxs("div",{className:"space-y-4",children:[L.jsx("input",{className:"w-full px-3 py-2 border bg-card",placeholder:"Email",value:r,onChange:E=>i(E.target.value)}),L.jsx("input",{className:"w-full px-3 py-2 border bg-card",placeholder:"Password",type:"password",value:s,onChange:E=>o(E.target.value)}),L.jsx(Wi,{onClick:()=>e(r,s),children:"Login"})]})]})},Mye=new oQ,Cye=()=>(H.useEffect(()=>{yee(),(async()=>{var n;try{const e=await qy();(n=e.emailjs)!=null&&n.publicKey&&Fj.init({publicKey:e.emailjs.publicKey})}catch{}})()},[]),L.jsx(lQ,{client:Mye,children:L.jsx(_X,{attribute:"class",defaultTheme:"dark",enableSystem:!0,children:L.jsxs(OK,{children:[L.jsx(gX,{}),L.jsx(QX,{}),L.jsx(Tye,{children:L.jsx(rZ,{basename:"/apoorv-mishra-design-explosion/",children:L.jsxs(eZ,{children:[L.jsx(Eg,{path:"/",element:L.jsx(age,{})}),L.jsx(Eg,{path:"/blog/:id",element:L.jsx(cge,{})}),L.jsx(Eg,{path:"/admin",element:L.jsx(Aye,{})}),L.jsx(Eg,{path:"*",element:L.jsx(lge,{})})]})})})]})})}));tz(document.getElementById("root")).render(L.jsx(Cye,{}));
